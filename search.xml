<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>给你的邮箱戴上面具</title>
      <link href="/posts/2e6f.html"/>
      <url>/posts/2e6f.html</url>
      
        <content type="html"><![CDATA[<h1 id="给你的邮箱戴上面具"><a href="#给你的邮箱戴上面具" class="headerlink" title="给你的邮箱戴上面具"></a>给你的邮箱戴上面具</h1><p><a href="https://sspai.com/post/70198#!">给你的邮箱戴上面具：匿名邮箱服务横评 - 少数派 (sspai.com)</a></p><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">graph</span> TD    <span class="token keyword">subgraph</span> 计算机硬件        CPU<span class="token text string">[CPU]</span>        内存<span class="token text string">[内存]</span>        硬盘<span class="token text string">[硬盘]</span>    <span class="token keyword">end</span>    <span class="token keyword">subgraph</span> Linux系统        SQLite3<span class="token text string">[SQLite3]</span>        GTK<span class="token text string">[GTK库 GTK2/GTK3]</span>    <span class="token keyword">end</span>    <span class="token keyword">subgraph</span> 智能美发系统应用        UI<span class="token text string">[用户界面]</span> <span class="token arrow operator">--></span> 操作模块<span class="token text string">[用户操作模块]</span>        操作模块 <span class="token arrow operator">--></span> 数据库操作<span class="token text string">[数据库操作]</span>    <span class="token keyword">end</span>    计算机硬件 <span class="token arrow operator">--></span> Linux系统    Linux系统 <span class="token arrow operator">--></span> 智能美发系统应用<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">flowchart</span> TD    Start<span class="token text string">([开始])</span>    <span class="token comment">%% 用户注册流程</span>    Start <span class="token arrow operator">--></span> A<span class="token text string">[用户选择注册]</span>    A <span class="token arrow operator">--></span> B<span class="token text string">[输入用户名和密码]</span>    B <span class="token arrow operator">--></span> C<span class="token text string">[系统检查用户名是否已存在]</span>    C <span class="token arrow operator">--></span><span class="token label property">|存在|</span> D<span class="token text string">[提示 "用户名已被占用"]</span>    C <span class="token arrow operator">--></span><span class="token label property">|不存在|</span> E<span class="token text string">[将用户信息写入数据库]</span>    E <span class="token arrow operator">--></span> F<span class="token text string">[提示 "注册成功"]</span>    D <span class="token arrow operator">--></span> A    F <span class="token arrow operator">--></span> G<span class="token text string">[返回主界面]</span>    <span class="token comment">%% 用户登录流程</span>    G <span class="token arrow operator">--></span> H<span class="token text string">[用户选择登录]</span>    H <span class="token arrow operator">--></span> I<span class="token text string">[输入用户名和密码]</span>    I <span class="token arrow operator">--></span> J<span class="token text string">[系统验证用户信息]</span>    J <span class="token arrow operator">--></span><span class="token label property">|验证成功|</span> K<span class="token text string">[提示 "登录成功"]</span>    J <span class="token arrow operator">--></span><span class="token label property">|验证失败|</span> L<span class="token text string">[提示 "用户名或密码错误"]</span>    K <span class="token arrow operator">--></span> M<span class="token text string">[进入预约界面]</span>    L <span class="token arrow operator">--></span> H    <span class="token comment">%% 预约流程</span>    M <span class="token arrow operator">--></span> N<span class="token text string">[选择理发师]</span>    N <span class="token arrow operator">--></span> O<span class="token text string">[输入预约时间]</span>    O <span class="token arrow operator">--></span> P<span class="token text string">[确认预约信息]</span>    P <span class="token arrow operator">--></span> Q<span class="token text string">[将预约信息写入数据库]</span>    Q <span class="token arrow operator">--></span> R<span class="token text string">[提示 "预约成功"]</span>    R <span class="token arrow operator">--></span> G    <span class="token comment">%% 结束</span>    G <span class="token arrow operator">--></span> End<span class="token text string">([结束])</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">graph</span> TD    Start<span class="token text string">[开始]</span> <span class="token arrow operator">--></span> Init<span class="token text string">[初始化界面]</span>    Init <span class="token arrow operator">--></span> Register<span class="token text string">[管理员注册]</span>    Register <span class="token arrow operator">--></span> <span class="token label property">|验证码错误|</span> VCodeError<span class="token text string">[显示验证码错误信息]</span>    Register <span class="token arrow operator">--></span> <span class="token label property">|验证码正确|</span> CheckUser<span class="token text string">[检查用户名是否已存在]</span>    CheckUser <span class="token arrow operator">--></span> <span class="token label property">|已存在|</span> Exists<span class="token text string">[提示已注册，请登录]</span>    CheckUser <span class="token arrow operator">--></span> <span class="token label property">|不存在|</span> InsertUser<span class="token text string">[插入新用户]</span>    InsertUser <span class="token arrow operator">--></span> <span class="token label property">|成功|</span> Success<span class="token text string">[提示注册成功]</span>    InsertUser <span class="token arrow operator">--></span> <span class="token label property">|失败|</span> Fail<span class="token text string">[提示注册失败]</span>    Start <span class="token arrow operator">--></span> Login<span class="token text string">[管理员登录]</span>    Login <span class="token arrow operator">--></span> <span class="token label property">|验证码错误|</span> L_VCodeError<span class="token text string">[显示验证码错误信息]</span>    Login <span class="token arrow operator">--></span> <span class="token label property">|验证码正确|</span> Authenticate<span class="token text string">[验证用户名和密码]</span>    Authenticate <span class="token arrow operator">--></span> <span class="token label property">|验证失败|</span> Invalid<span class="token text string">[提示用户名或密码错误]</span>    Authenticate <span class="token arrow operator">--></span> <span class="token label property">|验证成功|</span> SuccessLogin<span class="token text string">[显示登录成功]</span>    SuccessLogin <span class="token arrow operator">--></span> Main<span class="token text string">[主界面]</span>    Main <span class="token arrow operator">--></span> Refresh<span class="token text string">[刷新登录界面]</span>    Refresh <span class="token arrow operator">--></span> ClearFields<span class="token text string">[清空输入字段]</span>    Refresh <span class="token arrow operator">--></span> GenVCode<span class="token text string">[生成新验证码]</span>    GenVCode <span class="token arrow operator">--></span> ShowVCode<span class="token text string">[显示新验证码]</span>    Main <span class="token arrow operator">--></span> Query<span class="token text string">[查询用户信息]</span>    Query <span class="token arrow operator">--></span> ExecuteQuery<span class="token text string">[执行查询]</span>    ExecuteQuery <span class="token arrow operator">--></span> <span class="token label property">|查询失败|</span> QueryFail<span class="token text string">[提示查询失败]</span>    ExecuteQuery <span class="token arrow operator">--></span> <span class="token label property">|查询成功|</span> DisplayInfo<span class="token text string">[显示查询结果]</span>    Main <span class="token arrow operator">--></span> Update<span class="token text string">[修改用户信息]</span>    Update <span class="token arrow operator">--></span> ExecuteUpdate<span class="token text string">[执行修改]</span>    ExecuteUpdate <span class="token arrow operator">--></span> <span class="token label property">|修改失败|</span> UpdateFail<span class="token text string">[提示修改失败]</span>    ExecuteUpdate <span class="token arrow operator">--></span> <span class="token label property">|修改成功|</span> UpdateSuccess<span class="token text string">[提示修改成功]</span>    Main <span class="token arrow operator">--></span> Delete<span class="token text string">[删除用户]</span>    Delete <span class="token arrow operator">--></span> ExecuteDelete<span class="token text string">[执行删除]</span>    ExecuteDelete <span class="token arrow operator">--></span> <span class="token label property">|删除失败|</span> DeleteFail<span class="token text string">[提示删除失败]</span>    ExecuteDelete <span class="token arrow operator">--></span> <span class="token label property">|删除成功|</span> DeleteSuccess<span class="token text string">[提示删除成功]</span>    SuccessLogin <span class="token arrow operator">--></span> Exit<span class="token text string">[退出]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>图一</p><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">graph</span> LR    A<span class="token text string">[前端界面]</span> <span class="token arrow operator">--></span> B<span class="token text string">[后端处理模块]</span>    B <span class="token arrow operator">--></span> C<span class="token text string">[数据库]</span>    A <span class="token arrow operator">--></span><span class="token label property">|上传图像 &amp; 选择功能|</span> B    B <span class="token arrow operator">--></span><span class="token label property">|处理后的结果|</span> A    B <span class="token arrow operator">--></span><span class="token label property">|存储数据|</span> C    C <span class="token arrow operator">--></span><span class="token label property">|管理和分析|</span> B<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>图二</p><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">graph</span> LR    <span class="token comment">%% 前端界面部分</span>    A<span class="token text string">[前端界面]</span>    A1<span class="token text string">[图像上传]</span>    A2<span class="token text string">[功能选择: 修复或生成]</span>    A3<span class="token text string">[实时查看结果]</span>    A4<span class="token text string">[导出修复图像]</span>    <span class="token comment">%% 后端处理模块部分</span>    B<span class="token text string">[后端处理模块]</span>    B1<span class="token text string">[图像预处理]</span>    B2<span class="token text string">[深度学习模型处理]</span>    B3<span class="token text string">[图像后处理]</span>    <span class="token comment">%% 数据库部分</span>    C<span class="token text string">[数据库]</span>    C1<span class="token text string">[存储用户上传图像]</span>    C2<span class="token text string">[存储修复结果]</span>    C3<span class="token text string">[记录日志信息]</span>    <span class="token comment">%% 连线关系</span>    A <span class="token arrow operator">--></span> A1    A <span class="token arrow operator">--></span> A2    A <span class="token arrow operator">--></span> A3    A <span class="token arrow operator">--></span> A4    A1 <span class="token arrow operator">--></span><span class="token label property">|图像数据|</span> B1    A2 <span class="token arrow operator">--></span><span class="token label property">|功能选择|</span> B1    B1 <span class="token arrow operator">--></span><span class="token label property">|预处理数据|</span> B2    B2 <span class="token arrow operator">--></span><span class="token label property">|生成或修复结果|</span> B3    B3 <span class="token arrow operator">--></span><span class="token label property">|处理后的图像|</span> A3    A3 <span class="token arrow operator">--></span><span class="token label property">|导出数据|</span> A4    B3 <span class="token arrow operator">--></span><span class="token label property">|存储修复结果|</span> C2    A1 <span class="token arrow operator">--></span><span class="token label property">|存储上传数据|</span> C1    B <span class="token arrow operator">--></span><span class="token label property">|存储日志|</span> C3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>图三</p><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">graph</span> LR    <span class="token comment">%% 前端界面部分</span>    A<span class="token text string">[前端界面]</span> <span class="token arrow operator">--></span> A1<span class="token text string">[图像上传]</span>    A <span class="token arrow operator">--></span> A2<span class="token text string">[功能选择: 修复或生成]</span>    A <span class="token arrow operator">--></span> A3<span class="token text string">[实时查看结果]</span>    A <span class="token arrow operator">--></span> A4<span class="token text string">[导出修复图像]</span>    <span class="token comment">%% 后端处理模块部分</span>    B<span class="token text string">[后端处理模块]</span>    B <span class="token arrow operator">--></span> B1<span class="token text string">[图像预处理]</span>    B <span class="token arrow operator">--></span> B2<span class="token text string">[深度学习模型处理]</span>    B <span class="token arrow operator">--></span> B3<span class="token text string">[图像后处理]</span>    <span class="token comment">%% 数据库部分</span>    C<span class="token text string">[数据库]</span>    C <span class="token arrow operator">--></span> C1<span class="token text string">[存储用户上传图像]</span>    C <span class="token arrow operator">--></span> C2<span class="token text string">[存储修复结果]</span>    C <span class="token arrow operator">--></span> C3<span class="token text string">[记录日志信息]</span>    <span class="token comment">%% 连线关系</span>    A1 <span class="token arrow operator">--></span><span class="token label property">|图像数据|</span> B1    A2 <span class="token arrow operator">--></span><span class="token label property">|功能选择|</span> B1    B1 <span class="token arrow operator">--></span><span class="token label property">|预处理数据|</span> B2    B2 <span class="token arrow operator">--></span><span class="token label property">|生成或修复结果|</span> B3    B3 <span class="token arrow operator">--></span><span class="token label property">|处理后的图像|</span> A3    A3 <span class="token arrow operator">--></span><span class="token label property">|导出数据|</span> A4    A1 <span class="token arrow operator">--></span><span class="token label property">|存储上传数据|</span> C1    B3 <span class="token arrow operator">--></span><span class="token label property">|存储修复结果|</span> C2    B <span class="token arrow operator">--></span><span class="token label property">|存储日志信息|</span> C3    C1 <span class="token arrow operator">--></span><span class="token label property">|提供上传图像|</span> B1    C2 <span class="token arrow operator">--></span><span class="token label property">|提供修复数据|</span> A3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">graph</span> LR    <span class="token comment">%% 前端界面部分</span>    A<span class="token text string">[前端界面]</span> <span class="token arrow operator">--></span><span class="token label property">|上传图像 &amp; 选择功能|</span> B<span class="token text string">[后端处理模块]</span>    A <span class="token arrow operator">--></span><span class="token label property">|查看结果 &amp; 导出图像|</span> B    <span class="token comment">%% 后端处理模块部分</span>    B <span class="token arrow operator">--></span><span class="token label property">|存储数据|</span> C<span class="token text string">[数据库]</span>    B <span class="token arrow operator">--></span><span class="token label property">|处理结果|</span> A    <span class="token comment">%% 数据库部分</span>    C <span class="token arrow operator">--></span><span class="token label property">|提供存储数据|</span> B<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>功能模块图</p><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">graph</span> TD    <span class="token comment">%% 功能模块</span>    A<span class="token text string">[前端交互界面模块]</span>     B<span class="token text string">[图像预处理模块]</span>     C<span class="token text string">[深度学习图像生成与修复模块]</span>     D<span class="token text string">[图像后处理模块]</span>     E<span class="token text string">[数据库模块]</span>    <span class="token comment">%% 连接关系</span>    A <span class="token arrow operator">--></span><span class="token label property">|上传图像|</span> B    B <span class="token arrow operator">--></span><span class="token label property">|预处理后的图像|</span> C    C <span class="token arrow operator">--></span><span class="token label property">|生成或修复后的图像|</span> D    D <span class="token arrow operator">--></span><span class="token label property">|优化后的图像|</span> A    A <span class="token arrow operator">--></span><span class="token label property">|存储操作日志和图像|</span> E    E <span class="token arrow operator">--></span><span class="token label property">|图像查询和管理|</span> A<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>前端交互界面模块：前端交互界面模块采用基于Web的开发方式，使用HTML、CSS、JavaScript等前端技术框架（如Vue.js或React）构建，提供用户友好的操作界面。用户可通过网页上传图像、修复生成图像，查看生成结果并下载修复图像。</p><p>图像预处理模块：在进行深度学习处理前，图像需要进行预处理操作。预处理包括灰度化、尺寸归一化、去噪、图像增强等步骤，以确保输入图像格式统一，便于后续处理。该模块提高了处理效率并优化了深度学习模型的性能。</p><p>图像生成与修复模块：通过引入生成对抗网络（GANs）和卷积神经网络（CNNs）实现图像生成与修复。GANs通过生成器与判别器的对抗训练，生成逼真的图像或修复缺损区域；CNNs通过多层特征提取实现图像的精细处理。</p><p>图像后处理模块：用于对深度学习生成或修复的图像进行进一步的优化，包括去伪影、细节增强和色彩平衡等操作，以确保输出图像质量最佳，满足用户需求。</p><p>数据库模块：存储用户上传的原始图像、修复后的图像以及相关操作日志信息。采用MySQL作为数据库，实现对图像数据的高效存储与管理，支持按用户、时间等维度进行数据查询，便于系统数据的后续分析与追踪。</p><p>详细</p><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">graph</span> TD    <span class="token comment">%% 模块名称</span>    A<span class="token text string">[前端交互界面模块]</span>     B<span class="token text string">[图像预处理模块]</span>     C<span class="token text string">[深度学习图像生成与修复模块]</span>     D<span class="token text string">[图像后处理模块]</span>     E<span class="token text string">[数据库模块]</span>    <span class="token comment">%% 前端交互模块详细功能</span>    A1<span class="token text string">[上传图像]</span>    A2<span class="token text string">[选择功能: 图像修复/生成]</span>    A3<span class="token text string">[实时查看处理结果]</span>    A4<span class="token text string">[导出修复或生成后的图像]</span>    A5<span class="token text string">[操作日志记录与查询]</span>    <span class="token comment">%% 图像预处理模块详细功能</span>    B1<span class="token text string">[噪声去除]</span>    B2<span class="token text string">[图像格式转换]</span>    B3<span class="token text string">[图像特征提取]</span>    <span class="token comment">%% 深度学习模块详细功能</span>    C1<span class="token text string">[图像修复]</span>    C2<span class="token text string">[图像生成]</span>    <span class="token comment">%% 图像后处理模块详细功能</span>    D1<span class="token text string">[图像质量优化]</span>    D2<span class="token text string">[尺寸调整]</span>    D3<span class="token text string">[边缘修复]</span>    <span class="token comment">%% 数据库模块详细功能</span>    E1<span class="token text string">[存储用户上传图像]</span>    E2<span class="token text string">[存储修复或生成结果]</span>    E3<span class="token text string">[存储操作日志]</span>    <span class="token comment">%% 连接关系</span>    A <span class="token arrow operator">--></span><span class="token label property">|上传图像|</span> A1 <span class="token arrow operator">--></span> B    A <span class="token arrow operator">--></span><span class="token label property">|选择功能|</span> A2 <span class="token arrow operator">--></span> C    B <span class="token arrow operator">--></span><span class="token label property">|预处理后的图像|</span> B1 <span class="token arrow operator">--></span> C    B <span class="token arrow operator">--></span><span class="token label property">|特征提取数据|</span> B3 <span class="token arrow operator">--></span> C    C <span class="token arrow operator">--></span><span class="token label property">|生成或修复结果|</span> C1 <span class="token arrow operator">--></span> D    C <span class="token arrow operator">--></span><span class="token label property">|生成或修复结果|</span> C2 <span class="token arrow operator">--></span> D    D <span class="token arrow operator">--></span><span class="token label property">|优化后的图像|</span> D1 <span class="token arrow operator">--></span> A3    D <span class="token arrow operator">--></span><span class="token label property">|优化后的图像|</span> D2 <span class="token arrow operator">--></span> A3    A3 <span class="token arrow operator">--></span><span class="token label property">|导出图像|</span> A4    A <span class="token arrow operator">--></span><span class="token label property">|记录操作日志|</span> A5 <span class="token arrow operator">--></span> E3    A1 <span class="token arrow operator">--></span><span class="token label property">|存储上传图像|</span> E1    C <span class="token arrow operator">--></span><span class="token label property">|存储生成或修复结果|</span> E2    E <span class="token arrow operator">--></span><span class="token label property">|图像查询与管理|</span> A<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">graph</span> TD    <span class="token comment">%% 系统模块</span>    A<span class="token text string">[系统模块]</span>    <span class="token comment">%% 一级模块</span>    A <span class="token arrow operator">--></span> B1<span class="token text string">[用户功能模块]</span>    A <span class="token arrow operator">--></span> B2<span class="token text string">[管理员功能模块]</span>    A <span class="token arrow operator">--></span> B3<span class="token text string">[前端模块]</span>    A <span class="token arrow operator">--></span> B4<span class="token text string">[后端模块]</span>    <span class="token comment">%% 用户功能模块</span>    B1 <span class="token arrow operator">--></span> C1<span class="token text string">[注册与登录]</span>    B1 <span class="token arrow operator">--></span> C2<span class="token text string">[账户信息管理]</span>    B1 <span class="token arrow operator">--></span> C3<span class="token text string">[图像上传]</span>    B1 <span class="token arrow operator">--></span> C4<span class="token text string">[图像修复]</span>    B1 <span class="token arrow operator">--></span> C5<span class="token text string">[修复结果下载]</span>    B1 <span class="token arrow operator">--></span> C6<span class="token text string">[历史记录查看]</span>    <span class="token comment">%% 管理员功能模块</span>    B2 <span class="token arrow operator">--></span> D1<span class="token text string">[用户管理]</span>    D1 <span class="token arrow operator">--></span> E1<span class="token text string">[查看用户列表]</span>    D1 <span class="token arrow operator">--></span> E2<span class="token text string">[删除用户]</span>    D1 <span class="token arrow operator">--></span> E3<span class="token text string">[用户操作日志查看]</span>    B2 <span class="token arrow operator">--></span> D2<span class="token text string">[系统监控]</span>    D2 <span class="token arrow operator">--></span> E4<span class="token text string">[任务状态监控]</span>    D2 <span class="token arrow operator">--></span> E5<span class="token text string">[模型运行状态监控]</span>    D2 <span class="token arrow operator">--></span> E6<span class="token text string">[存储状态监控]</span>    B2 <span class="token arrow operator">--></span> D3<span class="token text string">[数据管理]</span>    D3 <span class="token arrow operator">--></span> E7<span class="token text string">[日志管理]</span>    D3 <span class="token arrow operator">--></span> E8<span class="token text string">[数据库管理]</span>    <span class="token comment">%% 前端模块</span>    B3 <span class="token arrow operator">--></span> F1<span class="token text string">[用户界面]</span>    F1 <span class="token arrow operator">--></span> G1<span class="token text string">[注册/登录页面]</span>    F1 <span class="token arrow operator">--></span> G2<span class="token text string">[图像上传及修复页面]</span>    F1 <span class="token arrow operator">--></span> G3<span class="token text string">[历史记录页面]</span>    B3 <span class="token arrow operator">--></span> F2<span class="token text string">[管理员界面]</span>    F2 <span class="token arrow operator">--></span> G4<span class="token text string">[用户管理页面]</span>    F2 <span class="token arrow operator">--></span> G5<span class="token text string">[系统监控页面]</span>    <span class="token comment">%% 后端模块</span>    B4 <span class="token arrow operator">--></span> H1<span class="token text string">[深度学习处理]</span>    B4 <span class="token arrow operator">--></span> H2<span class="token text string">[Web服务]</span>    B4 <span class="token arrow operator">--></span> H3<span class="token text string">[文件管理]</span>    B4 <span class="token arrow operator">--></span> H4<span class="token text string">[数据库管理]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>历史记录功能：（仅存储最近 5 条记录）</p></li><li><p>查看用户操作日志功能：</p></li><li><p>系统监控功能：</p></li><li><p>按照以下要求重新画图：</p><p>用户功能模块分为：用户信息管理模块（用户信息管理模块又分为用户注册、用户登录、退出登录、查看信息、修改信息），图像操作模块（又分为：图像上传、图像修复、修复结果下载、历史记录查看）</p><p>管理员功能模块：用户管理模块（查看用户信息、删除用户、日志查看），系统监控模块（）</p><p>前端界面模块：<br>用户界面：注册&#x2F;登录页面，图像处理页面，历史记录页面。<br>管理员界面：用户管理页面，系统监控页面。</p><p>后端模块</p><ul><li>深度学习处理：<ul><li>调用 PyTorch 或 TensorFlow 实现图像修复算法。</li><li>支持对图像进行预处理（如格式转换、去噪）。</li></ul></li><li>Web服务：<ul><li>提供 RESTful API 接口，处理前端请求。</li><li>使用 Flask 或 Django 搭建后端服务。</li></ul></li></ul><p><strong>数据库设计</strong>：</p><ul><li>用户信息表：存储用户账号、密码、邮箱等信息。</li><li>图像记录表：存储用户上传图像路径、修复结果路径及相关时间戳。</li><li>日志记录表：存储用户操作日志和系统异常信息。</li></ul><p><strong>数据库管理</strong>：</p><ul><li>采用 MySQL 数据库，支持按用户和时间维度查询数据。</li><li>提供高效的存储和检索机制。</li></ul></li></ul><p>深度学习模型的调优与迁移学习，以适应不同图像修复与生成需求。</p><p>不仅满足常规图像修复需求，还可扩展至艺术创作和医学图像处理等领域</p><p>此外，该系统还可以支持批量图像处理，进一步提升修复效率，为大规模图像修复项目提供技术支持。</p><p>按照以下要求重新画图：</p><p>前端界面模块：用户界面：注册&#x2F;登录页面，图像处理页面，历史记录页面。管理员界面：用户管理页面，系统监控页面。</p><p>后端模块分为：</p><p>①用户功能模块分为：用户信息管理模块（用户信息管理模块又分为用户注册、用户登录、退出登录、查看信息、修改信息），图像操作模块（又分为：图像上传、图像修复、修复结果下载、历史记录查看）</p><p>②管理员功能模块：用户管理模块（查看用户信息、删除用户、日志查看），系统监控模块</p><p>③图像处理模块（图像预处理、图像修复），管理系统（用户系统、管理员系统）</p><p>数据库模块：</p><ul><li>用户信息表：存储用户账号、密码、邮箱等信息。</li><li>图像记录表：存储用户上传图像路径、修复结果路径及相关时间戳。</li><li>日志记录表：存储用户操作日志和系统异常信息。</li></ul><p>按照以下要求重新画出树型的模块图：<br>前端界面模块：用户界面、管理员界面。<br>后端模块分为：<br>①用户功能模块分为：用户信息模块，图像操作模块<br>②管理员功能模块：用户管理模块<br>③图像处理模块（图像预处理、图像修复、图像后处理）<br>数据库模块：用户信息、管理员信息、图像记录、日志记录</p><p>前端界面模块：</p><p>用户界面：注册&#x2F;登录页面，图像处理页面，历史记录页面，个人中心页面。</p><p>管理员界面：登录页面、数据统计页面、用户管理页面，操作日志页面</p><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">graph</span> TD    A<span class="token text string">[前端界面模块]</span> <span class="token arrow operator">--></span> B<span class="token text string">[用户界面]</span>    A <span class="token arrow operator">--></span> C<span class="token text string">[管理员界面]</span>    <span class="token comment">%% 用户界面子模块</span>    B <span class="token arrow operator">--></span> B1<span class="token text string">[注册/登录页面]</span>    B <span class="token arrow operator">--></span> B2<span class="token text string">[图像处理页面]</span>    B <span class="token arrow operator">--></span> B3<span class="token text string">[历史记录页面]</span>    B <span class="token arrow operator">--></span> B4<span class="token text string">[个人中心页面]</span>    <span class="token comment">%% 管理员界面子模块</span>    C <span class="token arrow operator">--></span> C1<span class="token text string">[登录页面]</span>    C <span class="token arrow operator">--></span> C2<span class="token text string">[数据统计页面]</span>    C <span class="token arrow operator">--></span> C3<span class="token text string">[用户管理页面]</span>    C <span class="token arrow operator">--></span> C4<span class="token text string">[操作日志页面]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>后端模块分为：<br>①用户功能模块分为：用户信息模块（又分为用户注册、用户登录、退出登录、查看信息、修改信息），图像操作模块（又分为：图像上传、图像修复、修复结果下载、历史记录查看）<br>②管理员功能模块：查看用户信息、删除用户、日志查看<br>③图像处理模块：图像预处理、图像修复、图像后处理</p><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">graph</span> TD    A<span class="token text string">[后端模块]</span> <span class="token arrow operator">--></span> B<span class="token text string">[用户功能模块]</span>    A <span class="token arrow operator">--></span> C<span class="token text string">[管理员功能模块]</span>    A <span class="token arrow operator">--></span> D<span class="token text string">[图像处理模块]</span>    <span class="token comment">%% 用户功能模块子模块</span>    B <span class="token arrow operator">--></span> B1<span class="token text string">[用户信息模块]</span>    B <span class="token arrow operator">--></span> B2<span class="token text string">[图像操作模块]</span>    <span class="token comment">%% 用户信息模块子功能</span>    B1 <span class="token arrow operator">--></span> B1a<span class="token text string">[用户注册]</span>    B1 <span class="token arrow operator">--></span> B1b<span class="token text string">[用户登录]</span>    B1 <span class="token arrow operator">--></span> B1c<span class="token text string">[退出登录]</span>    B1 <span class="token arrow operator">--></span> B1d<span class="token text string">[查看信息]</span>    B1 <span class="token arrow operator">--></span> B1e<span class="token text string">[修改信息]</span>    <span class="token comment">%% 图像操作模块子功能</span>    B2 <span class="token arrow operator">--></span> B2a<span class="token text string">[图像上传]</span>    B2 <span class="token arrow operator">--></span> B2b<span class="token text string">[图像修复]</span>    B2 <span class="token arrow operator">--></span> B2c<span class="token text string">[修复结果下载]</span>    B2 <span class="token arrow operator">--></span> B2d<span class="token text string">[历史记录查看]</span>    <span class="token comment">%% 管理员功能模块子功能</span>    C <span class="token arrow operator">--></span> C1<span class="token text string">[查看用户信息]</span>    C <span class="token arrow operator">--></span> C2<span class="token text string">[删除用户]</span>    C <span class="token arrow operator">--></span> C3<span class="token text string">[日志查看]</span>    <span class="token comment">%% 图像处理模块子功能</span>    D <span class="token arrow operator">--></span> D1<span class="token text string">[图像预处理]</span>    D <span class="token arrow operator">--></span> D2<span class="token text string">[图像修复]</span>    D <span class="token arrow operator">--></span> D3<span class="token text string">[图像后处理]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>数据库模块：</p><p>用户信息表、管理员信息表、图像记录表、日志记录表</p><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">graph</span> TD    A<span class="token text string">[数据库模块]</span>    A <span class="token arrow operator">--></span> B<span class="token text string">[用户信息表]</span>    A <span class="token arrow operator">--></span> C<span class="token text string">[管理员信息表]</span>    A <span class="token arrow operator">--></span> D<span class="token text string">[图像记录表]</span>    A <span class="token arrow operator">--></span> E<span class="token text string">[日志记录表]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">graph</span> TD    <span class="token comment">%% 根节点</span>    A<span class="token text string">[系统模块]</span>    <span class="token comment">%% 一级模块</span>    A <span class="token arrow operator">--></span> A1<span class="token text string">[前端界面模块]</span>    A <span class="token arrow operator">--></span> A2<span class="token text string">[后端模块]</span>    A <span class="token arrow operator">--></span> A3<span class="token text string">[数据库模块]</span>    <span class="token comment">%% 前端界面模块</span>    A1 <span class="token arrow operator">--></span> A1_1<span class="token text string">[用户界面]</span>    A1 <span class="token arrow operator">--></span> A1_2<span class="token text string">[管理员界面]</span>    <span class="token comment">%% 后端模块</span>    A2 <span class="token arrow operator">--></span> A2_1<span class="token text string">[用户功能模块]</span>    A2 <span class="token arrow operator">--></span> A2_2<span class="token text string">[管理员功能模块]</span>    A2 <span class="token arrow operator">--></span> A2_3<span class="token text string">[图像处理模块]</span>    <span class="token comment">%% 用户功能模块</span>    A2_1 <span class="token arrow operator">--></span> A2_1_1<span class="token text string">[用户信息模块]</span>    A2_1 <span class="token arrow operator">--></span> A2_1_2<span class="token text string">[图像操作模块]</span>    <span class="token comment">%% 管理员功能模块</span>    A2_2 <span class="token arrow operator">--></span> A2_2_1<span class="token text string">[用户管理模块]</span>    <span class="token comment">%% 图像处理模块</span>    A2_3 <span class="token arrow operator">--></span> A2_3_1<span class="token text string">[图像预处理]</span>    A2_3 <span class="token arrow operator">--></span> A2_3_2<span class="token text string">[图像修复]</span>    A2_3 <span class="token arrow operator">--></span> A2_3_3<span class="token text string">[图像后处理]</span>    <span class="token comment">%% 数据库模块</span>    A3 <span class="token arrow operator">--></span> A3_1<span class="token text string">[用户信息]</span>    A3 <span class="token arrow operator">--></span> A3_2<span class="token text string">[管理员信息]</span>    A3 <span class="token arrow operator">--></span> A3_3<span class="token text string">[图像记录]</span>    A3 <span class="token arrow operator">--></span> A3_4<span class="token text string">[日志记录]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>以下是基于上述模块图，各模块的具体功能描述：</p><hr><h3 id="1-前端界面模块"><a href="#1-前端界面模块" class="headerlink" title="1. 前端界面模块"></a><strong>1. 前端界面模块</strong></h3><h4 id="1-1-用户界面"><a href="#1-1-用户界面" class="headerlink" title="1.1 用户界面"></a><strong>1.1 用户界面</strong></h4><ul><li>提供用户注册和登录功能。</li><li>实现图像上传、修复操作的交互界面。</li><li>显示图像修复的实时结果，支持用户查看最近的历史图像修复记录。</li><li>提供用户个人信息的查看与编辑功能。</li></ul><h4 id="1-2-管理员界面"><a href="#1-2-管理员界面" class="headerlink" title="1.2 管理员界面"></a><strong>1.2 管理员界面</strong></h4><ul><li>提供管理员登录功能，确保系统的安全性。</li><li>实现用户信息的查询、添加、删除和修改功能。</li><li>提供系统运行状态和日志数据的监控页面。</li><li>支持管理员查看和管理图像修复记录与操作日志。</li></ul><hr><h3 id="2-后端模块"><a href="#2-后端模块" class="headerlink" title="2. 后端模块"></a><strong>2. 后端模块</strong></h3><h4 id="2-1-用户功能模块"><a href="#2-1-用户功能模块" class="headerlink" title="2.1 用户功能模块"></a><strong>2.1 用户功能模块</strong></h4><h5 id="2-1-1-用户信息模块"><a href="#2-1-1-用户信息模块" class="headerlink" title="2.1.1 用户信息模块"></a><strong>2.1.1 用户信息模块</strong></h5><ul><li>实现用户注册、登录和身份验证功能。</li><li>管理用户的个人信息（如用户名、邮箱、密码等）。</li></ul><h5 id="2-1-2-图像操作模块"><a href="#2-1-2-图像操作模块" class="headerlink" title="2.1.2 图像操作模块"></a><strong>2.1.2 图像操作模块</strong></h5><ul><li>接收用户上传的图像并验证其合法性。</li><li>提供图像修复的相关接口。</li><li>支持用户删除或下载修复后的图像。</li></ul><h4 id="2-2-管理员功能模块"><a href="#2-2-管理员功能模块" class="headerlink" title="2.2 管理员功能模块"></a><strong>2.2 管理员功能模块</strong></h4><h5 id="2-2-1-用户管理模块"><a href="#2-2-1-用户管理模块" class="headerlink" title="2.2.1 用户管理模块"></a><strong>2.2.1 用户管理模块</strong></h5><ul><li>实现对用户账户的管理，包括创建、删除、禁用和启用。</li><li>支持按用户名、注册时间等条件查询用户信息。</li><li>提供对用户操作权限的控制。</li></ul><h4 id="2-3-图像处理模块"><a href="#2-3-图像处理模块" class="headerlink" title="2.3 图像处理模块"></a><strong>2.3 图像处理模块</strong></h4><h5 id="2-3-1-图像预处理"><a href="#2-3-1-图像预处理" class="headerlink" title="2.3.1 图像预处理"></a><strong>2.3.1 图像预处理</strong></h5><ul><li>对用户上传的图像进行格式验证和必要的标准化处理。</li><li>提供图像去噪、调整大小和修复区域定位等功能。</li></ul><h5 id="2-3-2-图像修复"><a href="#2-3-2-图像修复" class="headerlink" title="2.3.2 图像修复"></a><strong>2.3.2 图像修复</strong></h5><ul><li>调用深度学习模型进行图像的缺失部分填充与修复。</li><li>实现对破损图像的高精度还原和质量优化。</li></ul><h5 id="2-3-3-图像后处理"><a href="#2-3-3-图像后处理" class="headerlink" title="2.3.3 图像后处理"></a><strong>2.3.3 图像后处理</strong></h5><ul><li>对修复完成的图像进行细节增强，如锐化和色彩调整。</li><li>输出修复结果并将其保存到数据库中。</li></ul><hr><h3 id="3-数据库模块"><a href="#3-数据库模块" class="headerlink" title="3. 数据库模块"></a><strong>3. 数据库模块</strong></h3><h4 id="3-1-用户信息"><a href="#3-1-用户信息" class="headerlink" title="3.1 用户信息"></a><strong>3.1 用户信息</strong></h4><ul><li>存储用户注册的基本信息，包括用户名、密码（加密存储）、邮箱等。</li><li>支持对用户信息的高效查询与管理。</li></ul><h4 id="3-2-管理员信息"><a href="#3-2-管理员信息" class="headerlink" title="3.2 管理员信息"></a><strong>3.2 管理员信息</strong></h4><ul><li>存储管理员账户的基本信息及权限等级。</li><li>支持管理员登录认证与管理。</li></ul><h4 id="3-3-图像记录"><a href="#3-3-图像记录" class="headerlink" title="3.3 图像记录"></a><strong>3.3 图像记录</strong></h4><ul><li>存储用户上传的原始图像和修复后的图像数据。</li><li>记录图像处理的时间、结果和操作用户等元信息，便于溯源与分析。</li></ul><h4 id="3-4-日志记录"><a href="#3-4-日志记录" class="headerlink" title="3.4 日志记录"></a><strong>3.4 日志记录</strong></h4><ul><li>存储系统运行日志，包括用户操作记录和异常事件日志。</li><li>支持按时间、操作类型等条件进行日志查询，辅助系统问题的追踪与调试。</li></ul><p>是的，有许多研究者和开发者已经开源了高质量的图像修复模型，这些模型经过训练后可以直接使用，从而节省时间和计算资源。以下是一些常见的预训练模型及其资源：</p><hr><h3 id="1-DeepFill-v2"><a href="#1-DeepFill-v2" class="headerlink" title="1. DeepFill v2"></a><strong>1. DeepFill v2</strong></h3><ul><li><strong>用途</strong>：针对大范围缺损的图像修复，性能卓越。</li><li><strong>框架</strong>：TensorFlow 或 PyTorch</li><li>资源<ul><li><a href="https://github.com/JiahuiYu/generative_inpainting">官方代码和模型</a></li><li>特点：引入了门控卷积（Gated Convolution）提高修复的细节表现。</li></ul></li></ul><hr><h3 id="2-LaMa-Large-Mask-Inpainting"><a href="#2-LaMa-Large-Mask-Inpainting" class="headerlink" title="2. LaMa (Large Mask Inpainting)"></a><strong>2. LaMa (Large Mask Inpainting)</strong></h3><ul><li><strong>用途</strong>：处理任意形状缺失区域的修复。</li><li><strong>框架</strong>：PyTorch</li><li>资源<ul><li><a href="https://github.com/saic-mdal/lama">LaMa GitHub</a></li><li>特点：基于 Fast Fourier Convolution 提高修复效率和视觉效果。</li></ul></li></ul><hr><h3 id="3-EdgeConnect"><a href="#3-EdgeConnect" class="headerlink" title="3. EdgeConnect"></a><strong>3. EdgeConnect</strong></h3><ul><li><strong>用途</strong>：图像边缘辅助修复。适用于需要高细节的场景。</li><li><strong>框架</strong>：PyTorch</li><li>资源<ul><li><a href="https://github.com/knazeri/edge-connect">EdgeConnect GitHub</a></li><li>特点：先生成边缘轮廓，再完成图像内容修复。</li></ul></li></ul><hr><h3 id="4-MAT-Masked-Autoencoder-Transformer"><a href="#4-MAT-Masked-Autoencoder-Transformer" class="headerlink" title="4. MAT (Masked Autoencoder Transformer)"></a><strong>4. MAT (Masked Autoencoder Transformer)</strong></h3><ul><li><strong>用途</strong>：基于 Transformer 的图像修复，擅长细节处理。</li><li><strong>框架</strong>：PyTorch</li><li>资源<ul><li><a href="https://github.com/facebookresearch/mae">MAT GitHub</a></li><li>特点：使用 Vision Transformer（ViT）处理遮挡区域。</li></ul></li></ul><hr><h3 id="5-Partial-Convolution"><a href="#5-Partial-Convolution" class="headerlink" title="5. Partial Convolution"></a><strong>5. Partial Convolution</strong></h3><ul><li><strong>用途</strong>：通过部分卷积技术专注于非缺失区域进行修复。</li><li><strong>框架</strong>：PyTorch 或 TensorFlow</li><li>资源<ul><li><a href="https://github.com/NVIDIA/partialconv">Partial Convolution GitHub</a></li><li>特点：支持对大面积遮挡区域进行细致修复。</li></ul></li></ul><hr><h3 id="6-HiFill"><a href="#6-HiFill" class="headerlink" title="6. HiFill"></a><strong>6. HiFill</strong></h3><ul><li><strong>用途</strong>：高分辨率图像修复，适用于需要恢复大量细节的场景。</li><li><strong>框架</strong>：PyTorch</li><li>资源<ul><li><a href="https://github.com/JiahuiYu/hifill">HiFill GitHub</a></li><li>特点：专为高分辨率图像设计。</li></ul></li></ul><hr><h3 id="7-GAN-based-Models"><a href="#7-GAN-based-Models" class="headerlink" title="7. GAN-based Models"></a><strong>7. GAN-based Models</strong></h3><h4 id="a-Pix2Pix"><a href="#a-Pix2Pix" class="headerlink" title="a. Pix2Pix"></a><strong>a. Pix2Pix</strong></h4><ul><li><strong>用途</strong>：条件生成，用于需要约束条件的图像修复。</li><li><strong>资源</strong>：<a href="https://github.com/junyanz/pytorch-CycleGAN-and-pix2pix">Pix2Pix GitHub</a></li></ul><h4 id="b-CycleGAN"><a href="#b-CycleGAN" class="headerlink" title="b. CycleGAN"></a><strong>b. CycleGAN</strong></h4><ul><li><strong>用途</strong>：无监督图像修复，用于域间转换。</li><li><strong>资源</strong>：<a href="https://github.com/junyanz/pytorch-CycleGAN-and-pix2pix">CycleGAN GitHub</a></li></ul><hr><h3 id="8-Deep-Image-Prior"><a href="#8-Deep-Image-Prior" class="headerlink" title="8. Deep Image Prior"></a><strong>8. Deep Image Prior</strong></h3><ul><li><strong>用途</strong>：无需大规模训练，基于单一图像进行修复。</li><li><strong>框架</strong>：PyTorch</li><li>资源<ul><li><a href="https://github.com/DmitryUlyanov/deep-image-prior">Deep Image Prior GitHub</a></li><li>特点：适合数据匮乏或特殊场景的修复任务。</li></ul></li></ul><hr><h3 id="9-GFP-GAN-Generative-Facial-Prior-GAN"><a href="#9-GFP-GAN-Generative-Facial-Prior-GAN" class="headerlink" title="9. GFP-GAN (Generative Facial Prior GAN)"></a><strong>9. GFP-GAN (Generative Facial Prior GAN)</strong></h3><ul><li><strong>用途</strong>：专注于人脸图像的修复，适合老照片修复。</li><li><strong>框架</strong>：PyTorch</li><li>资源<ul><li><a href="https://github.com/TencentARC/GFPGAN">GFP-GAN GitHub</a></li><li>特点：专为人脸生成优化，效果自然且逼真。</li></ul></li></ul><hr><h3 id="如何使用这些预训练模型？"><a href="#如何使用这些预训练模型？" class="headerlink" title="如何使用这些预训练模型？"></a><strong>如何使用这些预训练模型？</strong></h3><ol><li><strong>下载模型权重和代码</strong>：<ul><li>通常这些模型在 GitHub 上提供预训练权重，可以直接下载。</li></ul></li><li><strong>设置运行环境</strong>：<ul><li>安装所需依赖库（如 PyTorch、TensorFlow）。</li><li>部署 CUDA 环境以加速推理。</li></ul></li><li><strong>加载模型并推理</strong>：<ul><li>大部分开源代码附带推理脚本，可以直接运行以测试你的图像。</li></ul></li><li><strong>调整模型以适配系统需求</strong>：<ul><li>结合你的前端或后端需求，通过 RESTful API 或直接调用脚本。</li></ul></li></ol><hr><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>直接使用这些预训练模型，可以快速实现图像修复功能，并专注于系统的其他模块开发（如用户界面、图像管理等）。如果性能和效果仍不足，可以基于这些模型进行微调。</p><p><strong>生成器</strong>：通过对输入图像的特征提取与上下文填充，生成修复后的完整图像。</p><p><strong>判别器</strong>：用于评估生成结果的真实性与完整性，优化生成器的修复效果。</p><p><strong>门控卷积</strong>：DeepFill v2 的核心创新，用于在缺失区域中动态分配权重，提升修复效果。</p><p>•<strong>生成对抗训练（Adversarial Training）</strong>：通过生成器与判别器的博弈，提升生成图像的纹理细节和结构完整性。</p><p>•<strong>Contextual Attention（上下文注意力机制）</strong>：从非缺失区域中提取相关纹理信息，填充缺失区域，确保图像的语义一致性。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>WebDAV</title>
      <link href="/posts/2cae.html"/>
      <url>/posts/2cae.html</url>
      
        <content type="html"><![CDATA[<h1 id="WebDAV"><a href="#WebDAV" class="headerlink" title="WebDAV"></a>WebDAV</h1><p>WebDAV是什么？</p><p><a href="https://sspai.com/post/60540">WebDAV是什么，有哪些支持webdav的网盘和工具？ - 少数派 (sspai.com)</a></p><p><a href="https://help.jianguoyun.com/?p=2064">坚果云第三方应用授权WebDAV开启方法 | 坚果云帮助中心 (jianguoyun.com)</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Github 2FA — 插件法</title>
      <link href="/posts/bdb4.html"/>
      <url>/posts/bdb4.html</url>
      
        <content type="html"><![CDATA[<h1 id="Github-2FA"><a href="#Github-2FA" class="headerlink" title="Github 2FA"></a>Github 2FA</h1><p>双因素身份验证（Two-Factor Authentication）是多因素用户认证的一种、增强账户安全的方法。基本上大的互联网平台，尤其是云平台厂商都启用了。</p><p>有短信验证（<strong>大陆的手机号码无法接收短信</strong>），<strong>TOTP</strong> 应用程序验证（官方推荐，可以看这个：<a href="https://blog.csdn.net/fuxily/article/details/139349233">超详细的Github双重验证开启教程</a>），这里介绍操作较为简单的浏览器插件验证。</p><ol><li><p>首先，在edge浏览器的插件商店搜索并下载：<code>Authenticator: 2FA Client</code>，将其图标固定到工具栏<br><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202408211732538.png" alt="Authenticator: 2FA Client"></p></li><li><p>进入github账户中，找到设置→密码和验证，启动双重身份验证</p></li></ol><p>​<img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202408211749281.png" alt="image-20240821174940160"></p><ol start="3"><li><p>进入后会看到一个二维码，点击工作栏上的2FA Client插件，点击里面那个扫描的图标，用鼠标拉出可以覆盖二维码的窗口，扫描后即可成功添加账户，成功后会弹出一条消息提醒你。<br><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202408211805588.png" alt="填入二维码"></p></li><li><p>进入后，就是你的<code>github-recovery-codes.txt</code>，下载保存以备后期恢复。</p></li><li><p>下载后点击我以下载，恭喜你已经完成双重验证。下次登录时，就会要求2FA验证才能登录成功。</p></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图</title>
      <link href="/posts/b7fa.html"/>
      <url>/posts/b7fa.html</url>
      
        <content type="html"><![CDATA[<h1 id="图"><a href="#图" class="headerlink" title="图"></a>图</h1><h2 id="辅助函数"><a href="#辅助函数" class="headerlink" title="辅助函数"></a>辅助函数</h2><ol><li><p>FirstNeighbor(G,x)：</p><ul><li><p>求图G中顶点x的第一个邻接点，若有则返回顶点号。</p></li><li><p>若x没有邻接点或图中不存在x，则返回-1。</p></li></ul></li><li><p>NextNeighbor(G,x,y)：</p><ul><li>假设图G中顶点y是顶点x的一个邻接点，返回除y之外，顶点x的下一个邻接点的顶点号</li><li>若y是x的最后一个邻接点，则返回-1。</li></ul></li></ol><h4 id="邻接矩阵表示法"><a href="#邻接矩阵表示法" class="headerlink" title="邻接矩阵表示法"></a>邻接矩阵表示法</h4><p>假设图 <code>G</code> 使用邻接矩阵表示，<code>G.matrix[i][j]</code> 为 1 表示顶点 <code>i</code> 和顶点 <code>j</code> 之间有边，为 0 表示没有边。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAX_VERTEX_NUM</span> <span class="token expression"><span class="token number">100</span></span></span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> numVertices<span class="token punctuation">;</span>    <span class="token keyword">int</span> matrix<span class="token punctuation">[</span>MAX_VERTEX_NUM<span class="token punctuation">]</span><span class="token punctuation">[</span>MAX_VERTEX_NUM<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> Graph<span class="token punctuation">;</span><span class="token comment">// 返回顶点v的第一个邻接顶点</span><span class="token keyword">int</span> <span class="token function">FirstNeighbor</span><span class="token punctuation">(</span>Graph G<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">.</span>numVertices<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>G<span class="token punctuation">.</span>matrix<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> i<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 没有邻接顶点</span><span class="token punctuation">&#125;</span><span class="token comment">// 返回顶点v的邻接顶点w之后的下一个邻接顶点</span><span class="token keyword">int</span> <span class="token function">NextNeighbor</span><span class="token punctuation">(</span>Graph G<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> w<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> w <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">.</span>numVertices<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>G<span class="token punctuation">.</span>matrix<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> i<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 没有更多的邻接顶点</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="邻接表表示法"><a href="#邻接表表示法" class="headerlink" title="邻接表表示法"></a>邻接表表示法</h4><p>如果图 <code>G</code> 使用邻接表表示，<code>G.adjList</code> 是一个包含每个顶点的邻接顶点列表的数组。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAX_VERTEX_NUM</span> <span class="token expression"><span class="token number">100</span></span></span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> numVertices<span class="token punctuation">;</span>    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> adjList<span class="token punctuation">[</span>MAX_VERTEX_NUM<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> Graph<span class="token punctuation">;</span><span class="token comment">// 返回顶点v的第一个邻接顶点</span><span class="token keyword">int</span> <span class="token function">FirstNeighbor</span><span class="token punctuation">(</span>Graph G<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>G<span class="token punctuation">.</span>adjList<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> G<span class="token punctuation">.</span>adjList<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 没有邻接顶点</span><span class="token punctuation">&#125;</span><span class="token comment">// 返回顶点v的邻接顶点w之后的下一个邻接顶点</span><span class="token keyword">int</span> <span class="token function">NextNeighbor</span><span class="token punctuation">(</span>Graph G<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> w<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">.</span>adjList<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>G<span class="token punctuation">.</span>adjList<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> w<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> G<span class="token punctuation">.</span>adjList<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> G<span class="token punctuation">.</span>adjList<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 没有更多的邻接顶点</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>FirstNeighbor(Graph G, int v)</strong>:</p><ul><li>邻接矩阵版本：遍历顶点 <code>v</code> 的所有可能邻接顶点（从 0 到 <code>G.numVertices - 1</code>），如果找到一个顶点 <code>i</code> 与顶点 <code>v</code> 有边（<code>G.matrix[v][i] == 1</code>），则返回这个顶点 <code>i</code>。如果没有找到，则返回 -1。</li><li>邻接表版本：直接返回顶点 <code>v</code> 的邻接顶点列表的第一个元素。如果列表为空，则返回 -1。</li></ul><p><strong>NextNeighbor(Graph G, int v, int w)</strong>:</p><ul><li>邻接矩阵版本：从顶点 <code>w + 1</code> 开始，遍历顶点 <code>v</code> 的所有可能邻接顶点，找到第一个与顶点 <code>v</code> 有边的顶点 <code>i</code>（<code>G.matrix[v][i] == 1</code>），返回这个顶点 <code>i</code>。如果没有找到，则返回 -1。</li><li>邻接表版本：在顶点 <code>v</code> 的邻接顶点列表中，找到顶点 <code>w</code>，然后返回其后的下一个顶点。如果 <code>w</code> 是最后一个邻接顶点或没有更多邻接顶点，则返回 -1。</li></ul><h2 id="广度优先遍历"><a href="#广度优先遍历" class="headerlink" title="广度优先遍历"></a>广度优先遍历</h2><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407301710711.png" alt="概要"></p><p>广度优先遍历（Breadth-First-Search, BFS）要点：</p><ol><li>找到与一个顶点相邻的所有顶点</li><li>标记哪些顶点被访问过</li><li>需要一个辅助队列</li></ol><h3 id="BFS"><a href="#BFS" class="headerlink" title="BFS"></a>BFS</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c">bool visited<span class="token punctuation">[</span>MAX_VERTEX_NUM<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 访问标记数组</span><span class="token comment">// 广度优先遍历</span><span class="token keyword">void</span> <span class="token function">BFS</span><span class="token punctuation">(</span>Graph G<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 从顶点v出发，广度优先遍历图G</span>    <span class="token function">visit</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 访问初始顶点v</span>    visited<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> TRUE<span class="token punctuation">;</span> <span class="token comment">// 对v做已访问标记</span>    <span class="token function">Enqueue</span><span class="token punctuation">(</span>Q<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 顶点v入队列Q</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>Q<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">DeQueue</span><span class="token punctuation">(</span>Q<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 出队列顶点v</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> w <span class="token operator">=</span> <span class="token function">FirstNeighbor</span><span class="token punctuation">(</span>G<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span> w <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> w <span class="token operator">=</span> <span class="token function">NextNeighbor</span><span class="token punctuation">(</span>G<span class="token punctuation">,</span> v<span class="token punctuation">,</span> w<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 检测v所有邻接点</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">[</span>w<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// w为v的尚未访问的邻接顶点</span>                <span class="token function">visit</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 访问顶点w</span>                visited<span class="token punctuation">[</span>w<span class="token punctuation">]</span> <span class="token operator">=</span> TRUE<span class="token punctuation">;</span> <span class="token comment">// 对w做已访问标记</span>                <span class="token function">EnQueue</span><span class="token punctuation">(</span>Q<span class="token punctuation">,</span> w<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 顶点w入列</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>执行顺序解析：</p><ol><li><p>**初始化邻接顶点 <code>w</code>**：<code>int w = FirstNeighbor(G, v);</code>，返回顶点 <code>v</code> 的第一个邻接顶点 <code>w</code>。</p></li><li><p><strong>检查是否有邻接顶点</strong>：<code>w &gt;= 0</code></p><ul><li>如果 <code>w</code> 为负数（例如，-1），表示没有邻接顶点，跳出循环。</li><li>如果 <code>w</code> 为非负数，表示有邻接顶点，进入循环体。</li></ul></li><li><p><strong>检查顶点 <code>w</code> 是否已访问</strong>：<code>if (!visited[w])</code></p><ul><li>检查 <code>visited[w]</code> 是否为 <code>false</code>，即顶点 <code>w</code> 是否尚未被访问。</li></ul></li><li><p><strong>访问尚未访问的邻接顶点 <code>w</code></strong>:</p><ul><li><p>如果未被访问，执行以下步骤：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">visited<span class="token punctuation">[</span>w<span class="token punctuation">]</span> <span class="token operator">=</span> TRUE<span class="token punctuation">;</span> <span class="token comment">// 对w做已访问标记</span><span class="token function">EnQueue</span><span class="token punctuation">(</span>Q<span class="token punctuation">,</span> w<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 顶点w入队</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>调用 <code>visit(w)</code> 函数，对顶点 <code>w</code> 进行访问（例如，打印顶点或进行其他处理）。</li><li>将 <code>visited[w]</code> 设为 <code>TRUE</code>，标记顶点 <code>w</code> 已被访问。</li><li>将顶点 <code>w</code> 入队列 <code>Q</code>，以便在之后的 BFS 阶段继续处理。</li></ul></li></ul></li><li><p><strong>更新邻接顶点 <code>w</code> 为下一个邻接顶点</strong>：<code>w = NextNeighbor(G, v, w);</code></p><ul><li>调用 <code>NextNeighbor(G, v, w)</code> 函数，返回顶点 <code>v</code> 的下一个邻接顶点，更新 <code>w</code> 的值。</li></ul></li><li><p><strong>重复步骤 2 到 5</strong>:</p><ul><li>继续循环，检查新的 <code>w</code> 是否非负，并按照上述步骤处理新的邻接顶点。</li></ul></li></ol><h3 id="遍历序列的可变性"><a href="#遍历序列的可变性" class="headerlink" title="遍历序列的可变性"></a>遍历序列的可变性</h3><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407301615126.png" alt="邻接表表示的BFS序列不唯一" style="zoom: 80%;" /><p>同一个图的邻接矩阵表示方式唯一，因此广度优先遍历序列唯一<br>同一个图邻接表表示方式不唯一，因此广度优先遍历序列不唯一</p><h3 id="上述算法存在的问题"><a href="#上述算法存在的问题" class="headerlink" title="上述算法存在的问题"></a>上述算法存在的问题</h3><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407301621691.png" alt="不能遍历完非连通图"></p><p>如果是非连通图，则无法遍历完所有结点。</p><p>要解决不能遍历非连通图的问题，可以在调用 BFS 之前或之后添加一个遍历所有顶点的循环，对于尚未访问的顶点，启动一次新的 BFS。这确保了图中所有连通分量都被遍历。</p><p>对于无向图，调用BFS函数的次数&#x3D;连通分量数</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// 遍历整个图，处理非连通图的情况</span><span class="token keyword">void</span> <span class="token function">BFSTraverse</span><span class="token punctuation">(</span>Graph G<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">.</span>Vexnum<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        visited<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> false<span class="token punctuation">;</span> <span class="token comment">// 初始化访问标记数组</span>    <span class="token punctuation">&#125;</span>    <span class="token function">InitQueue</span><span class="token punctuation">(</span>Q<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">///初始化辅助队列Q</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">.</span>Vexnum<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">BFS</span><span class="token punctuation">(</span>G<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 对尚未访问的顶点调用BFS</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="复杂度分析"><a href="#复杂度分析" class="headerlink" title="复杂度分析"></a>复杂度分析</h3><ol><li>空间复杂度：最坏情况，辅助队列大小为 O(|V|)</li><li>时间复杂度<ul><li>邻接矩阵存储的图：访问 V 个顶点需要O(|V|)的时间。查找每个顶点的邻接点都需要O(|V|)的时间，而总共有|V|个顶点，时间复杂度&#x3D; O(|V|^2^)<ul><li>总的时间复杂度为 O(|V|^2^)，忽略低阶</li></ul></li><li>邻接表存储的图：访问 V 个顶点需要O(|V|)的时间，查找各个顶点的邻接点共需要O(2E)的时间（E为所有边数）<ul><li>总的时间复杂度为：时间复杂度&#x3D; O(|V|+|E|)</li></ul></li></ul></li></ol><p>广度优先生成树：</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407301705935.png" alt="广度优先生成树"></p><ul><li>广度优先生成树由广度优先遍历过程确定。</li><li>由于邻接表的表示方式不唯一，因此基于邻接表的广度优先生成树也不唯一</li><li>对非连通图的广度优先遍历，可得到广度优先生成森林</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407301707964.png" alt="总结"></p><h2 id="深度优先遍历"><a href="#深度优先遍历" class="headerlink" title="深度优先遍历"></a>深度优先遍历</h2><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407301711582.png" alt="概要"></p><pre class="line-numbers language-c" data-language="c"><code class="language-c">bool visited<span class="token punctuation">[</span>MAX_VERTEX_NUM<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 访问标记数组</span><span class="token keyword">void</span> <span class="token function">DFS</span><span class="token punctuation">(</span>Graph G<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">visit</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 访问顶点v</span>    visited<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> true<span class="token punctuation">;</span> <span class="token comment">// 设已访问标记</span>    <span class="token comment">// 从顶点v出发，深度优先遍历图G</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> w <span class="token operator">=</span> <span class="token function">FirstNeighbor</span><span class="token punctuation">(</span>G<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span> w <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> w <span class="token operator">=</span> <span class="token function">NextNeighbor</span><span class="token punctuation">(</span>G<span class="token punctuation">,</span> v<span class="token punctuation">,</span> w<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 检测v的所有邻接点</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">[</span>w<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">DFS</span><span class="token punctuation">(</span>G<span class="token punctuation">,</span> w<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 递归调用DFS</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>和之前一样，会出现无法遍历非连通图的问题</p><p>需要加上</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">DFSTraverse</span><span class="token punctuation">(</span>Graph G<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 初始化访问标记数组</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> v <span class="token operator">&lt;</span> G<span class="token punctuation">.</span>vexnum<span class="token punctuation">;</span> <span class="token operator">++</span>v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        visited<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> false<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 对图中的每个顶点执行 DFS</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> v <span class="token operator">&lt;</span> G<span class="token punctuation">.</span>vexnum<span class="token punctuation">;</span> <span class="token operator">++</span>v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">DFS</span><span class="token punctuation">(</span>G<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>复杂度和BFS一样。</p><ul><li>同一个图的邻接矩阵表示方式唯一，因此深度优先遍历序列唯一，深度优先生成树也唯一</li><li>同一个图邻接表表示方式不唯一，因此深度优先遍历序列不唯一，深度优先生成树也不唯一</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407301737934.png" alt="总结"></p><h2 id="最小生成树"><a href="#最小生成树" class="headerlink" title="最小生成树"></a>最小生成树</h2><p>生成树：</p><p>连通图的生成树是包含图中全部顶点的一个极小连通子图。</p><p>若图中顶点数为n，则它的生成树含有n-1条边。对生成树而言，若砍去它的一条边，则会变成非连通图，若加上一条边则会形成一个回路</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407301955308.png" alt="生成树"></p><p>最小生成树（最小代价树）：</p><p>对于一个带权连通无向图G &#x3D; (V, E)，生成树不同，每棵树的权（即树中所有边上的权值之和）也可能不同</p><p>设R为G的所有生成树的集合，若T为R中边的权值之和最小的生成树，则T称为G的最小生成树（Minimum-Spanning-Tree, MST）</p><p>最小生成树可能有多个，但边的权值之和总是唯一且最小的</p><p>最小生成树的边数 &#x3D; 顶点数 - 1</p><p>砍掉一条则不连通，增加一条边则会出现回路</p><p>如果一个连通图本身就是一棵树，则其最小生成树就是它本身</p><p>只有连通图才有生成树，非连通图只有生成森林</p><p>求最小生成树的两种方法</p><h3 id="Prim算法"><a href="#Prim算法" class="headerlink" title="Prim算法"></a>Prim算法</h3><h3 id="Kruskal算法"><a href="#Kruskal算法" class="headerlink" title="Kruskal算法"></a>Kruskal算法</h3><p>Prim算法(普里姆)：从某一个顶点开始构建生成树;每次将代价最小的新顶点纳入生成树，直到所有顶点都纳入为止。时间复杂度: O(V2)适合用于边稠密图。</p><p>Kruskal算法(克鲁斯卡尔)：每次选择一条权值最小的边，使这条边的两头连通(原本已经连通的就不选)直到所有结点都连通。时间复杂度: O(lEllog2lEl )适合用于边稀疏图。</p><p>Prim 算法（普里姆）：</p><p>算法思想：</p><p>从某一个顶点开始构建生成树；</p><p>每次将代价最小的新顶点纳入生成树，直到所有顶点都纳入为止。</p><p>时间复杂度：O(|V|^2)，适合用于边稠密图</p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>clash verge</title>
      <link href="/posts/c6a3.html"/>
      <url>/posts/c6a3.html</url>
      
        <content type="html"><![CDATA[<h1 id="Clash-Verge-教程"><a href="#Clash-Verge-教程" class="headerlink" title="Clash Verge 教程"></a>Clash Verge 教程</h1><p><a href="https://clashverge.net/tutorial/">Clash Verge 教程-配置使用说明 - Clash Verge</a></p><p><a href="https://clashsub.com/how-about-clash-verge/">Clash Verge 怎么样？Clash for Windows 的完美替代-Clash Sub</a></p><p><a href="https://clashverge.net/clash-verge-rev/">Clash Verge Rev官网下载-Github&#x2F;教程&#x2F;安卓推荐 - Clash Verge</a></p><p><a href="https://clashios.com/clash-verge-tutorial/">Clash Verge 教程（2024 船新版本简单上手）-Clash 爱好者 (clashios.com)</a></p><p><a href="https://help.mints7.cc/windows-jiao-cheng/clashverge-shi-yong-jiao-cheng">Clash-Verge 使用教程 | 糖糖のWIKI (mints7.cc)</a></p><p><a href="https://clashios.com/nodes-qa/">翻墙机场使用常见问题汇总-Clash 爱好者 (clashios.com)</a></p><p><a href="https://clashios.com/">Clash 机场推荐（2024 最佳 Clash、Shadowrocket 节点） (clashios.com)</a></p><p><a href="https://kerrynotes.com/cost-effective-ss-proxy/">2024年性价比机场推荐（持续更新） | 咱有钱也可以省着点花 - Kerry的学习笔记 (kerrynotes.com)</a></p><p><a href="https://kerrynotes.com/clash-verge-tutorial/#toc4">Clash Verge 快速指南（下载及配置使用教程） - Kerry的学习笔记 (kerrynotes.com)</a></p><p><a href="https://clashcn.com/clash-verge">Clash Verge-Clash中文网 (clashcn.com)</a></p><p><a href="https://iheikeji.com/bgfw/airport-or-vpn.html">机场还是VPN，选择最适合你的梯子丨了解 机场和VPN 区别 (iheikeji.com)</a></p><p><a href="https://kerrynotes.com/what-is-ss-airport/">翻墙机场大白话科普 - 新人看这一篇就够了 - Kerry的学习笔记 (kerrynotes.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> clash </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>查找算法比较:二分、插值、斐波那契</title>
      <link href="/posts/d1ae.html"/>
      <url>/posts/d1ae.html</url>
      
        <content type="html"><![CDATA[<h1 id="二分查找"><a href="#二分查找" class="headerlink" title="二分查找"></a>二分查找</h1><p>**二分查找 (Binary Search)**是一种经典的查找算法，它采用分而治之的策略，在有序数组中查找目标值。</p><p><strong>原理</strong>：通过将数组分成两半，并确定目标值在哪一半，然后在那一半中重复此过程，直到找到目标值或确定目标值不存在。</p><h1 id="插值查找"><a href="#插值查找" class="headerlink" title="插值查找"></a>插值查找</h1><p><strong>插值查找 (Interpolation Search)</strong></p><p>插值查找也是用于有序数组的查找算法，但它比二分查找更高效地利用了数据分布的信息。</p><p>插值查找通过估计目标值可能位于数组中的位置来进行查找，这种估计是基于目标值与数组两端值的比例关系。</p><h1 id="斐波那契查找"><a href="#斐波那契查找" class="headerlink" title="斐波那契查找"></a>斐波那契查找</h1><p><strong>斐波那契查找 (Fibonacci Search)</strong></p><p>斐波那契查找同样是用于有序数组的查找算法，它使用斐波那契数列的性质来分割数组。</p><p>斐波那契查找通过将数组分割成不同长度的部分来进行查找，这些部分的长度遵循斐波那契数列的规律。</p><p><a href="https://blog.csdn.net/weixin_36755535/article/details/135263307">【算法系列 | 11】深入解析查找算法之—插值查找_插值查找算法-CSDN博客</a></p><p><a href="https://c.biancheng.net/view/interpolation-search.html">插值查找算法 (biancheng.net)</a></p><p><a href="https://www.cnblogs.com/ljz111/p/15222644.html">数据结构与算法——查找算法-插值查找 - 海绵寳寳 - 博客园 (cnblogs.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 查找 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>词缀助记</title>
      <link href="/posts/aef1.html"/>
      <url>/posts/aef1.html</url>
      
        <content type="html"><![CDATA[<h1 id="词缀助记总结"><a href="#词缀助记总结" class="headerlink" title="词缀助记总结"></a>词缀助记总结</h1><p>总结性的东西：</p><ol><li><p><strong>sl-</strong> 开头的短词大多与 <strong>滑</strong> 和 <strong>瘦</strong> 有关</p><table><thead><tr><th>与<strong>滑</strong>相关</th><th></th><th></th></tr></thead><tbody><tr><td><strong>Slip</strong> - 滑动，滑倒</td><td><strong>Slide</strong> - 滑动，滑梯</td><td><strong>Slick</strong> - 光滑的，油滑的</td></tr><tr><td><strong>Slippery</strong> - 滑的，打滑的</td><td><strong>Sleek</strong> - 圆滑的，光滑的（通常形容外观光滑的）</td><td><strong>Slippy</strong> - 光滑的，容易滑的</td></tr><tr><td>Slender - 苗条的</td><td>Slim - 苗条的</td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></li><li><p><strong>gl-</strong> 开头跟 光 有关</p></li><li><p><strong>tw-</strong> 跟 <strong>扭</strong> 或 <strong>二</strong> 有关</p><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td><strong>Twist</strong> - 扭曲，拧；也可以指意料之外的转折</td><td>Twitch - 抽搐，轻微的扭动</td><td>Twine - 缠绕，盘绕；也可以指编织用的细绳</td></tr><tr><td>Twirl - 旋转，快速转动</td><td>Twiddle - 捻弄，旋转；通常指无聊时用手指摆弄某物</td><td>tweak <strong>扭</strong></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></li><li><p><strong>gru-</strong> 跟 <strong>咕哝、抱怨</strong> 有关</p><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td><strong>Grumble</strong> - 抱怨，嘟囔</td><td><strong>Grunt</strong> - 低沉的咕哝声，表示不满或不耐烦</td><td><strong>Groan</strong> - 呻吟，抱怨</td></tr><tr><td><strong>Grudge</strong> - 怨恨，抱怨，心存不满</td><td><strong>Grump</strong> - 抱怨，发牢骚</td><td><strong>Gruff</strong> - 粗哑的（或态度粗暴的）</td></tr></tbody></table></li><li><p><strong>cl-</strong> 跟 粘黏 结合 有关</p><p>以“cl-”开头的词汇中，有一些确实与“粘黏”或“结合”相关。这种现象可能与音素联想有关，因为“cl-”在发音上可能让人联想到某种结合或粘附的动作。以下是一些与“粘黏”或“结合”相关的“cl-”词汇：</p><h3 id="与“粘黏”或“结合”相关的“cl-”词汇："><a href="#与“粘黏”或“结合”相关的“cl-”词汇：" class="headerlink" title="与“粘黏”或“结合”相关的“cl-”词汇："></a>与“粘黏”或“结合”相关的“cl-”词汇：</h3><ol><li><p><strong>Cling</strong> - 紧贴，附着，依附；通常指某物牢牢地粘附在另一物体上。</p></li><li><p><strong>Clutch</strong> - 紧握，抓住；通常指牢牢地抓住某物，不让其脱离。</p></li><li><p><strong>Clamp</strong>夹住，固定；通常使用夹具或其他工具将物体牢牢地固定在一起。</p></li><li><p><strong>Clasp</strong></p><p>扣住，紧握；可以指紧紧抓住某物，也可以指用钩子、扣子等将东西固定在一起。</p></li><li><p><strong>Cluster</strong> - 群，簇，团；指物体或人紧密地聚集在一起。</p></li><li><p><strong>Clot</strong> - 凝块，凝结；指液体物质（如血液）在某处凝结成块状。</p></li></ol><h3 id="其他相关的“cl-”词汇："><a href="#其他相关的“cl-”词汇：" class="headerlink" title="其他相关的“cl-”词汇："></a>其他相关的“cl-”词汇：</h3><p>虽然这些词并不直接与“粘黏”或“结合”有关，但它们也有某种形式的联系或接触的含义。</p><ol><li><p><strong>Climb</strong></p><ul><li><strong>释义</strong>: 攀登，爬上；通常指手脚并用攀附在某物上。</li><li><strong>例句</strong>: She climbed the ladder to reach the top shelf.（她爬上梯子，够到顶层的架子。）</li></ul></li><li><p><strong>Cloak</strong></p><ul><li><strong>释义</strong>: 斗篷；也可作为动词表示覆盖、隐藏。</li><li><strong>例句</strong>: The fog cloaked the valley in mystery.（浓雾笼罩着山谷，使其充满神秘感。）</li></ul></li></ol><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>以“cl-”开头的词汇中，确实有不少与“粘黏”或“结合”相关的词。这些词往往表达了某种物理上的紧密接触或固定的概念。这种现象可能是英语中“cl-”音素与这些动作或状态的联想，但并非所有以“cl-”开头的词都符合这一规律。</p><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></li></ol><h2 id="第一部分-核心词根（124个）"><a href="#第一部分-核心词根（124个）" class="headerlink" title="第一部分 核心词根（124个）"></a>第一部分 核心词根（124个）</h2><p>1、ag ag &#x3D; do ， act 做，动<br>agent [ag做，办理，ent名词后缀，表示人；做事者，“办理人”] 代理人</p><p>agency [ag 做，作 ency 名词后缀] 代理，代理处，机构，作用</p><p>2、agri<br>agri &#x3D; field 田地，农田 (agri 也作 agro, agr)</p><p>agriculture [agri 田地，农田，cult 耕作 –ure 名词后缀] 农业，农艺</p><p>agronomy [agro农田→农业，nomy …..学] 农学</p><p>agrestic [agr 田地→乡村→乡野] 乡间的，乡野的，粗野的</p><p>3、ann<br>ann &#x3D; year 年 （ann也作enn）</p><p>annual [ann 年，-ual 形容词后缀，……的] 每年的，年度的</p><p>perennial [per-通，全，enn年，-ial形容词后缀，…的] 全年的，四季不断的</p><p>4、audi<br>audi&#x3D;hear 听 （audi也作audit）</p><p>audience [audi听，-ence名词后缀] 听众，倾听</p><p>auditorium [audi听，-orium 名词后缀，表示场所，地点；“听讲的场所”] 礼堂，讲堂，听众席</p><p>5、bell<br>bell&#x3D;war战争</p><p>rebel [re-相反，bel(l)战争，战斗；“反戈”，“反战”] 反叛，反抗</p><p>6、brev<br>brev&#x3D;short短</p><p>brevity [brev短，-ity名词后缀] （陈述等的）简短，简洁；（生命等的）短暂，短促</p><p>7、ced<br>ced&#x3D;go行走（ced也作ceed，cess）</p><p>preceding [pre-先，前,见上，-ing形容词后缀，…的] 在前的，在先的</p><p>procedure [pro-向前，ced行，-ure名词后缀；“进行的过程”] 过程，步骤，手续</p><p>8、cept<br>cept&#x3D;take 拿，取</p><p>except [ex-外，出，cept拿；“拿出去”→排除，除外] 除…之外，把…除 外</p><p>accept [ac-加强意义，cept拿→接] 接受，领受，承认</p><p>9、cid，cis<br>cid，cis&#x3D;cut，kill 切，杀</p><p>decide [de-表示加强意义，cid切，切断→裁断→裁决] 决定，裁决，判决，下决心</p><p>concise [con-表示加强意义，cis切；“切短”，“切除”不必要的部分，删除除冗言赘语，留下精简扼要的部分] 简明的，简洁的，简要的</p><p>10、circ<br>circ&#x3D;ring环，圆</p><p>circus [circ圆，-us名词后缀；“圆形的表演场地] 马戏场；[转为]马戏团</p><p>circular [circul&#x3D;circle圆，-ar形容词后缀，…的] 圆形的，环形的</p><p>11、claim，clam<br>claim，clam&#x3D;cry，shout 喊叫</p><p>exclaim [ex-外，出，claim叫，“大声叫出”] 呼喊，惊叫</p><p>proclaim [pro-向前，claim叫喊→声言] 宣布，宣告，声明</p><p>12、clar<br>clar&#x3D;clear 清楚，明白</p><p>declare [de-表示加强意义，clar&#x3D;clear清楚，明白；“to make clear”，“使明白”] 表明，声明，宣告，宣布</p><p>clarify [clar&#x3D;clear清楚，明白，-i-，-fy 动词后缀，使…；“使明白”] 讲清楚，阐明，澄清</p><p>13、clud<br>clud&#x3D;close，shut关闭（clud也作clus）</p><p>exclude [ex-外，clud关；“关在外面”→不许入内] 排斥，拒绝接纳，把…排除在外</p><p>include [in-入，内，clud关闭；“关在里面”，“包入”] 包含，包括，包住，关住</p><p>14、cogn<br>cogn&#x3D;know知道</p><p>recognize [re-表示加强意义，cogn知道→认识，-ize动词后缀] 认识，认出，认知</p><p>precognition [pre-预先，cogn知道，-ition名词后缀] 预知，预察，预见</p><p>15、cord<br>cord&#x3D;heart心</p><p>cordial [cord心，-ial形容词后缀，…的] 衷心的，诚心的</p><p>accord [ac-表示to，cord心；“心心相印”]一致，协调，符合，使一致</p><p>16、corpor<br>corpor&#x3D;body （corpor也作corp）</p><p>corporation [corpor体，-ation名词后缀；由众人组成的一个“整体”] 团体，社团，公司</p><p>corporator [corpor体→团体，-ator表示人] 社团或公司的成员</p><p>17、cred<br>cred&#x3D;believe，trust 相信，信任</p><p>credible [cred相信，信任，-ible形容词后缀，可…的] 可信的，可靠的</p><p>incredible [in-不，credible可信的] 不可信的</p><p>18、cruc<br>cruc&#x3D;cross十字</p><p>crucial [cruc十字，-ial形容词后缀] 十字形的；[处在“十字路口”的] 紧要关头的，决定性的，临于最后选择的</p><p>cruciform [cruc十字，-form形容词后缀，有…形状的] 十字形的</p><p>19、cur<br>cur&#x3D;care关心，挂念，注意</p><p>security [se-分开，脱离，cur挂念，担心，-ity名词后缀；“脱离挂念”→不用挂念，无须担心] 安全</p><p>curious [cur关心，注意，-ious形容词后缀 “引人注意的”] 新奇的，奇怪的；</p><p>20、cur，curs，cour，ccurs<br>cur，curs，cour，ccurs&#x3D;run跑</p><p>currency [cur跑→行，-ency名词后缀] 流行，流通，流通货币，通货</p><p>excurse [ex-外，出，curs跑→行走；“跑出去”，“出行”] 远足，旅游，旅行</p><p>course [cours跑→行进] 行程，进程，路程，道路，课程</p><p>21、dent<br>dent&#x3D;tooth牙齿</p><p>dentist [dent牙，-ist表示人；“医治牙病的人”] 牙科医生</p><p>dentistry [见上，-ry表示…学，技术，职业] 牙科学，牙科，牙科业</p><p>22、di<br>di&#x3D;day日</p><p>diary [di日，-ary名词后缀，表示物] 日记，日记簿</p><p>dial [di日，-al名词后缀，表示物] 日晷，电话机拨号盘（该物圆形似日晷）</p><p>23、dict<br>dict&#x3D;say言，说（dict也作dic）</p><p>dictate [dict言，说→吩咐，命令，指示，-ate动词后缀；“口授命令或指示”] 口授命令或指示</p><p>dictation [见上，-ion名词后缀] 口授，命令，支配，口述，听写</p><p>24、dit<br>dit&#x3D;give给</p><p>tradition [tra&#x3D;trans转，传达室，dit给，-ion名词后缀；“传给”] 传统，传说，口传</p><p>edit [e-出，dit给，“给出”→发表，出版；将稿件编好以备发表] 编辑</p><p>25、don<br>don&#x3D;give给（don也作do）</p><p>pardon [par-&#x3D;per完全，彻底，don给，舍给→舍弃；“完全舍弃他人罪过”] 原谅，宽恕，赦罪</p><p>donor [don给，赠给，-or表示人] 赠给者，捐献者</p><p>26、du<br>du&#x3D;two二</p><p>dual [du双，二，-al形容词后缀，..的] 二重的，双的，二元的</p><p>duet [du双，二] 二重唱，二重奏</p><p>27、duc<br>duc，duct&#x3D;lead引导</p><p>educate [e-出，duc引导，-ate动词后缀；“引导出来，”“把…由无知状态中引导出来”→教导出来] 教育</p><p>introduce [intro-入，duc引；“引入”] 引进，介绍</p><p>28、ed<br>ed&#x3D;eat吃</p><p>edible [ed吃，-ible形容词后缀，可…的] 可以吃的，食用的</p><p>edacious [ed吃，-acious形容词后缀，表示有…性质的，好…的] 贪吃的，狼吞虎咽的</p><p>29、equ<br>equ&#x3D;equal等，均，平</p><p>equal [equ相等，-al形容词后缀，…的] 相等的，平等的，相同的</p><p>equality [见上，-ity名词后缀] 同等，平等，均等</p><p>30、ev<br>ev&#x3D;age年龄，寿命，时代，时期</p><p>longevity [long长，ev年龄，寿命，ity名词后缀] 长寿，长命</p><p>coeval [co-共同，ev时代，-al形容词后缀] 同时代的，同年代的，同时期的；[-al名词后缀] 同时代的人（或物）</p><p>31、fact<br>fact&#x3D;do，make做，作（fact也作fac）</p><p>factory [fact作，制作，-ory名词后缀，表示场所，地点；“制作的场所”] 工厂，制造厂</p><p>manufacture [manu手，fact作，制作；“用手制作”，古时生产用手操作] 制造，加工</p><p>32、fer<br>fer&#x3D;bring，carry带拿</p><p>confer [con共同，一起，fer拿；把意见“拿到一起来”] 协商，商量，交换意见</p><p>differ [dif-分开，fer拿，持；“分开拿”，“分取”，“各持已见”，“各执一词”→互异] 不同，相异，意见不同</p><p>prefer [pre-先，fer拿，取;对某物’先取”，’先选”，宁愿’先要”某事物] 宁可，宁愿(选择)， 更喜欢…，偏爱…</p><p>33、flor<br>flor&#x3D;flower花(flor也作flour)</p><p>florist [flor花，-ist表示人] 种花者，花卉研究者</p><p>flourish [flour花，-ish动词后缀;’如开花一样”] 繁荣，茂盛，兴旺，昌盛</p><p>34、flu<br>flu&#x3D;flow流</p><p>fluent [flu流，-ent形容词后缀，…的] 流动的，流畅的，(语言)流利的</p><p>fluency [flu流，-ency名词后缀] 流利，流畅</p><p>influence [in-入，flu流，-ence名词后缀;’流入”→波及→对周围事物产生影响] 影响，感动，势力;[转为动词] 感化，影响，对…有作用，左右</p><p>35、fus<br>fus&#x3D;pour灌，流，倾泻</p><p>refuse [re-回，fus流;’流回”→倒灌，倒流→退回→不接纳] 拒绝，拒受</p><p>confuse [con-共同，合，fus流;’合流”，’流到一处”→混在一起] 使混杂，混乱，混淆，使迷乱</p><p>36、grad<br>grad&#x3D;step，go，grade步，走，级</p><p>gradual [grad步，-ual形容词后缀，…的] 逐步的，逐渐的</p><p>graduate [grad步，级，-u-，-ate动词后缀;’在学业上走完某一步”，’在学业上完成某一级”] 毕业;[转为] 毕业生</p><p>37、gram<br>gram&#x3D;write，something written of drawn 写，画，文字，图形</p><p>grammar [gram写，文字，m重复字母，-ar名词后缀;关于’文字的法则] 语法，文法</p><p>program [pro-在前面，gram写-书，表，单;’写在前面的说明文字”] 节目单，戏单，说明书，大纲，方案</p><p>38、graph<br>graph&#x3D;write，writing，an instrument for making records 写，画，文字，图形，记录器</p><p>photograph [photo光，影，graph写→记录;’把实物的影像录下来”] 照相，拍照，摄影，照片</p><p>phototgraphy [见上，-y名词后缀] 摄影术</p><p>39、gress<br>gress&#x3D;go，walk行走</p><p>progress [pro-向前，gress行走] 前进，进步</p><p>congress [con-共同，一起，gress走，来到;’大家走到一起来”→共聚一堂→开会→会议] (代表)大会，国会，议会</p><p>40、habit<br>habit&#x3D;dwell居住</p><p>habitant [habit居住，-ant表示人] 居住者</p><p>cohabit [co-共同，habit居住] (男女)同居，姘居</p><p>41、hibit<br>hibit&#x3D;hold拿，持</p><p>exhibit [ex-外，出，hibit拿，持;’拿出去”→摆出去给人看] 展出，展览，陈列，展示，显示</p><p>inhibit [in-表示in，hibit持，握;’to hold in”，’to maintain in”] 阻止，禁止，抑制</p><p>42、hospit<br>hospit&#x3D;guest客人</p><p>hospital [hospit客人，-al名词后缀;原义为接待’客人”的地方→接待’病客”的地方] 医院</p><p>hospitalize [见上，-ize动词后缀] 把…送入医院治疗</p><p>43、idio<br>idio&#x3D;peculiar，own，private，proper特殊的，个人的，专有的</p><p>idiot [idio特殊的;’特殊的人”→异予正常人的人] 傻子，痴人，</p><p>idiograph [idio个人的，专有的，graph写，文字，图形] 个人的签名，商标</p><p>44、insul<br>insul&#x3D;island岛</p><p>insulate [insul岛→孤立→与外界隔绝，-ate动词后缀，使…;’使成岛状”→使孤立，使与…隔绝] 隔离，使孤立，使绝缘</p><p>insulin [insul岛，-in名词后缀，表示’素”] 胰岛素</p><p>45、it<br>it&#x3D;go行走</p><p>exit [ex-出，外，it行走;’走出”，’向外走”] 出口，太平门，退出</p><p>circuit [cire圆，环，-u-，-it行] 环行，周线，电路，回路</p><p>46、ject<br>ject&#x3D;throw投掷</p><p>project [pro-向前，ject掷] 抛出，投出，投掷，发射，射出;[投出→拿出，’提出一种设想”] 设计，计划，规则</p><p>inject [in-入，ject投;’投入”→射入] 注入，注射</p><p>object [ob-相对，相反，对面，ject投;’投放在对面(前面)之物”] 对象，目标，物体;[与主词(主词)相对者] 宾语，受词;[投向对立面] 反对，抗议</p><p>47、juven<br>juven&#x3D;young年轻，年少</p><p>juvenile [juven年少，-ile形容词后缀，…的] 青少年的;[转作名词] 青少年</p><p>juvenility [见上，-ility名词后缀] 年少，年轻</p><p>48、lect<br>lect&#x3D;choose，gather选，收(lect也作leg，lig)</p><p>elect [e-出，lect选;’选出”] 选举</p><p>select [se-离开，分开，lect选] 挑选，选出，选择，选拔</p><p>49、lev<br>lev&#x3D;raise举，升</p><p>elevate [e-出，lev举，-ate动词后缀;’举出”→举起] 抬起，举起，使升高</p><p>elevator [见上，-or表示人或物] 升降机，电梯，起卸机，举起者，起重工人</p><p>50、liber<br>liber&#x3D;free自由</p><p>liberty [liber自由，-ty名词后缀] 自由，自由权</p><p>Liberia [liber自由，-ia名词后缀;意为’自由之国”] 利比里亚(非洲一国家名)</p><p>51、lingu<br>lingu&#x3D;language语言</p><p>linguist [lingu语言，-ist表示人] 语言学家</p><p>collingual [col-同，ligua语言，al形容词后缀，…的] (用)同一种语言的</p><p>52、liter<br>liter&#x3D;letter文字，字母</p><p>literary [liter文字→文章→文学，-ary形容词后缀，…的] 文学的</p><p>literator [见上，-ator表示人] 文学家，文人，作家</p><p>53、loc<br>loc&#x3D;place地方</p><p>local [loc地方，-al形容词后缀，…的] 地方的，当地的，本地的</p><p>localism [见上，-ism表示主义，语言] 地方主义，方言，士语</p><p>54、log<br>log&#x3D;speak言，说</p><p>dialogue [dia-对，相对，log言，说] 对话</p><p>apologize [见上，-ize动词后缀] 道歉，谢罪，辩解</p><p>logic [log语言→辩论→推理，论理，-ic名词后缀，表示…学] 逻辑</p><p>55、loqu<br>loqu&#x3D;speak言，说</p><p>eloquent [e-出，loqu说，-ent形容词后缀，…的;’说出的”，’道出的”→能说会道的] 有口才的，雄辩的，善辩的，有说服力的</p><p>eloquence [见上，-ence名词后缀] 雄辩，善辩，有口才</p><p>56、lun<br>lun&#x3D;moon月亮</p><p>lunar [lun月亮，-ar形容词后缀，…的] 月亮的，太阴的，似月的，新月形的</p><p>semilunar [semi-半，lun月亮，-ar形容词后缀，…的] 半月形的，月牙形的</p><p>57、man<br>man&#x3D;dwell，stay居住，停留</p><p>mansion [man居住，-sion名词后缀;’居住的地方”] 宅第，宅邸，大楼，大厦</p><p>permanent [per-贯穿，从始至终，一直，man停留，-ent形容词后缀，…的;’一直停留下去的”] 永久的，常驻的，常设的</p><p>58、manu<br>manu&#x3D;hand手(manu也作man)</p><p>manual [manu手，-al形容词后缀，…的] 手的，手工做的，用手的;[转为名词] 手册</p><p>maintain [main→man手，tain持，握;’手持”，’握有”] 保持，保存，维持</p><p>59、mar<br>mar&#x3D;sea海</p><p>marine [mar海，-ine形容词后缀，…的] 海的，海上的.航海的</p><p>submarine [sub-在…下面，mar海，ine形容词后缀] 海面下的，海底的，[转为名词;’潜入海面下之物”] 潜水艇</p><p>60、medi<br>medi&#x3D;middle中间</p><p>immediate [im-无，medi中间，-ate形容词后缀，…的;’没有中间空隙时间的”，’当中没有间隔的”] 立刻的，直接的</p><p>medium [medi中间，-um名词后缀] 中间，中间物，媒介;[转为形容词] 中等的</p><p>61、memor<br>memor&#x3D;memory记忆</p><p>memory [memor记忆，-y表示情况，状态，行为] 记忆，记忆力，回忆，纪念</p><p>memorize [memor记忆，-ize动词后缀，使…] 记住，熟记</p><p>62、merg<br>merg&#x3D;dip，sink沉，没(merg也作mers)</p><p>emerge [e-外，merg沉，沉于水中;’由水中浮出”] 浮现，出现</p><p>submerge [sub-下，merg沉] 沉下，沉于水中，没入水中</p><p>63、migr<br>migr&#x3D;remove，move迁移</p><p>migrate [migr迁移，-ate动词后缀] 迁移，移居</p><p>immigrate [in-入内，migr迁移，-ate动词后缀] 移居入境，(从外国)移来，移入</p><p>64、milit<br>milit&#x3D;soldier兵</p><p>militia [milit兵，-ia表示集合名词] 民兵组织，民兵(总称)</p><p>militarism [见上，-ism主义] 军国主义</p><p>65、mini<br>mini&#x3D;small，little小(mini也作min)</p><p>minister [mini小，-ster名词后缀，表示人;’小人”→仆人→臣仆，古时大臣对君王自称为’小人”，仆人→君王或元首的仆人，转为现今的部长] 大臣，部长</p><p>administer [ad-表示to，’执行大臣或部长的任务”] 管理，治理，执行，施政</p><p>66、mir<br>mir&#x3D;wonder惊奇，惊异</p><p>mirror [mir惊奇，-or表示物;能映出影像，使人感到惊奇之物.最初人们对镜子能映出影像感到惊奇] 镜子</p><p>miracle [mir惊奇，奇异，-acle表示事物] 奇事，奇迹</p><p>67、miss<br>miss&#x3D;send投，送，发(miss也作mit)</p><p>mission [miss送，派送，委派，-ion名词后缀;’被派送(委派)出去者”] 使团，代表团，使命</p><p>promise [pro-前，先，mis(&#x3D;miss)发;’事先发出”之言] 诺言，允诺</p><p>68、mob<br>mob&#x3D;move动</p><p>mobile [mob动，ile形容词兼名词后缀] 活动的，可动的，运动的，汽车</p><p>mob [mob动→动乱，暴动→暴动的人] 暴民;一群暴徒</p><p>69、mort<br>mort&#x3D;death死</p><p>mortal [mort死，-al形容词后缀，…的] 终有一死的，死的，临死的</p><p>immortal [im-不，mort死，-al形容词后缀，…的] 不死的，永生的，不朽的</p><p>70、mot<br>mot&#x3D;move移动，动</p><p>motion [mot动，-ion名词后缀，表示行为，情况] 运动，动</p><p>promote [pro-向前，mor移动;’使向前移动”] 推进，促进，提升，升级</p><p>71、momin<br>nomin&#x3D;name名</p><p>nominal [nomin名，-al形容词后缀，…的] 名义上的，有名无实的</p><p>nominate [nomin名，-ate动词后缀，做…事] 提名，任命</p><p>72、nov<br>nov&#x3D;new新</p><p>novel [nov新，-el名词后缀，表示物;新→新奇，’新奇的事”→故事] 小说，长篇小说;新奇的</p><p>novelist [见上，-ist表示人] 小说家，小说作者</p><p>73、numer<br>numer&#x3D;number数</p><p>numeral [numer数，-al形容词后缀，…的] 数字的，示数的;[转为名词] 数字，(语法)数词</p><p>numerate [numer数，-ate动词后缀，做…] 计算，计数，数</p><p>74、onym<br>onym&#x3D;name名</p><p>onymous [onym名，-ous形容词后缀，…的] 有名字的，署名的</p><p>anonym [an-无，onym名] 匿名者，无名氏</p><p>75、oper<br>oper&#x3D;work工作</p><p>operate [oper工作，-ate动词后缀，做…] 工作，操作，运转，动手术</p><p>opera [oper工作→动作→表演，作戏→戏] 歌剧</p><p>76、ori<br>ori&#x3D;rise升起</p><p>orient [ori升起;原义为’太阳升起的地方”] 东方，东方的</p><p>origin [ori升→发生，发起→起源] 原始，起源，由来，出身</p><p>77、paci<br>paci&#x3D;peace和平，平静</p><p>pacific [paci和平，-fic形容词后缀，…的] 和平的，太平的，平静的</p><p>pacify [paci和平，-fy动词后缀，使…的] 使和平，使平静，使平定，抚慰</p><p>78、pel<br>pel&#x3D;push，drive推，逐，驱</p><p>propel [pro-向前，pel推] 推进，推动</p><p>expel [ex-出，外，pel驱逐] 逐出，赶出，驱逐，开除</p><p>79、pend<br>(a)pend，pens&#x3D;hang悬挂</p><p>depend [de-下，pend悬挂;’挂在他物下面”→依附于另一物体”] 依靠，依赖</p><p>suspend [sus&#x3D;sub下，pend悬，吊，挂，’挂起来”] 挂，悬，中止，暂停</p><p>80、pet<br>pet&#x3D;seek追求</p><p>compete [com-共同，pet追求;’共同追求”] 竞争，角逐，比赛</p><p>competition [见上，-ition名词后缀，表示行为] 竞争，角逐，比赛</p><p>appetite [ap-表示to向，pet追求→渴求，渴望] 欲望，食欲</p><p>81、phon<br>phon&#x3D;sound声音</p><p>telephone [tele远，phon声音;’由远处(通过电波)传来的声音”] 电话</p><p>otophone [oto耳，phon声音] 助听器</p><p>82、pict<br>pict&#x3D;paint画，描绘</p><p>picture [pict绘，-ure名词后缀] 绘画，图画，画像;图片</p><p>depict [de-加强意义，pict绘] 描绘，描述</p><p>83、plen<br>plen&#x3D;full满，全</p><p>plenty [plen满→丰足，-ty表示情况，状态] 丰富，充足，大量</p><p>plenilune [plen满，-i-，lun月亮] 满月，望月.月满之时</p><p>84、plic<br>plic&#x3D;fold折，重叠</p><p>complicate [com-加强意义，plic重叠，重复→多层，复杂，-ate动词后缀] 使复杂，变复杂;[-ate形容词后缀，…的] 复杂的</p><p>multiplicate [multi-多，plic重叠，-ate，形容词后缀，…的] 多重的，多倍的，多样的</p><p>85、pon<br>pon&#x3D;put放置</p><p>postpone [post-后，pone放;’往后放”] 推后，推迟，延期</p><p>compound [com-共同，一起，poun&#x3D;pon放;’放在一起的”] 混合的，化合的，混合物，化合物</p><p>86、popul<br>popul&#x3D;people人民</p><p>population [popul人民→居民，-ation名词后缀] 全体居民，人口</p><p>populace [popul人民→平民，-ace名词后缀] 平民，大众</p><p>87、port<br>port&#x3D;carry拿，带，运</p><p>import [im-入，port拿，运;’拿进，运入”] 输入，进口</p><p>export [ex-出，port运，拿;’运出去”] 输出，出口</p><p>88、pos<br>pos&#x3D;put放置</p><p>exposure [ex-出，外，pos放，摆;’摆出来”→把…亮出来，-ure名词后缀] 揭露，揭发，暴露</p><p>deposit [de-下，pos放;’放下”→存放] 寄存，存放，存款，储蓄</p><p>89、preci<br>preci&#x3D;price价值</p><p>precious [preci价值，-ous形容词后缀，…的;’有价值的”] 宝贵的，珍贵的</p><p>appreciate [ap-表示ar或to，preci价值，-ate动词后缀;’论价”] 评价，鉴赏，欣赏</p><p>90、punct<br>punct&#x3D;point，prick点，刺</p><p>punctuate [punct点，-u-，ate动词后缀] 加标点于，点标点</p><p>punctual [punct点，-ual形容词后缀，…的;’着于一点的”→限于一点的→不偏不差的] 精确的，准确的，准时的</p><p>91、pur<br>pur&#x3D;pure清，纯，净</p><p>purify [pur纯净，-i-，-fy使] 使纯净，使洁净</p><p>depurate [de-加强意义，pur洁净，-ate动词后缀，使成…] 使净化，净化，提纯</p><p>92、rect<br>rect&#x3D;right，straight正，直</p><p>correct [cor-表示加强意义，rect正，直] 改正，纠正，正确的</p><p>incorrect [in-不，correct正确的] 不正确的</p><p>93、rupt<br>rupt&#x3D;break破</p><p>interrupt [inter-在…中间，rupt破→断] 中断，打断</p><p>bankrupt [bank&#x3D;bench长凳，原指钱商用的长凳或台板，最初是作为钱商的柜台，rupt破，断;’钱商的柜台断了”→生意破产了] 破产的，破产者，使破产</p><p>94、sal<br>sal&#x3D;salt盐</p><p>salary [sal(salt)盐，-ary名词后缀，表示物，原为古罗马士兵所领取的’买盐的钱”，作为生活津贴，由此转为’工资”] 薪金，工资</p><p>salad [sal盐，-ad名词后缀，表示物] 色拉，沙拉，一种用盐调拌的凉菜</p><p>95、scend<br>scend，scens&#x3D;climb爬，攀</p><p>ascend [a-&#x3D;ad-表示to，scend爬;’爬上”] 上升;登高，攀登</p><p>descend [de-下，向下，scend爬] 下降，传下，遗传</p><p>96、sci<br>sci&#x3D;know知</p><p>science [sci知→知识，-ence表示抽象名词;’系统的知识”] 科学</p><p>scientist [见上，字母拼写改变’ce→t，ist表示人] 科学家</p><p>conscience [con-共同，完全，sci知，-ence名词后缀;’完成知道善恶是非之分”] 良心，道德心</p><p>97、sec，sequ<br>sec，sequ&#x3D;follow跟随</p><p>second [sec跟随;’跟随第一个之后”] 第二;[一小时第一次分为六十分，’第二次”再各分为六十秒] 秒</p><p>sequacious [sequ跟随，随从，-acious形容词后缀，…的] 盲从的</p><p>98、sect<br>sect&#x3D;cut切割</p><p>insect [in-入内，sect切，割;’切入”，’切裂”→昆虫躯体分节，节与节之间宛如’切裂”，’割断”之状，故名] 昆虫</p><p>section [sect切，-ion名词后缀，表示行为及行为的结果] 切开，切断，切下的部分，一部分;[由大机关中’分割”出来的小机关] 科，处，组，股</p><p>99、sent<br>sent，sens&#x3D;feel感觉</p><p>sentiment [sent感觉→感情，情绪，-i-，-ment名词后缀] 感情，情绪，思想感情，意见</p><p>consensus [con-同，共同，sens感觉，认识，意见，-us名词后缀;’共同的认识”] 共识，意见一致</p><p>sentence [sent感觉，-ence名词后缀;表达一种感觉或意义的一组单词] 句子</p><p>100、sid<br>sid&#x3D;sit坐</p><p>president [见上，-ent表示;’指挥者”，”统辖者”→首脑] 总统，大学校长，会长，总裁</p><p>assiduous [as-&#x3D;ad-，表示at，sit坐，-uous的;’能坐下来坚持工作的”] 刻苦的，勤奋的</p><p>101、sist<br>sist&#x3D;stand站立</p><p>assist [as-表示at，sist立，’立于一旁”] 帮助，援助，辅助</p><p>insist [in-加强意义，sist立;’坚定不移”] 坚决主张，坚持</p><p>102、son<br>son&#x3D;sound声音</p><p>sonic [son声音，-ic形容词后缀，…的] 声音的，音速的</p><p>supersonic [super-超，son声音，ic形容词后缀，…的] 超音速的</p><p>103、spect<br>spect&#x3D;look看</p><p>respect [re-再，重复，spect看;’再看”，’重复地看”→重视，看重] 尊重，尊敬</p><p>special [spec(&#x3D;spect)看→外观，形状，形象;-ial形容词后缀，…的;容易被’看”出的，外观明显的，形状特别醒目的] 特殊的，特别的</p><p>specimen [spec(-spect)看，-i-，men名词后缀;’给人看的东西] 样品，样本，标本</p><p>104、spir<br>spir&#x3D;breathe呼吸</p><p>conspire [con-共同，spir呼吸;’共呼吸”→互通气息] 共谋，同谋，阴谋，密谋策划</p><p>inspire [in-入，spir呼吸;’吸入”，吸气，注入→注入勇气，注入生气] 鼓舞，激励，吸入，使生灵感</p><p>105、tail<br>tail&#x3D;cut切割</p><p>tailor [tail切割→剪裁，-or表示人;剪裁者] 裁缝，成衣工，成衣商</p><p>detail [de-加强意义，tail切;’切碎的”，由整体切碎细分而成的部分] 细节，细目，详情，零件</p><p>106、tain，tan，tin<br>tain，ten，tin&#x3D;hold握，持，守</p><p>sustain [sus-&#x3D;sub-下，tain握，持;’在下面支持”] 支持，支撑，维持，供养</p><p>maintain [main&#x3D;man手，tain握，持;’to hold in the hand， to keep up，to uphold”] 保持，保存，维持，坚持，供养</p><p>continue [con-共同，一起，tin退，持;’把前后各种事物保持在一起”→使连在一起，使相连] 连续，继续，使连续，使继续</p><p>107、tect<br>tect&#x3D;cover掩盖</p><p>detect [de-除去，取消，tect掩盖;’除去掩盖”→揭露秘密→查明真相] 侦查，侦察，发觉</p><p>detection [见上，-ion名词后缀] 侦查，侦察，察觉</p><p>108、tele<br>tele&#x3D;far远</p><p>(tele现多用以表示与电波有关的事物)</p><p>telecontrol [tele远，control控制] 远距离控制，遥控</p><p>telephone [tele远，phon声音;’由远处通过电波传来的声音”] 电话</p><p>109、tempor<br>tempor&#x3D;time时</p><p>temporary [tempor时，-ary形容词后缀，…的;’?lasting for a time only”] 暂时的，临时的</p><p>contemporary [con-同，tempor时→时代，-ary形容词后缀，…的] 同时代的，同龄的，当代的;[-ary表示人] 同时代的人，同年龄的人</p><p>110、tend<br>tend(tends，tent)&#x3D;stretch伸</p><p>attend [at-表示to向，tend伸;’to stretch one’s mind to”，’把精神或心思伸向…’] 注意，关心，出席</p><p>attention [见上，tent&#x3D;tend，-ion名词后缀] 注意，关心，注意力</p><p>111、terr<br>terr&#x3D;earth，land土地，陆地</p><p>territory [terr土地，-it-，-ory名词后缀] 领土，领地</p><p>terrace [terr土地，-ace名词后缀] 台地，地坪，平台，阳台</p><p>112、text<br>text&#x3D;weave编织</p><p>textile [text编织，-ile名词后缀，表示物] 纺织品;[-ile形容词后缀，…的] 纺织的</p><p>pretext [pre-先，预先，text编织→编造;’预先编造的话”] 借口，托词</p><p>113、tract<br>tract&#x3D;draw拉，抽，引</p><p>tractor [tract拉，-or名词后缀，表示物] 拖拉机</p><p>attract [at-&#x3D;ad-表示to，tract抽，引] 吸引，诱惑</p><p>contract [con-共同，一起，tract拉;’把二者拉在一起”→使二者结合在一起] 订约，缔结，契约，合同;[‘共同拉紧”] 收缩，(使)缩小，收缩了的</p><p>114、un<br>un&#x3D;one一(un也作uni)</p><p>unite [un&#x3D;one一，单一，ite动词后缀，使成….;’使成为一个整体”] 统一，联合，团结</p><p>uniform [uni单一，form形式，式样] 一样的，相同的，制服</p><p>115 、urb<br>urb&#x3D;city</p><p>suburb [sub,下,靠近,urb 城市；“城下”,“靠近城”→城外→]郊区,郊外,近郊,城外</p><p>urban [urb城市，-an形容词后缀，…的] 城市的，都市的</p><p>116、vac<br>vac&#x3D;empty空(vac也作vacu)</p><p>vacant [vac空，-ant形容词后缀，…的] 空的，空白的，未被占用的</p><p>vacuum [vacu空，-um名词后缀] 真空，真空状态，真空度</p><p>117、vad<br>vad(vas)&#x3D;walk，go行走</p><p>invade [in-入，vad走;’走入”→闯入] 侵入，侵略，侵犯</p><p>invasion [见上，vad&#x3D;vas，-ion名词后缀，表示行为] 入侵，侵略</p><p>118、vari<br>vari&#x3D;change</p><p>variable [vari变化，-able形容词后缀，可…的] 可变的，反复不定的</p><p>variety [vari变化，-ety名词后缀，表示情况，性质] 变化，多样化，种种</p><p>vary [vari变化，i&#x3D;y] 改变，变化，变更</p><p>119、ven<br>ven&#x3D;come来</p><p>intervene [inter-之间，中间，ven来;’来到其间”→介入其中] 干预，干涉，介入</p><p>convene [con-共同，一起，ven来;’召唤大家来到一起”] 召集(会议)，集合</p><p>120、vert<br>vert，vers&#x3D;turn转</p><p>anniversary [ann年，-i-，连接字母，vers转，-ary名词后缀;’时间转了一年”] 周年纪念日，周年纪念;[-ary形容词后缀，…的] 周年纪念的，周年的</p><p>divorce [di-&#x3D;dis-分开，散，vorc&#x3D;vers转;’to turn apart”] 离婚，分离，脱离</p><p>reverse [re-回，反→倒，vers转] 倒转，翻转，回复，反向</p><p>version [vers转，-ion名词后缀;’转”→转换→由一种文字转换为另一种文字→转译→转译的文字] 译文，译本，翻译</p><p>121、vi，via<br>vi，via&#x3D;way路</p><p>obvious [ob-表示in(or on)，vi路，-ous形容词后缀，…的;’摆在大路上的”→大家都看得见的] 明显的，显而易见的，显著的</p><p>previous [pre-先，前，vi路→走路，行走，-ous形容词后缀，…的;’going fore”→foregoing] 以前的，先前的</p><p>via [via道路→经过…道路;’by the way of”] 取道，经由</p><p>122、vis<br>vis，vid&#x3D;see看</p><p>visit [vis看，观看→参观] 参观，游览，访问</p><p>visa [vis看→审视，审查→审查后的签字] 签证，签准</p><p>video [vid看;’可观看的图像”] 电视;电视的</p><p>123、vit<br>vit&#x3D;life生命</p><p>vital [vit生命，-al形容词后缀，…的] 生命的，有生命的，充满活力的，致命的，生命攸关的</p><p>vitamin(e) [vit生命，amine胺(一种化合物);’维持生命之物”] 维生素，维他命</p><p>124、viv<br>viv&#x3D;live活</p><p>survive [sur-超过，viv活;’活得比别人长”，’寿命超过别人”] 比…活得长，后死，幸存，残存</p><p>vivid [viv活，-id形容词后缀，…的] 活泼的，有生气的</p><p>多认词根，多识单词（128个）<br>125、aer(o)空气，空中，航空<br>aerial [aer空气，-ial形容词后缀] 空气的，大气的，航空的</p><p>aerogram [aero空中，gram书写→信;’空中信”] 无线电报，航空信件</p><h6 id="alt高"><a href="#alt高" class="headerlink" title="alt高"></a>alt高</h6><p><strong>词源</strong>：源自拉丁语，意思是“高”或“深”。它与表示高度或深度的词汇相关。在英语中，这个词根经常出现在与高度、升高、改变或深度相关的单词中。</p><p>以下是一些常见的包含词根“alt”的单词：</p><ol><li><p>表示<strong>高</strong></p><ol><li><p><strong>Altitude</strong>：<strong>alt</strong>（高） + <strong>-itude</strong>（度）</p><ul><li><strong>-itude</strong>，名词后缀， 表示 <strong>度</strong>，经度 longitude，纬度 latitude</li><li>海拔，高度，通常指的是相对于海平面的高度。</li><li>The airplane is flying at an altitude of 30,000 feet.（飞机在3万英尺的高度飞行。）</li></ul></li><li><p><strong>Exalt</strong> - **ex-**（出，向上） + <strong>alt</strong>（高）</p><ul><li><strong>使变高</strong>，所以是 <strong>升高</strong> <strong>提高</strong>，提升，赞扬；使得更高或更尊贵。</li><li>The crowd exalted the hero after his brave actions.（英雄的勇敢行为后，群众赞扬了他。）</li></ul></li><li><p><strong>Altimeter</strong> - <strong>alt</strong>（高） + <strong>meter</strong>（测量仪器）</p><ul><li>测高仪，用于测量高度的仪器，尤其是在航空中。</li><li>The pilot used the altimeter to determine the plane’s altitude.（飞行员使用测高仪来确定飞机的高度。）</li></ul></li><li><p><strong>Alto</strong> - <strong>alt</strong>（高） + <strong>-o</strong>（表示某种类型）</p><ul><li>女低音或男高音，一种音高介于男中音和女高音之间的声部。</li><li>She sings alto in the choir.（她在合唱团中唱女低音。）</li></ul></li><li><p><strong>Altar</strong></p><ul><li><strong>词源</strong>: “Altar”来自拉丁语“altare”，意为“高处”或“祭坛”。表明祭坛通常是放置在高处的地方，用于宗教仪式。</li><li><strong>释义</strong>: 祭坛，通常指宗教仪式中用来供奉的台或桌子。</li><li><strong>例句</strong>: They placed flowers on the altar during the ceremony.（他们在仪式中将花放在祭坛上。）</li></ul><p><strong>Altar</strong> 这个单词更符合“alt”词根的含义，强调的是一种物理高度或神圣性。</p></li></ol></li><li><p>表示<strong>改变</strong></p><ol><li><strong>alterable</strong>，<strong>可以改变的</strong></li></ol></li></ol><p>这个词根可以帮助我们理解和记忆许多与高度、深度、升高相关的词汇。</p><h6 id="holic"><a href="#holic" class="headerlink" title="holic"></a>holic</h6><p><strong>词源</strong>：“holic”并不是一个传统的词根，而是一个后缀，用于形成表示<strong>嗜好者</strong>或<strong>沉迷于某种事物的人</strong>的词汇。它源自阿拉伯语“حَلَقَة‎” (ḥalāqah)，经过法语演变为“alcoolique”，最终进入英语中，形成了像“alcoholic”这样的词。</p><p>在现代英语中，“-holic”通常与不同的词根结合，表示对某种事物上瘾或痴迷的人。以下是一些常见的例子：</p><ol><li><p><strong>Alcoholic</strong> - <strong>alcohol</strong>（酒精） + <strong>-holic</strong>（沉迷者）</p><ul><li><strong>释义</strong>: 酒鬼，酗酒者。</li><li><strong>例句</strong>: He is a recovering alcoholic.（他是一个正在戒酒的酗酒者）</li></ul></li><li><p><strong>Workaholic</strong> - <strong>work</strong>（工作） + <strong>-holic</strong>（沉迷者）</p><ul><li><strong>释义</strong>: 工作狂，沉迷于工作的人。</li><li><strong>例句</strong>: She is such a workaholic that she rarely takes vacations.（她是个工作狂，几乎不休假）</li></ul></li><li><p><strong>Shopaholic</strong> - <strong>shop</strong>（购物） + <strong>-holic</strong>（沉迷者）</p><ul><li><strong>释义</strong>: 购物狂，沉迷于购物的人。</li><li><strong>例句</strong>: His girlfriend is a shopaholic, always buying new clothes.（他女朋友是个购物狂，总是在买新衣服）</li></ul></li><li><p><strong>Chocoholic</strong> - <strong>choco</strong>（巧克力） + <strong>-holic</strong>（沉迷者）</p><ul><li><strong>释义</strong>: 巧克力狂，特别喜欢吃巧克力的人。</li><li><strong>例句</strong>: Being a chocoholic, she can’t resist a piece of chocolate cake.（作为一个巧克力狂，她无法抗拒巧克力蛋糕）</li></ul></li></ol><p><strong>总结</strong>: “-holic” 后缀用于描述对某种活动或物质有强烈迷恋或成瘾的人。在现代英语中，它已经广泛应用于各种非正式词汇中，用来形象地表达某人对某件事物的沉迷程度。</p><p>127、am爱<br>amateur [am爱，-ateur&#x3D;-ator表示人] 业余爱好者</p><p>amour [am爱→爱情，-our名词后缀] ,恋情</p><p>128、ambul行，走<br>ambulance [ambul走，-ance名词后缀;跟随军队在野外’到处行走流动”的医院] 野战医院，流动医院 救护车</p><p>ambulate [ambul走，-ate动词后缀] 行走，移动</p><p>129、anim生命，活，心神，意见<br>animal [anim生命，活的，-al名词兼形容词后缀] 动物，动物的</p><p>animation [anim生命，生气，-ation名词后缀] 生气;活跃</p><p>130、anthrop(o)人，人类<br>anthropology [anthropo人类，-logy…学] 人类学</p><p>philanthropy [phil爱，anthrop人类，-y表抽象名词;’爱人类”]慈善事业，博爱主义</p><p>131、aqu水<br>aquarium [aqu水，-arium表示场所地点;’放养水生动物的地方”] 水族馆，养鱼池</p><p>aquatic [aqu水，-atic形容词后缀，…的] 水的，水中的</p><p>132、arch统治者，首脑archy统治<br>anarchy [an-无，archy统治→政府] 无政府状态</p><p>patriarch [patri父，arch首脑，长] 家长，族长</p><p>133、avi鸟<br>aviate [avi鸟→飞行，-ate动词后缀] 飞行，驾驶飞机</p><p>aviator [avi鸟→飞行，-ator名词后缀，表示人] 飞行员，飞机驾驶员</p><p>134、bat打<br>battle [bat打，-le动词后缀] 战斗，斗争;[转为名词] 战役，会战</p><p>debate [de-加强意义， bat打;’打击”对方→驳倒对方] 争论，辩论</p><p>135、biblio书<br>bibliographer [biblio书，graph写，-er人] 书目提要编著人</p><p>bibliographize [biblio书，graph写，-ize动词后缀] 编写书目提要</p><p>136、brig战斗，打<br>brigade [brig战斗，-ade名词后缀;’战斗的单位”] 旅，队</p><p>brigand [brig打→劫掠，抡劫，-and名词后缀] 土匪，强盗</p><p>137、cad，cas降落，降临<br>case [cas降;’突然降临的”，’偶然发生的”的情况] 情况，情形，状况</p><p>occasion [oc-加强意义，cas降，-ion名词后缀;’偶然降临的”] 时机，机会，场合</p><p>138、cert确实，确信<br>certain [cert确实，-ain形容词后缀] 确实的，确信的，一定的</p><p>certainly [见上，-ly副词后缀，…地] 确实地，一定地，当然地</p><p>certainty [见上，-ty名词后缀] 确实，必然，肯定，必然的事</p><p>139、chron时<br>chronic [chron时间，-ic…的;’拖长时间的”] 长时间的，长期的，(疾病)慢性的</p><p>chronicity [见上，-icity名词后缀] 长期性，慢性</p><p>140、cid降落，降临<br>accident [ac-加强意义，cid降;’偶然降临的事”] 偶然的事，意外的事</p><p>incident [in-加强意义，cid降;’突然降临的事”] 事变，事件</p><p>141、clin倾<br>decline [de-加强意义， clin倾] 倾斜，下倾，衰落</p><p>incline [in-加强意义，clin倾] 倾斜，倾向于，偏爱，喜爱</p><p>142、cosm(o)世界，宇宙<br>cosmonaut [cosmo宇宙，naut船→航行者] 宇宙航行员</p><p>cosmos 宇宙</p><p>143、cracy统治<br>crat支持(或实行)…统治的人</p><p>democracy [demo人民，cracy统治;’人民统治”→人民做主] 民主，民主主义，民主政治，民主政体</p><p>democrat [demo人民，crat主张…统治的人] 民主主义者</p><p>144、cub躺，卧<br>cubicle [cub卧，-icle名词后缀，表示小;’睡觉”的地方] 小卧室，小室</p><p>incubate [in-加强意义， cub卧，伏，-ate动词后缀;’伏卧在卵上”] 孵卵，伏巢，孵化</p><p>145、cult耕，培养<br>cultivate [culti耕，培养，-ate动词后缀] 耕作，养殖，培养</p><p>culture [cult培养，培养，-ure名词后缀;’由教养所形成的”] 文化</p><p>146、cycl(c)圆，环，轮<br>unicycle [uni单一，独，cycl轮] 独轮脚踏车</p><p>bicycle [bi-两，二，cycl轮;’两轮车”] 自行车</p><p>tricycle [tri三，cycl轮] 三轮脚踏车，三轮摩托车</p><p>auotcycle [auto-自己→自动，cycl轮→车] 摩托车，机器脚踏车</p><p>147、dem(o)人民<br>democracy [demo人民，cracy统治;’人民统治”→人民做主] 民主，民主政治，心政体，民主主义</p><p>democrat [见上，crat主张…统治的人] 民主主义者</p><p>148、dexter右<br>dexter 右边的，右侧的</p><p>dexterous [dexter右，-ous形容词后缀，…的;右手比左手灵巧敏捷] 灵巧的，敏捷的，伶俐的</p><p>149、doc教<br>doctor [doc教→指教，-or人;’指教者”] 医生，博士</p><p>docent [doc教，-ent名词后缀，表示人] 教员，讲师</p><p>150、dom屋，家<br>domestic [dom屋，家，-tic形容词后缀，…的] 家里的;(引申为)国内的</p><p>domesticity [见上，-ity名词后缀] 家庭生活</p><p>151、dorm睡眠<br>dormitory [dorm睡眠，-ory名词后缀，表场所，地点] 集体寝室，社会公德</p><p>dormitive [dorm睡眠，-ive名词及形容词后缀] 安眠的;安眠药</p><p>152、drom跑<br>aerodrome [aero航空→飞机，drom跑;’路飞机的地方”] 飞机场</p><p>motordrome [motor汽车，drom跑;’跑汽车的地方”] 汽车比赛场，汽车试车场</p><p>153、ego我<br>ego 自我，自负</p><p>egoism [ego自我，-ism主义] 自我主义，利已主义</p><p>154、err漫游，走，行<br>errant [err漫游，-ant形容词后缀，…的] 周游的，飘泊的</p><p>error [err漫游，走→走离正道→走错，-or抽象名词后缀] 错误，谬误</p><p>155、fabl，fabul言<br>fable [fabl言] 寓言，传说</p><p>fabulist [fabul言，-ist…人] 寓言家，撒谎者</p><p>156、feder联盟<br>federate [feder聪明，-ate形容词兼动词后缀] 同盟的，联邦的;(使)结成联盟(成联邦)</p><p>federation [feder联盟，-ation名词后缀] 聪明，同盟，联合会，联邦政府</p><p>157、ferv沸，热<br>fervid [ferv热，-id形容词后缀，…的] 炽热的，热情的，热烈的</p><p>fervor [ferv热，-or抽象名词后缀] 炽热，热情，热烈</p><p>158、fict，fig塑造，虚构<br>fiction [fict虚构，杜撰，-ion名词后缀] 虚构，杜撰，捏造;[虚构的事] 小说</p><p>figure [fig塑造，制作，-ure名词后缀，’制作出来”的样子，’塑造成”的形状] 外形，轮廓，塑像，形象</p><p>159、fid信任<br>confidence [con-加强意义，fid信任，-ence名词后缀] 信任，信心，自信</p><p>self-confidence [self自己，confidence信任，信心] 自信</p><p>160、fil线<br>file [fil线，’人或物排列成一条线”] 行列，纵列</p><p>profile [pro-向前，fil线→线条;’用线条勾画”] 描画…的轮廓，外形，轮廓，侧面像</p><p>161、flat吹<br>inflate [in-入，flat吹;’吹入气体”] 使充气，使膨胀，使通货膨胀</p><p>inflator [见上，-or表示人或物] 充气者，充气机，打气筒</p><p>162、flect，flex弯曲<br>reflect [re-回，flect弯曲;’弯回”折回，返回] 反射，反映</p><p>flex 弯曲，折曲</p><p>163、flict打击<br>afflict [af-表示at，to等意义，flict打击] 使苦恼，折磨</p><p>conflict [con-共同，flict打击，’共同打”→彼此互打] 冲突，战斗，交锋，斗争</p><p>164、frag，fract破，折<br>fragment [frag破，-ment名词后缀，表示物] 碎片，破片，碎块</p><p>fraction [fract破，折，-ion名词后缀] 小部分，片断，分数</p><p>165、frig冷<br>frigidity [firg寒冷，-idity名词后缀] 寒冷，冷淡</p><p>refrigerator [见上，-or表示物] 冰箱，冷冻机，冷藏库</p><p>166、fug逃，散<br>refuge [re-回，fug逃;’逃回”到安全地方] 避难</p><p>lucifugous [luci光，fug逃避，-ous…的] 避日光的</p><p>167、fund，found底，基础<br>fund [fund基础;’创办事业的基础”，’底子”→本钱] 基金</p><p>found [found基础] 为(房屋等)打基础，建立，创立</p><p>founder [见上，-er者] 奠基者，创立者</p><p>foundress [见上，-ress表示女性] 女奠基者，女创立者</p><p>168、gam婚姻<br>monogamy [mono-单一，gam婚姻，-y名词后缀;’单婚”，一夫一妻] 一夫一妻制</p><p>bigamy [bi-双，重，gam婚姻，-y名词后缀] 重婚(罪)</p><p>169、gran谷物，谷粒<br>granary [garn谷物， -ary表示场所，地点] 谷仓，粮仓，产粮区</p><p>grange [gran谷物;’生产谷物的地方”] 农场，农庄，田庄</p><p>170、grav重<br>gravid [grav重，-id…的;’负重的”，’重身子”，’heavy with child”] 怀孕的，妊娠的</p><p>grave [grav重] 重大的，严重的</p><p>171、greg群，集合<br>congregate [con-共同，greg集合，-ate动词兼形容词后缀] (使)集合;集合在一起的，集体的</p><p>segregate [se-分开，离开，greg群，-ate动词后缀;’离群”，’离开集体”] (使)分离，(使)分开，使隔离</p><p>172、gyn，gynec(o)妇女<br>gynecology [gyneco妇女，-logy…学] 妇科学，妇科</p><p>philogyny [philo爱好，gyn妇女，-y名词后缀] 对女人的爱好，爱女人</p><p>173、hal呼吸<br>inhale [in-入，hal呼吸;’to breathe in”] 吸入，吸气</p><p>exhale [ex-出，hal呼吸;’to breathe out”] 呼出，呼气</p><p>174、helic(o)螺旋<br>helicopter [helico螺旋，旋转，pter翼;’装有旋转的翼”，利用”旋翼”飞行] 直升飞机</p><p>heliport [heli&#x3D;helicopter] 直升飞机场</p><p>175、hes，her粘着<br>hesitate [hes粘着，-it-，-ate动词后缀;’粘着”在固定地方→踌躇不前，裹足不前] 踌躇，犹豫</p><p>adhere [ad-表示at ，to，her粘] 粘附，胶着，依附</p><p>176、ign火<br>ignite [ign火，-ite动词后缀] 点燃，点火于，使燃烧，着火</p><p>ignition [ign火，-ion名词后缀] 点火，着火</p><p>177、integr整，全<br>integral [integr整，全，-al…的] 完整的，整体的</p><p>integrality [见上，-ity名词后缀] 完整性，完全</p><p>178、junct连接，连结<br>junction [junct连接，-ion名词后缀] 连接，接合，接合点</p><p>adjunction [见上，-ion名词后缀] 附加，添加</p><p>179、later边<br>unilateral [uni单独，later边，-al…的] 一边的，单边的，一方的，片面的，单方面的</p><p>multilateral [multi-多，见上] 多边的，涉及多方面的</p><p>180、leg①读<br>legible [leg读， -ible可…的] 可读的，易读的</p><p>legend [leg读，-end名词后缀;’读物”] 传奇，小说，传奇文学</p><p>181、leg②，legis法<br>legal [leg法，-al…的] 法律上的，合法的</p><p>legislature [见上，-ure名词后缀] 立法机关</p><p>182、luc光<br>lucent [luc光，-ent形容词后缀] 发亮的，透明的</p><p>lucency [luc光，-ency名词后缀] 发亮，透明</p><p>183、lumin光<br>illuminate [il-加强意义，lumin光，-ate动词后缀] 照亮，照明，阐明，使明白</p><p>relumine [re-再，lumeni光→照] 重新点燃，使重新照亮</p><p>184、magn(i)大<br>magnify [magni大，-fy使…] 放大，扩大</p><p>magnifier [见上，-er者] 放大者，放大器，放大镜</p><p>185、matr(i)，metro母<br>matriarch [matri母→女性，arch首脑，长] 女族长，女家长</p><p>matron [matr母，-on名词后缀] 主妇，老妇</p><p>186、mega大<br>megaphone [mega大，扩大，phon声音] 扩音器，喇叭筒，喊话筒</p><p>megascope [mega大，scop镜] 大显微镜</p><p>187、mens测量<br>immense [im-不，无，mens测量;’无法测量”其大小的，’不能测量”的] 广大无边的，巨大的，无限的</p><p>mensurable [mens测量，-able可…的] 可测量的</p><p>188、ment心，神，智，思，意<br>mental [ment心，智，精神，-al…的] 智力的，精神的，思想的，内心的</p><p>mention [ment意识→注意;’使注意”，’使意识到”→提到，提及] 说起，提到，论及</p><p>189、min伸出，突出<br>prominent [pro-向前，min突出，-ent…的] 突出的，显著的，杰出的，卓越的，著名的</p><p>eminent [e-出，外，min突出，-ent…的] 杰出的，突出的，著名的</p><p>eminence [见上，-ence名词后缀] 杰出，卓越，著名</p><p>190、misc混合，混杂<br>miscellanist [misc混杂，-ist者] 杂集作者，杂文家</p><p>miscegenation [misc混杂，-e-，gen生殖→种族，-ation名词后缀] 人种混杂，混血</p><p>191、mis(o)恨，厌恶<br>misanthropy [mis厌恶，anthrop人类，-y名词后缀] 厌恶人类，厌世，愤世嫉俗</p><p>misoneism [miso厌恶，ne&#x3D;neo新，-ism主义] 厌新，守旧主义</p><p>192、mon①告诫，提醒<br>monument [mon告诫，提醒→不要忘记→记住→纪念，-u-，-ment名词后缀，表示物;’纪念之物”] 纪念碑，纪念像，纪念物</p><p>monitor [mon告诫，-itor名词后缀，表示人;’告诫者”，’劝告者”] (学校的)班长，级长，监督睡，提醒者，告诫者</p><p>193、mon②单独，一个<br>monk [mon单独，孤独→孤身一人，独身者，过孤独生活者] 僧侣，修道士，出家人</p><p>monkery [见上，-ery表示地方，场所] 修道院，寺院</p><p>194、mur墙<br>mural [mur墙壁，-al形容词及名词后缀] 墙壁的，墙壁上的;壁画</p><p>mure [mur墙;’用墙围起来”] 监禁，禁锢</p><p>195、mut变换<br>mutual [mut变换→交换→互相之间，-ual…的] 互相的，彼此的</p><p>commute [com-共同，mut交换] 变换，用…交换</p><p>196、nat诞生<br>nation [nat生，-ion名词后缀;生，诞生，生长→血统的联系，种族] 民族，国家</p><p>native [nat出生，-ive名词兼形容词后缀] 天生的，土生的，出生地的，出生的;本地人，土人</p><p>197、nav船<br>navy [nav船→船队→舰队，-y名词后缀] 海军</p><p>naval [nav船→军舰，-al…的] 船的，军舰的，海军的</p><p>198、nect，nex结，系<br>connect [con-共同，一起，nect结，系;’结在一起”] 连结，连接，把…联系起来</p><p>annex [an-表示to，nex结;’连结在一起”，’结合起来”] 合并，并吞，兼并(领土等)，附加</p><p>199、negr，nigr黑<br>Negro [negr黑，-o名词后缀，表示人] 黑人</p><p>Negress [negr黑，-ess表示女性] 女黑人</p><p>200、nihil无<br>annihilate [an-加强意义，nihil无，不存在→消亡，-ate动词后缀，使…;’使消亡”] 消灭，歼灭</p><p>nihilism [nihil无→虚无，ism主义] 虚无主义</p><p>201、noc，nox伤害<br>innocent [in-不，无，noc伤害，-ent…的;’incapable of doing harm”→guiltless，”不会做出伤害之事”] 无罪的，清白的，天真的，无害的</p><p>nocent [noc伤害，-ent…的] 有害的，有毒的，加害的，有罪的</p><p>202、noct(i)夜<br>noctiflorous <a href="%E6%A4%8D%E7%89%A9"> nocti夜,flor花,-ous…的</a>夜间开花的</p><p>noctiluca [ nocti夜,luc光,-a名词后缀]夜光虫</p><p>203、norm规范，正规，正常<br>normal [norm正规，-al…的] 正规的，正常的</p><p>abnormal [ab-离开，normal正常的] 反常的，变态的，不规则的</p><p>204、nutri营养<br>nutriology [nutri营养，-o-，连接字母，-logy学] 营养学</p><p>nutriment [nutri营养，-ment名词后缀，表示物] 营养品</p><p>205、orn装饰<br>adorn [ad-加强意义，orn装饰] 装饰，打扮，使生色</p><p>adornment [见上，-ment名词后缀] 装饰，装饰品</p><p>206、par生，产<br>parent [par生，生养，-ent名词后缀，表示人;’生养子女的人”，’生育者”] 父亲，母亲[复数]双亲，父母</p><p>parentage [见上，-age抽象名词后缀] 出身，家系，门第</p><p>207、parl说，谈<br>parliament [parl说，谈→议论→商议商谈→会议，-ia-，-ment名词后缀] 议会，国会</p><p>parlance [parl说，-ance名词后缀] 说法，用语，发言，讲话</p><p>208、past喂，食<br>pasture [past喂，食，-ure表示行为，事物;’喂牛、羊”，’牛羊吃草”] 放牧，牧场;[转为动词] (牛、羊)吃草，放(牛、羊)吃草</p><p>pasturage [见上，-age表示行为] 放牧;[-age表示场所] 牧场</p><p>paste [past食，吃;一种’食物”] (做点心用的)加油脂的面团，面糊，糊状物，浆糊</p><p>209、paht(o)，pathy疾病，疗法<br>pathology [patho病，-logy…学] 病理学</p><p>zoopathology [zoo动物，pathology病理学] 动物病理学</p><p>210、patr(i)父，祖<br>patriarch [patri父，祖，arch首脑，长] 家长，族长</p><p>patriot [patri祖→祖国，-ot名词后缀，表示人] 爱祖国者，爱国主义者</p><p>211、ped①脚，足<br>expedition [ex-出外，ped足→行走，-ition名词后缀;’出行”→远行] 远征，远征队</p><p>biped [bi-两个，ped足] 两足的，两足动物</p><p>centipede [centi-百，ped足;’百足”虫] 蜈蚣</p><p>impede [im-入，入内，ped脚;’插入一脚”→制造阻碍→阻挡] 阻止，妨碍，阻碍</p><p>212、ped②儿童，小孩<br>pedagogy [ped儿童，agog引导，-y名词后缀;’引导儿童的方法”→教育儿童的方法] 教育学，教学法</p><p>pedagogics [见上，-ics学] 教育学，教学法</p><p>213、petr(o)石<br>petroleum [petr石，ol(e) 油，-um名词后缀] 石油</p><p>petrify [petri石，-fy使…化] 使石化</p><p>214、phag吃<br>anthropophagous [anthropo人，phag吃，-ous…的] 食人肉的</p><p>215、phil(o)爱<br>philanthropy [phil爱，anthrop人类，-y名词后缀;’爱人类”] 博爱主义，慈善，善心</p><p>philanthropist [见上，-ist者] 慈善家</p><p>216、phob(ia)怕<br>photophobia <a href="%E5%8C%BB">photo光，phob怕，-ia名词后缀</a> 怕光，畏光，羞明</p><p>217、plex重叠，重<br>complex [com-共同，plex重叠，重复→多重，复杂] 复杂的，综合的</p><p>multiplex [multi-多，plex重] 多重的，多样的，复合的</p><p>218、polis城市<br>necropolis [necro死尸，polis城;’死者之城”] 坟地</p><p>megalopolis [megalo特大，polis城] 特大的城市</p><p>219、prim第一，最初<br>primacy [prim第一，-acy名词后缀] 第一位，首位</p><p>primitive [prim最初，-itive…的] 原始的，早期的</p><p>220、radic根<br>radical [radic根，-al…的] 根本的，基本的;[转为名词] 根部，基础</p><p>eradicate [e-除去，radic根，-ate动词后缀] 根除，除根，斩根，连根拨</p><p>221、ras，rad擦，刮<br>erase [e-去，除，ras擦，刮] 擦去，抹掉，除去</p><p>eraser [见上，-er表示物] 擦除器(如黑板擦，橡皮等)</p><p>abrade [ab-离开，去，rad擦] 擦掉，磨掉，磨，擦</p><p>222、rid，ris笑<br>ridicule [rid笑，-icule名词后缀] 嘲笑，嘲弄，奚落</p><p>ridiculous [见上，-ous…的] 可笑的，荒谬的</p><p>risible [ris笑，-ible可…的] 爱笑的，能笑的，可笑的</p><p>223、rod，ros咬，啮<br>corrode [cor-表加强意义，rod咬→咬坏→侵蚀] 腐蚀，侵蚀</p><p>corrodible [见上，-ible可…的] 可腐蚀的，可侵蚀的</p><p>erode [e-去…掉，rod咬;’咬掉”，’咬坏”] 腐蚀，侵蚀</p><p>224、rot轮，转<br>rotary [rot轮，转，-ary名词及形容词后缀] 旋转的</p><p>rotate [rot轮，转，-ate动词后缀] 旋转，轮流，循环</p><p>225、rud原始，粗野<br>rude 原始(阶段)的，未开化的，粗野的</p><p>rudeness [见上，-ness名词后缀] 原始，粗野</p><p>226、rur，rus农村<br>rural [rur乡村，农村，-al的] 农村的，田园的</p><p>rurality [见上，-ity名词后缀] 农村景色，田园风味</p><p>227、sat，satis，satur足，满，饱<br>satiety [sat饱，-i-，-ety抽象名词后缀] 饱足，过饱</p><p>satisfy [satis满，-fy动词后缀，使…] 使满足，使满意</p><p>saturable [satur饱，-able可…的] 可饱和的</p><p>228、sen老<br>senior [sen老→年长， -ior形容词及名词后缀] 年长的，年纪较大的，年长者</p><p>senate [sen老，-ate名词后缀] 参议院，上议院，(古罗马的)元老院议员</p><p>229、simil，simul相似，相同<br>similar [simil相似，-ar…的] 相似的，类似的，相似的东西</p><p>simulate [simul相似，-ate动词后缀;’作出相似的样子”] 模仿，模拟，假装，冒充</p><p>230、sol①单独<br>sole 单独的，唯一的</p><p>solitary [见上，-ary…的] 单独的，独居的</p><p>231、sol②太阳<br>solar [sol太阳，-ar形容词后缀，…的] 太阳的，日光的</p><p>insolate [in-构成动词，sol太阳，-ate动词后缀] 曝晒</p><p>232、soph智慧<br>philosopher [philo爱，soph智慧→知识，哲理，-er者] 哲学家，思想家</p><p>philosophy [见上，-y名词后缀] 哲学，哲理</p><p>233、sper希望<br>desperate [de-否定，失去，无，sper希望，-ate形容词后缀，…的] 失望的，无望的，绝望的;(因绝望而)不顾一切的，拼死的</p><p>despair [de-否定，失去，无，spair&#x3D;sper希望] 绝望，捻，失去信心</p><p>234、spers，spars散，撒<br>disperse [di-&#x3D;dis-分开，spers散] 分散，散开，使分散</p><p>sparse [spars散→散开→稀疏] 稀少的，稀疏的</p><p>235、splend发光，照耀<br>splendid [splend发光，-id形容词后缀，…的] 有光彩的，灿烂的，辉煌的，显著的，杰出的</p><p>splendent [splend发光，-ent形容词后缀，…的] 发亮的，有光泽的，辉煌的，显著的</p><p>236、stell星<br>stellar [stell星，-ar形容词后缀，…的] 星的，星球的，星形的，似星的</p><p>interstellar [inter-中间，际，stell星，-ar…的] 星际的</p><p>237、tact，tag触<br>contact [con-共同，tact触] 接触，联络，联系</p><p>contagion [con-共同，tag触，-ion名词后缀] 接触传染;传染病</p><p>238、the(o)神<br>theology [theo神，-logy…学] 神学</p><p>atheism [a-无，theism] 无神论</p><p>atheist [见上，-ist者] 无神论者</p><p>239、ton音<br>tonality [ton音，-ality名词后缀] 音调</p><p>tone [ton音] 音，音调，调子</p><p>240、tort扭<br>torture [tort扭→扭弯→折→折磨，-ure名词后缀] 拷打，折磨，严刑，痛苦;[转为动词] 拷打，使痛苦，拷问，折磨，刑讯;[扭→扭歪] 歪曲，曲解</p><p>distort [dis-离，tort扭;’扭离正形”] 弄歪(嘴脸等)，使变形，歪曲，曲解(事实)</p><p>241、tour迂回，转<br>tour [‘迂回”而行，到处;转”游] 旅游，游历</p><p>tourism [见上，-ism名词后缀，表示行为] 旅游，导游业</p><p>242、trud，trus推，冲<br>intrude [in-入，trud冲，闯;’闯入”，’冲入”] 侵入，入侵，闯入</p><p>extrusion [见上，-ion名词后缀] 逐出，喷出，挤压</p><p>243、tut，tuit监护，看管<br>tutor [tur监护，看管→管教，指导，-or者;’指导儿童者”，’管教儿童者”] 家庭教师，指导教师，监护人</p><p>tutee [tur监护，看管→管教，指导，-ee被…的人] 被教导者，被指导者，学生</p><p>244、umbr阴影<br>umbrella [umbr阴影，-ella名词后缀，表小;’遮有小阴影之物”] 伞</p><p>umbrage [umbr阴影，-age名词后缀] 树荫，荫影</p><p>245、ut，us用<br>utility [ut用，-ility名词后缀] 效用，有用，实用，功利</p><p>usage [us用，-age名词后缀] 使用，用法</p><p>246、vag走，漫游<br>extravagant [extra-以外，vag漫步，走-ant…的;’走出范围之外的”→超出范围的] 过分的，过度的，无节制的，奢侈的，浪费的</p><p>vague [vag漫游，游荡→游移不定→(语义)不确定，不明确] 含糊的，不明确的</p><p>247、val强<br>invalid [in-不，val强，-id形容词后缀，..的;’不强壮的”] 病弱的，伤残的，病人，伤病员</p><p>valiant [val强→勇，-iant&#x3D;-ant…的] 勇敢的，勇猛的，英勇的</p><p>248、van空，无<br>vanish [van空，无，-ish名词后缀] 突然不见，逐渐消散，消失</p><p>vanity [van空，-ity名词后缀] 空虚，虚夸，虚荣心</p><p>249、ver(i)真实<br>very [ver真实，-y形容词后缀，…的] 真实的，真正的，真的，十足的</p><p>verify [veri真实，-fy动词后缀] 证实，核实，查证</p><p>250、voc，vok声音，叫喊<br>vocal [voc声，-al…的] 有声的，用语言表达的，口述的，歌唱的</p><p>revoke [re-回，vok叫;’叫回”] 撤回，撤销</p><p>251、vol，volunt意志，意愿<br>volition [vol意志，-ition名词后缀] 意志，意志力</p><p>volunteer [volunt意志，志愿，-eer者] 自愿参加者，志愿者，志愿兵</p><p>252、volu，volv滚，转<br>evolve [e-出，外，volv滚;’向外滚动”→向前滚进] 进化，使进化，进展，演化</p><p>evolution [见上，-iton名词后缀] 进化，进展，演化</p><h2 id="前缀-后缀总结"><a href="#前缀-后缀总结" class="headerlink" title="前缀-后缀总结"></a>前缀-后缀总结</h2><p><strong>一个英语单词可以分为三个部分：前缀，词根，后缀；单词中位于词根前面的部分就是前缀，前缀可以改变单词的意思。后缀又称词尾，是一种后置于其他词素后的词缀。</strong></p><p>第一部分 英语单词前缀<br>1、a- 在……之上<br>aboard prep. 在（船、飞机、车）上</p><p>2、ab-, abs- 离开，偏离<br>abnormal a. 反常的</p><p>3、anti- 先<br>anticipate vt. 预期</p><p>4、ac-, ad-, af-, ag-, ap-, ar-, as-, at-表加强意<br>accuse vt. 指控</p><p>5、bene- 好<br>beneficial a. 有益的</p><p>6、bio- 生命<br>biology n. 生物学</p><p>7、cata- 向下<br>catalog(ue) n. 目录</p><p>8、col-, com-, con-, co-, cor- 共同，一起<br>combat n. 战斗</p><p>9、contra- 相反<br>contrast v. 对比，对照</p><p>10、de- 离；加强词意<br>depart vi. 离开；背离</p><p>11、di-, dif-, dis- 分开<br>discard vt. 丢弃</p><p>12、dia- 穿过<br>diameter n. 直径</p><p>13、e-, ef-, ex- 出，出来<br>export v. 出口</p><p>14、em-, en- 在……之中；使……<br>enclose vt. 围住</p><p>15、fore- 前<br>forehead n. 前额</p><p>16、i-, il-, im-, in- 不<br>indifferent a. 不关心的</p><p>17、im-, il- 在……上<br>impose vt. 把……强加于</p><p>18、in- 进入；向……<br>indicate vt. 表明，示意</p><p>19、inter- 在……之间<br>interfere vi. 干涉</p><p>20、micro-, mini- 小<br>microwave n. 微波</p><p>21、multi- 许多<br>multiple a. 复合的，多重的</p><p>22、non- 不<br>nonsense n. 废话</p><p>23、ob-, op- 相反<br>oppose vt. 反对</p><p>24、out- 向外，出来<br>outlet n. 出口</p><p>25、over- 越过<br>overlook vt. 忽视</p><p>26、per- 穿过<br>perspective n. 视角</p><p>27、pre- 在…之前<br>pregnant a. 怀孕的</p><p>28、pro- 向前<br>promote vt. 促进</p><p>29、re- 向后；再次<br>recall vt. 回忆起</p><p>30、semi- 半<br>semiconductor n. 半导体</p><p>31、sub- 在……下<br>subway n. 地铁</p><p>32、super- 在……之上，超级的<br>superior a. 优于……的</p><p>33、trans- 横过，越过<br>transplant vt. 移栽</p><p>34、tri- 三<br>triangle n. 三角</p><p>35、twi- 表示二、两<br>36、un- 不<br>uncover vt. 揭露</p><p>37、under- 在……下面，低于……<br>underline vt. 在……下面划线</p><p>38、uni- 一个<br>unique a. 唯一的，独特的</p><p>39、vice- 表示副<br>40、with- 表示向后，相反<br>41、常见数字前缀<br>一，单，独：mon- &#x2F;uni-</p><p>二，du- &#x2F;duo- &#x2F;twi- &#x2F;bi- &#x2F;bin- &#x2F;bis- &#x2F;pen-</p><p>三，tre-&#x2F;tri- &#x2F;</p><p>四，quart-</p><p>五，penta-&#x2F;pent-</p><p>六，semester-&#x2F; hexa-</p><p>七，septem-&#x2F;hepta-</p><p>八，oct-</p><p>九，ennea-&#x2F;nov- &#x2F;non-</p><p>十，deca-</p><p>百，hecto-</p><p>千，kilo-</p><p>万，myri-</p><p>大，mega-&#x2F;mlcro-&#x2F; macro-&#x2F;magni-</p><p>小，micro-&#x2F;mini-</p><p>多数，multi-&#x2F;poly-</p><p>分数，deci-&#x2F;milli- &#x2F;cent-</p><p>一半：hemi- &#x2F;semi-</p><p><strong>参考地址：</strong><a href="https://www.jianshu.com/p/46308f04ee5a">整理：常见词根词缀 - 简书</a></p><p>第二部分 英语单词后缀<br>1、动词后缀：-ate,-en, -(i)fy, -ish, -ize&#x2F;ise<br>2、副词后缀：-ly,-ward(s), -way(s)、-wise<br>3、形容词后缀：-able&#x2F;ible,-full, -、-ive、-ful、-ous、-able、-less、-ant、-ent、-ed、-ish、-like、-ly、-ic、-al、-ial、-ical<br>4、名词后缀：-ability，-acity，-ain，-aire，-ance，-ation，-dom，-ence，-eer，-ine，-kin<br>5、表示“人”的名词后缀：-ist,-man, -er&#x2F;or, -ee, -ant<br>6、表示“小”的名词后缀：-el,-let, -(c)ule<br>7、抽象名词后缀：-ion,-hood, -ic(s), -ism, -ship, -ty<br>8、名词后缀：-ion、-tion、-ation、-sion、-ance、-ence、-ant、-ent、-ing、-age、-ade、-an、-dom、-logy、-hood<br>9、否定后缀<br><strong>参考地址：</strong><a href="https://wenku.baidu.com/view/1e2109d5370cba1aa8114431b90d6c85ec3a8800.html">英语常见词缀总结 - 百度文库</a></p><h2 id="学习词根词缀的二个好地方"><a href="#学习词根词缀的二个好地方" class="headerlink" title="学习词根词缀的二个好地方"></a>学习词根词缀的二个好地方</h2><h3 id="1-词根词源字典"><a href="#1-词根词源字典" class="headerlink" title="1.词根词源字典"></a>1.词根词源字典</h3><p><a href="https://www.etymonline.com/cn">词源在线 | 英语词源词根词典 (etymonline.com)</a></p><h3 id="2-词根字典"><a href="#2-词根字典" class="headerlink" title="2.词根字典"></a>2.词根字典</h3><p><a href="http://www.cgdict.com/">http://www.cgdict.com/</a></p><h2 id="可借鉴相关资源"><a href="#可借鉴相关资源" class="headerlink" title="可借鉴相关资源"></a>可借鉴相关资源</h2><p>英语词根词缀记忆大全共（298页）<br>地址：<a href="https://wenku.baidu.com/view/735d55ba2dc58bd63186bceb19e8b8f67c1cefe5.html?rec_flag=default&sxts=1582900018571">https://wenku.baidu.com/view/735d55ba2dc58bd63186bceb19e8b8f67c1cefe5.html?rec_flag=default&amp;sxts=1582900018571</a></p><p>英语常见词根词缀大全（157页）<br>地址：<a href="https://wenku.baidu.com/view/20c9d7eedcccda38376baf1ffc4ffe473268fd28.html?sxts=1582900091865">https://wenku.baidu.com/view/20c9d7eedcccda38376baf1ffc4ffe473268fd28.html?sxts=1582900091865</a></p><p>英语词根词缀全表解析（136页）<br>地址：<a href="https://wenku.baidu.com/view/083a81522bf90242a8956bec0975f46527d3a7e5.html?rec_flag=default&sxts=1582899963896">https://wenku.baidu.com/view/083a81522bf90242a8956bec0975f46527d3a7e5.html?rec_flag=default&amp;sxts=1582899963896</a></p><p>252个英语重要词根(有例词并整理)（53页）<br>地址：<a href="https://wenku.baidu.com/view/0394caed5901020206409c22.html">https://wenku.baidu.com/view/0394caed5901020206409c22.html</a></p><p>英语词根词缀表(最全)（15页）<br>地址：<a href="https://wenku.baidu.com/view/2fd2b1887fd5360cbb1adb69.html?sxts=1582900194812">https://wenku.baidu.com/view/2fd2b1887fd5360cbb1adb69.html?sxts=1582900194812</a></p><p>高中英语词根词缀表（18页）<br>地址：<a href="https://wenku.baidu.com/view/daa3844aa517866fb84ae45c3b3567ec102ddc9f.html?rec_flag=default&sxts=1582900117461">https://wenku.baidu.com/view/daa3844aa517866fb84ae45c3b3567ec102ddc9f.html?rec_flag=default&amp;sxts=1582900117461</a></p><p>常用英语词根词缀分类表（6页）<br>地址：<a href="https://wenku.baidu.com/view/e404c8f558fb770bf68a551e.html">https://wenku.baidu.com/view/e404c8f558fb770bf68a551e.html</a></p><p>背下这100个英语词根词缀，让你多记2万个单词<br>地址：<a href="https://www.douban.com/group/topic/130755762/?type=like">https://www.douban.com/group/topic/130755762/?type=like</a></p><p>俞敏洪“力荐”<br>地址：<a href="https://baijiahao.baidu.com/s?id=1653767690381244469&wfr=spider&for=pc">https://baijiahao.baidu.com/s?id=1653767690381244469&amp;wfr=spider&amp;for=pc</a></p><p>英语词根词缀总结整合版<br>地址：<a href="https://blog.csdn.net/qq877507054/article/details/82909070">https://blog.csdn.net/qq877507054/article/details/82909070</a></p><p>252个常用英语词根记忆法背单词（高三网）<br>地址：<a href="http://www.gaosan.com/gaokao/230321.html">http://www.gaosan.com/gaokao/230321.html</a></p><p>英语单词前缀后缀总结（高三网）<br>地址：<a href="http://www.gaosan.com/gaokao/252912.html">http://www.gaosan.com/gaokao/252912.html</a></p><p>9个口诀8个小故事搞定3千英语单词(精品资料)<br>地址：<a href="http://fanwen.jianlimoban.net/971582/">http://fanwen.jianlimoban.net/971582/</a></p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p>原文链接：<a href="https://blog.csdn.net/liu17234050/article/details/104566377">https://blog.csdn.net/liu17234050/article/details/104566377</a></p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 词缀 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>查找</title>
      <link href="/posts/c1a6.html"/>
      <url>/posts/c1a6.html</url>
      
        <content type="html"><![CDATA[<h1 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h1><h2 id="线性结构"><a href="#线性结构" class="headerlink" title="线性结构"></a>线性结构</h2><h3 id="顺序查找"><a href="#顺序查找" class="headerlink" title="顺序查找"></a>顺序查找</h3><p>又称为线性查找，它对顺序表和链表都是适用的。</p><p>基本思想：其实就是挨个找（从头到jio or 反着来都可以）。</p><p>代码实现：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span><span class="token punctuation">&#123;</span><span class="token comment">//查找表的数据结构（顺序表）</span>    ElemType <span class="token operator">*</span>elem<span class="token punctuation">;</span><span class="token comment">//动态数组基址</span>    <span class="token keyword">int</span> TableLen<span class="token punctuation">;</span><span class="token comment">//表的长度</span><span class="token punctuation">&#125;</span>SSTable<span class="token punctuation">;</span><span class="token comment">//顺序查找</span><span class="token keyword">int</span> <span class="token function">Search_Seq</span><span class="token punctuation">(</span>SSTable ST<span class="token punctuation">,</span>ElemType key<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>ST<span class="token punctuation">.</span>TableLen <span class="token operator">&amp;&amp;</span> ST<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">!=</span>key<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 查找成功返回数组下标，否则返回-1</span>    <span class="token keyword">return</span> i<span class="token operator">=</span>ST<span class="token punctuation">.</span>TableLen<span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> i<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>哨兵版</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span><span class="token punctuation">&#123;</span><span class="token comment">//查找表的数据结构（顺序表）</span>    ElemType <span class="token operator">*</span>elem<span class="token punctuation">;</span><span class="token comment">//动态数组基址</span>    <span class="token keyword">int</span> TableLen<span class="token punctuation">;</span><span class="token comment">//表的长度</span><span class="token punctuation">&#125;</span>SSTable<span class="token punctuation">;</span><span class="token comment">//顺序查找</span><span class="token keyword">int</span> <span class="token function">Search_Seq</span><span class="token punctuation">(</span>SSTable ST<span class="token punctuation">,</span>ElemType key<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    ST<span class="token punctuation">.</span>elem<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>key<span class="token punctuation">;</span>    <span class="token keyword">int</span> i<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span>ST<span class="token punctuation">.</span>TableLen<span class="token punctuation">;</span>ST<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">!=</span>key<span class="token punctuation">;</span><span class="token operator">--</span>i<span class="token punctuation">)</span>    <span class="token comment">// 查找成功返回数组下标，否则返回0</span>    <span class="token keyword">return</span> i<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注： </p><p>一个成功结点的查找长度 &#x3D; 自身所在层数<br>一个失败结点的查找长度 &#x3D; 其父节点所在<br>层数默认情况下，各种失败情况或成功情况都等概率发生</p><h3 id="折半查找"><a href="#折半查找" class="headerlink" title="折半查找"></a>折半查找</h3><p>又称二分查找，它仅适用于有序的顺序表。</p><p>基础思想：</p><p>在[low,high]之间寻找目标关键字，每次检查mid&#x3D;(low,high)&#x2F;2（向上或者向下取整）。<br>根据mid所指元素与目标关键字的大小调整[low,high]的区间。<br>若low&gt;high则查找失败。<br>代码实现：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span><span class="token punctuation">&#123;</span>    ElemType <span class="token operator">*</span>elem<span class="token punctuation">;</span>    <span class="token keyword">int</span> TableLen<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>SSTable<span class="token punctuation">;</span><span class="token comment">// 折半查找</span><span class="token keyword">int</span> <span class="token function">Binary_Search</span><span class="token punctuation">(</span>SSTable L<span class="token punctuation">,</span>ElemType key<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> low<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>high<span class="token operator">=</span>L<span class="token punctuation">.</span>TableLen<span class="token punctuation">,</span>mid<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>low<span class="token operator">&lt;=</span>high<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        mid<span class="token operator">=</span><span class="token punctuation">(</span>low<span class="token operator">+</span>high<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token operator">==</span>key<span class="token punctuation">)</span>            <span class="token keyword">return</span> mid<span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token operator">></span>key<span class="token punctuation">)</span>            high<span class="token operator">=</span>mid<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//从前半部分继续查找</span>        <span class="token keyword">else</span>            low<span class="token operator">=</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//从后半部分继续查找</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>折半查找判定树的构造（爱考）： 取决于mid的取值是向上取整还是向下取整。 </p><p>若mid&#x3D;⌊ (low+high)&#x2F;2⌋，则对于任何⼀个结点，必有：右⼦树结点数 - 左⼦树结点数 &#x3D; 0 或 1。<br>反之向上取整就是：左⼦树结点数 - 右⼦树结点数 &#x3D; 0 或 1。<br>折半查找的判定树⼀定是平衡⼆叉树。折半查找的判定树中，只有最下⾯⼀层是不满的。因此，元素个数为 n 时树⾼ h&#x3D;⌈log2(n+1)⌉ 。<br>判定树结点关键字：左&lt;中&lt;右，满⾜⼆叉排序树的定义。失败结点：n+1个（等于成功结点的空链域数量）<br>时间复杂度：O(log2n)</p><h3 id="分块查找"><a href="#分块查找" class="headerlink" title="分块查找"></a>分块查找</h3><p>又称为“索引顺序查找”，块内⽆序、块间有序。</p><p>基础思想:</p><p>索引表记录每个分块的最大关键字、分块的区间<br>先查索引表(顺序或折半)、再对分块内进行顺序查找<br>查找效率分析（ASL）:ASL &#x3D; 查索引表的平均查找长度+查分块的平均查找长度</p><p>(设n个记录均匀分为b块,每块s个记录)</p><p>顺序查找索引表</p><h2 id="树型结构"><a href="#树型结构" class="headerlink" title="树型结构"></a>树型结构</h2><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid">mindmap  root<span class="token text string">((二叉排序树))</span>    定义      子节点&lt;值小于父节点      子节点>值大于父节点      子树也是BST    查找操作      根节点开始      值等于当前节点<span class="token arrow operator">-></span>查找成功      值小于当前节点<span class="token arrow operator">-></span>递归左子树      值大于当前节点<span class="token arrow operator">-></span>递归右子树      空节点<span class="token arrow operator">-></span>查找失败    插入操作      根节点开始      值小于当前节点<span class="token arrow operator">-></span>递归左子树      值大于当前节点<span class="token arrow operator">-></span>递归右子树      空位置<span class="token arrow operator">-></span>插入新节点    删除操作      找到节点      无子节点<span class="token arrow operator">-></span>直接删除      一个子节点<span class="token arrow operator">-></span>用子节点替代      两个子节点<span class="token arrow operator">-></span>用右子树最小节点或左子树最大节点替代    查找效率分析      最好情况<span class="token arrow operator">-></span>O<span class="token text string">(log n)</span>      最坏情况<span class="token arrow operator">-></span>O<span class="token text string">(n)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="二叉排序树-BST"><a href="#二叉排序树-BST" class="headerlink" title="二叉排序树(BST)"></a>二叉排序树(BST)</h3><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407132239827.png" alt="结构图"></p><p>构造一颗二叉排序树的目的并不是排序，而是提高查找、插入和删除关键字的速度，这种非线性结构也有利于插入和删除的实现。</p><p>定义：二叉排序树又称为二叉查找树（BST,Binary Search Tree)，</p><p>一棵二叉树或者是空二叉树，或者是具有如下性质的二叉树：</p><ul><li>左子树节点值 &lt; 根节点值 &lt; 右子树节点值</li><li>左子树和右子树又各是一棵二叉排序树</li><li>进行中序遍历，可得到一个递增序列</li></ul><h4 id="查找-1"><a href="#查找-1" class="headerlink" title="查找"></a>查找</h4><ul><li>若树非空，目标值与根结点的值比较</li><li>若相等，则查找成功</li><li>若小于根结点，则在左子树上查找，否则在右子树上查找</li><li>查找成功，返回结点指针；查找失败返回NULL</li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">BSTNode</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> key<span class="token punctuation">;</span>    <span class="token keyword">struct</span> <span class="token class-name">BSTNode</span> <span class="token operator">*</span>lchild<span class="token punctuation">,</span> <span class="token operator">*</span>rchild<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>BSTNode<span class="token punctuation">,</span> <span class="token operator">*</span>BSTree<span class="token punctuation">;</span><span class="token comment">//查找（非递归）</span>BSTNode <span class="token operator">*</span><span class="token function">BST_Search</span><span class="token punctuation">(</span>BiTree T<span class="token punctuation">,</span> ElemType key<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>T <span class="token operator">!=</span> <span class="token constant">NULL</span> <span class="token operator">&amp;&amp;</span> key <span class="token operator">!=</span> T<span class="token operator">-></span>data<span class="token punctuation">)</span>    <span class="token comment">//若树空或等于根结点数，则结束循环</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>key <span class="token operator">&lt;</span> T<span class="token operator">-></span>data<span class="token punctuation">)</span>    <span class="token comment">//小于，则在左子树上查找</span>            T <span class="token operator">=</span> T<span class="token operator">-></span>lchild<span class="token punctuation">;</span>        eles    <span class="token comment">//大于，则在右子树查找</span>            T <span class="token operator">=</span> T<span class="token operator">-></span>rchild<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> T<span class="token punctuation">;</span>    <span class="token comment">//失败会返回NULL</span><span class="token punctuation">&#125;</span><span class="token comment">//查找（递归）</span>BSTNode <span class="token operator">*</span><span class="token function">BST_Search</span><span class="token punctuation">(</span>BiTree T<span class="token punctuation">,</span> ElemType key<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>T <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>key <span class="token operator">==</span> T<span class="token operator">-></span>key<span class="token punctuation">)</span>        <span class="token keyword">return</span> T<span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>key <span class="token operator">&lt;</span> T<span class="token operator">-></span>key<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token function">BST_Search</span><span class="token punctuation">(</span>T<span class="token operator">-></span>lchild<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>        <span class="token keyword">return</span> <span class="token function">BST_Search</span><span class="token punctuation">(</span>T<span class="token operator">-></span>rchild<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>BST是一种动态生成的树表，通过查找比较不断生成。</p><h4 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h4><p>若原二叉排序树为空，则直接插入结点；</p><p>否则，若关键字k小于根结点值，则插入到左子树，</p><p>若关键字k大于根结点值，则插入到右子树</p><p>在子树中继续重复以上操作，直到节点插入到对应的叶节点位置上</p><h5 id="递归实现"><a href="#递归实现" class="headerlink" title="递归实现"></a>递归实现</h5><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">//最坏空间复杂度O(h)</span><span class="token keyword">int</span> <span class="token function">BST_Insert</span><span class="token punctuation">(</span>BiTree <span class="token operator">&amp;</span>T<span class="token punctuation">,</span> DataType k<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>T <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        T <span class="token operator">=</span> <span class="token punctuation">(</span>BiTree<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>BSTNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        T<span class="token operator">-></span>data <span class="token operator">=</span> k<span class="token punctuation">;</span>        T<span class="token operator">-></span>lchild <span class="token operator">=</span> T<span class="token operator">-></span>rchild <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">==</span> T<span class="token operator">-></span>data<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    eles <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">&lt;</span> T<span class="token operator">-></span>data<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token function">BST_Insert</span><span class="token punctuation">(</span>T<span class="token operator">-></span>lchild<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>        <span class="token keyword">return</span> <span class="token function">BST_Insert</span><span class="token punctuation">(</span>T<span class="token operator">-></span>rchild<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="非递归实现"><a href="#非递归实现" class="headerlink" title="非递归实现"></a>非递归实现</h5><pre class="line-numbers language-c" data-language="c"><code class="language-c">```#### 构造从空树开始依次输入元素，调用插入函数，逐渐构造出一棵树。```c<span class="token keyword">void</span> <span class="token function">Creat_BST</span><span class="token punctuation">(</span>BiTree <span class="token operator">&amp;</span>T<span class="token punctuation">,</span> DataType str<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    T <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">BST_Insert</span><span class="token punctuation">(</span>T<span class="token punctuation">,</span> str<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li><p>按照序列 str&#x3D;｛50,66,60,26,21,30,70,68}建立BST</p></li><li><p>按照序列 str&#x3D;｛50,26,21,30,66,60,70,68}建立BST</p></li><li><p>按照序列 str&#x3D;｛26,21,30,50,60,66,68,70}建立BST</p></li></ol><p>注： 不同的关键字序列可能得到相同的二叉排序树，也可能得到不同的二叉排序树</p><h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><p>需要保证删除该节点后，仍保持BST特征。</p><ol><li>若删除的是叶节点，则直接删除，不会破坏BST性质</li><li>若要删除节点Z只有一棵左子树或右子树，则直接让Z的孩子替代它的位置</li><li>若删除节点z有左右两棵子树，则令<code>z的值</code>直接被修改为其直接后继（或直接前驱）的值，然后从二叉排序树中删除这个直接后继（或前驱），这样就转换成情况1、2<ul><li>使用直接后继的值覆盖：z的后继是右子树中最左下结点（该节点一定没有左子树)</li><li>使用直接前驱的值覆盖：z的前驱是左子树中最右下结点（该节点一定没有右子树)</li></ul></li></ol><p>效率分析：（与树高相关）</p><p>查找长度：在查找运算中，需要对比关键字的次数称为查找长度，反映了查找操作时间复杂度</p><p>BST中某个元素的比较次数 &#x3D; 该节点所在层的层数。</p><ul><li>最好情况：n个结点的二叉树最小高度为[log2n]+1，平均查找长度&#x3D;O(log2n)</li><li>最坏情况：每个结点只有一个分支，树高h&#x3D;结点数n，平均查找长度&#x3D;O(n)</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407211647973.png" alt="查找成功"></p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407211649210.png" alt="查找失败"></p><h3 id="平衡二叉树（AVL）"><a href="#平衡二叉树（AVL）" class="headerlink" title="平衡二叉树（AVL）"></a>平衡二叉树（AVL）</h3><p>为了让二叉树在构建的过程中尽可能的保持平衡，即让树的高度最小，引入了平衡二叉树。</p><p>平衡二叉树：在插入和删除节点时保证任意结点的左右子树高度差的绝对值小于1，简称AVL（由其发明人的名字取得）</p><p>平衡因子：左子树的高 - 右子树的高（只能是 -1，0，1）</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">//平衡二叉树结点</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">AVLNode</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> key<span class="token punctuation">;</span> <span class="token comment">//数据域</span>    <span class="token keyword">int</span> balance<span class="token punctuation">;</span> <span class="token comment">////平衡因子</span>    <span class="token keyword">struct</span> <span class="token class-name">AVLNode</span> <span class="token operator">*</span>lchild<span class="token punctuation">,</span> <span class="token operator">*</span>rchild<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>AVLNode<span class="token punctuation">,</span> <span class="token operator">*</span>AVLTree<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>研究的重点就是插入的时候怎么保持树的平衡</p><h4 id="插入-1"><a href="#插入-1" class="headerlink" title="插入"></a>插入</h4><p>从插入点往上找到第一个不平衡结点，调整以该结点为根的子树（最小不平衡子树），只要将最小不平衡子树调整平衡，则其他结点都会恢复平衡</p><p>根据不平衡出现的原因，分为4种情况：</p><ol><li>LL型：相当于把B的右边部分拽下来保持平衡</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407211713600.png" alt="右单旋"></p><ol start="2"><li>RR型：相当于把B的左边部分拽下来保持平衡</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407211718350.png" alt="左单旋"></p><p>代码思路：我将之称之为<code>找爸爸</code>，依次从最小辈份的节点开始，首先是B的孩子找到现在的爸爸A，然后是A找到现在的爸爸B，最后是B找到现在的爸爸gf，即BL&#x2F;BR→A→B→gf</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407211738109.png" alt="代码思路"></p><ol start="3"><li>LR型：相当于先把C的左边部分拽下来，再把C的右边部分拽下来</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407211748127.png" alt="左右双旋"></p><ol start="4"><li>RL型</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407211753552.png" alt="右左双旋"></p><p>思路：</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407211809782.png" alt="M形操作"></p><p>总结</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407211817802.png" alt="image-20240721181711601"></p><h4 id="删除-1"><a href="#删除-1" class="headerlink" title="删除"></a>删除</h4><p>和插入操作很类似，同样需要进行平衡性的检查。</p><p>Step：</p><p>用BST方法对节点X进行删除<br>若出现不平衡现象则从节点X向上进行回溯（向上找最小不平衡子树），找到第一个不平衡节点A，B为节点A最近的孩子节点，C是B最近的孩子节点（找“个头”最高的儿孙节点），然后以A为根，利用与插入相同的四种调整方法进行判断调整（LL、RR、LR、RL）<br>如果还是不平衡就继续向上，重复第2步<br>注：删除和插入对结点的调整方式大差不差，buttt插入仅针对最小不平衡子树A，而删除可能要一直“回溯”。</p><p>查找：AVL中查找操作与BST相同，因此查找时与给定值比较的关键字个数不超过树高，因此，含n个节点的AVL树的最大深度为，因此AVL的平均查找长度为</p><p>平衡二叉树的删除操作具体步骤：<br>①删除结点（方法同“二叉排序树”）<br>• 若删除的结点是叶子，直接删。<br>• 若删除的结点只有一个子树，用子树顶替删除位置<br>• 若删除的结点有两棵子树，用前驱（或后继）结点<br>顶替，并转换为对前驱（或后继）结点的删除。<br>②一路向北找到最小不平衡子树，找不到就完结撒花<br>③找最小不平衡子树下，“个头”最高的儿子、孙子<br>④根据孙子的位置，调整平衡（LL&#x2F;RR&#x2F;LR&#x2F;RL）</p><p>• 孙子在LL：儿子右单旋<br>• 孙子在RR：儿子左单旋<br>• 孙子在LR：孙子先左旋，再右旋<br>• 孙子在RL：孙子先右旋，再左旋</p><p>⑤如果<strong>不平衡向上传导</strong>，继续②</p><p>不平衡子树恢复平衡后，高度变矮，可能使得上面的树出现不平衡现象</p><h3 id="红黑树"><a href="#红黑树" class="headerlink" title="红黑树"></a>红黑树</h3><blockquote><p>为什么要发明红黑树？</p></blockquote><p>平衡二叉树 AVL：插入&#x2F;删除 很容易破坏“平衡”特性，需要频繁调整树的形态。如：插入操作导致不平衡，则需要先计算平衡因子，找到最小不平衡子树（时间开销大），再进行 LL&#x2F;RR&#x2F;LR&#x2F;RL 调整。适用于以查为主、很少插入&#x2F;删除的场景</p><p>红黑树 RBT：插入&#x2F;删除 很多时候不会破坏“红黑”特性，无需频繁调整树的形态。即便需要调整，一般都可以在常数级时间内完成。适用于频繁插入、删除的场景，实用性更强</p><p>红黑树不是二叉平衡树，是BST（二叉排序树），与普通BST相比，有什么要求</p><p>①每个结点或是红色，或是黑色的<br>②根节点是黑色的<br>③叶结点（外部结点、NULL结点、失败结点）均是黑色的<br>④不存在两个相邻的红结点（即红结点的父节点和孩子结点均是黑色）<br>⑤对每个结点，从该节点到任一叶结点的简单路径上，所含黑结点的数目相同</p><p>总结为下面的口诀：</p><p>左根右（大小关系），根叶黑（颜色）<br>不红红(不能出现两个连续的红节点)，黑路同（黑节点数目）</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">struct</span> <span class="token class-name">RBnode</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> key<span class="token punctuation">;</span><span class="token comment">// 关键字的值</span>    RBnode<span class="token operator">*</span> parent<span class="token punctuation">;</span>    RBnode<span class="token operator">*</span> lChild<span class="token punctuation">;</span>    RBnode<span class="token operator">*</span> rChild<span class="token punctuation">;</span>    <span class="token keyword">int</span> color<span class="token punctuation">;</span><span class="token comment">//结点颜色，如:可用 0/1 表示 黑/红，也可使用枚举型enum表示颜色</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="黑高"><a href="#黑高" class="headerlink" title="黑高"></a>黑高</h4><p>结点的黑高 bh：从某结点出发（不含该结点）到达任一空叶结点的路径上黑结点总数</p><ul><li>根节点黑高为h，则内部节点（关键字）至少有 2^h^-1 个</li><li>根节点黑高为h，内部结点数（关键字）至多有 2^2h^-1 个</li></ul><blockquote><p>内部结点数最少的情况——h层全黑结点的满树形态，因为全是黑色节点，只有满树形态才能保证<code>黑路同</code><br>内部结点数最多的情况——h层黑结点，每一层黑结点下面都铺满一层红结点。共2h层的满树形态</p></blockquote><h4 id="性质"><a href="#性质" class="headerlink" title="性质"></a>性质</h4><ul><li><p>从根节点到叶节点的最长路径不大于最短路径的 2 倍（由④⑤得来，因为黑节点数目相同，所以相差最大的就是红结点穿插在黑节点之间）</p><blockquote><p>任何一条查找失败路径上黑结点数量都相同，而路径上不能连续出现两个红结点，即红结点只能穿插在各个黑结点中间</p></blockquote></li><li><p>有n个内部节点的红黑树的高度h ≤ 2𝑙𝑜𝑔<del>2</del>(𝑛 + 1)</p><blockquote><p>若红黑树总高度&#x3D;h，则根节点黑高 ≥ h&#x2F;2，因此内部结点数 n ≥ 2h&#x2F;2-1，由此推出 h ≤ 2𝑙𝑜𝑔<del>2</del>(𝑛 + 1)</p></blockquote></li><li><p>红黑树的黑高（根节点到叶节点路径上黑色节点数量）至少为 h&#x2F;2</p></li><li><p>红黑树查找操作时间复杂度 &#x3D; O(log2n)</p></li></ul><h4 id="插入-2"><a href="#插入-2" class="headerlink" title="插入"></a>插入</h4><p>插入节点使需要判断是否破环了红黑树性质，只用判断是否违反了<code>不红红</code>，因为插入红色节点满足左根右，根叶黑，黑路同。</p><p>先查找，确定插入位置（原理同二叉排序树），插入新结点</p><ul><li>新结点是根——染为黑色</li><li>新结点非根——染为红色</li></ul><p>查看插入新结点后是否满足<code>不红红</code>，若依然满足，则插入结束，若不满足，根据其叔叔（父节点的兄弟节点）的颜色进行相应调整</p><ol><li><p>黑叔：旋转+染色（染色就是换成和之前不同的颜色）</p><ul><li><p>LL型：右单旋，父换爷+互换色（指给父和原爷节点染色）</p></li><li><p>RR型：左单旋，父换爷+染色</p></li><li><p>LR型：左、右双旋，儿换爷+染色（指给儿和原爷节点染色）</p></li><li><p>RL型：右、左双旋，儿换爷+染色</p></li></ul></li><li><p>红叔：染色+变新</p><ul><li>叔父爷染色，爷变为新结点</li></ul></li></ol><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407231200922.png" alt="总结"></p><h4 id="删除-2"><a href="#删除-2" class="headerlink" title="删除"></a>删除</h4><p>重要考点：</p><ul><li>红黑树删除操作的时间复杂度 &#x3D; &#x3D;&#x3D;O(log<del>2</del>n)&#x3D;&#x3D;</li><li>在红黑树中删除结点的处理方式和 &#x3D;&#x3D;二叉排序树的删除&#x3D;&#x3D; 一样</li><li>按②删除结点后，可能破坏“红黑树特性”，此时需要调整结点&#x3D;&#x3D;颜色、位置&#x3D;&#x3D;，使其再次满足“红黑树特性”。</li></ul><h3 id="B树"><a href="#B树" class="headerlink" title="B树"></a>B树</h3><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407232159140.png" alt="B树"></p><p>B树，又称多路平衡查找树，B树中所有结点的孩子个数的最大值称为B树的阶，通常用m表示。一棵m阶B树或为空树，或为满足如下特性的m叉树：</p><ol><li><p>树中每个结点至多有m棵子树，即至多含有m-1个关键字。</p></li><li><p>若根结点不是终端结点，则至少有两棵子树。</p></li><li><p>除根结点外的所有非叶结点至少有 <code>⌈m/2⌉</code>棵子树，即至少含有  <code>⌈m/2⌉-1</code> 个关键字。（为了保证查找效率，每个结点的关键字不能太少）</p></li><li><p>所有的叶结点都出现在同一层次上，并且不带信息（可以视为外部结点或类似于折半查找判定树的查找失败结点，实际上这些结点不存在，指向这些结点的指针为空)。</p></li><li><p>所有非叶结点的结构如下：<br>｛n，P<del>0</del>，K<del>1</del>，P<del>1</del>，K<del>2</del>，…，P<del>n</del>，K<del>n</del>｝</p><p>其中， Ki 为结点的关键字，且依次递增：Pi 为指向子树根结点的指针，且指针Pi-1所指子树中所有结点的关键字均小于Ki，Pi所指子树中所有结点的关键字均大于Ki，n（  ⌈m&#x2F;2⌉-1 ≤ n ≤ m-1 ）为结点中关键字的个数。</p></li></ol><p>m阶B树的核心特性：</p><p>1） 根节点的⼦树数∈[2, m]，关键字数∈[1, m-1]。 其他结点的⼦树数∈[ , m]；关键字数∈[ -1, m-1]</p><p>2）对任⼀结点，其所有⼦树⾼度都相同</p><p>3）关键字的值：⼦树0&lt;关键字1&lt;⼦树1&lt;关键字2&lt;⼦树2&lt;…. (类⽐⼆叉查找树 左&lt;中&lt;右)</p><p>B树的高度：</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407232222809.png" alt="B树的高度"></p><p>含 n 个关键字的 m叉B树，最小高度、最大高度是多少？</p><p>最大高度——让各层的分叉尽可能的少，即根节点只有2个分叉，其他结点只有[m&#x2F;2]个分叉<br>各层结点至少有：第一层1、第二层2、第三层 2[m&#x2F;2] …第h层2([m&#x2F;2])-2<br>第h+1层共有叶子结点（失败结点） 2([m&#x2F;27)^(h-1)<br>n个关键字的B树必有n+1个叶子结点，则 n+1≥2( ⌈m&#x2F; 2⌉^(h-1) ，即h ≤log<del>⌈m&#x2F;2⌉</del>(n+1)&#x2F;2+1</p><h4 id="插入-3"><a href="#插入-3" class="headerlink" title="插入"></a>插入</h4><h4 id="删除-3"><a href="#删除-3" class="headerlink" title="删除"></a>删除</h4><h3 id="B-树"><a href="#B-树" class="headerlink" title="B+树"></a>B+树</h3><h3 id="散列查找"><a href="#散列查找" class="headerlink" title="散列查找"></a>散列查找</h3>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 查找 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>并查集</title>
      <link href="/posts/f171.html"/>
      <url>/posts/f171.html</url>
      
        <content type="html"><![CDATA[<h1 id="并查集"><a href="#并查集" class="headerlink" title="并查集"></a>并查集</h1><ol><li>理解并查集的定义及其作用。</li><li>掌握并查集的基本操作，包括查找（Find）和合并（Union）。</li><li>学习并查集的两种优化策略：按秩合并（Union by Rank）和路径压缩（Path Compression）。</li><li>能够编写并查集的代码实现。</li></ol><h2 id="教学内容"><a href="#教学内容" class="headerlink" title="教学内容"></a>教学内容</h2><h3 id="1-并查集的定义及作用"><a href="#1-并查集的定义及作用" class="headerlink" title="1. 并查集的定义及作用"></a>1. 并查集的定义及作用</h3><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><p>并查集是一种数据结构，用于管理一组不相交的集合。它支持两种操作：</p><ul><li><strong>查找（Find）</strong>：确定元素属于哪个集合。</li><li><strong>合并（Union）</strong>：将两个集合合并为一个集合。</li></ul><p>并查集常用于处理连通性问题，例如判断图中两个节点是否在同一个连通分量中。</p><h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><p>并查集广泛应用于以下场景：</p><ul><li>动态连通性问题：在网络中快速判断节点是否连通。</li><li>Kruskal算法：用于求解最小生成树。</li><li>检测无向图中的环。</li></ul><h3 id="2-并查集的基本操作"><a href="#2-并查集的基本操作" class="headerlink" title="2. 并查集的基本操作"></a>2. 并查集的基本操作</h3><h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><p>每个元素开始时都是一个单独的集合，可以用一个数组表示，每个元素的父节点初始化为它自己。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">UnionFind</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>parent <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="查找（Find）"><a href="#查找（Find）" class="headerlink" title="查找（Find）"></a>查找（Find）</h4><p>查找操作用于找到某个元素所属集合的根节点。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">find</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">while</span> p <span class="token operator">!=</span> self<span class="token punctuation">.</span>parent<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">:</span>        p <span class="token operator">=</span> self<span class="token punctuation">.</span>parent<span class="token punctuation">[</span>p<span class="token punctuation">]</span>    <span class="token keyword">return</span> p<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="合并（Union）"><a href="#合并（Union）" class="headerlink" title="合并（Union）"></a>合并（Union）</h4><p>合并操作将两个元素所在的集合合并。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">union</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> p<span class="token punctuation">,</span> q<span class="token punctuation">)</span><span class="token punctuation">:</span>    rootP <span class="token operator">=</span> self<span class="token punctuation">.</span>find<span class="token punctuation">(</span>p<span class="token punctuation">)</span>    rootQ <span class="token operator">=</span> self<span class="token punctuation">.</span>find<span class="token punctuation">(</span>q<span class="token punctuation">)</span>    <span class="token keyword">if</span> rootP <span class="token operator">!=</span> rootQ<span class="token punctuation">:</span>        self<span class="token punctuation">.</span>parent<span class="token punctuation">[</span>rootP<span class="token punctuation">]</span> <span class="token operator">=</span> rootQ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-并查集的优化"><a href="#3-并查集的优化" class="headerlink" title="3. 并查集的优化"></a>3. 并查集的优化</h3><h4 id="按秩合并（Union-by-Rank）"><a href="#按秩合并（Union-by-Rank）" class="headerlink" title="按秩合并（Union by Rank）"></a>按秩合并（Union by Rank）</h4><p>按秩合并是一种优化策略，通过维护树的高度（或秩），总是将秩小的树合并到秩大的树上，从而避免树变得过高。</p><h5 id="秩的初始化"><a href="#秩的初始化" class="headerlink" title="秩的初始化"></a>秩的初始化</h5><p>需要增加一个数组来维护每个集合的秩。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">UnionFind</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>parent <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>rank <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> size<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h5 id="按秩合并的实现"><a href="#按秩合并的实现" class="headerlink" title="按秩合并的实现"></a>按秩合并的实现</h5><p>在合并操作中，比较两个根节点的秩，将秩小的树合并到秩大的树上。如果两个根节点的秩相同，则合并后增加新的根节点的秩。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">union</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> p<span class="token punctuation">,</span> q<span class="token punctuation">)</span><span class="token punctuation">:</span>    rootP <span class="token operator">=</span> self<span class="token punctuation">.</span>find<span class="token punctuation">(</span>p<span class="token punctuation">)</span>    rootQ <span class="token operator">=</span> self<span class="token punctuation">.</span>find<span class="token punctuation">(</span>q<span class="token punctuation">)</span>    <span class="token keyword">if</span> rootP <span class="token operator">!=</span> rootQ<span class="token punctuation">:</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>rank<span class="token punctuation">[</span>rootP<span class="token punctuation">]</span> <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>rank<span class="token punctuation">[</span>rootQ<span class="token punctuation">]</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>parent<span class="token punctuation">[</span>rootP<span class="token punctuation">]</span> <span class="token operator">=</span> rootQ        <span class="token keyword">elif</span> self<span class="token punctuation">.</span>rank<span class="token punctuation">[</span>rootP<span class="token punctuation">]</span> <span class="token operator">></span> self<span class="token punctuation">.</span>rank<span class="token punctuation">[</span>rootQ<span class="token punctuation">]</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>parent<span class="token punctuation">[</span>rootQ<span class="token punctuation">]</span> <span class="token operator">=</span> rootP        <span class="token keyword">else</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>parent<span class="token punctuation">[</span>rootQ<span class="token punctuation">]</span> <span class="token operator">=</span> rootP            self<span class="token punctuation">.</span>rank<span class="token punctuation">[</span>rootP<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="路径压缩（Path-Compression）"><a href="#路径压缩（Path-Compression）" class="headerlink" title="路径压缩（Path Compression）"></a>路径压缩（Path Compression）</h4><p>路径压缩是一种优化查找操作的方法，通过将查找路径上的所有节点直接连接到根节点，从而加速后续的查找操作。</p><h5 id="路径压缩的实现"><a href="#路径压缩的实现" class="headerlink" title="路径压缩的实现"></a>路径压缩的实现</h5><p>在查找操作中，递归地将每个节点直接连接到根节点。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">find</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> p <span class="token operator">!=</span> self<span class="token punctuation">.</span>parent<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>parent<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>find<span class="token punctuation">(</span>self<span class="token punctuation">.</span>parent<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> self<span class="token punctuation">.</span>parent<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-完整的并查集实现"><a href="#4-完整的并查集实现" class="headerlink" title="4. 完整的并查集实现"></a>4. 完整的并查集实现</h3><p>将上述优化策略结合起来，得到完整的并查集实现。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">UnionFind</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>parent <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>rank <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> size    <span class="token keyword">def</span> <span class="token function">find</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> p <span class="token operator">!=</span> self<span class="token punctuation">.</span>parent<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>parent<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>find<span class="token punctuation">(</span>self<span class="token punctuation">.</span>parent<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>parent<span class="token punctuation">[</span>p<span class="token punctuation">]</span>    <span class="token keyword">def</span> <span class="token function">union</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> p<span class="token punctuation">,</span> q<span class="token punctuation">)</span><span class="token punctuation">:</span>        rootP <span class="token operator">=</span> self<span class="token punctuation">.</span>find<span class="token punctuation">(</span>p<span class="token punctuation">)</span>        rootQ <span class="token operator">=</span> self<span class="token punctuation">.</span>find<span class="token punctuation">(</span>q<span class="token punctuation">)</span>        <span class="token keyword">if</span> rootP <span class="token operator">!=</span> rootQ<span class="token punctuation">:</span>            <span class="token keyword">if</span> self<span class="token punctuation">.</span>rank<span class="token punctuation">[</span>rootP<span class="token punctuation">]</span> <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>rank<span class="token punctuation">[</span>rootQ<span class="token punctuation">]</span><span class="token punctuation">:</span>                self<span class="token punctuation">.</span>parent<span class="token punctuation">[</span>rootP<span class="token punctuation">]</span> <span class="token operator">=</span> rootQ            <span class="token keyword">elif</span> self<span class="token punctuation">.</span>rank<span class="token punctuation">[</span>rootP<span class="token punctuation">]</span> <span class="token operator">></span> self<span class="token punctuation">.</span>rank<span class="token punctuation">[</span>rootQ<span class="token punctuation">]</span><span class="token punctuation">:</span>                self<span class="token punctuation">.</span>parent<span class="token punctuation">[</span>rootQ<span class="token punctuation">]</span> <span class="token operator">=</span> rootP            <span class="token keyword">else</span><span class="token punctuation">:</span>                self<span class="token punctuation">.</span>parent<span class="token punctuation">[</span>rootQ<span class="token punctuation">]</span> <span class="token operator">=</span> rootP                self<span class="token punctuation">.</span>rank<span class="token punctuation">[</span>rootP<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-例子及练习"><a href="#5-例子及练习" class="headerlink" title="5. 例子及练习"></a>5. 例子及练习</h3><h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python">uf <span class="token operator">=</span> UnionFind<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>uf<span class="token punctuation">.</span>union<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>uf<span class="token punctuation">.</span>union<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>uf<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出：3</span><span class="token keyword">print</span><span class="token punctuation">(</span>uf<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出：3</span><span class="token keyword">print</span><span class="token punctuation">(</span>uf<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出：3</span><span class="token keyword">print</span><span class="token punctuation">(</span>uf<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出：4（独立的集合）</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h4><ol><li>编写代码验证并查集是否正确处理动态连通性。</li><li>使用并查集解决图中的连通分量问题。</li><li>通过路径压缩和按秩合并优化验证并查集性能提升。</li></ol><h3 id="6-总结"><a href="#6-总结" class="headerlink" title="6. 总结"></a>6. 总结</h3><p>并查集是一种高效处理动态连通性问题的数据结构，通过路径压缩和按秩合并优化，可以显著提升其性能。通过理解并掌握并查集的基本操作及优化策略，能够有效解决许多实际问题。</p><h3 id="7-参考资料"><a href="#7-参考资料" class="headerlink" title="7. 参考资料"></a>7. 参考资料</h3><ul><li><a href="https://book.douban.com/subject/20432061/">算法导论</a></li><li><a href="https://book.douban.com/subject/1139426/">数据结构与算法分析</a></li><li><a href="https://leetcode.com/">LeetCode</a></li><li><a href="https://blog.csdn.net/the_ZED/article/details/105126583">https://blog.csdn.net/the_ZED/article/details/105126583</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>centos安装docker</title>
      <link href="/posts/5c9f.html"/>
      <url>/posts/5c9f.html</url>
      
        <content type="html"><![CDATA[<h1 id="centos安装docker"><a href="#centos安装docker" class="headerlink" title="centos安装docker"></a>centos安装docker</h1><p>由于直接在虚拟机里的终端</p><h2 id="连接xshell"><a href="#连接xshell" class="headerlink" title="连接xshell"></a>连接xshell</h2><p><a href="https://blog.csdn.net/Wei_Naijia/article/details/124300814">xshell连接centos7-CSDN博客</a></p><p><a href="https://blog.csdn.net/Wei_Naijia/article/details/124300814">CentOS7连接XShell详细版_xshell连接centos7-CSDN博客</a></p><h2 id="添加用户组"><a href="#添加用户组" class="headerlink" title="添加用户组"></a>添加用户组</h2><p>如果当前用户（例如 <code>user</code> 用户）不在 <code>sudoers</code> 文件中，将无法使用 <code>sudo</code> 命令。你需要以 <code>root</code> 用户身份将该用户添加到 <code>sudoers</code> 文件中。以下是解决方法的步骤：</p><ol><li><p>使用 <code>su</code> 命令切换到 <code>root</code> 用户<br>你需要以 <code>root</code> 用户身份登录或者切换到 <code>root</code> 用户，系统会提示你输入 <code>root</code> 用户的密码。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">su</span> -<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>添加用户到 <code>sudoers</code> 文件<br>使用 <code>visudo</code> 编辑 <code>/etc/sudoers</code> 文件：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">visudo<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在文件中找到以下行：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">## Allow root to run any commands anywhere</span>root    <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL<span class="token punctuation">)</span>       ALL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>在其下方添加允许 <code>centos</code> 用户使用 <code>sudo</code> 命令的配置：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">centos  <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL<span class="token punctuation">)</span>       ALL<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>保存并退出编辑器。使用 <code>visudo</code> 编辑 <code>/etc/sudoers</code> 文件的好处在于，它会在保存前检查语法错误，避免保存错误的配置。</p></li><li><p>使用 <code>sudo</code> 权限<br>完成上述操作后，<code>user</code> 用户应当已经具有 <code>sudo</code> 权限。切换至<code>user</code>用户，使用以下命令进行测试：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">ls</span> /root<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果命令成功运行并显示 <code>/root</code> 目录的内容，说明 <code>sudo</code> 权限已正确配置。</p></li></ol><p>注意事项：</p><ol><li><p>确保编辑器使用 <code>visudo</code></p><p>始终使用 <code>visudo</code> 命令编辑 <code>/etc/sudoers</code> 文件，而不是直接使用文本编辑器如 <code>vi</code> 或 <code>nano</code>。<code>visudo</code> 能确保语法正确。</p></li><li><p>用户名拼写检查<br>确保在 <code>/etc/sudoers</code> 文件中添加的用户名拼写正确。例如，<code>user</code> 用户配置应为：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">user  <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL<span class="token punctuation">)</span>       ALL<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>使用用户组配置<br>如果希望将一组用户都添加到 <code>sudo</code> 权限，可以将 <code>centos</code> 用户加入 <code>wheel</code> 组（CentOS 系统中默认允许 <code>wheel</code> 组成员使用 <code>sudo</code>）：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">usermod</span> <span class="token parameter variable">-aG</span> wheel centos<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后确保 <code>/etc/sudoers</code> 文件中有以下配置（默认是启用的）：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">## Allows people in group wheel to run all commands</span>%wheel  <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL<span class="token punctuation">)</span>       ALL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>完成以上步骤后，再次尝试使用 <code>sudo</code> 命令，确认 <code>centos</code> 用户已获得 <code>sudo</code> 权限。</p></li><li><p>退出到普通用户并重新登录<br>确保在添加 <code>sudo</code> 权限后，注销并重新登录以使更改生效。</p></li></ol><h2 id="切换用户"><a href="#切换用户" class="headerlink" title="切换用户"></a>切换用户</h2><p>要从 <code>root</code> 用户切换到其他普通用户，可以使用 <code>su</code> 或 <code>sudo</code> 命令。以下是两种常用的方法：</p><ol><li><p>使用 <code>su</code> 命令<br><code>su</code> 命令用于在当前会话中切换用户身份。假设你要切换到用户名为 <code>username</code> 的普通用户：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">su</span> - username<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解释：</p><ul><li><code>su</code>：切换用户。</li><li><code>-</code>：带上这个选项会加载目标用户的环境变量。</li><li><code>username</code>：目标用户的用户名。</li></ul><p>执行此命令后，你会切换到 <code>username</code> 用户，并需要输入该用户的密码。</p></li><li><p>使用 <code>sudo</code> 命令<br>如果你想暂时以另一个用户的身份运行命令，可以使用 <code>sudo</code> 命令。假设你要以 <code>username</code> 用户的身份运行某个命令：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token parameter variable">-u</span> username <span class="token builtin class-name">command</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解释：</p><ul><li><code>sudo</code>：以超级用户权限运行命令。</li><li><code>-u username</code>：指定要切换到的用户。</li><li><code>command</code>：你想要执行的命令。</li></ul><p>例如，以 <code>username</code> 用户的身份运行 <code>ls</code> 命令：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token parameter variable">-u</span> username <span class="token function">ls</span> /home/username<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol><h3 id="切换回-root-用户"><a href="#切换回-root-用户" class="headerlink" title="切换回 root 用户"></a>切换回 root 用户</h3><p>如果你已经切换到普通用户，并且需要切换回 <code>root</code> 用户，你可以使用：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">su</span> -<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后输入 <code>root</code> 用户的密码，或者如果你已经配置了 <code>sudo</code>，也可以使用：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token parameter variable">-i</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="退出到上一个用户"><a href="#退出到上一个用户" class="headerlink" title="退出到上一个用户"></a>退出到上一个用户</h3><p>如果你从 <code>root</code> 用户切换到普通用户，可以使用 <code>exit</code> 命令返回到 <code>root</code> 用户：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="示例操作"><a href="#示例操作" class="headerlink" title="示例操作"></a>示例操作</h3><ol><li>从 <code>root</code> 用户切换到 <code>username</code> 用户：</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">su</span> - username<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>从 <code>username</code> 用户切换回 <code>root</code> 用户：</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="3"><li>以 <code>username</code> 用户的身份运行 <code>ls</code> 命令：</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token parameter variable">-u</span> username <span class="token function">ls</span> /home/username<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>通过这些命令，你可以在 <code>root</code> 用户和普通用户之间切换，或者以特定用户身份运行命令。</p><h2 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h2><h3 id="一、准备工作"><a href="#一、准备工作" class="headerlink" title="一、准备工作"></a>一、准备工作</h3><ol><li><p>系统要求</p><p>Docker 支持 64 位版本 CentOS 7&#x2F;8，并且要求内核版本不低于 3.10。CentOS 7 满足最低内核的要求，但由于内核版本比较低，部分功能（如 overlay2 存储层驱动）无法使用，并且部分功能可能不太稳定。</p></li><li><p>卸载旧版本</p><p>旧版本的 Docker 称为 <code>docker</code> 或 <code>docker-engine</code>，使用以下命令卸载旧版本：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> yum remove <span class="token function">docker</span> <span class="token punctuation">\</span>                docker-client <span class="token punctuation">\</span>                docker-client-latest <span class="token punctuation">\</span>                docker-common <span class="token punctuation">\</span>                docker-latest <span class="token punctuation">\</span>                docker-latest-logrotate <span class="token punctuation">\</span>                docker-logrotate <span class="token punctuation">\</span>                docker-selinux <span class="token punctuation">\</span>                docker-engine-selinux <span class="token punctuation">\</span>                docker-engine<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h3 id="二、安装-Docker"><a href="#二、安装-Docker" class="headerlink" title="二、安装 Docker"></a>二、安装 Docker</h3><h4 id="使用-yum"><a href="#使用-yum" class="headerlink" title="使用 yum"></a>使用 yum</h4><ol><li><p>安装依赖包</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>配置 Docker YUM 源<br>鉴于国内网络问题，强烈建议使用国内源。添加阿里云 Docker YUM 源：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> yum-config-manager <span class="token punctuation">\</span>    --add-repo <span class="token punctuation">\</span>    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo<span class="token function">sudo</span> <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'s/download.docker.com/mirrors.aliyun.com\/docker-ce/g'</span> /etc/yum.repos.d/docker-ce.repo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>官方 Docker YUM 源（不推荐在国内使用）：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># sudo yum-config-manager \</span><span class="token comment">#     --add-repo \</span><span class="token comment">#     https://download.docker.com/linux/centos/docker-ce.repo</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>安装 Docker<br>更新 yum 软件源缓存，并安装 Docker：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce docker-ce-cli containerd.io<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>CentOS 8 额外设置<br>由于 CentOS 8 防火墙使用了 nftables，但 Docker 尚未支持 nftables。我们可以使用如下设置使用 iptables：<br>修改 <code>/etc/firewalld/firewalld.conf</code> 文件：<br>将 <code>FirewallBackend=nftables</code> 更改为 <code>FirewallBackend=iptables</code>：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># FirewallBackend=nftables</span><span class="token assign-left variable">FirewallBackend</span><span class="token operator">=</span>iptables<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>或者执行以下命令：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--permanent</span> <span class="token parameter variable">--zone</span><span class="token operator">=</span>trusted --add-interface<span class="token operator">=</span>docker0<span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--reload</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ol><h4 id="使用脚本自动安装"><a href="#使用脚本自动安装" class="headerlink" title="使用脚本自动安装"></a>使用脚本自动安装</h4><p>在测试或开发环境中，Docker 官方提供了一套便捷的安装脚本，CentOS 系统上可以使用这套脚本安装。另外可以通过 <code>--mirror</code> 选项使用国内源进行安装：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> get.docker.com <span class="token parameter variable">-o</span> get-docker.sh<span class="token function">sudo</span> <span class="token function">sh</span> get-docker.sh <span class="token parameter variable">--mirror</span> Aliyun<span class="token comment"># sudo sh get-docker.sh --mirror AzureChinaCloud</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="三、启动-Docker"><a href="#三、启动-Docker" class="headerlink" title="三、启动 Docker"></a>三、启动 Docker</h2><p>启动并设置 Docker 开机自启：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span><span class="token function">sudo</span> systemctl start <span class="token function">docker</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="四、建立用户组"><a href="#四、建立用户组" class="headerlink" title="四、建立用户组"></a>四、建立用户组</h2><p>默认情况下，docker 命令会使用 Unix socket 与 Docker 引擎通讯。只有 root 用户和 docker 组的用户才可以访问 Docker 引擎的 Unix socket。出于安全考虑，一般 Linux 系统上不会直接使用 root 用户。因此，建议将需要使用 docker 的用户加入 docker 用户组。</p><ol><li><p>建立 docker 组：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">groupadd</span> <span class="token function">docker</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>将当前用户加入 docker 组：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">usermod</span> <span class="token parameter variable">-aG</span> <span class="token function">docker</span> <span class="token environment constant">$USER</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>退出当前终端并重新登录，以使组变更生效。</p></li></ol><h2 id="五、测试-Docker-是否安装正确"><a href="#五、测试-Docker-是否安装正确" class="headerlink" title="五、测试 Docker 是否安装正确"></a>五、测试 Docker 是否安装正确</h2><p>测试 Docker 是否安装成功：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> run <span class="token parameter variable">--rm</span> hello-world<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>若能正常输出以下信息，则说明安装成功：</p><pre class="line-numbers language-text" data-language="text"><code class="language-text">Hello from Docker!This message shows that your installation appears to be working correctly.To generate this message, Docker took the following steps: 1. The Docker client contacted the Docker daemon. 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.    (amd64) 3. The Docker daemon created a new container from that image which runs the    executable that produces the output you are currently reading. 4. The Docker daemon streamed that output to the Docker client, which sent it    to your terminal.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="六、镜像加速"><a href="#六、镜像加速" class="headerlink" title="六、镜像加速"></a>六、镜像加速</h2><p><code>Unable to find image &#39;hello-world:latest&#39; locally</code>，相信大家在拉取镜像的过程中都出现过这个问题。</p><p>很多的回答都是修改阿里镜像源，但是修改之后却无用。这是因为阿里镜像源对于每个人来说都需要专属源。</p><p>可以将多个镜像加速器添加到 Docker 的配置文件中，以确保在一个加速器不可用时，Docker 可以尝试使用其他加速器。以下是添加多个镜像加速器的详细步骤：</p><h3 id="配置-Docker-使用多个镜像加速器"><a href="#配置-Docker-使用多个镜像加速器" class="headerlink" title="配置 Docker 使用多个镜像加速器"></a>配置 Docker 使用多个镜像加速器</h3><ol><li><p><strong>编辑 Docker 配置文件</strong>：</p><p>使用你喜欢的文本编辑器（如 <code>vi</code> 或 <code>nano</code>）编辑 <code>/etc/docker/daemon.json</code> 文件。如果该文件不存在，则需要创建它：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">vi</span> /etc/docker/daemon.json<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p><strong>添加多个镜像加速器配置</strong>：</p><p><a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors">阿里云镜像地址</a>，登录后，左侧菜单选中：镜像工具→镜像加速器，就可以看到专属地址：</p><p><img src="https://s2.loli.net/2024/06/26/GQLObfJdpoMxAEI.png" alt="阿里云镜像加速器"></p><p>在 <code>daemon.json</code> 文件中添加以下内容：</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token property">"registry-mirrors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token string">"https://xxx.mirror.aliyuncs.com"</span><span class="token punctuation">,</span>         <span class="token comment">// 填写自己的阿里云id</span>    <span class="token string">"https://docker.mirrors.ustc.edu.cn/"</span><span class="token punctuation">,</span>    <span class="token comment">// 科大镜像</span>    <span class="token string">"https://hub-mirror.c.163.com/"</span><span class="token punctuation">,</span>  <span class="token comment">// 网易</span>    <span class="token string">"https://reg-mirror.qiniu.com"</span>  <span class="token comment">// 七牛云加速器</span>  <span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>验证 JSON 格式</strong>：</p><p>确保文件内容格式正确，可以通过以下命令验证：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cat</span> /etc/docker/daemon.json <span class="token operator">|</span> python <span class="token parameter variable">-m</span> json.tool<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果格式正确，命令会输出格式化的 JSON。如果有错误，会提示相关信息。<br><img src="https://s2.loli.net/2024/06/26/wDNLO2dMImPhpsX.png" alt="添加多种镜像源"></p></li><li><p><strong>重新加载 Docker 配置并重启 Docker 服务</strong>：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> systemctl daemon-reload<span class="token function">sudo</span> systemctl restart <span class="token function">docker</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p><strong>检查 Docker 服务状态</strong>：</p><p>确保 Docker 服务正常运行：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> systemctl status <span class="token function">docker</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p><strong>测试 Docker 加速器配置</strong>：</p><p>尝试再次运行 <code>hello-world</code> 容器：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> run <span class="token parameter variable">--rm</span> hello-world<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://s2.loli.net/2024/06/26/J3BNOgxpFiITUoh.png" alt="拉取成功"></p></li></ol><p>通过配置多个镜像加速器，Docker 将依次尝试这些加速器来拉取镜像，以提高拉取镜像的成功率和速度。如果按照上述步骤操作后仍然遇到问题，请检查网络连接或镜像加速器的可用性。</p><h2 id="七、添加内核参数"><a href="#七、添加内核参数" class="headerlink" title="七、添加内核参数"></a>七、添加内核参数</h2><p>如果在 CentOS 使用 Docker 时看到以下警告信息：</p><pre class="line-numbers language-text" data-language="text"><code class="language-text">WARNING: bridge-nf-call-iptables is disabledWARNING: bridge-nf-call-ip6tables is disabled<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>请添加内核配置参数以启用这些功能：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">tee</span> <span class="token parameter variable">-a</span> /etc/sysctl.conf <span class="token operator">&lt;&lt;-</span><span class="token string">EOFnet.bridge.bridge-nf-call-ip6tables = 1net.bridge.bridge-nf-call-iptables = 1EOF</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>然后重新加载 <code>sysctl.conf</code>：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">sysctl</span> <span class="token parameter variable">-p</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pdf工具推荐</title>
      <link href="/posts/810b.html"/>
      <url>/posts/810b.html</url>
      
        <content type="html"><![CDATA[<h1 id="PDF工具"><a href="#PDF工具" class="headerlink" title="PDF工具"></a>PDF工具</h1><p>在平时的工作过程中，不可避免的会遇到pdf的处理问题……这里推荐一个网页工具——PDF24</p><h2 id="PDF24"><a href="#PDF24" class="headerlink" title="PDF24"></a>PDF24</h2><p>功能超多</p><p><img src="https://s2.loli.net/2024/06/18/wOPBsLTyGR3WEn1.png" alt="PDF24"></p><p>例如，你可以把多张图片合成一个pdf。选择<code>将图像转换为PDF</code>功能，将多张图片拖入，上传成功后点击生成PDF</p><p><img src="https://s2.loli.net/2024/06/18/N9V416yCuAa8ckx.png" alt="图片转pdf"></p><p><img src="https://s2.loli.net/2024/06/18/FILslc9TQ8Gh1VC.png" alt="下载PDF"></p>]]></content>
      
      
      <categories>
          
          <category> 资源 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pdf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sitemap</title>
      <link href="/posts/527d.html"/>
      <url>/posts/527d.html</url>
      
        <content type="html"><![CDATA[<h1 id="sitemap"><a href="#sitemap" class="headerlink" title="sitemap"></a>sitemap</h1><p><a href="https://www.seozen.top/what-sitemap-is.html">Sitemap是什么？有什么作用-SEO基础 - SEO禅 (seozen.top)</a></p><p><a href="https://blog.csdn.net/qq_34403283/article/details/129487235">网站地图是什么？该如何生成详细介绍-CSDN博客</a></p>]]></content>
      
      
      <categories>
          
          <category> 站长必会 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sitemap </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kuboard</title>
      <link href="/posts/2860.html"/>
      <url>/posts/2860.html</url>
      
        <content type="html"><![CDATA[<h1 id="Kuboard"><a href="#Kuboard" class="headerlink" title="Kuboard"></a>Kuboard</h1><p><a href="https://blog.csdn.net/qq_34168515/article/details/108007760">亲测！推荐一款k8s前端操作界面 Kuboard for K8S_kuboard 前端镜像-CSDN博客</a></p><p><a href="https://kuboard.cn/">Kuboard_Kubernetes教程_K8S安装_管理界面</a></p><p><a href="https://www.bilibili.com/video/BV1Du4m137pK/?vd_source=923576200c9e01ef7a19af269b7702a0">Kubernetes(k8s)是什么？架构是怎么样的？6分钟快速入门_哔哩哔哩_bilibili</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> k8s </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>k8s</title>
      <link href="/posts/f923.html"/>
      <url>/posts/f923.html</url>
      
        <content type="html"><![CDATA[<h1 id="k8s"><a href="#k8s" class="headerlink" title="k8s"></a>k8s</h1><h2 id="k8s集群"><a href="#k8s集群" class="headerlink" title="k8s集群"></a>k8s集群</h2><h2 id="k8s-vs-docker"><a href="#k8s-vs-docker" class="headerlink" title="k8s vs docker"></a>k8s vs docker</h2><p><a href="https://www.jianshu.com/p/88f950abd982">K8S和docker区别—-入门级基础概念 - 简书 (jianshu.com)</a></p><p><a href="https://blog.csdn.net/crazymakercircle/article/details/130073643">K8S学习圣经：大白话说K8S底层原理，14W字实现K8S自由_尼恩三部曲pdf下载-CSDN博客</a></p><p><a href="https://developer.aliyun.com/article/1366693">史上最全干货！Kubernetes 原理+实战总结（全文6万字，90张图，100个知识点）（上）-阿里云开发者社区 (aliyun.com)</a></p><p><a href="https://segmentfault.com/a/1190000039844000">后端 - 最新、最全、最详细的 K8S 学习笔记总结（2021最新版）！建议收藏 - 民工哥技术之路 - SegmentFault 思否</a></p><p><a href="https://developer.aliyun.com/article/718798">从零开始入门 K8s| 阿里技术专家详解 K8s 核心概念-阿里云开发者社区 (aliyun.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> k8s </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>xshell文件传输</title>
      <link href="/posts/d757.html"/>
      <url>/posts/d757.html</url>
      
        <content type="html"><![CDATA[<h1 id="xshell文件传输"><a href="#xshell文件传输" class="headerlink" title="xshell文件传输"></a>xshell文件传输</h1><p>在Xshell中进行文件传输几种常见的情况和方法：</p><h2 id="直接拖放"><a href="#直接拖放" class="headerlink" title="直接拖放"></a>直接拖放</h2><p>在使用xshell时，遇到文件传输会不可避免的要用到另外一个工具Xtp,但是频繁的使用Xt印会比较麻烦，那么有没有一种更加直接简单的方法呢？<br>当所需上传的文件比较小的时候，可以直接将自己主机上桌面上的小文件拖到Xshell中（本质上是拖到远程主机或者虚拟机中)</p><p><a href="https://blog.csdn.net/Fwjian12345/article/details/114978440">如何直接拖动文件到 Xshell 中_直接拖拽到xshell-CSDN博客</a></p><ol><li>下载 lrzsz 工具：<code>yum install lrzsz</code></li><li>进入虚拟机机中的目标文件夹中</li><li>直接拖动文件到 Xshell 中</li><li>再次查看该目录</li></ol><p>在Xshell中，上传本地文件到虚拟机（例如Linux服务器）可以通过直接拖放操作完成，前提是文件大小适中并且您的Xshell与虚拟机之间的会话已经建立。下面是详细的步骤：</p><ol><li><p><strong>确保连接</strong>：首先，您需要通过Xshell成功连接到您的虚拟机。这通常涉及到输入虚拟机的IP地址、用户名和密码。</p></li><li><p><strong>检查会话设置</strong>：虽然大多数情况下Xshell默认支持文件传输，但确认您的会话配置允许文件传输也是一个好习惯。通常，使用SSH协议连接就足够进行文件传输了。</p></li><li><p><strong>直接拖放文件</strong>：</p><ul><li>在您的电脑上，找到需要上传的文件。</li><li>打开Xshell，确保当前会话窗口是活动的，也就是您已经成功登录到了虚拟机的命令行界面。</li><li>直接将文件从资源管理器（例如Windows的文件浏览器）拖动到Xshell的终端窗口中。</li></ul></li><li><p><strong>观察传输过程</strong>：一旦文件被拖放到Xshell窗口，Xshell将会自动开始上传文件。在Linux终端中，您可能会看到文件传输的进度或完成提示。</p></li></ol><p>请注意，这种方法适用于较小的文件。如果文件较大或者需要更复杂的传输管理（如文件夹传输、断点续传等），可能需要借助Xftp这样的专业SFTP客户端，或是使用命令行工具如<code>scp</code>、<code>sftp</code>，以及确保虚拟机中已安装lrzsz工具包以使用<code>rz</code>和<code>sz</code>命令进行上传和下载。</p><p>直接拖放文件到Xshell的功能并没有明确的文件大小限制说明，这通常取决于Xshell本身的实现、系统资源（如内存和磁盘空间）、以及网络状况。然而，实际操作中可能会受到Xshell所使用的传输协议（如ZModem，即<code>rz</code>&#x2F;<code>sz</code>命令）的限制，其中<code>rz</code>命令上传文件的大小限制通常是4GB。</p><p>如果需要传输大于4GB的文件，建议使用SFTP或SCP等其他方法，因为这些方法理论上支持传输任意大小的文件，只要系统资源和网络允许。使用SFTP时，文件大小仅受限于系统文件处理能力和存储空间，而不是协议本身。</p><p>因此，对于大文件传输，推荐使用SFTP或SCP命令行工具，以确保文件能够被完整无误地传输，而不受特定工具内置限制的影响。</p><h2 id="使用ZModem（rz-sz）命令"><a href="#使用ZModem（rz-sz）命令" class="headerlink" title="使用ZModem（rz&#x2F;sz）命令"></a>使用ZModem（rz&#x2F;sz）命令</h2><p><strong>适用场景</strong>：适用于传输小至中等大小的文件，且服务器支持ZModem协议。</p><p><strong>前提条件</strong>：确保服务器上已安装并配置了<code>lrzsz</code>包，这是<code>rz</code>和<code>sz</code>命令的实现。</p><p><strong>步骤</strong>：</p><ol><li><p><strong>上传文件</strong>（使用<code>rz</code>命令）：</p><ul><li>在Xshell终端中，切换到你想放置文件的目录。</li><li>输入命令 <code>rz</code>，然后按回车。</li><li>Xshell会弹出文件选择对话框，选择要上传的文件后，文件即开始上传。</li><li>当遇到rz 无法上传已经存在的文件的时候，可以使用rz -y（覆盖上传）</li></ul></li><li><p><strong>下载文件</strong>（使用<code>sz</code>命令）：</p><ul><li>在Xshell终端中，位于目标文件所在的目录下。</li><li>输入命令 <code>sz 文件名</code>，例如 <code>sz myfile.txt</code>，然后按回车。</li><li>你的电脑将会自动保存下载的文件，或者提示你选择保存位置。</li></ul></li></ol><p><strong>注意</strong>：使用<code>rz</code>和<code>sz</code>命令进行文件传输时，存在文件大小限制的问题。通常情况下，通过ZModem协议（<code>rz</code>和<code>sz</code>命令所依赖的协议）传输文件，可能会遇到单个文件大小不超过4GB的限制。这是因为ZModem协议使用的是一种32位的文件偏移量表示，理论上最大能处理的文件大小为2^32字节，即大约4GB。</p><p>因此，如果需要传输大于4GB的文件，使用<code>rz</code>和<code>sz</code>命令将不可行。此时，建议采用其他文件传输方法，比如<code>sftp</code>（Secure File Transfer Protocol），它没有大小限制，并且更加稳定和安全，适合大文件传输。使用<code>sftp</code>时，您可以在Xshell中直接开启一个<code>sftp</code>会话，或者使用独立的<code>sftp</code>客户端来进行文件传输。</p><h2 id="使用SFTP（推荐）"><a href="#使用SFTP（推荐）" class="headerlink" title="使用SFTP（推荐）"></a>使用SFTP（推荐）</h2><p><strong>适用场景</strong>：适用于所有场景，特别是需要传输大文件或对安全性有要求的情况。</p><p><strong>步骤</strong>：</p><ol><li><p><strong>打开SFTP会话</strong>：</p><ul><li>在Xshell主界面，点击顶部菜单的“文件” &gt; “新建” &gt; “文件传输会话”。</li><li>输入会话名称，选择“SFTP”作为协议，填写远程服务器的IP地址、端口号（默认22）、用户名和密码，然后点击“确定”。</li></ul></li><li><p><strong>浏览和传输文件</strong>：</p><ul><li>新建的SFTP会话窗口将显示本地文件系统和远程服务器的文件结构。</li><li>可以通过拖放或右键菜单操作，在本地与远程目录间上传&#x2F;下载文件。</li><li>也可以在右侧的远程目录中创建、删除、重命名文件或目录。</li></ul></li></ol><h2 id="使用SCP命令"><a href="#使用SCP命令" class="headerlink" title="使用SCP命令"></a>使用SCP命令</h2><p><strong>适用场景</strong>：当SFTP不可用但SSH连接可用时，适用于手动脚本或自动化任务。</p><p><strong>步骤</strong>：</p><ol><li><p><strong>从本地上传到服务器</strong>：</p><ul><li>打开终端或命令提示符，输入：<pre class="line-numbers language-none"><code class="language-none">scp 文件路径 用户名@远程IP:目标路径<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>例如：<code>scp ~/Desktop/myfile.txt root@192.168.1.100:/home/root/</code></li></ul></li><li><p><strong>从服务器下载到本地</strong>：</p><ul><li>类似地，从服务器下载文件到本地使用：<pre class="line-numbers language-none"><code class="language-none">scp 用户名@远程IP:文件路径 本地目标路径<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>例如：<code>scp root@192.168.1.100:/home/root/myfile.txt ~/Downloads/</code></li></ul></li></ol><h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><ul><li><strong>权限问题</strong>：确保你的用户账户有足够的权限读写目标文件和目录。</li><li><strong>防火墙设置</strong>：某些网络环境下，可能需要调整防火墙规则以允许SFTP或SCP的连接。</li><li><strong>安全性</strong>：推荐使用密钥认证而非密码登录，以增加安全性。</li></ul>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> xshell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>鼠标还能这么用？</title>
      <link href="/posts/b997.html"/>
      <url>/posts/b997.html</url>
      
        <content type="html"><![CDATA[<h1 id="鼠标还能这么用？"><a href="#鼠标还能这么用？" class="headerlink" title="鼠标还能这么用？"></a>鼠标还能这么用？</h1><ul><li>鼠标左键点击：<ul><li>双击选中词</li><li>三击选中这句话</li><li>把光标放在内容开头，按住Shift键不放，把光标放在结尾再点击一下就能选择大段文字，在选中内容后，大部分情况下，只要把它拖到任意一个输入框就能完成复制粘贴。除了文字，也可以用在其他内容上，比如拖动一张图片到任意文件夹实现快速下载，拖动图片到微信输入框就可以快捷发送。在浏览器中，拖动超链接到外部输入框，拖动链接到上方的搜索框可以替换到该链接。</li><li>按住Alt键，在浏览器中选中链接中的部分文字</li><li>对微信快捷方式快速连击，实现微信多开</li></ul></li><li>鼠标左键拖动：<ul><li>提取网址、复制文字、复制为图像文件</li><li>安装WGestures等软件后实现鼠标手势</li><li>部分浏览器直接支持鼠标手势</li></ul></li><li>鼠标中键点击：<ul><li>关闭Word或浏览器标签页</li><li>Alt+Tab在桌面视图中关闭窗口</li></ul></li><li>鼠标中键滑动<ul><li>按住Shift，横向滑动</li></ul></li><li>鼠标右键点击：<ul><li>Shift，在桌面展开菜单</li></ul></li></ul><p><a href="https://www.bilibili.com/video/BV1Gz421177a/?spm_id_from=333.999.0.0&vd_source=923576200c9e01ef7a19af269b7702a0">活了20多年，第一次知道鼠标还能这么用…_哔哩哔哩_bilibili</a></p>]]></content>
      
      
      <categories>
          
          <category> 今日学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 鼠标 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>十大排序算法</title>
      <link href="/posts/564c.html"/>
      <url>/posts/564c.html</url>
      
        <content type="html"><![CDATA[<h2 id="一、冒泡排序（Bubble-Sort）"><a href="#一、冒泡排序（Bubble-Sort）" class="headerlink" title="一、冒泡排序（Bubble Sort）"></a>一、冒泡排序（Bubble Sort）</h2><p>基本思想：</p><p>从数组的一段开始，两两比较大小，较小的数上冒，较大的数下沉。每轮比较都会一个数回归到应该所在的位置上</p><h3 id="算法流程"><a href="#算法流程" class="headerlink" title="算法流程"></a>算法流程</h3><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F.gif" alt="演示"></p><h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>时间复杂度：</p><ul><li><p><strong>最坏情况（逆序排列）</strong>：<br>在最坏情况下，每一对元素都需要比较和交换，总共需要进行 (\frac{n(n-1)}{2}) 次比较和交换，因此时间复杂度为 (O(n^2))。</p></li><li><p><strong>最佳情况（已排序）</strong>：<br>在最佳情况下，数组已经是有序的，第一次遍历时不会发生任何交换操作。由于使用了标志位 <code>flag</code> 来检测是否发生交换，排序可以在第一次遍历后提前终止，因此时间复杂度为 (O(n))。</p></li><li><p><strong>平均情况</strong>：<br>在平均情况下，时间复杂度也是 (O(n^2))，因为大多数情况下都需要对每对元素进行比较和交换。</p></li></ul><p>空间复杂度：</p><ul><li>冒泡排序是原地排序算法（in-place sorting），只需要常数级别的额外空间来存储临时变量。因此，空间复杂度为 (O(1))。</li></ul><p>稳定性</p><ul><li>冒泡排序是稳定的排序算法。在冒泡排序中，只有当两个元素满足 `A[j-1] &gt; A[j]` 时才会交换它们的位置，这意味着如果两个相等的元素，排序后它们的相对位置不会改变，因此冒泡排序保持了稳定性。</li></ul><p>适用性</p><ul><li><p><strong>顺序表（数组）</strong>：<br>冒泡排序适用于顺序表（数组），因为在数组中，元素的随机访问效率很高，可以直接通过索引访问和修改元素值。</p></li><li><p><strong>链表</strong>：<br>冒泡排序不适用于链表。虽然链表也可以通过两两比较相邻元素进行交换，但由于链表中的元素交换操作涉及指针的调整，效率较低。而且链表不支持直接访问，需要从头遍历到特定位置，增加了额外的时间开销。</p></li></ul><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><img src="https://s2.loli.net/2024/05/28/xwvXVKyc4uprj8L.png" alt="冒泡排序"></p><ul><li><p><strong>时间复杂度</strong>：</p><ul><li>最坏情况：(O(n^2))</li><li>最佳情况：(O(n))</li><li>平均情况：(O(n^2))</li></ul></li><li><p><strong>空间复杂度</strong>：</p><ul><li>(O(1))</li></ul></li><li><p><strong>稳定性</strong>：</p><ul><li>稳定</li></ul></li><li><p><strong>适用性</strong>：</p><ul><li>适用于顺序表（数组）</li><li>不适用于链表</li></ul></li></ul><p>冒泡排序在数组上的表现可以接受，尤其是在小规模或者近乎有序的数组上效率较高，但在链表上由于其结构特点并不适用。如果需要在链表上进行排序，通常选择适合链表的排序算法，如归并排序。</p><h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;iostream&gt;&#x2F;&#x2F; 交换函数void swap(int &amp;a, int &amp;b) &#123;    int temp &#x3D; a;    a &#x3D; b;    b &#x3D; temp;&#125;&#x2F;&#x2F; 冒泡排序算法void BubbleSort(int A[], int n) &#123;    for (int i &#x3D; 0; i &lt; n - 1; i++) &#123;        bool flag &#x3D; false; &#x2F;&#x2F; 表示本趟冒泡是否发生交换的标志        for (int j &#x3D; n - 1; j &gt; i; j--) &#123;            if (A[j - 1] &gt; A[j]) &#123; &#x2F;&#x2F; 若为逆序，交换                swap(A[j - 1], A[j]);                flag &#x3D; true; &#x2F;&#x2F; 发生了交换            &#125;        &#125;        if (!flag) &#123; &#x2F;&#x2F; 本趟遍历后没有发生交换，说明表已经有序            break;        &#125;    &#125;&#125;&#x2F;&#x2F; 主函数用于测试int main() &#123;    int A[] &#x3D; &#123;27, 49, 38, 65, 97, 76, 49&#125;;    int n &#x3D; sizeof(A) &#x2F; sizeof(A[0]);    BubbleSort(A, n);    for (int i &#x3D; 0; i &lt; n; i++) &#123;        std::cout &lt;&lt; A[i] &lt;&lt; &quot; &quot;;    &#125;    return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>标志位</strong>：<code>flag</code> 用于标记是否在当前轮次中发生了交换。如果在某一轮次中没有发生任何交换 (<code>if (!flag)</code>)，说明数组已经有序，提前退出排序，避免了不必要的遍历，提高了效率</p><h2 id="二、快速排序（Quick-Sort）☆"><a href="#二、快速排序（Quick-Sort）☆" class="headerlink" title="二、快速排序（Quick Sort）☆"></a>二、快速排序（Quick Sort）☆</h2><p>它的核心思想是分治法，通过选择一个“基准”元素，将数组分成比基准小的部分和比基准大的部分，然后递归地对这两部分进行排序。</p><h3 id="算法流程-1"><a href="#算法流程-1" class="headerlink" title="算法流程"></a>算法流程</h3><p><img src="https://s2.loli.net/2024/05/28/aG9jF57cVWYtqh8.gif" alt="演示"></p><p>选择基准元素： 从数组中选择一个基准元素，通常是数组中的第一个元素。<br>分区（Partition）： 按基准元素的大小把数组分为两部分。小于基准元素的数放在左边，大于或等于的数放在右边，基准元素此时在其最终的位置。<br>递归排序： 递归地对基准元素两侧的子序列进行排序。<br>合并： 不需要合并步骤，因为在分区步骤中已经确定了基准元素的最终位置。<br>快排思想广泛适用于408专业课，只要是涉及线性表，80%以上的问题可用快排快速结束战斗。</p><h3 id="分析-1"><a href="#分析-1" class="headerlink" title="分析"></a>分析</h3><p><img src="https://s2.loli.net/2024/05/28/ZqpyPFDMOb3YUit.png" alt="快排分析"></p><p><img src="https://s2.loli.net/2024/05/28/OJbch93CKd1stVz.png" alt="总结"></p><p><strong>时间复杂度</strong></p><ol><li><strong>最坏情况</strong>：<ul><li>最坏情况发生在每次选择的基准元素都是当前子数组的最小或最大元素，使得划分不均匀。例如，数组已经有序（正序或逆序）时，每次划分后只有一个子数组有效，这样递归的深度为 O(n)。在这种情况下，每次划分需要 O(n)的时间，总的时间复杂度为 O(n^2^)</li></ul></li><li><strong>平均情况</strong>：<ul><li>平均情况下，每次选择的基准元素能够将数组大致均分为两部分。递归的深度大约为nlogn，每次划分操作需要 O(n) 的时间。因此，平均时间复杂度为 (nlogn)。</li></ul></li><li><strong>最佳情况</strong>：<ul><li>最佳情况与平均情况类似，每次选择的基准元素能够将数组完全均分。时间复杂度同样为 O(nlogn)</li></ul></li></ol><p><strong>空间复杂度</strong></p><ol><li><strong>原地排序（In-place Sorting）</strong>：<ul><li>快排是一种原地排序算法，主要在输入数组上进行操作，不需要额外的存储空间。</li><li>但是，由于递归调用栈的存在，空间复杂度取决于递归的深度。</li></ul></li><li><strong>最坏情况</strong>：<ul><li>最坏情况与时间复杂度相同，递归深度为 O(n)，此时空间复杂度为 O(n)</li></ul></li><li><strong>平均情况</strong>：<ul><li>平均情况下，递归深度为O(log n)，因此空间复杂度为 O(log n)</li></ul></li></ol><p><strong>稳定性</strong>：</p><p>快速排序（QuickSort）是一种不稳定的排序算法。稳定性指的是在排序过程中，两个相等的元素在排序前后的相对位置保持不变。</p><blockquote><p>为什么快速排序不稳定？</p></blockquote><p>在快速排序中，选择一个基准元素后，将数组分成两部分：比基准元素小的和比基准元素大的。在这个过程中，如果存在与基准元素相等的元素，它们可能会被交换到不同的位置，从而改变它们的相对顺序。</p><p>考虑一个简单的例子：初始数组：[2，2，1]</p><p>基准元素选择第一个元素 ‘2’，进行第一次划分时：1&lt;2，将 ‘1’ 放在左边，而第二个 ‘2’ 等于基准元素’2’，不移动，最后基准元素（也是第一个’2’）被放在最后的位置。可以看到两个2的位置没有保持原来的相对位置，所以不稳定。</p><blockquote><p>如何实现稳定？</p></blockquote><p>虽然原始的快速排序是不稳定的，但可以通过一些改进使其稳定：</p><ol><li><p><strong>三向切分</strong>：</p><ul><li>采用三向切分的方法，将数组分为三部分：小于基准元素的部分、等于基准元素的部分、大于基准元素的部分。这样可以确保所有与基准元素相等的元素保持相对顺序不变。</li></ul></li><li><p><strong>记录元素原始位置</strong>：</p><ul><li>在排序时，使用元组记录每个元素及其原始位置，然后按元组进行排序。最终结果可以通过元组中的位置信息恢复原始相对顺序。</li></ul></li></ol><h3 id="代码实现-1"><a href="#代码实现-1" class="headerlink" title="代码实现"></a>代码实现</h3><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int Partition(int A[], int low, int high) &#123;    int pivot &#x3D; A[low]; &#x2F;&#x2F; 第一个元素作为枢轴    while (low &lt; high) &#123;        while (low &lt; high &amp;&amp; A[high] &gt;&#x3D; pivot) &#123;            --high;        &#125;        A[low] &#x3D; A[high]; &#x2F;&#x2F; 比枢轴小的元素移动到左端        while (low &lt; high &amp;&amp; A[low] &lt;&#x3D; pivot) &#123;            ++low;        &#125;        A[high] &#x3D; A[low]; &#x2F;&#x2F; 比枢轴大的元素移动到右端    &#125;    A[low] &#x3D; pivot; &#x2F;&#x2F; 枢轴元素存放到最终位置    return low; &#x2F;&#x2F; 返回存放枢轴的最终位置&#125;void QuickSort(int A[], int low, int high) &#123;    if (low &lt; high) &#123;        int pivotIndex &#x3D; Partition(A, low, high);        QuickSort(A, low, pivotIndex - 1); &#x2F;&#x2F; 递归排序左子序列        QuickSort(A, pivotIndex + 1, high); &#x2F;&#x2F; 递归排序右子序列    &#125;&#125;int main() &#123;    int A[] &#x3D; &#123;3, 6, 8, 10, 1, 2, 1&#125;;    int n &#x3D; sizeof(A) &#x2F; sizeof(A[0]);    QuickSort(A, 0, n - 1);    for (int i &#x3D; 0; i &lt; n; ++i) &#123;        std::cout &lt;&lt; A[i] &lt;&lt; &quot; &quot;;    &#125;    return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>有人可能会认为：循环内部的两个循环中的判断条件<code>low &lt; high</code>多余了，实则不然。</p><p>它是必要的，以确保在执行数组访问操作时不会出现索引越界的问题。</p><p>为了进一步解释这一点，让我们看看 <code>Partition</code> 函数在没有 <code>low &lt; high</code> 判断时会发生什么：</p><p>假设我们在内部循环中删除 <code>low &lt; high</code> 判断：</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int Partition(int A[], int low, int high) &#123;    int pivot &#x3D; A[low]; &#x2F;&#x2F; 第一个元素作为枢轴    while (low &lt; high) &#123;        while (A[high] &gt;&#x3D; pivot) &#123;            --high;        &#125;        A[low] &#x3D; A[high]; &#x2F;&#x2F; 比枢轴小的元素移动到左端        while (A[low] &lt;&#x3D; pivot) &#123;            ++low;        &#125;        A[high] &#x3D; A[low]; &#x2F;&#x2F; 比枢轴大的元素移动到右端    &#125;    A[low] &#x3D; pivot; &#x2F;&#x2F; 枢轴元素存放到最终位置    return low; &#x2F;&#x2F; 返回存放枢轴的最终位置&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在上述代码中，如果数组中的所有元素都等于 <code>pivot</code>（例如，数组为 <code>[1, 1, 1, 1, 1]</code>，且 <code>pivot</code> 也是 <code>1</code>），内层循环将永远不会终止，因为没有 <code>low &lt; high</code> 条件来打破循环。这将导致程序进入死循环。</p><p>因此，内部循环中的 <code>low &lt; high</code> 判断是必要的，以确保在适当的时候跳出循环，避免索引越界和无限循环。</p></blockquote><h3 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h3><p>化思路：尽量选择可以把数据中分的枢轴元素eg：</p><p>①选头、中、尾三个位置的元素，取中间值作为枢轴元素；</p><p>②随机选一个元素作为枢轴元素</p><h2 id="三、选择排序（Selection-Sort）"><a href="#三、选择排序（Selection-Sort）" class="headerlink" title="三、选择排序（Selection Sort）"></a>三、选择排序（Selection Sort）</h2><p>基本思想：每次从未排序部分中选择最小（或最大）的元素，放到已排序部分的后面。</p><h3 id="算法流程-2"><a href="#算法流程-2" class="headerlink" title="算法流程"></a>算法流程</h3><p><img src="https://s2.loli.net/2024/05/28/UfjTqWLDR5wr9MV.gif" alt="演示"></p><p>一般步骤：<br>找到最小元素： 从未排序部分选择最小的元素。<br>交换位置： 将选中的最小元素与未排序部分的第一个元素交换位置。<br>更新已排序部分和未排序部分：已排序部分增加一个元素，未排序部分减少一个元素。<br>重复步骤2-4： 重复执行以上步骤，直到整个数组有序。</p><h3 id="分析-2"><a href="#分析-2" class="headerlink" title="分析"></a>分析</h3><p><img src="https://s2.loli.net/2024/06/19/mHn4fJdqPkT79vG.png" alt="选择排序"></p><p><strong>时间复杂度</strong>：</p><p>不管数组的初始顺序如何，选择排序的比较次数都是固定的。第一次进行n-1趟比较，找到最小元素；第二次需要n-2趟，依此类推。总的比较次数为 (n-1) + (n-2) + … + 1 &#x3D; $\frac{n(n-1)}{2}\approx O(n^2)$</p><p><strong>空间复杂度分析</strong>：</p><p>选择排序是一种原地排序算法，它只需要常数级别的额外空间来存储临时变量（用于交换元素）。因此，选择排序的空间复杂度为 O(1)。</p><p><strong>稳定性</strong></p><p>选择排序是一种不稳定的排序算法：例如，数组 [2, <em>2</em>, 1]，最终的排序结果为：[1, <em>2</em>, 2]，第一个 2 和第二个 2 会交换位置，从而改变它们的相对顺序。</p><h3 id="代码实现-2"><a href="#代码实现-2" class="headerlink" title="代码实现"></a>代码实现</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">selectionSort</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> min_idx<span class="token punctuation">;</span>    <span class="token comment">// 遍历未排序部分的每个元素</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 找到未排序部分的最小元素的索引</span>        min_idx <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>min_idx<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                min_idx <span class="token operator">=</span> j<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 将找到的最小元素与当前未排序部分的第一个元素交换</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>min_idx <span class="token operator">!=</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>min_idx<span class="token punctuation">]</span><span class="token punctuation">;</span>            arr<span class="token punctuation">[</span>min_idx<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="四、堆排序（Heap-Sort）"><a href="#四、堆排序（Heap-Sort）" class="headerlink" title="四、堆排序（Heap Sort）"></a>四、堆排序（Heap Sort）</h2><p>于选择排序相同，堆排序也是选择排序。每一趟在待排序元素中选取关键字最小（或最大）的元素加入有序子序列。</p><p>适用于数组存储，使用链式存储会降低效率，对每一个节点而言，保证其左右子树均比其大或者小，排序过程中时刻保持堆的特性。排序的过程是每次拿走堆顶元素放入有序序列，然后把最后一行的最后一个元素堆到堆顶，此时堆的特性遭到破坏，下沉堆顶元素，直至恢复堆的特性，依次重复，直到堆内没有元素。<br>堆数据结构遇到新插入的元素放在整棵树最后一层的最后一个节点，然后依次往上浮（不用考虑从上面换下来的元素，因为原来堆结构稳定，换下来的元素依旧比下面的元素大）</p><p><img src="https://s2.loli.net/2024/06/19/Zg51Vpuvs37A9hD.png" alt="堆"></p><ul><li>大根堆&gt;左、右</li></ul><h3 id="算法流程-3"><a href="#算法流程-3" class="headerlink" title="算法流程"></a>算法流程</h3><p><img src="https://img-blog.csdnimg.cn/9bfd168f6b654a51bd73e724d5032b19.gif" alt="堆排序"></p><ul><li>构建堆（Heapify）： 将待排序的序列视为一个完全二叉树，并将其转换为一个堆。对于最大堆，可以通过从最后一个非叶子节点开始向前遍历，对每个节点进行堆调整操作，保证每个节点都满足堆的性质。</li><li>堆排序： 通过反复从堆中取出最大（或最小）元素，并将其放到数组的末尾。每次取出元素后，需要对剩余元素进行堆调整，以保持堆的性质。</li></ul><h3 id="分析-3"><a href="#分析-3" class="headerlink" title="分析"></a>分析</h3><p>时间复杂度</p><p>空间复杂度</p><p>稳定性</p><p>适用性</p><h3 id="代码实现-3"><a href="#代码实现-3" class="headerlink" title="代码实现"></a>代码实现</h3><h2 id="五、插入排序（Insertion-Sort）"><a href="#五、插入排序（Insertion-Sort）" class="headerlink" title="五、插入排序（Insertion Sort）"></a>五、插入排序（Insertion Sort）</h2><p>在要排序的一组数中，假定前n-1个数已经排好序，将第n个数插到前面的有序数列中，使得这n个数也是排好顺序的。如此反复循环，直到全部排好顺序。</p><h3 id="算法流程-4"><a href="#算法流程-4" class="headerlink" title="算法流程"></a>算法流程</h3><img src="https://img-blog.csdnimg.cn/2496685c93414492a5e344baf8397777.gif" alt="插入排序演示"  /><p>初始状态： 将第一个元素视为已排序序列，其余元素为未排序序列。<br>遍历未排序序列： 从第二个元素开始，逐个将未排序序列的元素插入到已排序序列的适当位置，以保持已排序序列的有序性。<br>插入操作： 对于每个要插入的元素，与已排序序列的元素比较，找到插入位置，并将元素插入到该位置。插入过程中，已排序序列的元素可能需要后移，为新元素腾出空间。<br>重复步骤2-3： 重复进行插入操作，直到未排序序列为空。</p><h3 id="分析-4"><a href="#分析-4" class="headerlink" title="分析"></a>分析</h3><p>时间复杂度</p><p>空间复杂度</p><p>是否稳定</p><h3 id="代码实现-4"><a href="#代码实现-4" class="headerlink" title="代码实现"></a>代码实现</h3><h3 id="优化-1"><a href="#优化-1" class="headerlink" title="优化"></a>优化</h3><h4 id="使用哨兵"><a href="#使用哨兵" class="headerlink" title="使用哨兵"></a>使用哨兵</h4><h4 id="折半插入排序"><a href="#折半插入排序" class="headerlink" title="折半插入排序"></a>折半插入排序</h4><h2 id="六、希尔排序（Shell-Sort）"><a href="#六、希尔排序（Shell-Sort）" class="headerlink" title="六、希尔排序（Shell Sort）"></a>六、希尔排序（Shell Sort）</h2><p>基本思想</p><p>在要排序的一组数中，根据某一增量分为若干子序列，并对子序列分别进行插入排序。<br>然后逐渐将增量减小,并重复上述过程。直至增量为1,此时数据序列基本有序,最后进行插入排序。增量大小会影响到排序的效率。</p><h3 id="算法流程-5"><a href="#算法流程-5" class="headerlink" title="算法流程"></a>算法流程</h3><p><img src="https://s2.loli.net/2024/05/28/MJtqVXcmPkLwjby.gif" alt="演示"></p><ol><li>选择间隔序列： 选择一个递减的间隔序列，通常以 n&#x2F;2、n&#x2F;4、n&#x2F;8… 等为步长，直到步长为 1。</li><li>对每个间隔进行插入排序： 对数组中每个间隔所形成的子序列进行插入排序。</li><li>缩小间隔： 不断缩小间隔，重复步骤2，直到最终间隔为 1。</li></ol><h3 id="分析-5"><a href="#分析-5" class="headerlink" title="分析"></a>分析</h3><p>时间复杂度</p><p>空间复杂度</p><p>稳定性</p><p>适用性</p><h3 id="代码实现-5"><a href="#代码实现-5" class="headerlink" title="代码实现"></a>代码实现</h3><h2 id="七、归并排序（Merge-Sort）"><a href="#七、归并排序（Merge-Sort）" class="headerlink" title="七、归并排序（Merge Sort）"></a>七、归并排序（Merge Sort）</h2><p>基本思想</p><h3 id="算法流程-6"><a href="#算法流程-6" class="headerlink" title="算法流程"></a>算法流程</h3><p>图+说明</p><h3 id="分析-6"><a href="#分析-6" class="headerlink" title="分析"></a>分析</h3><p>时间复杂度</p><p>空间复杂度</p><p>是否稳定</p><h3 id="代码实现-6"><a href="#代码实现-6" class="headerlink" title="代码实现"></a>代码实现</h3><h2 id="八、基数排序（Radix-Sort）"><a href="#八、基数排序（Radix-Sort）" class="headerlink" title="八、基数排序（Radix Sort）"></a>八、基数排序（Radix Sort）</h2><p>基本思想</p><h3 id="算法流程-7"><a href="#算法流程-7" class="headerlink" title="算法流程"></a>算法流程</h3><p>图+说明</p><h3 id="分析-7"><a href="#分析-7" class="headerlink" title="分析"></a>分析</h3><p>时间复杂度</p><p>空间复杂度</p><p>是否稳定</p><h3 id="代码实现-7"><a href="#代码实现-7" class="headerlink" title="代码实现"></a>代码实现</h3><h2 id="九、计数排序（Counting-sort）"><a href="#九、计数排序（Counting-sort）" class="headerlink" title="九、计数排序（Counting sort）"></a>九、计数排序（Counting sort）</h2><p>基本思想</p><h3 id="算法流程-8"><a href="#算法流程-8" class="headerlink" title="算法流程"></a>算法流程</h3><p>图+说明</p><h3 id="分析-8"><a href="#分析-8" class="headerlink" title="分析"></a>分析</h3><p>时间复杂度</p><p>空间复杂度</p><p>稳定性</p><p>适用性</p><h3 id="代码实现-8"><a href="#代码实现-8" class="headerlink" title="代码实现"></a>代码实现</h3><h2 id="十、桶排序（Bucket-sorting）"><a href="#十、桶排序（Bucket-sorting）" class="headerlink" title="十、桶排序（Bucket sorting）"></a>十、桶排序（Bucket sorting）</h2><p>基本思想</p><p>桶排序是计数排序的升级版。它利用了函数的映射关系，高效与否的关键就在于这个映射函数的确定。<br>桶排序 (Bucket sort)的工作的原理：假设输入数据服从均匀分布，将数据分到有限数量的桶里，每<br>个桶再分别排序（有可能再使用别的排序算法或是以递归方式继续使用桶排序进行排</p><h3 id="算法流程-9"><a href="#算法流程-9" class="headerlink" title="算法流程"></a>算法流程</h3><p>图+说明</p><h3 id="分析-9"><a href="#分析-9" class="headerlink" title="分析"></a>分析</h3><p>时间复杂度</p><p>空间复杂度</p><p>稳定性</p><p>适用性</p><h3 id="代码实现-9"><a href="#代码实现-9" class="headerlink" title="代码实现"></a>代码实现</h3><h2 id="十一、外部排序小专题"><a href="#十一、外部排序小专题" class="headerlink" title="十一、外部排序小专题"></a>十一、外部排序小专题</h2><p>1.外部排序原理<br>2.外部排序开销及应用场景<br>2.多路归并（提高外排效率）<br>3.多路平衡归并与多路归并区别<br>4.败者树（优化关键字对比次数）<br>5.置换-选择排序（优化初始构造归并段的数量）<br>6.最佳归并树（本质：多元哈弗曼树）</p><h2 id="十二、根据算法的特性划分"><a href="#十二、根据算法的特性划分" class="headerlink" title="十二、根据算法的特性划分"></a>十二、根据算法的特性划分</h2><p>1.根据算法是否稳定划分<br>2.根据内&#x2F;外部排序划分<br>3.初始序列对算法有影响<br>4.是否是比较型</p><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><p>排序算法学习工具：usf算法动画演示</p><p>参考链接：</p><p><a href="https://blog.csdn.net/apple_51931783/article/details/134647970">十大排序算法及其特性最全总结，以408考察特性为基准_排序算法特点-CSDN博客</a></p><p><a href="https://developer.aliyun.com/article/1434703">【数据结构入门精讲 | 第十篇】考研408排序算法专项练习（二）-阿里云开发者社区 (aliyun.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 排序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>跨域问题及解决方案</title>
      <link href="/posts/887a.html"/>
      <url>/posts/887a.html</url>
      
        <content type="html"><![CDATA[<p> 这几天在调试网站的弹幕功能的过程中遇到了下面的问题，不太懂前端的鼠鼠看的一脸懵</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/CORS.png" alt="CORS"></p><hr><blockquote><p>时隔一年多，再次更新这篇文章。随着对前端技术的学习，对跨域问题有了更清晰的认识。当初撰写此文时，受限于前端知识的不足，只是记录了问题，并附上了别人的解决博客。如今，我将系统地补充「跨域问题及其核心解决方案」，希望能为读者提供更透彻的解析和实践指南。</p></blockquote><h1 id="跨域问题及解决方案"><a href="#跨域问题及解决方案" class="headerlink" title="跨域问题及解决方案"></a>跨域问题及解决方案</h1><blockquote><p><strong>浏览器同源策略</strong>：安全基石，也是跨域问题的根源</p></blockquote><h1 id="一、什么是跨域问题？"><a href="#一、什么是跨域问题？" class="headerlink" title="一、什么是跨域问题？"></a>一、什么是跨域问题？</h1><p>跨域（Cross-Origin）指浏览器禁止当前页面向<strong>不同协议（protocol）、域名（domain）或端口（port）</strong> 的服务器发起请求的安全限制。这是浏览器核心安全策略——<strong>同源策略（Same-Origin Policy）</strong> 的直接体现。</p><p>三者必须完全相同：</p><pre class="line-numbers language-none"><code class="language-none">http:&#x2F;&#x2F;www.example.com:80&#x2F;dir&#x2F;page.html└──协议─┘ └───主机───┘└─端口┘<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>举例说明：</p><table><thead><tr><th>请求URL</th><th>目标URL</th><th>是否跨域</th><th>原因</th></tr></thead><tbody><tr><td><code>https://a.com</code></td><td><code>https://a.com/api</code></td><td>否</td><td>同源</td></tr><tr><td><code>http://a.com</code></td><td><code>https://a.com</code></td><td>是</td><td>协议不同</td></tr><tr><td><code>http://a.com</code></td><td><code>http://b.com</code></td><td>是</td><td>域名不同</td></tr><tr><td><code>http://a.com:80</code></td><td><code>http://a.com:8080</code></td><td>是</td><td>端口不同</td></tr><tr><td><code>http://b.a.com</code></td><td><code>http://api.a.com</code></td><td>是</td><td>子域名不同</td></tr></tbody></table><h1 id="二、为什么需要同源策略？"><a href="#二、为什么需要同源策略？" class="headerlink" title="二、为什么需要同源策略？"></a>二、为什么需要同源策略？</h1><p>同源策略规定了来自同一源（协议、域名、端口三者都相同）的脚本，才能互相访问彼此的资源。</p><ol><li><strong>防止CSRF攻击</strong>：阻止恶意网站利用用户登录状态发起请求</li><li><strong>保护用户隐私</strong>：避免敏感数据被第三方脚本窃取</li><li><strong>隔离潜在威胁</strong>：限制不同源之间的DOM访问和操作</li></ol><h1 id="三、跨域场景"><a href="#三、跨域场景" class="headerlink" title="三、跨域场景"></a>三、跨域场景</h1><ol><li><p>前后端分离<br>前端页面部署在 <a href="http://localhost:3000，后端接口在">http://localhost:3000，后端接口在</a> <a href="http://api.example.com./">http://api.example.com。</a></p></li><li><p>CDN 与主站点<br>静态资源如图片、脚本、样式文件托管在 <a href="https://cdn.example.com,主站在/">https://cdn.example.com，主站在</a> <a href="https://www.example.com./">https://www.example.com。</a></p></li><li><p>第三方 API 调用<br>网页需要调用 <a href="https://api.thirdparty.com/">https://api.thirdparty.com</a> 提供的地图、支付、社交登录接口。</p></li><li><p>跨端口访问<br>同域名但不同端口：<a href="http://example.com:8000/">http://example.com:8000</a> 与 <a href="http://example.com:3000。">http://example.com:3000。</a></p></li><li><p>嵌入式 iframe<br>父页面与嵌入的 iframe 内容在不同域名下，需要交互数据。</p></li></ol><h1 id="四、解决方案"><a href="#四、解决方案" class="headerlink" title="四、解决方案"></a>四、解决方案</h1><h2 id="1-CORS（跨域资源共享）⭐️-现代首选方案"><a href="#1-CORS（跨域资源共享）⭐️-现代首选方案" class="headerlink" title="1. CORS（跨域资源共享）⭐️ 现代首选方案"></a>1. CORS（跨域资源共享）⭐️ <strong>现代首选方案</strong></h2><p>原理：浏览器自动实现的W3C标准，需要服务端配合设置响应头。CORS 通过服务器在响应头里添加一系列标识，告诉浏览器哪些跨域请求被允许。</p><ul><li><p><strong>基本响应头</strong></p><pre class="line-numbers language-http" data-language="http"><code class="language-http"><span class="token header"><span class="token header-name keyword">Access-Control-Allow-Origin</span><span class="token punctuation">:</span> <span class="token header-value">https://www.example.com</span></span><span class="token header"><span class="token header-name keyword">Access-Control-Allow-Methods</span><span class="token punctuation">:</span> <span class="token header-value">GET, POST, PUT</span></span><span class="token header"><span class="token header-name keyword">Access-Control-Allow-Headers</span><span class="token punctuation">:</span> <span class="token header-value">Content-Type, Authorization</span></span><span class="token header"><span class="token header-name keyword">Access-Control-Allow-Credentials</span><span class="token punctuation">:</span> <span class="token header-value">true</span></span><span class="token header"><span class="token header-name keyword">Access-Control-Max-Age</span><span class="token punctuation">:</span> <span class="token header-value">3600</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>简单请求 vs 预检请求</strong></p><ul><li><strong>简单请求</strong>：GET&#x2F;POST（<code>Content-Type</code> 为 <code>application/x-www-form-urlencoded</code>、<code>multipart/form-data</code> 或 <code>text/plain</code>）</li><li><strong>预检请求</strong>：对于其他方法或自定义头部，浏览器会先发送 <code>OPTIONS</code> 请求，服务器返回上述头部后才正式发起主请求。</li></ul></li></ul><p>优点</p><ul><li>标准化、浏览器原生支持</li><li>支持带凭证请求（<code>withCredentials=true</code>）</li></ul><p>缺点</p><ul><li>需要后端代码或配置支持</li><li>部分旧浏览器兼容性差</li></ul><p><strong>服务端配置示例（Node.js）</strong>：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 允许的跨域来源白名单（可维护多个域名）</span><span class="token keyword">const</span> <span class="token constant">ALLOWED_ORIGINS</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span>  <span class="token string">'https://yourdomain.com'</span><span class="token punctuation">,</span>  <span class="token string">'https://yourotherdomain.com'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> origin <span class="token operator">=</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>origin<span class="token punctuation">;</span>  <span class="token comment">// 动态设置允许跨域的源，仅限白名单内域名</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>origin <span class="token operator">&amp;&amp;</span> <span class="token constant">ALLOWED_ORIGINS</span><span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>origin<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Origin'</span><span class="token punctuation">,</span> origin<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 允许携带凭证（如 Cookie）</span>    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Credentials'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 避免 CDN 缓存误用跨源响应</span>    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Vary'</span><span class="token punctuation">,</span> <span class="token string">'Origin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">// 允许的 HTTP 方法（跨域请求中使用的）</span>  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Methods'</span><span class="token punctuation">,</span> <span class="token string">'GET, POST, PUT, DELETE, OPTIONS'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 允许的自定义请求头（需要与前端 fetch 的 header 保持一致）</span>  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Headers'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>    <span class="token string">'Content-Type'</span><span class="token punctuation">,</span>    <span class="token string">'Authorization'</span><span class="token punctuation">,</span>    <span class="token string">'X-Requested-With'</span><span class="token punctuation">,</span>    <span class="token string">'X-CSRF-Token'</span>  <span class="token comment">// 防止 CSRF 时前端发送的自定义头</span>  <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">', '</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 预检请求缓存时间（单位：秒）</span>  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Max-Age'</span><span class="token punctuation">,</span> <span class="token string">'86400'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 安全性增强：防止 MIME 嗅探（内容类型攻击）</span>  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'X-Content-Type-Options'</span><span class="token punctuation">,</span> <span class="token string">'nosniff'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 如果是预检请求，提前响应 204（无内容）</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">'OPTIONS'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Length'</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">204</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 更符合语义的响应</span>  <span class="token punctuation">&#125;</span>  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 继续执行后续中间件</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>客户端处理</strong>：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://api.example.com/data'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">credentials</span><span class="token operator">:</span> <span class="token string">'include'</span> <span class="token comment">// 需要发送Cookie时</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="2-反向代理-⭐️-开发环境首选"><a href="#2-反向代理-⭐️-开发环境首选" class="headerlink" title="2. 反向代理 ⭐️ 开发环境首选"></a>2. 反向代理 ⭐️ <strong>开发环境首选</strong></h2><p>原理：前端向同源的代理服务器发请求，代理服务器再转发到目标域，最后将结果返回给前端。对浏览器来说始终是同源请求。<br>前端开发服务器（如Webpack）或Nginx代理请求</p><p><strong>Webpack配置示例</strong>：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// vue.config.js / webpack.config.js</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token string-property property">'/api'</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://backend-server.com'</span><span class="token punctuation">,</span>        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token string-property property">'^/api'</span><span class="token operator">:</span> <span class="token string">''</span> <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>Nginx配置</strong>：</p><pre class="line-numbers language-nginx" data-language="nginx"><code class="language-nginx"><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">&#123;</span>  <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>  <span class="token directive"><span class="token keyword">server_name</span> frontend.com</span><span class="token punctuation">;</span>  <span class="token directive"><span class="token keyword">location</span> /api/</span> <span class="token punctuation">&#123;</span>    <span class="token directive"><span class="token keyword">proxy_pass</span> http://backend-server.com/</span><span class="token punctuation">;</span>    <span class="token directive"><span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span></span><span class="token punctuation">;</span>    <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Real-IP <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>优点</strong></p><ul><li>无跨域限制</li><li>可隐藏真实接口地址，提高安全性</li><li>可统一做鉴权、日志、限流等</li></ul><p><strong>缺点</strong></p><ul><li>部署成本较高，需要额外的服务器或配置</li><li>增加网络跳数，可能带来性能开销</li></ul><h2 id="3-JSONP（历史方案）⚠️-仅限GET请求"><a href="#3-JSONP（历史方案）⚠️-仅限GET请求" class="headerlink" title="3. JSONP（历史方案）⚠️ 仅限GET请求"></a>3. JSONP（历史方案）⚠️ 仅限GET请求</h2><blockquote><p>⚠️ JSONP 已基本被 CORS 所取代，仅在兼容老浏览器或特殊场景下使用。</p></blockquote><p>利用 <code>&lt;script&gt;</code> 标签不受同源策略限制的特点，通过动态创建 <code>&lt;script src=&quot;...&quot;&gt;</code>，并约定回调函数名，将服务器返回的 JSON 数据包裹在函数调用里。</p><p><strong>服务端</strong>：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/data'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">"Hello from JSONP"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> callback <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>callback<span class="token punctuation">;</span>    <span class="token comment">// 返回函数调用包裹的JSON</span>  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>callback<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>客户端</strong>：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">handleJSONP</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Received:'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 动态创建script标签</span><span class="token keyword">const</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'http://api.example.com/data?callback=handleJSONP'</span><span class="token punctuation">;</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>优点</strong></p><ul><li>简单，无需浏览器额外设置</li><li>支持老旧浏览器</li></ul><p><strong>缺点</strong></p><ul><li>只支持 <code>GET</code> 请求</li><li>存在一定安全隐患（XSS 风险）</li><li>无法访问响应头</li></ul><h2 id="4-WebSocket协议"><a href="#4-WebSocket协议" class="headerlink" title="4. WebSocket协议"></a>4. WebSocket协议</h2><p>全双工通信协议，不受同源策略限制，但仍建议服务端校验 <code>Origin</code> 请求头，以防止非法的跨站连接。</p><p><strong>客户端</strong>：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token string">'wss://api.example.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>socket<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Message from server:'</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>socket<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  socket<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello Server!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>优点</strong></p><ul><li>双向通信，无需频繁轮询</li></ul><p><strong>缺点</strong></p><ul><li>需服务端特别处理</li><li>浏览器兼容需关注</li></ul><h2 id="5-postMessage-API-⭐️-跨窗口通信"><a href="#5-postMessage-API-⭐️-跨窗口通信" class="headerlink" title="5. postMessage API ⭐️ 跨窗口通信"></a>5. postMessage API ⭐️ 跨窗口通信</h2><ul><li>跨域的父子页面（iframe）之间通信</li><li>WebWorker 与主线程间通信</li></ul><p>原理：通过 <code>window.postMessage()</code> 发送消息，目标窗口通过 <code>message</code> 事件监听接收，并验证来源。</p><p><strong>主页面</strong>：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 向iframe发送消息</span><span class="token keyword">const</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>iframe<span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'Hello from main page'</span><span class="token punctuation">,</span> <span class="token string">'https://child-domain.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>iframe页面</strong>：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token comment">// 验证来源</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>origin <span class="token operator">!==</span> <span class="token string">'https://main-domain.com'</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Received message:'</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 回复消息</span>  event<span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'Message received!'</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>优点</strong></p><ul><li>灵活，支持各种消息格式</li><li>安全，需显式验证 <code>origin</code></li></ul><p><strong>缺点</strong></p><ul><li>仅限于窗口间或 Worker 通信，不适用于普通 AJAX</li></ul><h1 id="五、方案对比"><a href="#五、方案对比" class="headerlink" title="五、方案对比"></a>五、方案对比</h1><table><thead><tr><th>方案</th><th>适用场景</th><th>优点</th><th>缺点</th></tr></thead><tbody><tr><td><strong>CORS</strong></td><td>现代API调用</td><td>标准安全、支持所有HTTP方法</td><td>需要服务端改造</td></tr><tr><td><strong>反向代理</strong></td><td>本地开发、同域部署</td><td>前端无感知、无缝切换环境</td><td>生产环境需运维配合</td></tr><tr><td><strong>JSONP</strong></td><td>旧浏览器兼容</td><td>支持老式浏览器</td><td>仅GET、安全性低</td></tr><tr><td><strong>WebSocket</strong></td><td>实时双向通信</td><td>高性能、全双工</td><td>非HTTP协议、复杂度高</td></tr><tr><td><strong>postMessage</strong></td><td>跨窗口通信</td><td>安全可控、支持跨域</td><td>仅限窗口间通信</td></tr></tbody></table><h1 id="六、注意事项"><a href="#六、注意事项" class="headerlink" title="六、注意事项"></a>六、注意事项</h1><ol><li><p><strong>CORS配置风险</strong>：</p><ul><li>避免滥用<code>Access-Control-Allow-Origin: *</code></li><li>生产环境应指定精确域名</li><li>敏感接口需要验证<code>Origin</code>头</li></ul></li><li><p><strong>CSRF防护</strong>：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 服务端验证示例</span>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/transfer'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> origin <span class="token operator">=</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>origin<span class="token punctuation">;</span>  <span class="token keyword">const</span> allowedOrigins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'https://trusted-site.com'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>allowedOrigins<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>origin<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">403</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Forbidden'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>    <span class="token comment">// 处理业务逻辑...</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>Cookie安全</strong>：</p><ul><li>使用<code>SameSite</code>属性限制Cookie</li><li>敏感操作增加二次验证</li></ul></li></ol><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><strong>推荐优先采用CORS+反向代理的组合方案</strong>，开发阶段通过代理解决跨域，部署阶段启用后端 CORS 支持，兼顾开发效率与生产安全。随着Web技术的发展，更优雅的跨域解决方案正在不断涌现，开发者应持续关注。</p><p><strong>推荐阅读</strong>：</p><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS">MDN Web Docs: CORS</a></li><li><a href="https://www.w3.org/Security/wiki/Same_Origin_Policy">W3C Same-Origin Policy</a></li><li><a href="https://cheatsheetseries.owasp.org/cheatsheets/Cross-Site_Request_Forgery_Prevention_Cheat_Sheet.html">OWASP Cross-Origin Resource Sharing</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CORS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>valine评论失效解决</title>
      <link href="/posts/2292.html"/>
      <url>/posts/2292.html</url>
      
        <content type="html"><![CDATA[<h1 id="valine评论失效解决"><a href="#valine评论失效解决" class="headerlink" title="valine评论失效解决"></a>valine评论失效解决</h1><p>博客大概有十多天无法显示评论也无法提交新评论，而我这段时间并未对博客评论进行过修改。（不是我的锅）</p><p>我寻思着该不会是Valine更新了什么把自己给更没了吧？（强行背锅）</p><p>后来在Valine的官方群中，有部分网友表示最近遇到相同问题，共性是都使用的LeadCloud国际版。</p><p>哦，原来是LeadCloud的锅。</p><p>查看控制台</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Failed to load resource: net::ERR_EMPTY_RESPONSEus-api.leancloud.cn/后面还有一长串<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>调试过程中还报过别的错，我没有记录，但总之，都是围绕这个域名解析的问题。反正就是这个域名无法正确得到结果。</p><p>那怎么办呢？根据群里大佬讨论可得，似乎是现在国际版对这个域名不再支持了，也有人说是不稳定，推荐自定义服务器URL。</p><p>那就换呗。</p><h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p>法一：导出数据，更换到国内节点，快准狠。</p><p>法二：</p><p>在站点目录下的<code>_config.yaml</code>中找到Valine配置，修改<code>severURLs</code>，把xxxxxxxx替换为AppID的前8位字符。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">serverURLs: https://xxxxxxxx.api.lncldglobal.com <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果主题未配置该参数，就需要找到<code>valine.ejs</code>文件</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs">new Valine(&#123;    el: '#comments',    notify: '<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>notify </span><span class="token delimiter punctuation">%></span></span>' == 'true',    verify: '<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>verify </span><span class="token delimiter punctuation">%></span></span>' == 'true',    appId: "<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>appId </span><span class="token delimiter punctuation">%></span></span>",    appKey: "<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>appKey </span><span class="token delimiter punctuation">%></span></span>",    avatar: "<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>avatar </span><span class="token delimiter punctuation">%></span></span>",    placeholder: "<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>placeholder </span><span class="token delimiter punctuation">%></span></span>",    guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,    pageSize: "<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>pageSize </span><span class="token delimiter punctuation">%></span></span>",    serverURLs: '<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>serverURLs </span><span class="token delimiter punctuation">%></span></span>'  // 增加这一行！！！&#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>然而我在配置完这一步后，仍然不能显示正确的评论，控制台查看发现评论这块并没有跳转到设定的serverURLs，还是us-api.leancloud.cn</p><p>在Valine的Github的Issues区，一个大佬提出的Issue发现了端倪。详见：<a href="https://github.com/xCss/Valine/issues/376">https://github.com/xCss/Valine/issues/376</a><br>这个大佬提问说这个av.js是不是有bug啊？</p><p>看了大佬的截图，我懂了。</p><p>这个cdn是版本不对了吧？</p><p>于是我找到LeadClond官网手册，查询最新的CDN链接。<a href="https://leancloud.cn/docs/sdk_setup-js.html">https://leancloud.cn/docs/sdk_setup-js.html</a></p><p>将这一行</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&lt;</span>script <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">"//cdn1.lncld.net/static/js/3.0.4/av-min.js"</span><span class="token operator">></span><span class="token operator">&lt;</span>/script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>替换为</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&lt;</span>script <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">"//code.bdstatic.com/npm/leancloud-storage@4.12.0/dist/av-min.js"</span><span class="token operator">></span><span class="token operator">&lt;</span>/script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>再重新部署，评论已经能成功显示了。</p><p>回顾三部曲：</p><ol><li>设置serverURLs</li><li>若Valine的js文件未定义，需增加定义serverURLs</li><li>更新av-min.js文件</li></ol><h2 id="二"><a href="#二" class="headerlink" title="二"></a>二</h2><p>valine评论不显示</p><p>替换Valine.min.js的以下代码：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token literal-property property">src</span><span class="token operator">:</span><span class="token string">"//cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>为</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token literal-property property">src</span><span class="token operator">:</span><span class="token string">"//code.bdstatic.com/npm/leancloud-storage@4.12.0/dist/av-min.js"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://github.com/xCss/Valine/issues/340">https://github.com/xCss/Valine/issues/340</a><br><a href="https://github.com/xCss/Valine/issues/376">https://github.com/xCss/Valine/issues/376</a></p><p><a href="https://blog.csdn.net/hubojing/article/details/121770387">【解决方法】valine不显示-CSDN博客</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> valine </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客自动发布</title>
      <link href="/posts/79d9.html"/>
      <url>/posts/79d9.html</url>
      
        <content type="html"><![CDATA[<h1 id="博客自动发布"><a href="#博客自动发布" class="headerlink" title="博客自动发布"></a>博客自动发布</h1><p>为了方便可以使用 GitHub Actions 实现博客自动发布，将静态博客页面部署到多个服务器上，比如 GitHub Pages，Gitee pages 以及云服务器上。本文介绍使用 GitHub Actions 实现将 Hexo 博客自动编译并发布到 GitHub Pages 上。GitHub Actions 是一个自动化工作流程系统，允许用户在GitHub上定义各种自动化任务，如构建、测试、打包、部署等。</p><h2 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h2><h3 id="SSH-秘钥"><a href="#SSH-秘钥" class="headerlink" title="SSH 秘钥"></a>SSH 秘钥</h3><p>生成秘钥用于仓库间的推送：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh-keygen <span class="token parameter variable">-f</span> hexo-deploy-key <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-C</span> <span class="token string">"个人邮箱"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>以上命令会在当前路径下生成：秘钥 hexo-deploy-key 和公钥 hexo-deploy-key.pub，然后分别添加到对应的文件中。</p><p>页面文件仓库（即 haoqi7.github.io）: 在 Settings &gt; Deploy keys 中添加 Deploy key，名称为 deploy_key 内容为 hexo-deploy-key.pub 文件内容，同时勾选 Allow write access 选项。<br>博客源文件库：在 Settings &gt; Secrets 中添加一个 Secret，名称为 DEPLOY_KEY，内容为 hexo-deploy-key 文件内容。后续在 Workflow 中通过名称 DEPLOY_KEY 使用这个密钥。</p><h3 id="Workflow-配置"><a href="#Workflow-配置" class="headerlink" title="Workflow 配置"></a>Workflow 配置</h3><p>在博客源文件库中点击 actions 创建新的工作流，配置内容如下：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy<span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>push<span class="token punctuation">]</span><span class="token key atrule">jobs</span><span class="token punctuation">:</span>  <span class="token key atrule">build</span><span class="token punctuation">:</span>    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest    <span class="token key atrule">name</span><span class="token punctuation">:</span> A job to deploy blog.    <span class="token key atrule">steps</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout      <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v1      <span class="token key atrule">with</span><span class="token punctuation">:</span>        <span class="token key atrule">submodules</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># Checkout private submodules(themes or something else).</span>    <span class="token comment"># Caching dependencies to speed up workflows. (GitHub will remove any cache entries that have not been accessed in over 7 days.)</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Cache node modules      <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/cache@v1      <span class="token key atrule">id</span><span class="token punctuation">:</span> cache      <span class="token key atrule">with</span><span class="token punctuation">:</span>        <span class="token key atrule">path</span><span class="token punctuation">:</span> node_modules        <span class="token key atrule">key</span><span class="token punctuation">:</span> $<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> runner.os <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">-</span>node<span class="token punctuation">-</span>$<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> hashFiles('<span class="token important">**/package-lock.json')</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>        <span class="token key atrule">restore-keys</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">          $&#123;&#123; runner.os &#125;&#125;-node-</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install Dependencies      <span class="token key atrule">if</span><span class="token punctuation">:</span> steps.cache.outputs.cache<span class="token punctuation">-</span>hit <span class="token tag">!=</span> 'true'      <span class="token key atrule">run</span><span class="token punctuation">:</span> npm ci    <span class="token comment"># Deploy hexo blog website.</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy      <span class="token key atrule">id</span><span class="token punctuation">:</span> deploy      <span class="token key atrule">uses</span><span class="token punctuation">:</span> sma11black/hexo<span class="token punctuation">-</span>action@v1.0.3      <span class="token key atrule">with</span><span class="token punctuation">:</span>        <span class="token key atrule">deploy_key</span><span class="token punctuation">:</span> $<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> secrets.DEPLOY_KEY <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>        <span class="token key atrule">user_name</span><span class="token punctuation">:</span> haoqi7  <span class="token comment"># (修改为自己的用户名)</span>        <span class="token key atrule">user_email</span><span class="token punctuation">:</span> w00989988@gmail.com  <span class="token comment"># (修改为自己的邮箱地址)</span>        <span class="token key atrule">commit_msg</span><span class="token punctuation">:</span> $<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> github.event.head_commit.message <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>  <span class="token comment"># (or delete this input setting to use hexo default settings)</span>    <span class="token comment"># Use the output from the `deploy` step(use for test action)</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Get the output      <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">        echo "$&#123;&#123; steps.deploy.outputs.notify &#125;&#125;"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>下面是该配置文件的逐行解析：</p><ul><li><code>name: Deploy</code>: 定义工作流的名称为”Deploy”，意指部署操作。</li><li><code>on: [push]</code>: 指定触发该工作流的事件为<code>push</code>，即当仓库有新的推送时自动执行此工作流。</li></ul><p>接下来是定义了一个名为<code>build</code>的job（任务）：</p><ul><li><code>runs-on: ubuntu-latest</code>: 指定执行此job的操作系统环境为最新版本的Ubuntu。</li><li><code>name: A job to deploy blog.</code>: 给这个job命名，说明这是一个部署博客的任务。</li></ul><p>job中包含了一系列steps（步骤）:</p><ol><li><p><strong>Checkout</strong>: 使用<code>actions/checkout@v1</code> Action检出代码库，确保工作目录包含了即将部署的内容。<code>with.submodules: true</code>表示同时检出子模块，适用于依赖私有主题或其他子模块的情况。</p></li><li><p><strong>Cache node modules</strong>: 利用<code>actions/cache@v1</code> Action来缓存<code>node_modules</code>目录，以加速后续工作流程。通过<code>hashFiles(&#39;**/package-lock.json&#39;)</code>生成缓存的键，确保依赖更新时能正确重建缓存。如果找到匹配的缓存，则跳过安装依赖的步骤。</p></li><li><p><strong>Install Dependencies</strong>: 当缓存未命中时，运行<code>npm ci</code>命令安装项目依赖。这是在Node.js项目中快速且确定性地安装依赖的方式。</p></li><li><p><strong>Deploy</strong>: 使用<code>sma11black/hexo-action@v1.0.3</code>这个自定义Action部署Hexo博客。需要提供部署密钥（通过<code>$&#123;&#123; secrets.DEPLOY_KEY &#125;&#125;</code>安全获取）、用户名、邮箱以及提交信息。这些信息用于将本地构建好的站点推送到远程服务器或托管服务。</p></li><li><p><strong>Get the output</strong>: 最后一步是获取部署步骤（<code>deploy</code>）的输出信息（如果有的话），这里仅用于示例中输出部署通知信息到日志中。</p></li></ol><p>整个工作流旨在实现自动化部署Hexo博客的过程，包括代码检出、依赖管理、以及最终的部署操作，充分利用了GitHub Actions的灵活性和效率。</p><p><a href="https://haoqi7.github.io/posts/6c0cf188.html">GitHub Actions实现博客自动发布 | HaoQi (haoqi7.github.io)</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 自动 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用说说功能</title>
      <link href="/posts/4d8d.html"/>
      <url>/posts/4d8d.html</url>
      
        <content type="html"><![CDATA[<h1 id="使用说说功能"><a href="#使用说说功能" class="headerlink" title="使用说说功能"></a>使用说说功能</h1><p><a href="https://blog.csdn.net/qq_38157825/article/details/112783238">在 Hexo 中使用 artitalk 新增说说功能_hexo matery添加说说-CSDN博客</a></p><p><a href="https://blog.csdn.net/weixin_44659458/article/details/119277195">使用 artitalk + LeanCloud 配置给个人博客搭建说说_artitalk3.x版本更新需要修改一下配置-CSDN博客</a></p><p><a href="https://blog.csdn.net/cungudafa/article/details/106224223">https://blog.csdn.net/cungudafa/article/details/106224223</a></p><p><a href="https://blog.csdn.net/cungudafa/article/details/106208556">https://blog.csdn.net/cungudafa/article/details/106208556</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>个人简介页面更新</title>
      <link href="/posts/9617.html"/>
      <url>/posts/9617.html</url>
      
        <content type="html"><![CDATA[<h2 id="个人简介页面更新"><a href="#个人简介页面更新" class="headerlink" title="个人简介页面更新"></a>个人简介页面更新</h2><p><a href="https://blog.dyfa.top/about/">关于 | itsNeko「生活日志」 (dyfa.top)</a></p><p><code>about.ejs</code></p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/bg-cover'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">  <span class="token comment">/* don't remove. */</span>  <span class="token selector">.about-cover</span> <span class="token punctuation">&#123;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 75vh<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.sitemapss</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 27px auto<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 601px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>    <span class="token selector">#switchspring</span> <span class="token punctuation">&#123;</span>      <span class="token property">bottom</span><span class="token punctuation">:</span> 178px <span class="token important">!important</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">#sma</span> <span class="token punctuation">&#123;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 139.25px<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.comment-scroll</span> <span class="token punctuation">&#123;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 79.25px<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.bg-cover::before</span> <span class="token punctuation">&#123;</span>    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>https://cdn.jsdelivr.net/gh/moezx/cdn@3.1.9/img/Sakura/images/grid.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.about-cover</span> <span class="token punctuation">&#123;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 110vh<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 600px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>    <span class="token selector">.about-cover</span> <span class="token punctuation">&#123;</span>      <span class="token property">height</span><span class="token punctuation">:</span> 64vh<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">iframe</span> <span class="token punctuation">&#123;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 60%<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">body.dark iframe</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.7<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">  <span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 800px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>    <span class="token selector">.swbk</span> <span class="token punctuation">&#123;</span>      <span class="token property">padding</span><span class="token punctuation">:</span> 26px 2px <span class="token important">!important</span><span class="token punctuation">;</span>      <span class="token property">margin</span><span class="token punctuation">:</span> 0 <span class="token important">!important</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.swbk ol</span> <span class="token punctuation">&#123;</span>      <span class="token property">padding</span><span class="token punctuation">:</span> 2px 10px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.swbk</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 26px 20px<span class="token punctuation">;</span>    <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 10px 0px<span class="token punctuation">;</span>    <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> 0 14px 38px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> .08<span class="token punctuation">)</span><span class="token punctuation">,</span> 0 3px 8px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> .06<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 14px 38px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> .08<span class="token punctuation">)</span><span class="token punctuation">,</span> 0 3px 8px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> .06<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-webkit-transition</span><span class="token punctuation">:</span> all .3s ease 0s<span class="token punctuation">,</span> -webkit-transform .6s <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>.6<span class="token punctuation">,</span> .2<span class="token punctuation">,</span> .1<span class="token punctuation">,</span> 1<span class="token punctuation">)</span> 0s<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> all .3s ease 0s<span class="token punctuation">,</span> -webkit-transform .6s <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>.6<span class="token punctuation">,</span> .2<span class="token punctuation">,</span> .1<span class="token punctuation">,</span> 1<span class="token punctuation">)</span> 0s<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> all .3s ease 0s<span class="token punctuation">,</span> transform .6s <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>.6<span class="token punctuation">,</span> .2<span class="token punctuation">,</span> .1<span class="token punctuation">,</span> 1<span class="token punctuation">)</span> 0s<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> all .3s ease 0s<span class="token punctuation">,</span> transform .6s <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>.6<span class="token punctuation">,</span> .2<span class="token punctuation">,</span> .1<span class="token punctuation">,</span> 1<span class="token punctuation">)</span> 0s<span class="token punctuation">,</span> -webkit-transform .6s <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>.6<span class="token punctuation">,</span> .2<span class="token punctuation">,</span> .1<span class="token punctuation">,</span> 1<span class="token punctuation">)</span> 0s<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.swbk:hover</span> <span class="token punctuation">&#123;</span>    <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>-4px<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>-4px<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> 0 14px 38px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> .14<span class="token punctuation">)</span><span class="token punctuation">,</span> 0 3px 8px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> .12<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 14px 38px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> .14<span class="token punctuation">)</span><span class="token punctuation">,</span> 0 3px 8px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> .12<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.swbk:before</span> <span class="token punctuation">&#123;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">" “ "</span><span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 56px<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> -14px<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.swbk:after</span> <span class="token punctuation">&#123;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">" ” "</span><span class="token punctuation">;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.swbk:after,  .swbk:before</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> 600<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 42px<span class="token punctuation">;</span>    <span class="token property">text-decoration</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.biography .swbk:after,  .biography .swbk:before</span> <span class="token punctuation">&#123;</span>    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">body.dark .swbk:after,  body.dark .swbk:before</span> <span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #d2c9c9<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.swbk p</span> <span class="token punctuation">&#123;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 19px <span class="token important">!important</span><span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 2.4rem<span class="token punctuation">;</span>    <span class="token property">text-indent</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span>    <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Architects Daughter'</span><span class="token punctuation">,</span> cursive <span class="token important">!important</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.swbk .label</span> <span class="token punctuation">&#123;</span>    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0 14px 0 32px<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 0 3px 3px 0<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> currentColor<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.swbk .label span</span> <span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.swbk .label:after</span> <span class="token punctuation">&#123;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>    <span class="token property">border-style</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>    <span class="token property">border-width</span><span class="token punctuation">:</span> 0 16px 16px 0<span class="token punctuation">;</span>    <span class="token property">border-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>    <span class="token property">border-right-color</span><span class="token punctuation">:</span> currentColor<span class="token punctuation">;</span>    <span class="token property">-webkit-filter</span><span class="token punctuation">:</span> <span class="token function">brightness</span><span class="token punctuation">(</span>120%<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">brightness</span><span class="token punctuation">(</span>120%<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token atrule"><span class="token rule">@media</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 768px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>    <span class="token selector">.swbk .label</span> <span class="token punctuation">&#123;</span>      <span class="token property">left</span><span class="token punctuation">:</span> -37px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token atrule"><span class="token rule">@media</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 767px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>    <span class="token selector">.swbk .label</span> <span class="token punctuation">&#123;</span>      <span class="token property">left</span><span class="token punctuation">:</span> -18px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.swbk p</span> <span class="token punctuation">&#123;</span>      <span class="token property">padding</span><span class="token punctuation">:</span> 2px 8px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aboutme<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container about-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post-statis col l4 hide-on-med-and-down<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/post-statis'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col s12 m12 l4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>profile center-align<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar toupic<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>jsDelivr<span class="token punctuation">.</span>url </span><span class="token delimiter punctuation">%></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span>theme<span class="token punctuation">.</span>profile<span class="token punctuation">.</span>avatar<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> config<span class="token punctuation">.</span>author </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span>                  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>circle responsive-img avatar-img<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>author<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post-statis hide-on-large-only<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zoom-in-right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                  <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/post-statis'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> config<span class="token punctuation">.</span>author </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>career<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>profile<span class="token punctuation">.</span>career </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>social-link hide-on-large-only<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zoom-in-left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                  <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/social-link'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col l4 hide-on-med-and-down<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>social-link<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>              <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/social-link'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>introduction center-align<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>          <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>profile<span class="token punctuation">.</span>introduction </span><span class="token delimiter punctuation">%></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>biography<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aboutlist first_about<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>🏡 关于我<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>swbk<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>label<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>178<span class="token punctuation">,</span> 143<span class="token punctuation">,</span> 206<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>十万伏特皮卡丘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>AKA十万伏特皮卡丘，想要成为优秀的Web Front-end Developer，梦想是世界和平，想要发光发热，不止于此。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>swbk<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>关于网站名称，取名为 “ NekoDeng ”，原因是当初注册Google邮箱的时候需要一个英文名，想了好久才取名叫neko，然后再加上我的姓氏，很土啦，就这样。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>swbk<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>天蝎座，喜欢篮球，<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>noopener<span class="token punctuation">"</span></span>                                <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://nekodeng.gitee.io/lakers-championship/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">></span></span>湖人总冠军<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>，从热火时期开始关注Lebron                            James，<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>noopener<span class="token punctuation">"</span></span>                                <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://nekodeng.gitee.io/musics/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">></span></span>宝藏歌曲<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>《达尔文》，                            还喜欢好多东西，偶尔会发一些<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>noopener<span class="token punctuation">"</span></span>                                <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://nekodeng.gitee.io/videos/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">></span></span>vlog<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>，                            或者灵感来了写写<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>noopener<span class="token punctuation">"</span></span>                                <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://nekodeng.gitee.io/essay/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">></span></span>随笔<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>啥的，                            会用<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>noopener<span class="token punctuation">"</span></span>                                <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://nekodeng.gitee.io/gallery/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">></span></span>相册<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>记录生活，待续...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no<span class="token punctuation">"</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">marginwidth</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">marginheight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>330<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>86<span class="token punctuation">"</span></span>                            <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>//music.163.com/outchain/player?type=2<span class="token entity named-entity" title="&amp;">&amp;amp;</span>id=5248060<span class="token entity named-entity" title="&amp;">&amp;amp;</span>height=66<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>博主的宝藏歌曲<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>swbk<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token important">!important</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                            以前我不懂，种一棵树最好的时间是十年前，其次呢就是现在，就好比纽约的时间，比加州快了3个小时，但加州并没有变慢，每个人都有自己的时区，有些人看似走在你的前面，有些人看似走在你的后面，但是每个人的时区和路程，是相互独立的，所以不用去羡慕或者嫉妒，爱情里面，年龄不是问题，学习也不是。                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aboutlist<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columnlist<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>🕛 为什么写博客<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>swbk<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>label<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>188<span class="token punctuation">,</span> 159<span class="token punctuation">,</span> 119<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>风花雪月之事<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>                            很长时间了，总是想写点什么，无关风月，就是想写点什么。无论是记录知识点，总结技能树，人生长谈，风花雪月之事，都可以有一个存档的地方，对于复盘，回忆，都是一个极好的方谭。                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columnlist<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>📬 我的联系方式<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>swbk<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>label<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>251<span class="token punctuation">,</span> 150<span class="token punctuation">,</span> 110<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>在这里找到我<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>可在评论区留言，看到了会尽快回复哒~<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>微信公众号: itsNeko<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>邮 箱：nekodeng@qq.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columnlist<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>🗳 本博客主题开源投票<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>swbk<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>label<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>245<span class="token punctuation">,</span> 150<span class="token punctuation">,</span> 170<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>热爱开源的Neko<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>最近在考虑本博客主题开源，大家可以在投票页面评论，投票链接 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/vote/<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hurens<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>开源vote<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span> ~<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columnlist<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>💴 关于资助本博主<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>swbk<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>label<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>178<span class="token punctuation">,</span> 143<span class="token punctuation">,</span> 206<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>买个馒头吃吧<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>维护博客不易，憨憨叹气，考虑到后续开源博客还挺费时费力的，服务器费用真的累计起来挺高的，所以可以给博主买个馒头吃吗，卟卟 ~                            路人甲：哎，博主好可怜，一定支持一下。链接：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/donate<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>资助博主 ~<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aboutlist<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columnlist<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>🎨 我的其它站点<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>swbk<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>label<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>134<span class="token punctuation">,</span> 193<span class="token punctuation">,</span> 102<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>在这里也可找到我<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>域名已购买：腾讯云，https://dyfa.top ~<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>🏷️ CSDN：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>noopener<span class="token punctuation">"</span></span>                                <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://blog.csdn.net/weixin_42529972<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>itsNekoDeng<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>🏷️ 掘金：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>noopener<span class="token punctuation">"</span></span>                                <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://juejin.im/user/3131038656901591/posts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>itsNekoDeng<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>🏷️ gitee：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>noopener<span class="token punctuation">"</span></span>                                <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://nekodeng.gitee.io<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>https://nekodeng.gitee.io<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>（原）<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>🏷️ 微信公众号：名称" itsNekoDeng博客 "，扫一扫订阅我，这样你就能准时收到我的文章更新啦。                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/medias/qrcode_for_gh.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>150<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>150<span class="token punctuation">"</span></span>                                <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span><span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- 关于programmer搭博客 --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>columnlist<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>🐒 关于programmer搭博客<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>swbk<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>label<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>249<span class="token punctuation">,</span> 191<span class="token punctuation">,</span> 69<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>一种神秘生物<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>                            个人网站博主是一种有点神秘的动物，大部分隐身在互联网的丛林中，                            很少有人观察到。                            其他没有经验的用户可能会认为，个人网站已经像恐龙那样灭绝。                            事实是野外还存在许多标本，只有了解该物种习性的猎人才能发现它们。                            --<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>noopener<span class="token punctuation">"</span></span>                                <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cheapskatesguide.org/articles/personal-website-hunting.html<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>《搜寻几乎不可见的个人网站》<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- 仿聊天框模块 --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token comment">/* 暗色模式 和添加小屏幕响应式 */</span>            <span class="token selector">body.dark .triangle</span> <span class="token punctuation">&#123;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> #2e323b<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>                    <span class="token selector">body.dark .triangle .textLeft span</span> <span class="token punctuation">&#123;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>                    <span class="token selector">body.dark .triangle li.textLeft span:before</span> <span class="token punctuation">&#123;</span>                <span class="token property">border-right</span><span class="token punctuation">:</span> 8px solid black<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>                    <span class="token selector">body.dark .triangle .textRight span</span> <span class="token punctuation">&#123;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> #64982e<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>                    <span class="token selector">body.dark .triangle li.textRight span:after</span> <span class="token punctuation">&#123;</span>                <span class="token property">border-left</span><span class="token punctuation">:</span> 8px solid #64982e<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>                    <span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 322px<span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 450px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>                <span class="token selector">.triangle li:nth-last-of-type(1)</span> <span class="token punctuation">&#123;</span>                    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 60px <span class="token important">!important</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>                    <span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 452px<span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 900px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>                <span class="token selector">.triangle li:nth-last-of-type(1)</span> <span class="token punctuation">&#123;</span>                    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 42px <span class="token important">!important</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>                    <span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 500px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>                <span class="token selector">.triangle li span</span> <span class="token punctuation">&#123;</span>                    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px <span class="token important">!important</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>                    <span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 321px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>                <span class="token selector">.triangle li:nth-last-of-type(1)</span> <span class="token punctuation">&#123;</span>                    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 80px <span class="token important">!important</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                        <span class="token selector">.triangle li:nth-last-of-type(2)</span> <span class="token punctuation">&#123;</span>                    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 42px <span class="token important">!important</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">            <span class="token selector">.triangle</span> <span class="token punctuation">&#123;</span>                <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> #ebebe9<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>                    <span class="token selector">.triangle ul</span> <span class="token punctuation">&#123;</span>                <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>                    <span class="token selector">.triangle li</span> <span class="token punctuation">&#123;</span>                <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>                <span class="token property">padding</span><span class="token punctuation">:</span> 10px 15px<span class="token punctuation">;</span>                <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>                    <span class="token selector">.triangle li span</span> <span class="token punctuation">&#123;</span>                <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>                <span class="token property">border-radius</span><span class="token punctuation">:</span> 7px<span class="token punctuation">;</span>                <span class="token property">padding</span><span class="token punctuation">:</span> 20px 15px 20px 15px<span class="token punctuation">;</span>                <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>                <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>                    <span class="token selector">.triangle .textLeft span</span> <span class="token punctuation">&#123;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>                <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>                <span class="token property">top</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>                <span class="token property">left</span><span class="token punctuation">:</span> 86px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>                    <span class="token selector">.triangle .textRight span</span> <span class="token punctuation">&#123;</span>                <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>                <span class="token property">background-color</span><span class="token punctuation">:</span> #a6e860<span class="token punctuation">;</span>                <span class="token property">top</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>                <span class="token property">right</span><span class="token punctuation">:</span> 86px<span class="token punctuation">;</span>                <span class="token property">text-align</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>                    <span class="token selector">.triangle li.textLeft:before</span> <span class="token punctuation">&#123;</span>                <span class="token property">content</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"/medias/itsneko.jpg"</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>                <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>                <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>                <span class="token property">left</span><span class="token punctuation">:</span> -10px<span class="token punctuation">;</span>                <span class="token property">top</span><span class="token punctuation">:</span> 9px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>                    <span class="token selector">.triangle li.textLeft span:before</span> <span class="token punctuation">&#123;</span>                <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>                <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>                <span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>                <span class="token property">border</span><span class="token punctuation">:</span> 8px solid transparent<span class="token punctuation">;</span>                <span class="token property">border-right</span><span class="token punctuation">:</span> 8px solid white<span class="token punctuation">;</span>                <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>                <span class="token property">top</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>                <span class="token property">left</span><span class="token punctuation">:</span> -16px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>                    <span class="token selector">.triangle li.textRight:after</span> <span class="token punctuation">&#123;</span>                <span class="token property">content</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"/medias/qqavatar.jpg"</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>                <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>                <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>                <span class="token property">right</span><span class="token punctuation">:</span> -10px<span class="token punctuation">;</span>                <span class="token property">top</span><span class="token punctuation">:</span> 9px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>                    <span class="token selector">.triangle li.textRight span:after</span> <span class="token punctuation">&#123;</span>                <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>                <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>                <span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>                <span class="token property">border</span><span class="token punctuation">:</span> 8px solid transparent<span class="token punctuation">;</span>                <span class="token property">border-left</span><span class="token punctuation">:</span> 8px solid #a6e860<span class="token punctuation">;</span>                <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>                <span class="token property">top</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>                <span class="token property">right</span><span class="token punctuation">:</span> -16px<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>                    <span class="token selector">li</span> <span class="token punctuation">&#123;</span>                <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>                    <span class="token selector">.textRight</span> <span class="token punctuation">&#123;</span>                <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>triangle<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>textLeft<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>“ 你买的什么书 ？ ”<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>textRight<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>“ 编程 ”<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>textLeft<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>“ C++还是JAVA ？ ”<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>textRight<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>“ 沈从文 ”<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>textLeft<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>“ 哈 ？ ”<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>textRight<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>“ 害，这大概就是古人云文人骚客吧 ”<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>textLeft<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>“ 曾粗浅地认为只有programmer才搭博客，后来发现了什么才是大千世界 ”<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>livere <span class="token operator">&amp;&amp;</span> theme<span class="token punctuation">.</span>livere<span class="token punctuation">.</span>enable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>      <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/livere'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>      <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>      <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>valine <span class="token operator">&amp;&amp;</span> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>enable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>      <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/valine'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>      <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>      <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>minivaline <span class="token operator">&amp;&amp;</span> theme<span class="token punctuation">.</span>minivaline<span class="token punctuation">.</span>enable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>      <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/minivaline'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>      <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> about </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>虚拟机设置共享文件夹</title>
      <link href="/posts/ebbb.html"/>
      <url>/posts/ebbb.html</url>
      
        <content type="html"><![CDATA[<h1 id="虚拟机与win10文件共享"><a href="#虚拟机与win10文件共享" class="headerlink" title="虚拟机与win10文件共享"></a>虚拟机与win10文件共享</h1><p><a href="https://blog.csdn.net/YiYeZhiNian/article/details/92700377">虚拟机与win10系统文件共享_vmware windows10共享文件有几种方法-CSDN博客</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 虚拟机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>互联网下载指南：BT、磁力、种子、直链与PT详解</title>
      <link href="/posts/1e4.html"/>
      <url>/posts/1e4.html</url>
      
        <content type="html"><![CDATA[<p>互联网下载指南：BT、磁力、种子、直链与PT详解</p><p>BT、磁力、种子、直链、PT在互联网下载领域中各有其特定含义：</p><ol><li><p><strong>BT (BitTorrent)</strong>:<br>BT是一种点对点文件共享协议，允许用户通过互联网下载大体积文件。它的工作原理是将文件分割成多个小块，下载者可以从多个拥有该文件不同部分的用户那里同时下载，同时自己也作为“种子”上传已下载的部分给其他用户，从而实现高效分发。</p></li><li><p><strong>磁力链接 (Magnet URI)</strong>:<br>磁力链接是一种基于URI（统一资源标识符）的超链接形式，它不直接链接到文件，而是包含了解析和下载文件所需的散列值、 trackers信息等元数据。用户可以通过点击磁力链接开始使用支持此协议的客户端软件（如BitTorrent客户端）下载文件，无需先下载一个.torrent文件。</p></li><li><p><strong>种子 (Torrent Seed)</strong>:<br>在BitTorrent上下文中，“种子”指的是拥有完整文件并正在上传文件片段给其他用户的客户端。一个健康的BT下载环境依赖于足够的种子来保证文件的可获取性。种子也可以指代包含文件元数据的.torrent文件，用户需要先下载这个小文件来开始下载实际的内容。</p></li><li><p><strong>直链 (Direct Link &#x2F; Direct Download Link)</strong>:<br>直链是指直接指向存储在服务器上的文件的链接，用户可以通过标准的HTTP或HTTPS协议直接从服务器下载文件，而不需要额外的软件或协议支持。这是最简单直接的下载方式。</p></li><li><p><strong>PT (Private Tracker)</strong>:<br>PT即私人Tracker，是相对于公有Tracker而言的。私人Tracker站点通常需要注册和邀请才能加入，提供更稳定的下载速度、更高的文件完整性以及更严格的用户管理规则。PT站点通常会对用户的上传和下载进行严格的比例控制，以确保所有用户都能积极地贡献上传量，维护站点的健康运行。</p></li></ol><p>这些概念涵盖了互联网上常见的几种文件分享和下载方式，每种都有其特定的适用场景和特点。</p><p><a href="https://www.bilibili.com/video/BV1tm421W7Fv/">https://www.bilibili.com/video/BV1tm421W7Fv/</a></p><h3 id="torrent文件如何打开？"><a href="#torrent文件如何打开？" class="headerlink" title=".torrent文件如何打开？"></a>.torrent文件如何打开？</h3><p>.torrent文件属于bt文件，也就是我们常说的种子。很多朋友下载到以.torrent为后缀的文件时，发现它很小只有几十至几百KB，而且无法直接解压或打开，都以为自己下错了，其实不是的，虽然只有不到1M，但是里面却有非常多的东西。接下来我简单为大家讲解下如何用百度网盘打开.torrent文件。</p><ol><li><p>找到.torrent结尾的文件，并上传到百度网盘</p></li><li><p>点击种子</p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/%E7%A7%8D%E5%AD%90.png" alt="种子" style="zoom: 67%;" /></li><li><p>点击后会弹出下载界面，修改文件的保存路径，点击下载</p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/%E4%B8%8B%E8%BD%BD.png" alt="下载"  /></li><li><p>下载完后查看即可</p></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>PCDN</title>
      <link href="/posts/e053.html"/>
      <url>/posts/e053.html</url>
      
        <content type="html"><![CDATA[<h1 id="PSDN"><a href="#PSDN" class="headerlink" title="PSDN"></a>PSDN</h1><p>运营商发文严格排查 PCDN 的新闻，引起了行业内外的广泛关注。</p><p>该运营商表示：当用户宽带账户存在“异常大流量上行宽带占用”情况时，可能会对账户进行封禁。如果用户申诉，则客服将会安排宽带师傅，上门进行 “取证”，再根据情况予以解封。本次核查行动，要做到 ——“应查尽查、应停尽停、应拆尽拆”。</p><p>究竟是什么原因导致的“异常大流量上行宽带占用”，会让运营商如此兴师动众？</p><p>答案就是 ——PCDN。</p><h2 id="什么是-PCDN"><a href="#什么是-PCDN" class="headerlink" title="什么是 PCDN"></a>什么是 PCDN</h2><p>PCDN 到底是个啥？为什么会被运营商封杀？</p><p>简单来说，PCDN 就是 P2P+CDN。英文全称：Peer to Peer Content Delivery Network，中文全称：点对点内容分发网络。</p><p>P2P，大家应该都很熟悉。前几年臭名昭著的 P2P 理财，还有更早时候火遍全网的 P2P 下载，都是基于 P2P。</p><p>P2P 是一种典型的去中心化理念。它讲究的是个体与个体之间的业务关系。</p><p>以 P2P 下载为例。</p><p>传统下载，都是一个服务器，N 个客户端。所有客户端，都去服务器下载数据（电影）。</p><p><a href="https://www.ithome.com/0/748/924.htm">运营商拼命封杀的 PCDN，到底是个啥？ - IT之家 (ithome.com)</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> PCDN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>申请免费永久域名</title>
      <link href="/posts/45c5.html"/>
      <url>/posts/45c5.html</url>
      
        <content type="html"><![CDATA[<h1 id="申请免费永久域名"><a href="#申请免费永久域名" class="headerlink" title="申请免费永久域名"></a>申请免费永久域名</h1><h2 id="freenom"><a href="#freenom" class="headerlink" title="freenom"></a>freenom</h2><p>提供免费域名的机构很多，比较著名的是freenom，但可惜的是freenom由于因为顶级域名被滥用成为钓鱼和诈骗网站而被起诉，所以现在基本是很难申请了。所以就只剩eu.org比较推荐了。</p><h2 id="euorg"><a href="#euorg" class="headerlink" title="euorg"></a>euorg</h2><p><a href="https://link.zhihu.com/?target=http://EU.org">EU.org</a>是一个从1996开始提供免费域名的组织, 帮助学生、爱好者或者非营利组织不用花费购买域名就可能拥有自己的免费域名，虽然切确来说这是一个二级域名，但是根据一些网站的资讯，有许多大型互联网公司，像是 Google, Cloudflare, Bing 等厂商都已经将其当成是一个顶级网域了。</p><p>虽然可以进行免费申请，但是不要滥用申请，申请者必须遵守互联网标准(Rfc)，不要利用其来发送垃圾邮件或网络钓鱼以及分发恶意软件，毕竟提供免费的域名的组织，谁也不想其取消免费服务，其次不要多次注册申请占用域名，尽量只是注册需要的域名，通常来说注册两个域名基本就满足日常使用，一个正式站点域名和一个测试站点域名。</p><p><a href="https://nic.eu.org/opendomains.html">EUORG开域和政策</a>参考地址</p><p>去年7月申请了一次，到现在都还没通过，悲&#96;(<em>&gt;﹏&lt;</em>)′。所以决定重新再申请一个。</p><h2 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h2><p>注册前，需事先准备<code>邮箱</code>和<code>一个Hostry账号</code></p><ul><li>邮箱: google Gmail 、foxmail、QQ 都可以</li><li>注册Hostry账号以获取免费DNS解析服务（不建议采用 dnspod ）</li></ul><h3 id="Hostry"><a href="#Hostry" class="headerlink" title="Hostry"></a>Hostry</h3><p>HOSTRY 作为一家可靠且成熟的托管服务提供商，HOSTRY为在线企业提供了大量不同的托管选项，专注于内容交付网络（CDN）、虚拟专用服务器（VPS）、专用服务器和其他解决方案，以确保为客户提供高质量的web托管服务。<br>此处我们主要使用 HOSTRY 其 DNS 解析服务来加快域名申请所占用审核的时间，没有选择 dnspod 是因为有可能在申请免费域名验证解析时会产生错误从而增加审核时间，其次是使用 dnspod 需要进行实名认证，所以推荐使用 HOSTRY 在域名审批通过后再使用 dnspod 来进行解析。</p><ol><li><a href="https://hostry.com/register/">点击注册</a>，输入注册邮箱以及相关的注册信息（反正只用一次信息不一定填真的），然后你再邮箱中会收到一条激活信息进行（<code>ACTIVATE ACCOUNT</code>），注册地址邮编自行Google、百度即可。</li><li>需要验证要注册的域名是否被注册过，<a href="https://tool.dnspod.cn/">点击检测</a>，如果出现如下图片中的情况表示已注册</li></ol><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404291945808.png" alt="检测" style="zoom:67%;" /><ol start="3"><li><a href="https://hostry.com/products/dns/">点击创建免费的DNS解析</a>，其无主机DNS更快、更安全，并且对条目或请求的数量没有限制。</li></ol><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404291945622.png" alt="创建DNS解析" style="zoom:67%;" /><ol start="4"><li><a href="https://nic.eu.org/">注册eu.org域名</a>，(⊙o⊙)…因为我是去年注册的，邮箱收到的邮件也没有保存&#96;(<em>&gt;﹏&lt;</em>)′，这里就拿不出演示图片了。希望大家能吸取博主的教训，邮件里存放的是登录必须的句柄，博主能重新登录上这个网站也纯属运气。注意：输入Name时姓名<strong>首字母大写</strong>，并且<strong>中间有空格</strong>，地址随意在百度中找寻一个英文地址即可。</li><li>注册成功登录后，点击 <code>new Domain</code> 创建自定义的域名，填写如下信息以及NameServers信息，填写完毕后点击submit进行提交。</li></ol><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404291945587.png" alt="New1" style="zoom:67%;" /><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404291945790.png" alt="New2" style="zoom: 50%;" /><ol start="6"><li>提交后将进行域名认证记录，如出现下图所示则表示成功审核，后面记得经常查看邮箱是否收到信息（可能会出现在垃圾邮件中）</li></ol><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404291945974.png" alt="成功！" style="zoom: 80%;" /><h2 id="域名解析改为Cloudflare并指向GithubPages"><a href="#域名解析改为Cloudflare并指向GithubPages" class="headerlink" title="域名解析改为Cloudflare并指向GithubPages"></a>域名解析改为Cloudflare并指向GithubPages</h2><p>描述：此处dnspod实名认证不在累述，你不一定要选择dnspod你也可以继续使用HOSTRY提供的免费DNS服务，或者选择Cloudflare提供的DNS解析服务都是可以的，此处以Cloudflare为例（此处假设你已经有了Cloudflare账号，没有的朋友去注册一个即可）。</p><ol><li>访问并登录 cloudflare 面板，地址：<a href="https://link.zhihu.com/?target=https://dash.cloudflare.com/login">https://dash.cloudflare.com/login</a>, 然后添加刚才注册的站点，选择 Free 套餐即可，点击继续。</li></ol><p>参考文章</p><p><a href="https://zhuanlan.zhihu.com/p/571929772">免费注册申请永久的eu.org域名创建属于自己的域名</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> euorg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sublime配置</title>
      <link href="/posts/cd41.html"/>
      <url>/posts/cd41.html</url>
      
        <content type="html"><![CDATA[<h1 id="sublime配置"><a href="#sublime配置" class="headerlink" title="sublime配置"></a>sublime配置</h1>]]></content>
      
      
      <categories>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sublime </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WireShark抓包微信视频</title>
      <link href="/posts/d70a.html"/>
      <url>/posts/d70a.html</url>
      
        <content type="html"><![CDATA[<h1 id="WireShark抓包微信视频"><a href="#WireShark抓包微信视频" class="headerlink" title="WireShark抓包微信视频"></a>WireShark抓包微信视频</h1><p>微信视频由于……，使得其下载一直是一个问题</p><h2 id="其他方法"><a href="#其他方法" class="headerlink" title="其他方法"></a>其他方法</h2><p><a href="https://mp.weixin.qq.com/s/qyUGT-1wBFuZNrm8_48S2w">好用的微信视频号视频下载方法（2024年）</a></p>]]></content>
      
      
      <categories>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信视频下载 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>重温灌篮</title>
      <link href="/posts/d827.html"/>
      <url>/posts/d827.html</url>
      
        <content type="html"><![CDATA[<p>今天重温了童年经典——灌篮高手，终于等来了最后的时刻：称霸全国！</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>npm损坏修复</title>
      <link href="/posts/88ea.html"/>
      <url>/posts/88ea.html</url>
      
        <content type="html"><![CDATA[<h1 id="npm损坏修复"><a href="#npm损坏修复" class="headerlink" title="npm损坏修复"></a>npm损坏修复</h1><p>最近我hexo项目里的npm出现了问题，具体问题是：使用npm下载组件的时候突然就出现了<code>Cannot find module &#39;E:\nodejs\node_modules\npm\bin\npm-cli.js&#39;</code>，</p><p>找过很多教程，发现使用npm命令全部无效，依然会报错。</p><p>最后发现还是官方修复最管用，点击之前下载的安装包<code>.msi</code>文件，然后选择里面的repair选项，等待修复完成，大功告成！</p><blockquote><p>另外：</p><p>从搜索框搜索“环境变量”进入环境变量设置，是不能对系统变量进行设置的，直接搜索进入的话是以<code>user</code>身份进入的，所以只能设置用户环境变量。</p><p>win+i→系统→高级系统设置→环境变量，这样是以管理员身份进入的，就可以设置系统环境变量了</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>配置欧路词典</title>
      <link href="/posts/159f.html"/>
      <url>/posts/159f.html</url>
      
        <content type="html"><![CDATA[<h1 id="欧路词典"><a href="#欧路词典" class="headerlink" title="欧路词典"></a>欧路词典</h1><p><a href="https://zhuanlan.zhihu.com/p/609328431">打造最全“欧路词典扩充词典库” 附介绍和打包下载 - 知乎 (zhihu.com)</a></p><p><a href="https://zhuanlan.zhihu.com/p/64925212">欧路词典打磨指南 - 知乎 (zhihu.com)</a></p><p><a href="https://zhuanlan.zhihu.com/p/142465962">考研党如何用正确的姿势使用欧路词典？ - 知乎 (zhihu.com)</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>解决自定义模板不能生成abbrlink</title>
      <link href="/posts/50a6.html"/>
      <url>/posts/50a6.html</url>
      
        <content type="html"><![CDATA[<h1 id="解决自定义模板不能生成abbrlink"><a href="#解决自定义模板不能生成abbrlink" class="headerlink" title="解决自定义模板不能生成abbrlink"></a>解决自定义模板不能生成abbrlink</h1><p>hexo博客可以在站点目录的<code>scaffolds</code>下自定义文章模版，为文章撰写提供方便。</p><p><code>scaffolds</code>下默认有三种模版：</p><ul><li>draft</li><li>post</li><li>page</li></ul><p>但是站主在使用自定义的模版新建文章时，却发现了一个问题：使用自定义模板新建文章不能自动生成abbrlink短链。</p><blockquote><p>这里补充一下短链相关知识，以及为什么要使用短链。</p></blockquote><p>Hexo默认的静态URL格式是 <code>:year/:month/:day/:title</code>，即按年、月、日、标题的形式生成固定链接。例如：<code>http://www.xxx.com/2022/11/11/hello-world</code></p><p>默认URL的格式会产生很多斜杠，百度蜘蛛在抓取网页时会根据网页权重抓取网页，比如最先抓取的首页（一般都是自己的域名，比较简短），因此在链接里不宜出现过多的斜杠，最好不要超过两个。还有一个问题就是，如果文章的标题使用了中文，经过转码后，URL会变得特别长。</p><p>使用<code>hexo-abbrlink</code>或<code>hexo-abbrlink2</code>插件便可解决以上问题，以往修改标题会导致原始链接失效，使用这个插件后只要不更改文章中的abbrlink值，文章的链接就会是持久的。</p><p>相较于<code>hexo-abbrlink</code>，<code>hexo-abbrlink2</code>可以从1开始依次增长。</p><p>回归正题，上网查找资料后发现：一些插件默认只针对<code>post</code>模版，如<code>hexo-abbrlink</code>，而我使用的是自定义模板<code>essay</code>创建文章，不被<code>hexo-abbrlink</code>所支持，所以不会自动生成abbrlink。</p><p>本想自己试试基于<code>hexo-abbrlink</code>插件修改原代码逻辑，使之支持更多的模版，但是上网看到已经有大佬遇到了这个问题并给出解决方法，大佬已经基于原插件开发了[hexo-abbrlink3](<a href="https://github.com/JunKuangKuang/hexo-abbrlink3">JunKuangKuang&#x2F;hexo-abbrlink3: create one and only link for every post for hexo (github.com)</a>)，所以就不重复造轮子了。</p><p>后续就是跟着大佬的<a href="%5BHexo%E5%8E%86%E9%99%A9%E8%AE%B0%E4%B9%8B%E5%8D%81%E4%BA%8C%E5%BC%80%E5%8F%91hexo-abbrlink3%E6%8F%92%E4%BB%B6_hexo-abbrlink%E4%B8%8D%E7%94%9F%E6%95%88-CSDN%E5%8D%9A%E5%AE%A2%5D(https://blog.csdn.net/qq_41461536/article/details/126456286)">博客</a>操作就行。</p><blockquote><p>注意：在新建文章时，hexo-abbrlink插件不会立即给文章自动填充abbrlink，只有在你使用hexo g命令后，就会发现文章的abbrlink已经被自动填充了。</p></blockquote><p>升级：</p><ol><li>新建文章好像不能包含front-matter的关键词，否则会出问题？</li><li>能否设置插件代码自动识别scaffolds下的所有模版？</li></ol>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>时来天地皆同力</title>
      <link href="/posts/sltdjtl.html"/>
      <url>/posts/sltdjtl.html</url>
      
        <content type="html"><![CDATA[<h1 id="时来天地皆同力"><a href="#时来天地皆同力" class="headerlink" title="时来天地皆同力"></a>时来天地皆同力</h1><div class="ipage">   <div class="ititle"> </div>   <div class="izhengwen">     <p>      天不得时，日月无光；<br>      地不得时，草木不生；<br>      水不得时，风浪不平；<br>      人不得时，利运不通。<br>      时也，运也，命也。<br>      人有冲天之志，非运不可自通。<br>      时来天地皆同力，运到万物皆同行。<br>      十年运到龙困井，一朝得势入青云。<br>      择一业以谋时养命，等一运以扭转乾坤。<br>    </p>   </div> </div>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Alist挂载</title>
      <link href="/posts/6c3d.html"/>
      <url>/posts/6c3d.html</url>
      
        <content type="html"><![CDATA[<h1 id="Alist挂载网盘"><a href="#Alist挂载网盘" class="headerlink" title="Alist挂载网盘"></a>Alist挂载网盘</h1><p>[<a href="https://xyzbz.cn/archives/803/">保姆级教程]使用宝塔搭建Alist文件列表程序 - 网友小宋 (xyzbz.cn)</a></p>]]></content>
      
      
      <categories>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Alist </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>阿里云域名购买及解析</title>
      <link href="/posts/52cd.html"/>
      <url>/posts/52cd.html</url>
      
        <content type="html"><![CDATA[<p> 市面上有很多域名提供商可供选择，价格不尽相同，续费服务也不同…… 由于我的服务器是在阿里云购买的，为了方便管理，所以我选择了阿里云购买域名。服务器买了这么久了，终于开始配置域名了(p≧w≦q)</p><h2 id="域名购买"><a href="#域名购买" class="headerlink" title="域名购买"></a>域名购买</h2><p>主要步骤如下：</p><ol><li>校验域名是否已被注册（阿里云域名注册地址：<a href="https://www.aliyun.com/minisite/goods?userCode=rjqh3xdh">https://wanwang.aliyun.com/</a>）</li><li>选择钟意的域名，添加到购物车</li><li>购买域名前<strong>必须</strong>要看清楚重要提醒，因为域名后面涉及到网站备案，尽量选择所在地可备案，</li><li>创建信息模板<br><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404291942375.png" alt="创建模版"></li></ol><h2 id="ICP备案"><a href="#ICP备案" class="headerlink" title="ICP备案"></a>ICP备案</h2><p>而 ICP 备案，是为了防止在网上从事非法的网站经营活动，打击不良互联网信息的传播，国家对互联网信息服务实行的备案制度。如果不进行备案，很有可能被查处以后关停。</p><p>注意的是，备案一定是要等域名购买成功后，2-3天才能进行。还有就是，阿里云要求你进行备案的服务器必须拥有三个月以上（三个月前购买的服务器或者直接续费三个月都行）才能进行购买。等你提交成功后，阿里云会进行一个初审，会有短信验证或者钉钉视频验证个人真实信息。至于那种方式，具体按政府的规定。</p><p>由于我是在阿里云购买的服务器，所以才在阿里云上 进行域名购买和备案。</p><p><img src="https://s2.loli.net/2024/07/06/u5SjvhJKtOz2cfP.png" alt="备案流程"></p><ol><li>进入阿里云的<a href="https://beian.aliyun.com/">ICP备案网站</a>，选择自助备案，填写基础信息和主办者信息</li></ol><p><img src="https://s2.loli.net/2024/07/06/3wYjQ4RzGipDekr.png" alt="自助备案"></p><p><img src="https://s2.loli.net/2024/07/06/GBuNAxtaIPO83kg.png" alt="填写信息"></p><ol start="2"><li>填写完成后，单击<strong>信息校验</strong>完成校验。</li></ol><p><img src="https://s2.loli.net/2024/07/06/gV65CkZiHSuahjM.png" alt="点击校验"></p><ol start="3"><li><p>填写主办方信息，填写完成后单击<strong>下一步</strong></p></li><li><p>填写网站信息</p></li></ol><p><img src="https://s2.loli.net/2024/07/06/wvN4HKkdePXSchy.png" alt="网站信息"></p><p>注意在网站信息填写中，对网站名称有一些要求，就比如不能带 “博客”、”论坛”等词汇，具体可以参考<a href="https://help.aliyun.com/document_detail/36948.htm">个人网站命名要求</a>。</p><ol start="4"><li>根据页面提示，然后需要使用阿里云APP上传所需材料、人脸验证等。</li></ol><p><img src="https://s2.loli.net/2024/07/06/wbFMW1qTEot6Zp7.png" alt="上传资料"></p><ol start="5"><li>在手机阿里云APP提交完资料后，提交初审。提交审核后，会收到阿里云的核实电话，请留意接听。我的是提交后差不多一个小时就受到阿里云的核实电话了。</li><li>阿里云工作人员会提醒你注意工信部核验短信。短信中会有一个核验链接，点击进行确认核验。最长约20个工作日，具体以实际审核时间为准。比如我这里只用了4天。</li></ol><p><img src="https://s2.loli.net/2024/07/10/Sf5ZnKCo7hj8FrX.png" alt="还是挺快的"></p><ol start="7"><li>意想不到的是，阿里云还发了一个邮件通知并补偿了服务器时长</li></ol><p><img src="https://s2.loli.net/2024/07/10/qBiWneSKlZTzLY2.png" alt="突然觉得好像也不用这么快"></p><ol start="8"><li>备案申请下来后，可以登陆<a href="https://beian.aliyun.com/pcContainer/myorder">阿里云 ICP 备案网站</a>，查看自己的备案信息：</li></ol><p><img src="https://s2.loli.net/2024/07/10/hAMyGkHutTD25gO.png" alt="备案信息"></p><p>获取备案信息后，我们需要在网站底部添加备案信息，这是因为：</p><blockquote><p>ICP备案成功后，需要在ICP备案成功的网站底部悬挂工信部下发的ICP备案号，并生成链接指向工信部网站：beian.miit.gov.cn。如果未在网站底部添加ICP备案号，被相关部门核查出来将处以五千元以上一万元以下罚款。</p></blockquote><p>具体的样式不规定，反正你要写，以阿里云官网的底部示例：</p><h2 id="域名解析"><a href="#域名解析" class="headerlink" title="域名解析"></a>域名解析</h2><p>接下来将域名解析到服务器 IP，登陆<a href="https://dc.console.aliyun.com/next/index#/domain/list/all-domain">域名控制台</a>查看到我们购买的域名，并点击 「解析」：</p><p><img src="https://s2.loli.net/2024/07/10/wzSQRoN9fjx8gi7.png" alt="点击解析"></p><p>进入解析之后，点击添加记录。</p><ul><li>一般默认是<code>A</code>类型，添加ip作为记录，选择A记录类型，添加cname作为记录，选择cname</li><li>选择<code>www</code>和<code>@</code>两种记录，如果想网站加或不加www前缀都能访问的话，需要至少解析这两个情况。</li><li>解析线路，选择系统默认即可</li><li>记录值，指的是服务器&#x2F;虚拟主机的外网IP地址。查看外网IP地址，就直接去购买的服务器详情里面查看</li><li>TTL，一般以系统默认的情况就行，默认的10分钟就行</li></ul><p><img src="https://s2.loli.net/2024/07/10/t4XgGh5xUpOVuka.png" alt="添加记录"></p><p><img src="https://s2.loli.net/2024/07/10/Jf1Awbn8HRlzgG3.png" alt="两条记录"></p><h2 id="SSL证书"><a href="#SSL证书" class="headerlink" title="SSL证书"></a>SSL证书</h2><h3 id="阿里云免费证书申请与部署"><a href="#阿里云免费证书申请与部署" class="headerlink" title="阿里云免费证书申请与部署"></a>阿里云免费证书申请与部署</h3><p>自2021年1月1日起，每个阿里云个人或企业用户每年可以一次性申请20张免费版个人测试证书，可以用于个人网站或网站测试环境，以通过HTTPS加密协议实现安全访问。</p><p>一些信息：</p><ul><li>自2024年6月下旬起，阿里云将SSL免费证书更名为个人测试证书（免费版），并将升级证书（有效期12个月）更名为个人测试证书（pro）。</li><li>每年的1月1日至12月31日。免费领取的证书资源包在每年自然年末清零（即每年12月31日24:00:00），已签发的证书不受影响。新一年的免费证书资源包需在第二年1月1日00:00:00后重新申请。更多关于免费证书的说明，请参见<a href="https://help.aliyun.com/zh/ssl-certificate/user-guide/overview-of-free-certificates-overview-of-free-certificates#concept-2044742">个人测试证书说明</a>。</li></ul><h4 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h4><ul><li><strong>加密网络传输</strong>：仅需使用HTTPS协议加密网络传输的场景。</li><li><strong>单域名DV证书</strong>：免费证书仅验证证书持有者的域名所有权，不验证网站真实性。适用于无需验证网站真实性的场景。</li><li><strong>特殊域名限制</strong>：不支持特殊后缀域名（如 .edu、.gov、.org、.jp、.pay、.bank、.live、.nuclear 和 .ru 等）申请免费证书。</li></ul><h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h4><ul><li><strong>实名认证</strong>：您的阿里云账号需完成实名认证。具体操作请参见<a href="https://help.aliyun.com/document_detail/48286.html">实名认证指南</a></li><li><strong>购买付费证书</strong>：如果需要证书验证网站的真实性、需要在一张证书中绑定通配符域名或多个域名等，购买并申请付费证书，见<a href="https://help.aliyun.com/document_detail/102277.html">计费概述</a>。</li></ul><h4 id="领取免费证书"><a href="#领取免费证书" class="headerlink" title="领取免费证书"></a>领取免费证书</h4><ol><li><p>登录<a href="https://yundunnext.console.aliyun.com/?spm=a2c4g.11186623.0.0.5c1175a63uilpX&p=cas">数字证书管理服务控制台</a>。</p></li><li><p>在左侧导航栏，选择 证书管理 → SSL证书管理。</p></li><li><p>在<strong>个人测试证书（原免费证书）</strong>页签，单击<strong>立即购买</strong>。</p></li><li><p>在<strong>立即购买</strong>面板，保持默认选项，仔细阅读并勾选<strong>服务协议</strong>，单击<strong>立即购买</strong>并完成支付。</p></li></ol><p><img src="https://s2.loli.net/2024/07/11/YTD9ruvpKoxESBN.png" alt="个人测试证书"></p><p>通过上述步骤，您可以快速获取并部署阿里云提供的免费版个人测试证书，实现网站的HTTPS安全访问。</p><h4 id="提交证书申请"><a href="#提交证书申请" class="headerlink" title="提交证书申请"></a>提交证书申请</h4><ol><li>登录<a href="https://yundunnext.console.aliyun.com/?p=cas">数字证书管理服务控制台</a>。</li><li>在左侧导航栏，选择<strong>证书管理</strong> → <strong>SSL</strong>证书管理。</li><li>在<strong>个人测试证书（原免费证书）</strong>页签，单击<strong>创建证书</strong>。</li><li>在<strong>证书申请</strong>面板，配置免费证书参数，单击<strong>提交审核</strong>。</li></ol><p><img src="https://s2.loli.net/2024/07/11/BAQhCfwJineK5jm.png" alt="提交申请"></p><ol start="5"><li>等待邮件通知通过</li></ol><p><img src="https://s2.loli.net/2024/07/11/p7CvZ56KlwMT4tY.png" alt="邮件通知"></p><h4 id="部署到云服务器"><a href="#部署到云服务器" class="headerlink" title="部署到云服务器"></a>部署到云服务器</h4><ol><li>登录<a href="https://yundunnext.console.aliyun.com/?spm=a2c4g.11186623.0.0.11633359DKvMF4&p=cas">数字证书管理服务控制台</a>。</li><li>在左侧导航栏，选择<strong>部署和资源管理</strong>→<strong>云服务器部署</strong>。</li><li><strong>云服务器部署</strong>→<strong>创建任务</strong>，自定义任务名称，单击下一步。</li></ol><p><img src="https://s2.loli.net/2024/07/11/ECUFI9KHpoq3Ytu.png" alt="创建任务"></p><ol start="4"><li>选择个人测试证书、及关联云服务器的SSL证书，单击下一步。</li></ol><p><img src="https://s2.loli.net/2024/07/11/AqOX6zyfE8leJDk.png" alt="选择证书"></p><ol start="5"><li>选择对应的云服务器和资源，单击下一步。</li></ol><p><img src="https://s2.loli.net/2024/07/11/2q7zQJhmfnPgVor.png" alt="选择服务器"></p><ol start="6"><li>部署证书至云服务器</li></ol><p><img src="https://s2.loli.net/2024/07/11/n2FXewDiqIQfjEd.png" alt="阿里云示例"></p><p><img src="https://s2.loli.net/2024/07/11/VgRH6DzZvTw8LUx.png" alt="按示例走"></p><h3 id="通过宝塔"><a href="#通过宝塔" class="headerlink" title="通过宝塔"></a>通过宝塔</h3><p>进入到<strong>数字证书管理服务</strong>界面，点击<strong>下载</strong>，</p><p><img src="https://s2.loli.net/2024/07/12/rWsXha6qvgpkMDm.png" alt="下载"></p><p>下载nginx版本的ssl证书，是一个压缩包，里面有各有2个文件—pem、key文件</p><p><img src="https://s2.loli.net/2024/07/12/QDxVC76H4IgazNd.png" alt="nginx"></p><h2 id="公安备案"><a href="#公安备案" class="headerlink" title="公安备案"></a>公安备案</h2><p>参考：<a href="https://help.aliyun.com/zh/icp-filing/basic-icp-service/user-guide/the-public-security-network-for-the-record-information-fill-in-the-guide?spm=a2c4g.11186623.0.0.309026c5TBozPT">如何填写公安联网备案公安联网备案信息指南_备案(ICP Filing)-阿里云帮助中心 (aliyun.com)</a></p><p>ICP备案成功后，仍需在网站&#x2F;App开通之日起30日内登录<a href="http://www.beian.gov.cn/">全国互联网安全管理服务平台</a>提交公安联网备案申请。</p><ol><li><p>首次需要注册，实名认证注册后登录</p></li><li><p>用户账号下无关联的主体信息时，需要新增主体，</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407242154369.png" alt="申请主体"></p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407242203153.png" alt="填写说明"></p><p>新办网站申请</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407242208733.png" alt="新办网站申请"></p><p>需要域名证书：</p><ol><li>登录<a href="https://netcn.console.aliyun.com/core/domain/list">阿里云域名控制台</a>，单击左侧导航栏<strong>域名列表</strong>，并单击目标域名<strong>操作</strong>列下的<strong>管理</strong>。</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407242215120.png" alt="image-20240724221500864"></p><ol start="2"><li>在左侧导航栏，单击<strong>域名证书下载</strong>，找到证书下面的下载按钮，点击下载。</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407242218113.png" alt="下载证书"></p><p>一些说明：</p><ul><li>网络接入服务商：详见<a href="https://www.cnblogs.com/xaun/p/14814125.html">公安备案接入服务商如何填写？ - 六人行 - 博客园 (cnblogs.com)</a></li><li>是否提供互联网交互服务：选择不提供</li><li>禁用评论：<a href="https://www.wpdaxue.com/how-to-disable-comments-in-wordpress.html">如何在 WordPress 中禁用评论：完整指南 – WordPress大学 (wpdaxue.com)</a></li><li>互联网危险物品信息发布、相关前置许可均选择否，不然要提供相关证书证明。如果涉及要点“是”并上传相关资格，一切信息确保填写无误后点击“下一步”</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407250002092.png" alt="一般填写"></p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://help.aliyun.com/zh/linkedmall/user-guide/icp-filling-for-domain-names?spm=5176.21213303.J_qCOwPWspKEuWcmp8qiZNQ.62.40912f3dU8vh3G&scm=20140722.S_help@@%E6%96%87%E6%A1%A3@@456481._.ID_help@@%E6%96%87%E6%A1%A3@@456481-RL_icp%E5%A4%87%E6%A1%88-LOC_llm-OR_ser-V_3-RE_new2-P0_1">域名ICP备案-阿里云帮助中心 (aliyun.com)</a></p><p><a href="https://github.com/mqyqingfeng/Blog/issues/247">一篇域名从购买到备案到解析的详细教程 · Issue #247 · mqyqingfeng&#x2F;Blog · GitHub</a></p><p><a href="https://blog.csdn.net/qq_35340913/article/details/118916348">五、搭建个人博客-域名购买及备案（超详细~）-CSDN博客</a></p><p><a href="https://blog.csdn.net/fate_sky8521/article/details/116610662">阿里云服务器实现域名解析步骤(入门级教程)_阿里云域名解析教程-CSDN博客</a></p><p><a href="https://help.aliyun.com/zh/ssl-certificate/getting-started/get-started-with-free-certificates">快速领取并部署免费版个人测试证书_数字证书管理服务（原SSL证书）(SSL Certificate)-阿里云帮助中心 (aliyun.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 站长必会 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 域名解析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>跨平台互联工具</title>
      <link href="/posts/3296.html"/>
      <url>/posts/3296.html</url>
      
        <content type="html"><![CDATA[<h1 id="跨平台互联工具"><a href="#跨平台互联工具" class="headerlink" title="跨平台互联工具"></a>跨平台互联工具</h1><p>在日常生活中，大家都会使用到手机、电脑、平板之类的产品，那么三端产品的互动和协同就是一个让人头痛的问题。当然如果你使用的是一个品牌的手机、电脑和品牌的话，一般依靠该品牌提供的生态，可以很好的解决三端跨屏互动的问题。但是三端不是同一个品牌的情况才是常态&#96;(<em>&gt;﹏&lt;</em>)′。虽然市面上有很多用来实现跨屏互动的软件，但大多数效果不是很好。最后我找到了一款个人认为表现最好的一款软件——KDE Connect，Linux，Windows，MacOS，Android，iOS之间的都可以得到支持。</p><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><blockquote><p>KDE connect是什么？</p></blockquote><p><a href="https://link.zhihu.com/?target=https://kdeconnect.kde.org/">KDE Connect</a> 是由 KDE 桌面团队开发的，提供了 Linux 系统与其他系统，如 Windows、MacOS、Android 及 Linux，的无缝连接。</p><p>KDE Connect 安装后会使你拥有接收电话的通知、发送或接受短信、浏览文件、发送或接受文件等许多功能。</p><p>此外，KDE Connect 在无线网络上遵循安全协议，以防止任何隐私泄露。它是自由开源的软件，出现任何隐患的可能性微乎其微。组合了这些优良特性，KDE Connect 是一款出色的工具。</p><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p><a href="https://sspai.com/post/68779">通知推送、文件互传…… 免费好用的桌面 &#x2F; 移动端协同工具：KDE Connect - 少数派 (sspai.com)</a></p><p><a href="https://sspai.com/post/59508#!">KDE Connect : Linux 下的设备互联 - 少数派 (sspai.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> KDE Connect </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>词缀pan-</title>
      <link href="/posts/fdde.html"/>
      <url>/posts/fdde.html</url>
      
        <content type="html"><![CDATA[<p> 今日单词学习之panorama(全景)，pan（全部）-orama（看见）→全部看见→全景</p><h2 id="pan"><a href="#pan" class="headerlink" title="pan-"></a>pan-</h2><p>pan-这个词根源于</p><h2 id="orama"><a href="#orama" class="headerlink" title="-orama"></a>-orama</h2><p><a href="https://www.cnblogs.com/Renyi-Fan/p/8563731.html">有哪些值得推荐的关于英文词根的好书？ - 范仁义 - 博客园 (cnblogs.com)</a></p><p><a href="https://book.douban.com/subject/27116778/">英语词根与单词的说文解字(新版) (豆瓣) (douban.com)</a></p><p><a href="https://blog.csdn.net/liu17234050/article/details/104566377">252个核心词根——词缀（前缀-后缀）总结大全【最全-一文看懂！！！】_英语词根词缀大全252个-CSDN博客</a></p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 词缀 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>站长必会</title>
      <link href="/posts/3338.html"/>
      <url>/posts/3338.html</url>
      
        <content type="html"><![CDATA[<h1 id="站长必会"><a href="#站长必会" class="headerlink" title="站长必会"></a>站长必会</h1><p>作为一个合格的站长需要会那些东西？</p><p>一个站长需要学习的东西非常广泛且多样化，这包括但不限于以下几个方面：</p><p><strong>一、网站设计与开发基础</strong></p><ol><li>HTML、CSS和JavaScript等前端技术，用于构建和优化网页。</li><li>后端开发技术，如PHP、Python、Java等，用于实现网站的功能和数据处理。</li><li>数据库管理知识，如MySQL、MongoDB等，用于存储和检索网站数据。</li></ol><p><strong>二、内容创作与编辑</strong></p><ol><li>学习如何撰写高质量、符合SEO规范的内容，提升网站的内容质量。</li><li>掌握内容策划、编辑和发布流程，确保内容符合网站定位和用户需求。</li></ol><p><strong>三、网站运营与管理</strong></p><ol><li>网站性能优化技术，如提升加载速度、确保稳定性等。</li><li>网站安全知识，包括防火墙设置、数据加密等，确保网站安全无虞。</li><li>使用网站数据分析工具，分析用户行为、流量来源等数据，指导网站优化。</li></ol><p><strong>四、SEO优化与市场推广</strong></p><ol><li>SEO技术，包括关键词优化、链接建设、内容优化等，提高网站在搜索引擎中的排名。</li><li>社交媒体营销策略，利用社交媒体平台推广网站内容，增加网站曝光度和流量。</li><li>学习使用广告平台，如Google Ads等，进行有针对性的广告投放。</li></ol><p><strong>五、法律法规与合规性</strong></p><ol><li>了解互联网相关法律法规，确保网站内容合法合规。</li><li>学习数据保护知识，保护用户隐私和数据安全。</li><li>知识产权问题，避免侵犯他人版权或商标权。</li></ol><p><strong>六、用户体验与交互设计</strong></p><ol><li>用户行为心理学和交互设计原则，设计易于使用且吸引人的网站界面。</li><li>优化网站导航、布局和按钮设计，提高用户的浏览体验。</li></ol><p><strong>七、数据分析与挖掘</strong></p><ol><li>使用数据分析工具收集并分析网站数据，了解用户行为、流量来源等关键指标。</li><li>解读数据报告，为网站的决策提供支持。</li></ol><p><strong>八、持续学习与创新能力</strong></p><ol><li>站长需要具备持续学习的能力，不断关注互联网行业的新动态和趋势。</li><li>培养创新思维，探索新的网站运营策略和优化方法。</li></ol><p>通过不断学习和实践，站长可以逐步提升自己的专业素养和综合能力，为网站的成功运营提供有力保障。同时，站长还需要具备团队协作和沟通能力，以便更好地协调各方面资源，推动网站的发展。</p><p><a href="https://zhuanlan.zhihu.com/p/91507285">（1）要成为一个合格的站长咱们应该懂这些 - 知乎 (zhihu.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 站长必会 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 站长必会 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网站安全</title>
      <link href="/posts/bd47.html"/>
      <url>/posts/bd47.html</url>
      
        <content type="html"><![CDATA[<h1 id="网站安全"><a href="#网站安全" class="headerlink" title="网站安全"></a>网站安全</h1><p>DDoS 防护，CC 防护，网站安全防护，SQL 注入防护，XSS 攻击防护等</p><p><a href="https://help.aliyun.com/document_detail/153593.html?spm=5176.28426678.J_HeJR_wZokYt378dwP-lLl.577.405f5181hvjEeB&scm=20140722.S_help@@%E6%96%87%E6%A1%A3@@153593.S_BB1@bl+BB2@bl+RQW@ag0+os0.ID_153593-RL_%E7%BD%91%E7%AB%99%E5%AE%89%E5%85%A8-LOC_search~UND~helpdoc~UND~item-OR_ser-V_3-P0_17">云效2020有哪些安全类常见问题_云效(Apsara Devops)-阿里云帮助中心 (aliyun.com)</a></p><p><a href="https://help.aliyun.com/zh/govcloud/getting-started/ecs-security-configurations?spm=5176.28426678.J_HeJR_wZokYt378dwP-lLl.589.405f5181hvjEeB&scm=20140722.S_help@@%E6%96%87%E6%A1%A3@@98822.S_os0.ID_98822-RL_%E7%BD%91%E7%AB%99%E5%AE%89%E5%85%A8-LOC_search~UND~helpdoc~UND~item-OR_ser-V_3-P0_19">政务云ECS有哪些安全配置_阿里云电子政务云-阿里云帮助中心 (aliyun.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 站长必会 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网站安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>对象存储</title>
      <link href="/posts/ce5b.html"/>
      <url>/posts/ce5b.html</url>
      
        <content type="html"><![CDATA[<h1 id="对象存储"><a href="#对象存储" class="headerlink" title="对象存储"></a>对象存储</h1><p><a href="https://juejin.cn/post/7132672752963551239">什么是对象存储？3000字给你整明明白白！ - 掘金 (juejin.cn)</a></p><p><a href="https://help.aliyun.com/zh/oss/product-overview/what-is-oss">什么是对象存储OSS_对象存储(OSS)-阿里云帮助中心 (aliyun.com)</a></p><p><a href="https://blog.csdn.net/DecadeLive/article/details/105094939">对象存储3：对象存储的原理、构造和详解-CSDN博客</a></p><p><a href="https://aws.amazon.com/cn/what-is/object-storage/">什么是对象存储？- 对象存储简介 - AWS (amazon.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 站长必会 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 对象存储 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEO</title>
      <link href="/posts/7583.html"/>
      <url>/posts/7583.html</url>
      
        <content type="html"><![CDATA[<h1 id="站长必会之SEO"><a href="#站长必会之SEO" class="headerlink" title="站长必会之SEO"></a>站长必会之SEO</h1><h2 id="什么是SEO"><a href="#什么是SEO" class="headerlink" title="什么是SEO"></a>什么是SEO</h2><h2 id="SEO有什么用"><a href="#SEO有什么用" class="headerlink" title="SEO有什么用"></a>SEO有什么用</h2><h2 id="怎么做SEO"><a href="#怎么做SEO" class="headerlink" title="怎么做SEO"></a>怎么做SEO</h2><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://blog.csdn.net/weixin_46653360/article/details/129549920">前端开发之SEO（搜索引擎优化）_前端seo优化-CSDN博客</a></p><p><a href="https://zhuanlan.zhihu.com/p/210428775">什么是SEO？如何进行SEO优化？ - 知乎 (zhihu.com)</a></p><p><a href="https://help.aliyun.com/document_detail/157011.html?spm=5176.28426678.J_HeJR_wZokYt378dwP-lLl.7.405f5181hvjEeB&scm=20140722.S_help@@%E6%96%87%E6%A1%A3@@157011.S_BB1@bl+BB2@bl+RQW@ag0+hot+os0.ID_157011-RL_seo-LOC_search~UND~helpdoc~UND~item-OR_ser-V_3-P0_1">解答SEO相关问题_云·速成美站-阿里云帮助中心 (aliyun.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 站长必会 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计网62问</title>
      <link href="/posts/a329.html"/>
      <url>/posts/a329.html</url>
      
        <content type="html"><![CDATA[<h1 id="计网62问"><a href="#计网62问" class="headerlink" title="计网62问"></a>计网62问</h1><p><a href="https://mp.weixin.qq.com/s/yAlErlC09GnjaVvwUo3Acg">面渣逆袭：计算机网络六十二问，三万字图文详解！速收藏！ (qq.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 面经 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计网 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>宝塔安装docker和青龙面板</title>
      <link href="/posts/aa4a.html"/>
      <url>/posts/aa4a.html</url>
      
        <content type="html"><![CDATA[<h1 id="宝塔安装docker和青龙面板"><a href="#宝塔安装docker和青龙面板" class="headerlink" title="宝塔安装docker和青龙面板"></a>宝塔安装docker和青龙面板</h1><h2 id="准备工具"><a href="#准备工具" class="headerlink" title="准备工具"></a>准备工具</h2><p>一台服务器：华为云、阿里云、腾讯云等</p><p>shell连接工具：[Xshell](<a href="https://pan.baidu.com/share/init?surl=HWXsGGQIK8Hlor0fJTK84Q&pwd=vcur">百度网盘 请输入提取码 (baidu.com)</a>)、Xterm等</p><h2 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h2><p>我这里以centos7.9为例，由于宝塔面板已经安装好，就不再赘述</p><h3 id="docker安装"><a href="#docker安装" class="headerlink" title="docker安装"></a>docker安装</h3><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404032032919.png" alt="docker安装" style="zoom: 67%;" /><p>也可以使用命令安装</p><p>使用命令安装docker （嫌麻烦的直接在宝塔上安装就行）</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">bash</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token function">curl</span> <span class="token parameter variable">-sSL</span> https://linuxmirrors.cn/docker.sh<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查看docker版本</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> <span class="token parameter variable">-v</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查看docker是否安装</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum list installed <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">docker</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="安装青龙面板"><a href="#安装青龙面板" class="headerlink" title="安装青龙面板"></a>安装青龙面板</h3><p>安装命令（注意如果不是以root登陆需要在前面加上<code>sudo</code>）</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">wget</span> <span class="token parameter variable">-q</span> https://git.metauniverse-cn.com/https://raw.githubusercontent.com/yanyuwangluo/VIP/main/Scripts/sh/ql.sh <span class="token parameter variable">-O</span> ql.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> ql.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404032043494.png" alt="ql安装"></p><p><strong>青龙路径 （不建议放在root下），以防后边出问题找不到</strong></p><p><strong>docker容器名 ：ql  （一路回车默认！别太快！等下端口设置）</strong></p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404032102665.png" alt="过程1" style="zoom:67%;" /><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404032107012.png" alt="过程2" style="zoom:80%;" /><blockquote><p>输入你的公网IP:5711登录青龙面板</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404032106691.png" alt="过程3"></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p>本文只是简要记录青龙面板的安装过程，如果想了解通过vmware、安装宝塔面板、xshell使用等详见<a href="https://blog.csdn.net/xiaoquanz/article/details/136713365">搭建宝塔、docker、青龙（2024 3&#x2F;14更新）</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 青龙面板 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于xshell使用的系列问题及解决</title>
      <link href="/posts/4fdb.html"/>
      <url>/posts/4fdb.html</url>
      
        <content type="html"><![CDATA[<h2 id="外观设置"><a href="#外观设置" class="headerlink" title="外观设置"></a>外观设置</h2><ol><li>主题设置：【查看】→【主题】，选择喜欢的主题</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407131525231.png" alt="我的是暗黑主题"></p><ol start="2"><li>配色方案：【工具】→【配色方案】，还可以设置字体配色和背景色</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407131536490.png" alt="选择配色"></p><ol start="3"><li>字体设置：【文件】→【默认会话属性】，这里可以进行更多的设置，比如光标的样式和颜色，我这里设置的是<code>绿色、竖线</code></li></ol><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202407131545745.png" alt="更多设置"></p><h2 id="不能使用退格键"><a href="#不能使用退格键" class="headerlink" title="不能使用退格键"></a>不能使用退格键</h2><p>xshell在输入命令时，敲错字母了，想通过按退格键删除敲错的字母，却在屏幕显示出<code>^H</code>，退格不行，再按删除键，却显示出<code>^[[3~</code>，就是删除不了输错的字母。</p><p>解决方法：</p><ul><li>ALT+P打开xshell属性设置，选择<code>终端-键盘</code>，把<code>delete</code>和<code>backspace</code>序列改为 ASCII 127即可</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404031742271.png" alt="xshell设置"></p><h2 id="设置左键复制，右键粘贴"><a href="#设置左键复制，右键粘贴" class="headerlink" title="设置左键复制，右键粘贴"></a>设置左键复制，右键粘贴</h2><ol><li>打开 Xshell 的菜单栏（如果没有显示菜单栏则按下Alt键），点击工具–选项。</li><li>打开选项中的键盘和鼠标。选择向右按钮中的<code>Paste the clipboard contents</code>，并且勾上<code>将选定的文本自动复制到剪贴板</code>，最后点击确定即可。</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404032002459.png" alt="粘贴设置"></p><h2 id="按方向键出现-A-B-C-D"><a href="#按方向键出现-A-B-C-D" class="headerlink" title="按方向键出现^[[A^[[B^[[C^[[D"></a>按方向键出现<code>^[[A^[[B^[[C^[[D</code></h2><p>当我们点击<code>↑</code>、<code>↓</code>  想要找到之间输入的指令时，却出现了<code>^[[A</code>和<code>[[B</code>，点击<code>←</code>、<code>→</code>  却出现了<code>^[[C</code>和<code>[[D</code></p><p>即：无法按上下键来找到之间输入的指令，无法按左右键来调整光标位置</p><p>这个问题有两种可能：</p><ol><li><p>一种是由于当前用户使用的shell是&#x2F;bin&#x2F;sh的原因。在添加用户的时候没有添加用户的指定shell类型，因此默认为&#x2F;bin&#x2F;sh。 可以用如下命令查看当前用户的shell类型：</p><pre class="line-numbers language-text" data-language="text"><code class="language-text">echo  $SHELL<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果显示是&#x2F;bin&#x2F;sh，使用以下代码来修改shell类型：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">chsh  <span class="token parameter variable">-s</span>  /bin/bash  username或<span class="token function">usermod</span>  <span class="token parameter variable">-s</span>  /bin/bash  username<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>另一种是当前用户的shell类型是&#x2F;bin&#x2F;bash但是还是会有这个问题，这时可以在终端输入：export TERM&#x3D;linux。这个好像是因为ubuntu的版本的TERM的问题。</p></li></ol><h2 id="小键盘无法正常使用"><a href="#小键盘无法正常使用" class="headerlink" title="小键盘无法正常使用"></a>小键盘无法正常使用</h2><p><a href="https://blog.csdn.net/cnskylee/article/details/125196138">修改Xshell 7默认配色方案和会话属性_xshell 美化-CSDN博客</a></p><h2 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h2><ol><li><p>设置外观：ALT+P——&gt;选择<code>外观</code></p></li><li><p>防止乱码：ALT+P——&gt;选择<code>终端</code>——&gt;<code>转换</code>，设置转换为<code>UTF-8</code></p></li><li><p>远程连接不断开：ALT+P——&gt;选择<code>连接</code>下的<code>保持活跃状态</code>，设置间隔时间</p></li><li><p>数据传输：本地与服务器，服务器与服务器，本地与跳板机代理服务器之间传输数据的问题，小于4G的文件都是可以直接通过rz或者sz进行传输的，但是文件过大就没办法传输了，需要安装<code>xftp</code>之类的传输文件的软件</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> xshell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>内网穿透</title>
      <link href="/posts/1b14.html"/>
      <url>/posts/1b14.html</url>
      
        <content type="html"><![CDATA[<h1 id="内网穿透"><a href="#内网穿透" class="headerlink" title="内网穿透"></a>内网穿透</h1>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 内网穿透 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>凯利公式</title>
      <link href="/posts/8617.html"/>
      <url>/posts/8617.html</url>
      
        <content type="html"><![CDATA[<h1 id="凯利公式"><a href="#凯利公式" class="headerlink" title="凯利公式"></a>凯利公式</h1><blockquote><p><strong>凯利，是谁？</strong></p></blockquote><p>约翰·拉里·凯利（John larry  Kelly 1923-1965）1923 年出生于美国德克萨斯州，在第二次世界大战中加入美国海军当了一名飞行员。</p><p>退役后，进入得克萨斯州奥斯汀分校念物理学。1953年获得物理学博士学位，毕业后去了号称诺奖批发部的贝尔实验室工作。</p><p>在贝尔实验室中，他认识了好友兼同事，著名信息论创始人的克劳德·香农。1956年凯利受到香农信息论的启发，在内部期刊《贝尔技术系统期刊》中发表了一篇名为《对信息传输速率的新解释》的论文。</p><p>然而这并不是论文原来的标题，原标题更有意思，叫《信息论与赌博》。因为公司高层觉得这样的标题有损公司道德形象，才被迫他换了一个新名字。</p><p>但凯利的初衷确实是以一个棒球比赛的赌徒视角，去思考如何合理押注才能让资产得到最大指数的增长。虽然标题不严肃，但论文的证明过程却相当严谨。后来，香农指导另一个数学大神应用凯利的研究，吊打拉斯维加斯的各个赌场。</p><p>这个数学大神就是爱德华·索普。</p><p>爱德华·索普，一个数学怪才，作为加州大学洛杉矶分校的物理系研究生，却对轮盘游戏念念不忘。他一直认为根据小球的投入角度和运动轨迹可以预测小球的落点，所以他想设计一个基于变量计算的轮盘预测系统。</p><p>但现实条件却制止了他，由于手上的轮盘模型太简单，又恰巧马上要毕业了论文还没写完，于是对轮盘的研究就停止了。</p><p>毕业后，索普对轮盘念念不忘，于是动身去了拉斯维加斯。出发前，他在《美国统计学会会刊》上读到了一篇关于如何赢得 「21 点」游戏的论文。</p><p>此时，索普觉得 21点 这个看似比轮盘更有意思，自己也有必要尝试验证一下这个论文里的内容。于是，索普应用论文中的理论去了赌场，可结果输得很惨。</p><p>于是索普开始自己研究「21点」游戏，不久也原创了自己的一套理论，基于此理论写了一篇论文叫《21点的常胜策略》。为了顺利发表论文，他求助了香农，而香农不但同意帮助索普发表论文，还建议他把题目改成《21点的有利策略》，他表示：「科学院的那些人都很传统，所以，要低调。」</p><p>但论文有个不完善的地方，因为只是思考「21点」游戏本身的策略，却没有涉及到如何在游戏过程中如何下注的问题。这时巧合来了，香农告诉他之前有个叫约翰·凯利的同事早就研究完了。</p><p>两个数学大神的思想碰撞在了一起，一个研究怎么「赢得多」，一个研究怎么「输得少」。</p><p>于是索普利用凯利公式，对「21点」游戏进行量化计算，通俗的解释就是：胜算大的适合多下注，胜算小的时候少下注。凭此理论，索普「血洗」拉斯维加斯各大赌场，又把所有制胜手法写入了《战胜庄家》这本书里，最终被赌场所封杀。之后索普不断完善理论，在金融市场做量化交易，这是后话。</p><p>凯利呢？很遗憾，也许是天妒英才，凯利突发脑溢血而亡，享年41岁，他至死也没能被大众熟知。</p><p>但凯利公式，却在未来慢慢的展现了威力，在 60 多年的发展中，凯利公式被投资界和博彩界奉为经典。</p><blockquote><p><strong>那凯利到底怎么用呢？</strong></p></blockquote><p>F &#x3D; (bp - q) &#x2F; b</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p>学习自</p><p><a href="https://mp.weixin.qq.com/s/0hvjfGUyADoRZrnkUCgwwQ">对学渣最友好的公式：凯利公式 (qq.com)</a></p><p><a href="https://zhuanlan.zhihu.com/p/417515601">深度理解凯利公式（交易员必读 - 知乎 (zhihu.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 今日学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 凯利公式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>留言板更新</title>
      <link href="/posts/7f1d.html"/>
      <url>/posts/7f1d.html</url>
      
        <content type="html"><![CDATA[<h1 id="留言板更新"><a href="#留言板更新" class="headerlink" title="留言板更新"></a>留言板更新</h1><p>原来的留言板实属一些简陋，于是决定更新一下，这里记录一下更新的过程。</p><h2 id="效果显示"><a href="#效果显示" class="headerlink" title="效果显示"></a>效果显示</h2><p>原样式</p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404051129915.png" alt="原样式" style="zoom: 33%;" /><p>新样式</p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/new_contact.png" alt="新样式" style="zoom: 33%;" /><p>留言板</p><h2 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h2><p>修改<code>valine.ejs</code></p><p>原代码：</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">    <span class="token selector">.valine-card</span> <span class="token punctuation">&#123;</span>        <span class="token property">margin</span><span class="token punctuation">:</span> 1.5rem auto<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.valine-card .card-content</span> <span class="token punctuation">&#123;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 20px 20px 5px 20px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments textarea</span> <span class="token punctuation">&#123;</span>        <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>        <span class="token comment">/* valine评论背景图 */</span>        <span class="token comment">/* background: url("https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202310020019240.gif") 100% 100% no-repeat; */</span>        <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span>theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>background<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>"</span><span class="token punctuation">)</span></span> 100% 100% no-repeat<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments p</span> <span class="token punctuation">&#123;</span>        <span class="token property">margin</span><span class="token punctuation">:</span> 2px 2px 10px<span class="token punctuation">;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1.25rem<span class="token punctuation">;</span>        <span class="token property">line-height</span><span class="token punctuation">:</span> 1.78rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments blockquote p</span> <span class="token punctuation">&#123;</span>        <span class="token property">text-indent</span><span class="token punctuation">:</span> 0.2rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments a</span> <span class="token punctuation">&#123;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 0 2px<span class="token punctuation">;</span>        <span class="token property">color</span><span class="token punctuation">:</span> #4cbf30<span class="token punctuation">;</span>        <span class="token property">font-weight</span><span class="token punctuation">:</span> 500<span class="token punctuation">;</span>        <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments img</span> <span class="token punctuation">&#123;</span>        <span class="token property">max-width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>        <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments ol li</span> <span class="token punctuation">&#123;</span>        <span class="token property">list-style-type</span><span class="token punctuation">:</span> decimal<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments ol,    ul</span> <span class="token punctuation">&#123;</span>        <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>        <span class="token property">padding-left</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span>        <span class="token property">word-spacing</span><span class="token punctuation">:</span> 0.05rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments ul li,    ol li</span> <span class="token punctuation">&#123;</span>        <span class="token property">display</span><span class="token punctuation">:</span> list-item<span class="token punctuation">;</span>        <span class="token property">line-height</span><span class="token punctuation">:</span> 1.8rem<span class="token punctuation">;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments ul li</span> <span class="token punctuation">&#123;</span>        <span class="token property">list-style-type</span><span class="token punctuation">:</span> disc<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments ul ul li</span> <span class="token punctuation">&#123;</span>        <span class="token property">list-style-type</span><span class="token punctuation">:</span> circle<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments table,    th,    td</span> <span class="token punctuation">&#123;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 12px 13px<span class="token punctuation">;</span>        <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #dfe2e5<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments table,    th,    td</span> <span class="token punctuation">&#123;</span>        <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">table tr:nth-child(2n),    thead</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> #fafafa<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments table th</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> #f2f2f2<span class="token punctuation">;</span>        <span class="token property">min-width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments table td</span> <span class="token punctuation">&#123;</span>        <span class="token property">min-width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments h1</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1.85rem<span class="token punctuation">;</span>        <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>        <span class="token property">line-height</span><span class="token punctuation">:</span> 2.2rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments h2</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1.65rem<span class="token punctuation">;</span>        <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>        <span class="token property">line-height</span><span class="token punctuation">:</span> 1.9rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments h3</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1.45rem<span class="token punctuation">;</span>        <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>        <span class="token property">line-height</span><span class="token punctuation">:</span> 1.7rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments h4</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1.25rem<span class="token punctuation">;</span>        <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>        <span class="token property">line-height</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments h5</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1.1rem<span class="token punctuation">;</span>        <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>        <span class="token property">line-height</span><span class="token punctuation">:</span> 1.4rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments h6</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>        <span class="token property">line-height</span><span class="token punctuation">:</span> 1.3rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments p</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>        <span class="token property">line-height</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments hr</span> <span class="token punctuation">&#123;</span>        <span class="token property">margin</span><span class="token punctuation">:</span> 12px 0<span class="token punctuation">;</span>        <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>        <span class="token property">border-top</span><span class="token punctuation">:</span> 1px solid #ccc<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments blockquote</span> <span class="token punctuation">&#123;</span>        <span class="token property">margin</span><span class="token punctuation">:</span> 15px 0<span class="token punctuation">;</span>        <span class="token property">border-left</span><span class="token punctuation">:</span> 5px solid #42b983<span class="token punctuation">;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 0.8rem 0.3rem 0.8rem<span class="token punctuation">;</span>        <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>66<span class="token punctuation">,</span> 185<span class="token punctuation">,</span> 131<span class="token punctuation">,</span> .1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments pre</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-family</span><span class="token punctuation">:</span> monospace<span class="token punctuation">,</span> monospace<span class="token punctuation">;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 1.2em<span class="token punctuation">;</span>        <span class="token property">margin</span><span class="token punctuation">:</span> .5em 0<span class="token punctuation">;</span>        <span class="token property">background</span><span class="token punctuation">:</span> #272822<span class="token punctuation">;</span>        <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>        <span class="token property">border-radius</span><span class="token punctuation">:</span> 0.3em<span class="token punctuation">;</span>        <span class="token property">tab-size</span><span class="token punctuation">:</span> 4<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments code</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-family</span><span class="token punctuation">:</span> monospace<span class="token punctuation">,</span> monospace<span class="token punctuation">;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 1px 3px<span class="token punctuation">;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 0.92rem<span class="token punctuation">;</span>        <span class="token property">color</span><span class="token punctuation">:</span> #e96900<span class="token punctuation">;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> #f8f8f8<span class="token punctuation">;</span>        <span class="token property">border-radius</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments pre code</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-family</span><span class="token punctuation">:</span> monospace<span class="token punctuation">,</span> monospace<span class="token punctuation">;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>        <span class="token property">color</span><span class="token punctuation">:</span> #e8eaf6<span class="token punctuation">;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> #272822<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments pre[class*="language-"]</span> <span class="token punctuation">&#123;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 1.2em<span class="token punctuation">;</span>        <span class="token property">margin</span><span class="token punctuation">:</span> .5em 0<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments code[class*="language-"],    pre[class*="language-"]</span> <span class="token punctuation">&#123;</span>        <span class="token property">color</span><span class="token punctuation">:</span> #e8eaf6<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments [type="checkbox"]:not(:checked),    [type="checkbox"]:checked</span> <span class="token punctuation">&#123;</span>        <span class="token property">position</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>        <span class="token property">margin-left</span><span class="token punctuation">:</span> -1.3rem<span class="token punctuation">;</span>        <span class="token property">margin-right</span><span class="token punctuation">:</span> 0.4rem<span class="token punctuation">;</span>        <span class="token property">margin-top</span><span class="token punctuation">:</span> -1px<span class="token punctuation">;</span>        <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>        <span class="token property">left</span><span class="token punctuation">:</span> unset<span class="token punctuation">;</span>        <span class="token property">visibility</span><span class="token punctuation">:</span> visible<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments b,    strong</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments dfn</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments small</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 85%<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments cite</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments mark</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> #fcf8e3<span class="token punctuation">;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> .2em<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments table,    th,    td</span> <span class="token punctuation">&#123;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 12px 13px<span class="token punctuation">;</span>        <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #dfe2e5<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">table tr:nth-child(2n),    thead</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> #fafafa<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments table th</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> #f2f2f2<span class="token punctuation">;</span>        <span class="token property">min-width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments table td</span> <span class="token punctuation">&#123;</span>        <span class="token property">min-width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments [type="checkbox"]:not(:checked),    [type="checkbox"]:checked</span> <span class="token punctuation">&#123;</span>        <span class="token property">position</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>        <span class="token property">margin-left</span><span class="token punctuation">:</span> -1.3rem<span class="token punctuation">;</span>        <span class="token property">margin-right</span><span class="token punctuation">:</span> 0.4rem<span class="token punctuation">;</span>        <span class="token property">margin-top</span><span class="token punctuation">:</span> -1px<span class="token punctuation">;</span>        <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>        <span class="token property">left</span><span class="token punctuation">:</span> unset<span class="token punctuation">;</span>        <span class="token property">visibility</span><span class="token punctuation">:</span> visible<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card valine-card<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-up<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment_headling<span class="token punctuation">"</span></span>        <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span> <span class="token property">font-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span> <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span> <span class="token property">padding-left</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span> <span class="token property">top</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span> <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fas fa-comments fa-fw<span class="token punctuation">"</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vcomments<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-content<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> grid</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>jsDelivr<span class="token punctuation">.</span>url </span><span class="token delimiter punctuation">%></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span><span class="token string">'/libs/valine/av-min.js'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>jsDelivr<span class="token punctuation">.</span>url </span><span class="token delimiter punctuation">%></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span>theme<span class="token punctuation">.</span>libs<span class="token punctuation">.</span>js<span class="token punctuation">.</span>valine<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token keyword">new</span> <span class="token class-name">Valine</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#vcomments'</span><span class="token punctuation">,</span>        <span class="token literal-property property">appId</span><span class="token operator">:</span> <span class="token string">'<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>appId </span><span class="token delimiter punctuation">%></span></span>'</span><span class="token punctuation">,</span>        <span class="token literal-property property">appKey</span><span class="token operator">:</span> <span class="token string">'<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>appKey </span><span class="token delimiter punctuation">%></span></span>'</span><span class="token punctuation">,</span>        <span class="token literal-property property">notify</span><span class="token operator">:</span> <span class="token string">'<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>notify </span><span class="token delimiter punctuation">%></span></span>'</span> <span class="token operator">===</span> <span class="token string">'true'</span><span class="token punctuation">,</span>        <span class="token literal-property property">verify</span><span class="token operator">:</span> <span class="token string">'<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>verify </span><span class="token delimiter punctuation">%></span></span>'</span> <span class="token operator">===</span> <span class="token string">'true'</span><span class="token punctuation">,</span>        <span class="token literal-property property">visitor</span><span class="token operator">:</span> <span class="token string">'<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>visitor </span><span class="token delimiter punctuation">%></span></span>'</span> <span class="token operator">===</span> <span class="token string">'true'</span><span class="token punctuation">,</span>        <span class="token literal-property property">avatar</span><span class="token operator">:</span> <span class="token string">'<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>avatar </span><span class="token delimiter punctuation">%></span></span>'</span><span class="token punctuation">,</span>        <span class="token literal-property property">pageSize</span><span class="token operator">:</span> <span class="token string">'<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>pageSize </span><span class="token delimiter punctuation">%></span></span>'</span><span class="token punctuation">,</span>        <span class="token literal-property property">lang</span><span class="token operator">:</span> <span class="token string">'<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>language <span class="token operator">==</span> <span class="token string">"zh-CN"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  </span><span class="token delimiter punctuation">%></span></span>zh-cn<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>en<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>'</span><span class="token punctuation">,</span>        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>placeholder </span><span class="token delimiter punctuation">%></span></span>'</span><span class="token punctuation">,</span>        <span class="token literal-property property">enableQQ</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        <span class="token literal-property property">serverURLs</span><span class="token operator">:</span> <span class="token string">'<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>serverURLs </span><span class="token delimiter punctuation">%></span></span>'</span><span class="token punctuation">,</span>  <span class="token comment">// 增加这一行！！！</span>        <span class="token literal-property property">emojiCDN</span><span class="token operator">:</span> <span class="token string">'//i0.hdslb.com/bfs/emote/'</span><span class="token punctuation">,</span>        <span class="token comment">// 表情title和图片映射</span>        <span class="token literal-property property">requiredFields</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'nick'</span><span class="token punctuation">,</span> <span class="token string">'mail'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//设置必填项</span>        <span class="token literal-property property">emojiMaps</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token string-property property">"tv_doge"</span><span class="token operator">:</span> <span class="token string">"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_亲亲"</span><span class="token operator">:</span> <span class="token string">"a8111ad55953ef5e3be3327ef94eb4a39d535d06.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_偷笑"</span><span class="token operator">:</span> <span class="token string">"bb690d4107620f1c15cff29509db529a73aee261.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_再见"</span><span class="token operator">:</span> <span class="token string">"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_冷漠"</span><span class="token operator">:</span> <span class="token string">"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_发怒"</span><span class="token operator">:</span> <span class="token string">"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_发财"</span><span class="token operator">:</span> <span class="token string">"34db290afd2963723c6eb3c4560667db7253a21a.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_可爱"</span><span class="token operator">:</span> <span class="token string">"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_吐血"</span><span class="token operator">:</span> <span class="token string">"09dd16a7aa59b77baa1155d47484409624470c77.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_呆"</span><span class="token operator">:</span> <span class="token string">"fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_呕吐"</span><span class="token operator">:</span> <span class="token string">"9f996894a39e282ccf5e66856af49483f81870f3.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_困"</span><span class="token operator">:</span> <span class="token string">"241ee304e44c0af029adceb294399391e4737ef2.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_坏笑"</span><span class="token operator">:</span> <span class="token string">"1f0b87f731a671079842116e0991c91c2c88645a.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_大佬"</span><span class="token operator">:</span> <span class="token string">"093c1e2c490161aca397afc45573c877cdead616.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_大哭"</span><span class="token operator">:</span> <span class="token string">"23269aeb35f99daee28dda129676f6e9ea87934f.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_委屈"</span><span class="token operator">:</span> <span class="token string">"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_害羞"</span><span class="token operator">:</span> <span class="token string">"a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_尴尬"</span><span class="token operator">:</span> <span class="token string">"7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_微笑"</span><span class="token operator">:</span> <span class="token string">"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_思考"</span><span class="token operator">:</span> <span class="token string">"90cf159733e558137ed20aa04d09964436f618a1.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_惊吓"</span><span class="token operator">:</span> <span class="token string">"0d15c7e2ee58e935adc6a7193ee042388adc22af.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_打脸"</span><span class="token operator">:</span> <span class="token string">"56ab10b624063e966bfcb76ea5dc4794d87dfd47.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_抓狂"</span><span class="token operator">:</span> <span class="token string">"fe31c08edad661d63762b04e17b8d5ae3c71a757.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_抠鼻"</span><span class="token operator">:</span> <span class="token string">"c666f55e88d471e51bbd9fab9bb308110824a6eb.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_斜眼笑"</span><span class="token operator">:</span> <span class="token string">"911f987aa8bc1bee12d52aafe62bc41ef4474e6c.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_无奈"</span><span class="token operator">:</span> <span class="token string">"ea8ed89ee9878f2fece2dda0ea8a5dbfe21b5751.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_晕"</span><span class="token operator">:</span> <span class="token string">"5443c22b4d07fb1907ccc610c8e6db254f2461b7.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_流汗"</span><span class="token operator">:</span> <span class="token string">"cead1c351ab8d79e9f369605beb90148db0fbed3.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_流泪"</span><span class="token operator">:</span> <span class="token string">"7e71cde7858f0cd50d74b0264aa26db612a8a167.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_流鼻血"</span><span class="token operator">:</span> <span class="token string">"c32d39db2737f89b904ca32700d140a9241b0767.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_点赞"</span><span class="token operator">:</span> <span class="token string">"f85c354995bd99e28fc76c869bfe42ba6438eff4.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_生气"</span><span class="token operator">:</span> <span class="token string">"26702dcafdab5e8225b43ffd23c94ac1ff932654.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_生病"</span><span class="token operator">:</span> <span class="token string">"8b0ec90e6b86771092a498c54f09fc94621c1900.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_疑问"</span><span class="token operator">:</span> <span class="token string">"0793d949b18d7be716078349c202c15ff166f314.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_白眼"</span><span class="token operator">:</span> <span class="token string">"c1d59f439e379ee50eef488bcb5e5378e5044ea4.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_皱眉"</span><span class="token operator">:</span> <span class="token string">"72ccad6679fea0d14cce648b4d818e09b8ffea2d.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_目瞪口呆"</span><span class="token operator">:</span> <span class="token string">"0b8cb81a68de5d5365212c99375e7ace3e7891b7.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_睡着"</span><span class="token operator">:</span> <span class="token string">"8b196675b53af58264f383c50ad0945048290b33.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_笑哭"</span><span class="token operator">:</span> <span class="token string">"1abc628f6d4f4caf9d0e7800878f4697abbc8273.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_腼腆"</span><span class="token operator">:</span> <span class="token string">"89712c0d4af73e67f89e35cbc518420380a7f6f4.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_色"</span><span class="token operator">:</span> <span class="token string">"61822c7e9aae5da76475e7892534545336b23a6f.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_调侃"</span><span class="token operator">:</span> <span class="token string">"4bc022533ef31544ca0d72c12c808cf4a1cce3e3.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_调皮"</span><span class="token operator">:</span> <span class="token string">"b9c41de8e82dd7a8515ae5e3cb63e898bf245186.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_鄙视"</span><span class="token operator">:</span> <span class="token string">"6e72339f346a692a495b123174b49e4e8e781303.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_闭嘴"</span><span class="token operator">:</span> <span class="token string">"c9e990da7f6e93975e25fd8b70e2e290aa4086ef.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_难过"</span><span class="token operator">:</span> <span class="token string">"87f46748d3f142ebc6586ff58860d0e2fc8263ba.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_馋"</span><span class="token operator">:</span> <span class="token string">"fc7e829b845c43c623c8b490ee3602b7f0e76a31.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_鬼脸"</span><span class="token operator">:</span> <span class="token string">"0ffbbddf8a94d124ca2f54b360bbc04feb6bbfea.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_黑人问号"</span><span class="token operator">:</span> <span class="token string">"45821a01f51bc867da9edbaa2e070410819a95b2.png"</span><span class="token punctuation">,</span>            <span class="token string-property property">"tv_鼓掌"</span><span class="token operator">:</span> <span class="token string">"1d21793f96ef4e6f48b23e53e3b9e42da833a0f6.png"</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- 直达评论 --></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/back-comment.ejs'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>修改为：</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">    <span class="token selector">.valine-card</span> <span class="token punctuation">&#123;</span>        <span class="token property">margin</span><span class="token punctuation">:</span> 1.5rem auto<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.v[data-class=v] .emoji,    .v[data-class=v] .vemoji</span> <span class="token punctuation">&#123;</span>        <span class="token property">max-height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>        <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>        <span class="token property">max-width</span><span class="token punctuation">:</span> 30px <span class="token important">!important</span><span class="token punctuation">;</span>        <span class="token property">transition</span><span class="token punctuation">:</span> all .6s<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.v[data-class=v] .vwrap .vemojis</span> <span class="token punctuation">&#123;</span>        <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>        <span class="token property">padding-top</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>        <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments .vemoji:hover</span> <span class="token punctuation">&#123;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.3<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">body.dark .v[data-class=v] .vwrap .vemojis i</span> <span class="token punctuation">&#123;</span>        <span class="token property">background</span><span class="token punctuation">:</span> #312f2f<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.v[data-class=v] .vwrap .vemojis i</span> <span class="token punctuation">&#123;</span>        <span class="token property">margin</span><span class="token punctuation">:</span> 4px 8px<span class="token punctuation">;</span>        <span class="token property">background</span><span class="token punctuation">:</span> #f7f7f7<span class="token punctuation">;</span>        <span class="token property">padding-top</span><span class="token punctuation">:</span> 0 <span class="token important">!important</span><span class="token punctuation">;</span>        <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>        <span class="token property">border-radius</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.roboterbb</span> <span class="token punctuation">&#123;</span>        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>        <span class="token property">right</span><span class="token punctuation">:</span> 87px<span class="token punctuation">;</span>        <span class="token property">padding-top</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.robot-check-text:hover</span> <span class="token punctuation">&#123;</span>        <span class="token property">color</span><span class="token punctuation">:</span> #26a69a<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.roboter:hover .robot-check-text::before</span> <span class="token punctuation">&#123;</span>        <span class="token property">border</span><span class="token punctuation">:</span> 2px solid #5a5a5a<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.robotxian</span> <span class="token punctuation">&#123;</span>        <span class="token property">background</span><span class="token punctuation">:</span> #5a5a5a<span class="token punctuation">;</span>        <span class="token property">top</span><span class="token punctuation">:</span> 21px<span class="token punctuation">;</span>        <span class="token property">left</span><span class="token punctuation">:</span> 11px <span class="token important">!important</span><span class="token punctuation">;</span>        <span class="token property">transform-origin</span><span class="token punctuation">:</span> 50% -17px<span class="token punctuation">;</span>        <span class="token property">animation</span><span class="token punctuation">:</span> swing 3.5s infinite ease-in-out<span class="token punctuation">;</span>        <span class="token property">-webkit-transform-origin</span><span class="token punctuation">:</span> 50% -17px<span class="token punctuation">;</span>        <span class="token property">-webkit-animation</span><span class="token punctuation">:</span> swing 2.85s infinite ease-in-out<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.v[data-class=v] .vwrap</span> <span class="token punctuation">&#123;</span>        <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 23px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.robotimg</span> <span class="token punctuation">&#123;</span>        <span class="token property">width</span><span class="token punctuation">:</span> 28px <span class="token important">!important</span><span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> 28px <span class="token important">!important</span><span class="token punctuation">;</span>        <span class="token property">top</span><span class="token punctuation">:</span> 14px <span class="token important">!important</span><span class="token punctuation">;</span>        <span class="token property">left</span><span class="token punctuation">:</span> -13px <span class="token important">!important</span><span class="token punctuation">;</span>        <span class="token property">max-width</span><span class="token punctuation">:</span> none <span class="token important">!important</span><span class="token punctuation">;</span>        <span class="token property">z-index</span><span class="token punctuation">:</span> 99<span class="token punctuation">;</span>        <span class="token property">cursor</span><span class="token punctuation">:</span> none <span class="token important">!important</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.v[data-class=v] .vbtn:disabled</span> <span class="token punctuation">&#123;</span>        <span class="token property">color</span><span class="token punctuation">:</span> #b2b2b5<span class="token punctuation">;</span>        <span class="token property">border-color</span><span class="token punctuation">:</span> #b2b2b5<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.v[data-class=v] .vbtn:disabled</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.valine-card .card-content</span> <span class="token punctuation">&#123;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 20px 20px 5px 20px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.v[data-class=v] .vwrap</span> <span class="token punctuation">&#123;</span>        <span class="token property">border-radius</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/* #vcomments textarea &#123;                box-sizing: border-box;                background: url("/medias/comment_bg1.webp") 100% 100% no-repeat;            &#125; */</span>    <span class="token selector">#vcomments textarea</span> <span class="token punctuation">&#123;</span>        <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>/medias/comment_bg.png<span class="token punctuation">)</span></span> no-repeat<span class="token punctuation">;</span>        <span class="token property">background-size</span><span class="token punctuation">:</span> contain<span class="token punctuation">;</span>        <span class="token property">background-repeat</span><span class="token punctuation">:</span> no-repeat<span class="token punctuation">;</span>        <span class="token property">background-position</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token property">resize</span><span class="token punctuation">:</span> vertical<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments p</span> <span class="token punctuation">&#123;</span>        <span class="token property">margin</span><span class="token punctuation">:</span> 2px 2px 10px<span class="token punctuation">;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1.05rem<span class="token punctuation">;</span>        <span class="token property">line-height</span><span class="token punctuation">:</span> 1.78rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments blockquote p</span> <span class="token punctuation">&#123;</span>        <span class="token property">text-indent</span><span class="token punctuation">:</span> 0.2rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments a</span> <span class="token punctuation">&#123;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 0 2px<span class="token punctuation">;</span>        <span class="token property">color</span><span class="token punctuation">:</span> #4cbf30<span class="token punctuation">;</span>        <span class="token property">font-weight</span><span class="token punctuation">:</span> 500<span class="token punctuation">;</span>        <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments img</span> <span class="token punctuation">&#123;</span>        <span class="token property">max-width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>        <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments ol li</span> <span class="token punctuation">&#123;</span>        <span class="token property">list-style-type</span><span class="token punctuation">:</span> decimal<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments ol,    ul</span> <span class="token punctuation">&#123;</span>        <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>        <span class="token property">padding-left</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span>        <span class="token property">word-spacing</span><span class="token punctuation">:</span> 0.05rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments ul li,    ol li</span> <span class="token punctuation">&#123;</span>        <span class="token property">display</span><span class="token punctuation">:</span> list-item<span class="token punctuation">;</span>        <span class="token property">line-height</span><span class="token punctuation">:</span> 1.8rem<span class="token punctuation">;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments ul li</span> <span class="token punctuation">&#123;</span>        <span class="token property">list-style-type</span><span class="token punctuation">:</span> disc<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments ul ul li</span> <span class="token punctuation">&#123;</span>        <span class="token property">list-style-type</span><span class="token punctuation">:</span> circle<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments table,    th,    td</span> <span class="token punctuation">&#123;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 12px 13px<span class="token punctuation">;</span>        <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #dfe2e5<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments table,    th,    td</span> <span class="token punctuation">&#123;</span>        <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">table tr:nth-child(2n),    thead</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> #fafafa<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments table th</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> #f2f2f2<span class="token punctuation">;</span>        <span class="token property">min-width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments table td</span> <span class="token punctuation">&#123;</span>        <span class="token property">min-width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments h1</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1.85rem<span class="token punctuation">;</span>        <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>        <span class="token property">line-height</span><span class="token punctuation">:</span> 2.2rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments h2</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1.65rem<span class="token punctuation">;</span>        <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>        <span class="token property">line-height</span><span class="token punctuation">:</span> 1.9rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments h3</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1.45rem<span class="token punctuation">;</span>        <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>        <span class="token property">line-height</span><span class="token punctuation">:</span> 1.7rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments h4</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1.25rem<span class="token punctuation">;</span>        <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>        <span class="token property">line-height</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments h5</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1.1rem<span class="token punctuation">;</span>        <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>        <span class="token property">line-height</span><span class="token punctuation">:</span> 1.4rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments h6</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>        <span class="token property">line-height</span><span class="token punctuation">:</span> 1.3rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments p</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>        <span class="token property">line-height</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments hr</span> <span class="token punctuation">&#123;</span>        <span class="token property">margin</span><span class="token punctuation">:</span> 12px 0<span class="token punctuation">;</span>        <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>        <span class="token property">border-top</span><span class="token punctuation">:</span> 1px solid #ccc<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments blockquote</span> <span class="token punctuation">&#123;</span>        <span class="token property">margin</span><span class="token punctuation">:</span> 15px 0<span class="token punctuation">;</span>        <span class="token property">border-left</span><span class="token punctuation">:</span> 5px solid #42b983<span class="token punctuation">;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 0.8rem 0.3rem 0.8rem<span class="token punctuation">;</span>        <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>66<span class="token punctuation">,</span> 185<span class="token punctuation">,</span> 131<span class="token punctuation">,</span> .1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments pre</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-family</span><span class="token punctuation">:</span> monospace<span class="token punctuation">,</span> monospace<span class="token punctuation">;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 1.2em<span class="token punctuation">;</span>        <span class="token property">margin</span><span class="token punctuation">:</span> .5em 0<span class="token punctuation">;</span>        <span class="token property">background</span><span class="token punctuation">:</span> #272822<span class="token punctuation">;</span>        <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>        <span class="token property">border-radius</span><span class="token punctuation">:</span> 0.3em<span class="token punctuation">;</span>        <span class="token property">tab-size</span><span class="token punctuation">:</span> 4<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments code</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-family</span><span class="token punctuation">:</span> monospace<span class="token punctuation">,</span> monospace<span class="token punctuation">;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 1px 3px<span class="token punctuation">;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 0.92rem<span class="token punctuation">;</span>        <span class="token property">color</span><span class="token punctuation">:</span> #e96900<span class="token punctuation">;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> #f8f8f8<span class="token punctuation">;</span>        <span class="token property">border-radius</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments pre code</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-family</span><span class="token punctuation">:</span> monospace<span class="token punctuation">,</span> monospace<span class="token punctuation">;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>        <span class="token property">color</span><span class="token punctuation">:</span> #e8eaf6<span class="token punctuation">;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> #272822<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments pre[class*="language-"]</span> <span class="token punctuation">&#123;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 1.2em<span class="token punctuation">;</span>        <span class="token property">margin</span><span class="token punctuation">:</span> .5em 0<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments code[class*="language-"],    pre[class*="language-"]</span> <span class="token punctuation">&#123;</span>        <span class="token property">color</span><span class="token punctuation">:</span> #e8eaf6<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments [type="checkbox"]:not(:checked),    [type="checkbox"]:checked</span> <span class="token punctuation">&#123;</span>        <span class="token property">position</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>        <span class="token property">margin-left</span><span class="token punctuation">:</span> -1.3rem<span class="token punctuation">;</span>        <span class="token property">margin-right</span><span class="token punctuation">:</span> 0.4rem<span class="token punctuation">;</span>        <span class="token property">margin-top</span><span class="token punctuation">:</span> -1px<span class="token punctuation">;</span>        <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>        <span class="token property">left</span><span class="token punctuation">:</span> unset<span class="token punctuation">;</span>        <span class="token property">visibility</span><span class="token punctuation">:</span> visible<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments b,    strong</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments dfn</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments small</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 85%<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments cite</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments mark</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> #fcf8e3<span class="token punctuation">;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> .2em<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments table,    th,    td</span> <span class="token punctuation">&#123;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 12px 13px<span class="token punctuation">;</span>        <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #dfe2e5<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">table tr:nth-child(2n),    thead</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> #fafafa<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments table th</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> #f2f2f2<span class="token punctuation">;</span>        <span class="token property">min-width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments table td</span> <span class="token punctuation">&#123;</span>        <span class="token property">min-width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#vcomments [type="checkbox"]:not(:checked),    [type="checkbox"]:checked</span> <span class="token punctuation">&#123;</span>        <span class="token property">position</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>        <span class="token property">margin-left</span><span class="token punctuation">:</span> -1.3rem<span class="token punctuation">;</span>        <span class="token property">margin-right</span><span class="token punctuation">:</span> 0.4rem<span class="token punctuation">;</span>        <span class="token property">margin-top</span><span class="token punctuation">:</span> -1px<span class="token punctuation">;</span>        <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>        <span class="token property">left</span><span class="token punctuation">:</span> unset<span class="token punctuation">;</span>        <span class="token property">visibility</span><span class="token punctuation">:</span> visible<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card valine-card<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vcomments-top<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment_headling<span class="token punctuation">"</span></span>            <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span> <span class="token property">font-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span> <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span> <span class="token property">padding-left</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span> <span class="token property">top</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span> <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fas fa-comments fa-fw<span class="token punctuation">"</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>评 论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vcomments<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-content v<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> grid</span><span class="token punctuation">"</span></span></span> <span class="token attr-name">data-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>v<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vpanel<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vwrap<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cancel-reply text-right<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>取消回复<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span>                            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vicon cancel-reply-btn<span class="token punctuation">"</span></span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0 0 1024 1024<span class="token punctuation">"</span></span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1.1<span class="token punctuation">"</span></span>                            <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2000/svg<span class="token punctuation">"</span></span> <span class="token attr-name">p-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4220<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>22<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>22<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span>                                <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>M796.454 985H227.545c-50.183 0-97.481-19.662-133.183-55.363-35.7-35.701-55.362-83-55.362-133.183V227.545c0-50.183 19.662-97.481 55.363-133.183 35.701-35.7 83-55.362 133.182-55.362h568.909c50.183 0 97.481 19.662 133.183 55.363 35.701 35.702 55.363 83 55.363 133.183v568.909c0 50.183-19.662 97.481-55.363 133.183S846.637 985 796.454 985zM227.545 91C152.254 91 91 152.254 91 227.545v568.909C91 871.746 152.254 933 227.545 933h568.909C871.746 933 933 871.746 933 796.454V227.545C933 152.254 871.746 91 796.454 91H227.545z<span class="token punctuation">"</span></span>                                <span class="token attr-name">p-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4221<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span>                                <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>M568.569 512l170.267-170.267c15.556-15.556 15.556-41.012 0-56.569s-41.012-15.556-56.569 0L512 455.431 341.733 285.165c-15.556-15.556-41.012-15.556-56.569 0s-15.556 41.012 0 56.569L455.431 512 285.165 682.267c-15.556 15.556-15.556 41.012 0 56.569 15.556 15.556 41.012 15.556 56.569 0L512 568.569l170.267 170.267c15.556 15.556 41.012 15.556 56.569 0 15.556-15.556 15.556-41.012 0-56.569L568.569 512z<span class="token punctuation">"</span></span>                                <span class="token attr-name">p-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4222<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vheader item3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nick<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>昵称/QQ号<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vnick vinput<span class="token punctuation">"</span></span>                            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mail<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>邮箱<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vmail vinput<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>                            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>网址(https://)<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vlink vinput<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vedit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>veditor<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>veditor vinput<span class="token punctuation">"</span></span>                            <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>评论前记得点击下方机器人验证按钮~ （客官留下QQ邮箱可好，会得到及时回复哦~）<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vrow<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vcol vcol-60 status-bar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vcol vcol-40 vctrl text-right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>表情<span class="token punctuation">"</span></span>                                    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vicon vemoji-btn actived<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0 0 1024 1024<span class="token punctuation">"</span></span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1.1<span class="token punctuation">"</span></span>                                        <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2000/svg<span class="token punctuation">"</span></span> <span class="token attr-name">p-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>16172<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>22<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>22<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span>                                            <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zM512 56.888889a455.111111 455.111111 0 1 0 455.111111 455.111111 455.111111 455.111111 0 0 0-455.111111-455.111111zM312.888889 512A85.333333 85.333333 0 1 1 398.222222 426.666667 85.333333 85.333333 0 0 1 312.888889 512z<span class="token punctuation">"</span></span>                                            <span class="token attr-name">p-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>16173<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span>                                            <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>M512 768A142.222222 142.222222 0 0 1 369.777778 625.777778a28.444444 28.444444 0 0 1 56.888889 0 85.333333 85.333333 0 0 0 170.666666 0 28.444444 28.444444 0 0 1 56.888889 0A142.222222 142.222222 0 0 1 512 768z<span class="token punctuation">"</span></span>                                            <span class="token attr-name">p-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>16174<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span>                                            <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>M782.222222 391.964444l-113.777778 59.733334a29.013333 29.013333 0 0 1-38.684444-10.808889 28.444444 28.444444 0 0 1 10.24-38.684445l113.777778-56.888888a28.444444 28.444444 0 0 1 38.684444 10.24 28.444444 28.444444 0 0 1-10.24 36.408888z<span class="token punctuation">"</span></span>                                            <span class="token attr-name">p-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>16175<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span>                                            <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>M640.568889 451.697778l113.777778 56.888889a27.875556 27.875556 0 0 0 38.684444-10.24 27.875556 27.875556 0 0 0-10.24-38.684445l-113.777778-56.888889a28.444444 28.444444 0 0 0-38.684444 10.808889 28.444444 28.444444 0 0 0 10.24 38.115556z<span class="token punctuation">"</span></span>                                            <span class="token attr-name">p-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>16176<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">></span></span>                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>预览<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vicon vpreview-btn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span>                                        <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0 0 1024 1024<span class="token punctuation">"</span></span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1.1<span class="token punctuation">"</span></span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2000/svg<span class="token punctuation">"</span></span>                                        <span class="token attr-name">p-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>17688<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>22<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>22<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span>                                            <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>M502.390154 935.384615a29.538462 29.538462 0 1 1 0 59.076923H141.430154C79.911385 994.461538 29.538462 946.254769 29.538462 886.153846V137.846154C29.538462 77.745231 79.950769 29.538462 141.390769 29.538462h741.218462c61.44 0 111.852308 48.206769 111.852307 108.307692v300.268308a29.538462 29.538462 0 1 1-59.076923 0V137.846154c0-26.899692-23.355077-49.230769-52.775384-49.230769H141.390769c-29.420308 0-52.775385 22.331077-52.775384 49.230769v748.307692c0 26.899692 23.355077 49.230769 52.775384 49.230769h360.999385z<span class="token punctuation">"</span></span>                                            <span class="token attr-name">p-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>17689<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span>                                            <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>M196.923077 216.615385m29.538461 0l374.153847 0q29.538462 0 29.538461 29.538461l0 0q0 29.538462-29.538461 29.538462l-374.153847 0q-29.538462 0-29.538461-29.538462l0 0q0-29.538462 29.538461-29.538461Z<span class="token punctuation">"</span></span>                                            <span class="token attr-name">p-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>17690<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span>                                            <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>M649.846154 846.769231a216.615385 216.615385 0 1 0 0-433.230769 216.615385 216.615385 0 0 0 0 433.230769z m0 59.076923a275.692308 275.692308 0 1 1 0-551.384616 275.692308 275.692308 0 0 1 0 551.384616z<span class="token punctuation">"</span></span>                                            <span class="token attr-name">p-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>17691<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span>                                            <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>M807.398383 829.479768m20.886847-20.886846l0 0q20.886846-20.886846 41.773692 0l125.321079 125.321079q20.886846 20.886846 0 41.773693l0 0q-20.886846 20.886846-41.773693 0l-125.321078-125.321079q-20.886846-20.886846 0-41.773693Z<span class="token punctuation">"</span></span>                                            <span class="token attr-name">p-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>17692<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">></span></span>                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vrow<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vcol vcol-30<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Markdown is supported<span class="token punctuation">"</span></span>                                <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://guides.github.com/features/mastering-markdown/<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vicon<span class="token punctuation">"</span></span>                                <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>markdown<span class="token punctuation">"</span></span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0 0 16 16<span class="token punctuation">"</span></span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1.1<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>16<span class="token punctuation">"</span></span>                                    <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>16<span class="token punctuation">"</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">fill-rule</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>evenodd<span class="token punctuation">"</span></span>                                        <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vcol vcol-70 text-right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>roboterbb<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>caishenxian fudaixian robotxian<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>caishenpic fudao robotimg<span class="token punctuation">"</span></span>                                            <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/robot.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>roboter<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>评论前记得点击验证<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>robot-check<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span>                                        <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-robot<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span>                                        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>robot-check-text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>·<span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span>点击验证<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>评论前勾选机器人验证按钮<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vsubmit vbtn<span class="token punctuation">"</span></span>                                <span class="token attr-name">disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>disabled<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemojis<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>block<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>呲牙<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>呲牙<span class="token punctuation">"</span></span> <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span>                                <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/ciya.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>吃瓜<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>吃瓜<span class="token punctuation">"</span></span>                                <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/chigua.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span>                            <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>冷酷<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>冷酷<span class="token punctuation">"</span></span> <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span>                                <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/cool.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>打脸<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>打脸<span class="token punctuation">"</span></span>                                <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/fface.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span>                            <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>抠鼻<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>抠鼻<span class="token punctuation">"</span></span> <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span>                                <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/picknoce.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>笑哭<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>笑哭<span class="token punctuation">"</span></span>                                <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span>                                <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/smilecry.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>吐血<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>吐血<span class="token punctuation">"</span></span>                                <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/tuxue.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span>                            <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>牛啊<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>牛啊<span class="token punctuation">"</span></span> <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span>                                <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/niua.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>狗头<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>狗头<span class="token punctuation">"</span></span>                                <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/goutou1.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span>                            <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ok<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ok<span class="token punctuation">"</span></span> <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span>                                <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/ok.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>滑稽<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>滑稽<span class="token punctuation">"</span></span>                                <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/huaji.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span>                            <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>打咩<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>打咩<span class="token punctuation">"</span></span> <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span>                                <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/dame.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>送花<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>送花<span class="token punctuation">"</span></span>                                <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/songhua.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span>                            <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>加班<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>加班<span class="token punctuation">"</span></span> <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span>                                <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/jiaban.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>爆炸<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>爆炸<span class="token punctuation">"</span></span>                                <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/baozha.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span>                            <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>爱了<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>爱了<span class="token punctuation">"</span></span> <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span>                                <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/aile.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>危<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>危<span class="token punctuation">"</span></span>                                <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/wei.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span>                            <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>小丑<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>小丑<span class="token punctuation">"</span></span> <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span>                                <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/xiaochou.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>猪头<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>猪头<span class="token punctuation">"</span></span>                                <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/zhutou.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span>                            <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>皱眉<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>皱眉<span class="token punctuation">"</span></span> <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span>                                <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/zhoumei.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>出家人<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>出家人<span class="token punctuation">"</span></span>                                <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span>                                <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/chujiaren.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>土匪<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>土匪<span class="token punctuation">"</span></span>                                <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/tufei.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span>                            <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>拜托拜托<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>拜托拜托<span class="token punctuation">"</span></span> <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span>                                <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/baituo.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>送福<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>送福<span class="token punctuation">"</span></span>                                <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/songfu.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span>                            <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>红包拿来<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>红包拿来<span class="token punctuation">"</span></span> <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span>                                <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/hongbao.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>战术喝水<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>战术喝水<span class="token punctuation">"</span></span>                                <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vemoji<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../medias/emoji_img/drink.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vinput vpreview<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vmark<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vcount<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>共计 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vnum<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vload-top text-center<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vspinner<span class="token punctuation">"</span></span>                    <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span>30px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span>30px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vcards<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vload-bottom text-center<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vspinner<span class="token punctuation">"</span></span>                    <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span>30px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span>30px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vempty<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>来发评论吧~<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vpage txt-center<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vmore vbtn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>加载更多...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vpower txt-right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Powered By <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://valine.js.org<span class="token punctuation">"</span></span>                    <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Valine<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>v1.4.14<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- &lt;script src="libs/valine/av-min.js">&lt;/script>    &lt;script src="libs/valine/Valine.min.js">&lt;/script> --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>jsDelivr<span class="token punctuation">.</span>url </span><span class="token delimiter punctuation">%></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span><span class="token string">'/libs/valine/av-min.js'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>jsDelivr<span class="token punctuation">.</span>url </span><span class="token delimiter punctuation">%></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span>theme<span class="token punctuation">.</span>libs<span class="token punctuation">.</span>js<span class="token punctuation">.</span>valine<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">        <span class="token keyword">new</span> <span class="token class-name">Valine</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#vcomments'</span><span class="token punctuation">,</span>            <span class="token literal-property property">enableQQ</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token literal-property property">boolean</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token literal-property property">appId</span><span class="token operator">:</span> <span class="token string">'<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>appId </span><span class="token delimiter punctuation">%></span></span>'</span><span class="token punctuation">,</span>            <span class="token literal-property property">appKey</span><span class="token operator">:</span> <span class="token string">'<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>appKey </span><span class="token delimiter punctuation">%></span></span>'</span><span class="token punctuation">,</span>            <span class="token literal-property property">notify</span><span class="token operator">:</span> <span class="token string">'<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>notify </span><span class="token delimiter punctuation">%></span></span>'</span> <span class="token operator">===</span> <span class="token string">'true'</span><span class="token punctuation">,</span>            <span class="token literal-property property">verify</span><span class="token operator">:</span> <span class="token string">'<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>verify </span><span class="token delimiter punctuation">%></span></span>'</span> <span class="token operator">===</span> <span class="token string">'true'</span><span class="token punctuation">,</span>            <span class="token literal-property property">visitor</span><span class="token operator">:</span> <span class="token string">'<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>visitor </span><span class="token delimiter punctuation">%></span></span>'</span> <span class="token operator">===</span> <span class="token string">'true'</span><span class="token punctuation">,</span>            <span class="token comment">// avatar: '<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>avatar </span><span class="token delimiter punctuation">%></span></span>',</span>            <span class="token literal-property property">avatar</span><span class="token operator">:</span> <span class="token string">'/medias/robot.png'</span><span class="token punctuation">,</span>            <span class="token literal-property property">pageSize</span><span class="token operator">:</span> <span class="token string">'<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>pageSize </span><span class="token delimiter punctuation">%></span></span>'</span><span class="token punctuation">,</span>            <span class="token literal-property property">lang</span><span class="token operator">:</span> <span class="token string">'<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>language <span class="token operator">==</span> <span class="token string">"zh-CN"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  </span><span class="token delimiter punctuation">%></span></span>zh-cn<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>en<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>'</span><span class="token punctuation">,</span>            <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>placeholder </span><span class="token delimiter punctuation">%></span></span>'</span><span class="token punctuation">,</span>            <span class="token literal-property property">adminEmailMd5</span><span class="token operator">:</span> <span class="token string">'<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>adminEmailMd5 </span><span class="token delimiter punctuation">%></span></span>'</span><span class="token punctuation">,</span>            <span class="token literal-property property">master</span><span class="token operator">:</span> <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token operator">-</span> <span class="token string">'["'</span> <span class="token operator">+</span> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>master<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'", "'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'"]'</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">,</span>            <span class="token literal-property property">friends</span><span class="token operator">:</span> <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token operator">-</span> <span class="token string">'["'</span> <span class="token operator">+</span> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'", "'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'"]'</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">,</span>            <span class="token literal-property property">tagMeta</span><span class="token operator">:</span> <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token operator">-</span> <span class="token string">'["'</span> <span class="token operator">+</span> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>tagMeta<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'", "'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'"]'</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">,</span>            <span class="token comment">// tagMeta: ["想吃🍦的博主", "小伙伴🐖", "访 客"],</span>            <span class="token comment">// tagMeta: '<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>tagMeta </span><span class="token delimiter punctuation">%></span></span>',</span>            <span class="token comment">// master: '<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>master </span><span class="token delimiter punctuation">%></span></span>',</span>            <span class="token comment">// friends: '<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>friends </span><span class="token delimiter punctuation">%></span></span>',</span>            <span class="token literal-property property">emoticonUrl</span><span class="token operator">:</span> <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token operator">-</span> <span class="token string">'["'</span> <span class="token operator">+</span> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>emoticonUrl<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'", "'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'"]'</span> </span><span class="token delimiter punctuation">%></span></span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- 直达评论 --></span>    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/back-comment.ejs'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>    <span class="token comment">&lt;!-- 评论机器人验证 --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.roboter'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.robot-check-text'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">'·&amp;nbsp;&amp;nbsp;&amp;nbsp;验证成功！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.roboter:hover .robot-check-text::before'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'border'</span><span class="token punctuation">,</span> <span class="token string">'2px solid #26a69a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.robotxian'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">,</span> <span class="token string">'#26a69a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.robotimg'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'/medias/robot1.png'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.robot-check-text'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'color'</span><span class="token punctuation">,</span> <span class="token string">'#26a69a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.robot-check'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>checked<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.vsubmit'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'disabled'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'评论前勾选机器人验证按钮'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.robot-check'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.vsubmit'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'disabled'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'欢迎畅所欲言'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 留言板 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sakuriro美化</title>
      <link href="/posts/d197.html"/>
      <url>/posts/d197.html</url>
      
        <content type="html"><![CDATA[<h1 id="Sakuriro美化"><a href="#Sakuriro美化" class="headerlink" title="Sakuriro美化"></a>Sakuriro美化</h1>]]></content>
      
      
      <categories>
          
          <category> wordpress </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Sakuriro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>杂谈</title>
      <link href="/posts/3026.html"/>
      <url>/posts/3026.html</url>
      
        <content type="html"><![CDATA[<h2 id="min-css-和-css"><a href="#min-css-和-css" class="headerlink" title="min.css 和.css"></a>min.css 和.css</h2><p>两者仅仅是文件大小、有无注释、格式美化（可读性）上的区别，使用上（作用效果）并没有什么区别。压缩和未压缩的区别，.min 是压缩版的（去掉多余的注释、空格等）文件较小，易于加载，另外的就是未压缩的了文件稍大，保留完整的注释、可读性强的标准格式化文件。一般生产环境用.min.css（加载速度快，提升体验） , 开发试验阶段用.css（便于理解）。</p><p>参考自 <a href="https://www.cnblogs.com/Renyi-Fan/p/12163246.html">min.css 和普通 css 有什么不同 – 范仁义 – 博客园 (cnblogs.com)</a></p><h2 id="关于修改样式"><a href="#关于修改样式" class="headerlink" title="关于修改样式"></a>关于修改样式</h2><p>直接在主题编辑器中做出的的修改是无法在更新时保留的，可以在主题 – 自定义 – 额外 CSS 进行你想要的修改，只需对你想要修改的某个元素进行修改就行了，在这里修改的样式在更新时是可以保留的。而且通过内置的 css 编辑器是可以进行效果实时预览的。</p><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><h3 id="多图像同行显示居中"><a href="#多图像同行显示居中" class="headerlink" title="多图像同行显示居中"></a>多图像同行显示居中</h3><pre class="line-numbers language-none"><code class="language-none">&lt;p class&#x3D;&quot;has-text-align-center&quot;&gt;&lt;img width&#x3D;&quot;30%&quot; src&#x3D;&quot;https:&#x2F;&#x2F;img.crowya.com&#x2F;media&#x2F;cut_2020041000193919SS.png?x-oss-process&#x3D;style&#x2F;compress&quot;&gt;&lt;img width&#x3D;&quot;30%&quot; src&#x3D;&quot;https:&#x2F;&#x2F;img.crowya.com&#x2F;media&#x2F;cut_2020041000413941SS.png?x-oss-process&#x3D;style&#x2F;compress&quot;&gt;&lt;img width&#x3D;&quot;30%&quot; src&#x3D;&quot;https:&#x2F;&#x2F;img.crowya.com&#x2F;media&#x2F;cut_2020041000424042SS.png?x-oss-process&#x3D;style&#x2F;compress&quot;&gt;&lt;p&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="新窗口打开"><a href="#新窗口打开" class="headerlink" title="新窗口打开"></a>新窗口打开</h3><pre class="line-numbers language-none"><code class="language-none">&lt;a href&#x3D;&quot;链接的页面&quot; target&#x3D;&quot;_blank&quot;&gt;新窗口打开&lt;&#x2F;a&gt;&lt;a href&#x3D;&quot;链接的页面&quot; target&#x3D;&quot;_parent&quot;&gt;原窗口打开&lt;&#x2F;a&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="纯文本粘贴"><a href="#纯文本粘贴" class="headerlink" title="纯文本粘贴"></a>纯文本粘贴</h3><p>众所周知粘贴是 <code>Ctrl</code> + <code>V</code>，但是这种粘贴是带格式的。如果想要清除格式，也就是纯文本粘贴，只需按下 <code>Ctrl</code> + <code>Shift</code> + <code>V</code> 。</p><h3 id="测试域名解析是否生效"><a href="#测试域名解析是否生效" class="headerlink" title="测试域名解析是否生效"></a>测试域名解析是否生效</h3><p>Windows 命令窗口中输入 <code>nslookup 域名</code>，例如</p><pre class="line-numbers language-none"><code class="language-none">nslookup crowya.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://crowya.com/803">遇到的一些 CSS – 鸦鸦的巢穴 (crowya.com)</a></p><p><a href="https://crowya.com/293">计算机技巧 &amp; 快捷键 | 相见恨晚 – 鸦鸦的巢穴 (crowya.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> wordpress </category>
          
      </categories>
      
      
        <tags>
            
            <tag> wordpress </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>设置页面模版</title>
      <link href="/posts/8e30.html"/>
      <url>/posts/8e30.html</url>
      
        <content type="html"><![CDATA[<h2 id="说说"><a href="#说说" class="headerlink" title="说说"></a>说说</h2><ol><li>仪表盘左侧菜单栏里选择页面，然后新建一个页面 “说说”</li><li>点击快速编辑</li><li>选择页面模板为 “说说”</li></ol><p><img src="http://47.108.179.73/wp-content/uploads/2024/03/image-5-1024x329.png" alt="img"></p><h2 id="留言板"><a href="#留言板" class="headerlink" title="留言板"></a>留言板</h2><p>同上，新建一个页面 “留言板”，在快速编辑中将其页面模板设为 “留言板”，并开启这个页面的评论功能，即可让这个页面成为留言板。</p><blockquote><p>注意：一定要打开评论功能！</p></blockquote><h2 id="时间轴"><a href="#时间轴" class="headerlink" title="时间轴"></a>时间轴</h2><p>同理，新建一个页面，将其页面模板设为 “归档时间轴”，即可让这个页面成为归档时间轴。</p>]]></content>
      
      
      <categories>
          
          <category> wordpress </category>
          
      </categories>
      
      
        <tags>
            
            <tag> wordpress </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>看板娘合并音乐播放器</title>
      <link href="/posts/c149.html"/>
      <url>/posts/c149.html</url>
      
        <content type="html"><![CDATA[<h1 id="看板娘合并音乐播放器"><a href="#看板娘合并音乐播放器" class="headerlink" title="看板娘合并音乐播放器"></a>看板娘合并音乐播放器</h1><p>相信不少小伙伴的博客都集成了音乐播放器和 Live2D 看板娘，但是会出现一个问题，看板娘和音乐播放器都在左下角，相互遮盖且很占地方，一点也不美观。所以如果可以把音乐播放器集成到看板娘里，既美观又增加了看板娘的功能。</p><p>然而一介小白只是心有余而力不足，幸运的是我偶然发现了这位大佬：<a href="https://crowya.com/">鸦鸦</a></p><blockquote><p>wordpress 插入跳转链接</p><p>写出跳转链接的文本，然后选中文本，点击上方的链接，填写链接的网址即可</p></blockquote><p><img src="http://47.108.179.73/wp-content/uploads/2024/03/image-1.png" alt="img"></p><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>具体做法就是在宠物的工具栏添加一个 <code>&lt;span class=&quot;fa fa-lg fa-music&quot;&gt;&lt;/span&gt;</code> 音乐图标，控制音乐的播放和暂停，隐藏其他累赘的界面。这可以通过 APlayer 提供的 <a href="https://aplayer.js.org/#/zh-Hans/?id=api">API 接口</a>做到。切换播放 &#x2F; 暂停的函数为 <code>xxx.toggle();</code></p><p>但是为了功能的完整性我在宠物的右键菜单里保留了显示 &#x2F; 隐藏音乐播放器界面的功能按钮。这可以通过增加 &#x2F; 删除类名做到。相关函数为 <code>xxx.addClass();</code> 和 <code>xxx.removeClass();</code></p><p>虽然隐藏了播放器界面，但是显示歌词还是不错的。因此需要为播放 &#x2F; 暂停事件添加<a href="https://aplayer.js.org/#/zh-Hans/?id=%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A">事件绑定</a>。当音乐开始播放时自动显示歌词，当音乐停止时自动隐藏歌词。好在 APlayer 依然提供了此编程接口。相关函数为 <code>xxx.on(event, function);</code></p><p>页尾脚本一共需要添加这些东西：</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token comment">&lt;!--宠物播放器--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><span class="token keyword">const</span> live2d_path <span class="token operator">=</span> <span class="token string">"https://cdn.jsdelivr.net/gh/crowya/live2d/live2d/"</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meting-js</span> <span class="token attr-name">server</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tencent<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>playlist<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8559460487<span class="token punctuation">"</span></span> <span class="token attr-name">theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#339981<span class="token punctuation">"</span></span> <span class="token attr-name">fixed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">preload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>none<span class="token punctuation">"</span></span> <span class="token attr-name">autoplay</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">loop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>all<span class="token punctuation">"</span></span> <span class="token attr-name">order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>random<span class="token punctuation">"</span></span> <span class="token attr-name">volume</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>meting-js</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><span class="token comment">//封装异步加载资源的方法</span><span class="token keyword">function</span> <span class="token function">loadExternalResource</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token keyword">let</span> tag<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">"css"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>tag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"link"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tag<span class="token punctuation">.</span>rel <span class="token operator">=</span> <span class="token string">"stylesheet"</span><span class="token punctuation">;</span>tag<span class="token punctuation">.</span>href <span class="token operator">=</span> url<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">"js"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>tag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tag<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>tag<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>tag<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>tag<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">reject</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>screen<span class="token punctuation">.</span>width <span class="token operator">>=</span> <span class="token number">768</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">loadExternalResource</span><span class="token punctuation">(</span><span class="token string">"https://cdn.jsdelivr.net/gh/crowya/live2d/live2d/waifu.min.css"</span><span class="token punctuation">,</span> <span class="token string">"css"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">loadExternalResource</span><span class="token punctuation">(</span><span class="token string">"https://cdn.jsdelivr.net/gh/crowya/live2d/live2d/live2d.min.js"</span><span class="token punctuation">,</span> <span class="token string">"js"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">loadExternalResource</span><span class="token punctuation">(</span><span class="token string">"https://cdn.jsdelivr.net/gh/crowya/live2d/live2d/waifu-tips.min.js"</span><span class="token punctuation">,</span> <span class="token string">"js"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">loadExternalResource</span><span class="token punctuation">(</span><span class="token string">"https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"</span><span class="token punctuation">,</span> <span class="token string">"css"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">loadExternalResource</span><span class="token punctuation">(</span><span class="token string">"https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"</span><span class="token punctuation">,</span> <span class="token string">"js"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token function">loadExternalResource</span><span class="token punctuation">(</span><span class="token string">"https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"</span><span class="token punctuation">,</span> <span class="token string">"js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ap <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'meting-js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"aplayer"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">aplayer</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        ap <span class="token operator">=</span> aplayer<span class="token punctuation">;</span>        <span class="token function">ap_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">initWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如需改为自己的歌单，请修改 <code>&lt;meting-js&gt;</code> 标签内的<a href="https://github.com/metowolf/MetingJS#option">参数</a>。</p><p>如需修改秘密通道或对话文本，请自定义 waifu-tips.json，详情见<a href="https://github.com/crowya/live2d">鸦鸦的项目</a>。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://crowya.com/live2d-pet-modification/">Live2D 宠物功能修改 | 音乐播放器 + 右键秘密通道 – 鸦鸦的巢穴 (crowya.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> wordpress </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 看板娘 </tag>
            
            <tag> 音乐播放器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博览众长</title>
      <link href="/posts/c42.html"/>
      <url>/posts/c42.html</url>
      
        <content type="html"><![CDATA[<h1 id="博览众长"><a href="#博览众长" class="headerlink" title="博览众长"></a>博览众长</h1><p>为了折腾我的hexo博客，我访问过诸多大佬的博客小站，博览众长，希望集他山之玉，打造出心仪的博客网站。然没有最好，只有更好，只能罗列众多大佬博客中我比较喜欢的部分，希望给大家一些参考和帮助。</p><h2 id="他山之玉"><a href="#他山之玉" class="headerlink" title="他山之玉"></a>他山之玉</h2><h3 id="HaoQi"><a href="#HaoQi" class="headerlink" title="HaoQi"></a><a href="https://houhaoqi.gitee.io/">HaoQi</a></h3><ul><li><a href="https://houhaoqi.gitee.io/List/galleries/">相册</a>，fancybox</li><li><a href="https://houhaoqi.gitee.io/contact/">留言板</a></li><li><a href="https://houhaoqi.gitee.io/tools/">网站导航</a>，和land and sea一样的导航</li></ul><h3 id="Land-and-Sea"><a href="#Land-and-Sea" class="headerlink" title="Land and Sea"></a><a href="https://showcoding.github.io/">Land and Sea</a></h3><ul><li><a href="https://showcoding.github.io/census/">统计</a></li><li><a href="https://showcoding.github.io/contact/">留言板</a></li><li><a href="https://showcoding.github.io/tools/">百宝箱</a></li></ul><h3 id="itsNeko"><a href="#itsNeko" class="headerlink" title="itsNeko"></a><a href="https://blog.dyfa.top/">itsNeko</a></h3><ul><li><a href="">留言板</a></li><li>[about](<a href="https://blog.dyfa.top/about/">关于 | itsNeko「生活日志」 (dyfa.top)</a>)</li><li><a href="">随笔模版</a></li><li>[打赏记录](<a href="https://blog.dyfa.top/donate/">🐈 博客打赏记录 | itsNeko「生活日志」 (dyfa.top)</a>)</li></ul>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 他山之石 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo博客部署到阿里云服务器</title>
      <link href="/posts/9e7d.html"/>
      <url>/posts/9e7d.html</url>
      
        <content type="html"><![CDATA[<h1 id="hexo博客部署到阿里云"><a href="#hexo博客部署到阿里云" class="headerlink" title="hexo博客部署到阿里云"></a>hexo博客部署到阿里云</h1><p>大部分人使用Hexo搭建个人博客都会部署到一些免费的代码托管平台上，但这些免费的平台总是差强人意，比如国外的GitHub平台虽然完全免费，但在国内访问加载速度非常慢，又或者是国内的码云平台免费版有许多功能被阉割掉了，比如不能自定义域名，不能每次自动刷新提交的代码，需要到码云平台上手动刷新，如此一来非常繁琐。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://showcoding.github.io/posts/19d2a4e6.html#toc-heading-9">阿里云服务器部署Hexo博客 | Land and Sea (showcoding.github.io)</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 阿里云 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mobaXterm免费升级到专业版</title>
      <link href="/posts/ab13.html"/>
      <url>/posts/ab13.html</url>
      
        <content type="html"><![CDATA[<h1 id="Xterm升级至专业版"><a href="#Xterm升级至专业版" class="headerlink" title="Xterm升级至专业版"></a>Xterm升级至专业版</h1><ol><li>首先去官网下载自己需要的版本，<a href="https://mobaxterm.mobatek.net/">点击跳转</a></li><li>打开<a href="https://inused.github.io/pages/file/tool/MobaXtermKeygen.html">MobaXterm Keygen (inused.github.io)</a></li><li>填写用户名和版本号，用户名可以随意，版本号和自己下载的Xterm版本号一致</li></ol><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404292136311.png" alt="Xterm_license" style="zoom: 67%;" /><ol start="4"><li>将生成的<code>Custom.mxtpro</code>文件放入<code>MobaXterm.exe</code>所在的目录</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404292136232.png" alt="激活"></p><ol start="5"><li>重启MobaXterm，点击上方help→About MobaXterm</li></ol><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404292137148.png" alt="激活成功" style="zoom:80%;" /><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://blog.csdn.net/weixin_39540280/article/details/122163223">MobaXterm升级为专业版_mobaxterm个人版升级为企业版-CSDN博客</a></p>]]></content>
      
      
      <categories>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Xterm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>修复右键没有管理选项</title>
      <link href="/posts/5362.html"/>
      <url>/posts/5362.html</url>
      
        <content type="html"><![CDATA[<h1 id="修复右键没有管理选项"><a href="#修复右键没有管理选项" class="headerlink" title="修复右键没有管理选项"></a>修复右键没有管理选项</h1>]]></content>
      
      
      <categories>
          
          <category> 问题解决 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/posts/0.html"/>
      <url>/posts/0.html</url>
      
        <content type="html"><![CDATA[<h1 id="添加番剧列表"><a href="#添加番剧列表" class="headerlink" title="添加番剧列表"></a>添加番剧列表</h1><p>具体效果请看：<a href="https://blog.ukenn.top/index.php/anime/">番剧列表</a></p><h3 id="下载开源项目"><a href="#下载开源项目" class="headerlink" title="下载开源项目"></a>下载开源项目</h3><p><a href="https://github.com/Ukenn2112/bilibili">项目地址</a></p><p>解压完后，请将<code>bilibili-master文件夹</code><strong>里面的bilibili文件夹</strong>和<code>page-bilibili.php</code>文件放到主题根目录下</p><p>打开<code>bilibili</code>文件夹重命名里面文件后缀为<code>bilibiliAnime.php</code></p><p>然后返回修改<code>page-bilibili.php</code></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://blog.ukenn.top/sakura5/">Sakura主题美化系列（五）添加BiliBili番剧列表 – Ukenn Blog</a></p>]]></content>
      
      
      <categories>
          
          <category> wordpress </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 番剧 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vim使用</title>
      <link href="/posts/84b5.html"/>
      <url>/posts/84b5.html</url>
      
        <content type="html"><![CDATA[<h1 id="vim使用"><a href="#vim使用" class="headerlink" title="vim使用"></a>vim使用</h1><p>Linux基础知识及Vim编辑器扩展：</p><ol><li><p>文件系统基础：</p><ul><li><code>/</code> 根目录是文件系统的顶层，<code>.</code> 表示当前目录，<code>..</code> 表示上一级目录。</li><li><code>pwd</code> 命令用于显示当前工作目录，<code>ls</code> 命令列出目录内容。</li><li><code>ls -l</code> 显示详细信息，包括权限、链接数、所有者、组、大小、修改时间和文件名。</li><li><code>ls -a</code> 显示包括隐藏文件在内的所有文件列表。</li><li>使用 Tab 键进行命令和路径的自动补全，提高工作效率。</li></ul></li><li><p>文件权限管理：</p><ul><li>使用 <code>chmod</code> 命令更改文件权限，如 <code>chmod 755 file.txt</code>。</li><li>文件权限表示法如 <code>rwxr-xr--</code>，其中第一个字符表示文件类型，后面三组表示权限。</li><li>可以使用符号模式（如 <code>u+x</code> 表示给所有者添加执行权限）或绝对模式（如 <code>755</code> 表示所有者可读、写、执行，组和其他用户可读和执行）设置权限。</li></ul></li><li><p>文件操作：</p><ul><li>使用 <code>mkdir</code> 创建新目录，<code>cd</code> 切换工作目录，<code>touch</code> 创建新文件或更新访问&#x2F;修改时间。</li><li>使用 <code>cp</code> 复制文件，<code>mv</code> 移动或重命名文件，<code>rm</code> 删除文件，<code>rm -r</code> 删除目录及其内容。</li><li><code>cp -r</code> 递归复制目录及其内容，<code>mv</code> 可用于剪切文件和目录。</li></ul></li><li><p>文件搜索：</p><ul><li><code>find</code> 在文件系统中搜索文件，如 <code>find / -name filename.txt</code>。</li><li><code>grep</code> 在文件中搜索特定模式，如 <code>grep &quot;pattern&quot; file.txt</code>。</li><li><code>find</code> 和 <code>grep</code> 可以结合使用，如 <code>find /etc -type f -exec grep &quot;keyword&quot; &#123;&#125; +</code> 在 <code>/etc</code> 目录下搜索包含关键词的文件。</li></ul></li><li><p>系统信息查看：</p><ul><li>使用 <code>uname</code> 查看系统信息，<code>df</code> 显示磁盘空间利用情况，<code>du</code> 显示文件&#x2F;目录的磁盘使用情况。</li><li><code>top</code> 命令显示系统资源使用情况及进程信息，<code>free</code> 显示内存使用情况。</li></ul></li><li><p>Vim编辑器使用：</p><ul><li><code>gedit</code> 是图形界面文本编辑器，适合初学者。</li><li><code>vi</code> 或 <code>vim</code> 是强大的文本编辑器，具有命令行模式、插入模式和底行模式。</li><li>在命令行模式下执行复制（yy）、剪切&#x2F;删除（dd）、粘贴（p）、撤销（u）等操作。</li><li>进入插入模式后进行编辑，按 Esc 返回命令行模式。</li><li>保存并退出文件，使用 <code>:wq</code> 或 <code>:q!</code>，通过 <code>shift + :</code> 进入底行模式执行更多命令。</li></ul></li><li><p>Vim高级技巧：</p><ul><li>使用 <code>m</code> 在文档中设置标记，并使用 <code>&#39;</code> 跳转到标记处。</li><li>使用 <code>Ctrl + o</code> 和 <code>Ctrl + i</code> 前进和后退跳转历史记录。</li><li>分割窗口使用 <code>:split</code> 和 <code>:vsplit</code>，切换窗口使用 <code>Ctrl + w</code>。</li><li>录制和回放宏使用 <code>q</code> 开始录制，<code>@</code> 执行录制的宏。</li><li>使用插件管理器管理插件，配置文件位于 <code>~/.vimrc</code>。</li><li>Visual 模式允许对所选文本进行操作，可进入字符级别、行级别和块级别。</li><li>撤销树可以使用 <code>:undo</code> 和 <code>:redo</code> 进行撤销和重做操作。</li><li>语法折叠可以使用 <code>zf</code> 折叠代码块，<code>zo</code> 展开折叠。</li></ul></li><li><p>Vim插件推荐：</p><ul><li><code>Vundle</code>、<code>Pathogen</code>、<code>vim-plug</code> 是常用的插件管理器。</li><li>常用插件包括代码补全（如 <code>YouCompleteMe</code>）、语法高亮（如 <code>vim-javascript</code>）、文件浏览器（如 <code>NERDTree</code>）等。</li><li>插件可以通过 GitHub 或 Vim 脚本网站安装。</li></ul></li></ol><p>以上是一些Linux基础知识，以及Vim编辑器的基本使用，有助于初学者进行入门学习和更好地理解Linux系统及其相关工具。</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决ubuntu和windows之间的粘贴</title>
      <link href="/posts/e8c2.html"/>
      <url>/posts/e8c2.html</url>
      
        <content type="html"><![CDATA[<h1 id="解决ubuntu和win之间的粘贴"><a href="#解决ubuntu和win之间的粘贴" class="headerlink" title="解决ubuntu和win之间的粘贴"></a>解决ubuntu和win之间的粘贴</h1><p>在使用ubuntu虚拟机时，有时需要在虚拟机与windows系统之间进行文件或者字符串的复制和粘贴。比如：某个文件在主机上，但是开发时需要在虚拟机中使用，需要把这个文件导入到虚拟机中。其实这个功能通过简单的复制粘贴就可以实现。但是新安装的虚拟机往往不支持该功能，需要进行配置。</p><p>首先，执行下面的命令</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> autoremove open-vm-tools<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后，执行下面的命令</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> open-vm-tools-desktop<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>最后，重启虚拟机，就可以实现复制粘贴了。</p><p>参考链接：<a href="https://blog.csdn.net/bhniunan/article/details/104479349">如何实现ubuntu虚拟机与windows系统之间复制粘贴-CSDN博客</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>找回宝塔面板登陆账号和密码</title>
      <link href="/posts/158f.html"/>
      <url>/posts/158f.html</url>
      
        <content type="html"><![CDATA[<h1 id="找回宝塔面板登录地址、账号和密码"><a href="#找回宝塔面板登录地址、账号和密码" class="headerlink" title="找回宝塔面板登录地址、账号和密码"></a>找回宝塔面板登录地址、账号和密码</h1><p>忘记登录名和登录密码应该是大多数人都会遇到的问题，特别是遇到记性不好，而且又没有备份密码的人来说，那就是家常便饭了，站主就个记性不好的还爱设复杂密码又不备份的(可以说是又菜又爱玩了)，这几天忘记了自己的宝塔面板的登录账户和用户名，以为可以试出来，几个试了几天没试出来，简直是气煞我也😡。最后只能老老实实地取修改账户名和密码。因为站主是第一次使用宝塔面板，现在就记录一下修改密码的过程。</p><ol><li><p>首先，通过ssh的方式连接服务器（注意登录的时候以root身份登录），否则就使用<code>sudo</code> 命令以管理员身份执行命令</p></li><li><p>使用<code>bt</code>命令调出命令提示面板，root用户直接输入<code>bt</code></p><p>站主这里使用的<code>esc-user</code>登录，所以使用<code>sudo /usr/bin/bt</code></p><p>然后就会弹出以下面板</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402292214394.png" alt="image-20240229221434264"></p><ol start="3"><li>然后按照自己的需要选择命令修改即可</li></ol>]]></content>
      
      
      <categories>
          
          <category> 问题解决 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 宝塔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我当舅舅了!</title>
      <link href="/posts/2b8.html"/>
      <url>/posts/2b8.html</url>
      
        <content type="html"><![CDATA[<p>日记之我当舅舅了！</p><p>来看看我可爱的侄女：</p><p>照片</p><p>照片</p><p>视频</p><p>视频</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>jupyter notebook找不到新建的虚拟环境</title>
      <link href="/posts/3dac.html"/>
      <url>/posts/3dac.html</url>
      
        <content type="html"><![CDATA[<h1 id="Jupyter找不到新建的虚拟环境"><a href="#Jupyter找不到新建的虚拟环境" class="headerlink" title="Jupyter找不到新建的虚拟环境"></a>Jupyter找不到新建的虚拟环境</h1><p>今天做项目时，需要用到为新建的py37虚拟环境（python 3.7.16），我用的是anaconda3的一个python集成环境，自带jupyter notebook，但在我打开jupyter notebook界面后，却找不到对应的虚拟环境，原来是jupyter notebook只是通用于下载anaconda时自带的环境，其他环境要想使用必须手动下载一些库：</p><p>首先进入到自己创建的虚拟环境(pytorch是虚拟环境的名字)</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">activate pytorch<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在该环境下下载这些库，我查了很多博主的文章，大部分都是虚拟环境缺这两个库，下载之后就成功了。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda <span class="token function">install</span> ipykernelconda <span class="token function">install</span> nb_conda<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>打开jupyter notebook，我们就可以看到我们创建的虚拟环境pytorch了</p><p>在命令行输入：<code>jupyter notebook</code></p><p>现在就可以看到py37虚拟环境了</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://blog.csdn.net/qq_39504519/article/details/108039594">解决jupyter notebook无法找到虚拟环境的问题_CSDN博客</a></p><p><a href="https://blog.csdn.net/qq_41339564/article/details/108057808">Jupyter中找不到新建的虚拟环境问题_CSDN博客</a></p>]]></content>
      
      
      <categories>
          
          <category> 问题解决 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jupyter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WordPress+宝塔+阿里云+Xshell搭建博客</title>
      <link href="/posts/4c80.html"/>
      <url>/posts/4c80.html</url>
      
        <content type="html"><![CDATA[<h1 id="WordPress-宝塔-阿里云-Xshell搭建博客"><a href="#WordPress-宝塔-阿里云-Xshell搭建博客" class="headerlink" title="WordPress+宝塔+阿里云+Xshell搭建博客"></a>WordPress+宝塔+阿里云+Xshell搭建博客</h1><h2 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h2><p>已经购买了自己的云服务器</p><h2 id="Xshell"><a href="#Xshell" class="headerlink" title="Xshell"></a>Xshell</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p><a href="https://blog.csdn.net/SoloVersion/article/details/123854852">XShell免费版的安装配置教程以及使用教程（超级详细、保姆级）_xshell安装教程-CSDN博客</a></p><h3 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h3><p>Xshell连接云服务器</p><h2 id="宝塔"><a href="#宝塔" class="headerlink" title="宝塔"></a>宝塔</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>宝塔面板（BT Panel）是一款基于 Linux 系统开发的免费的服务器管理面板，旨在简化服务器管理和网站运维的工作。它提供了图形化的用户界面，让用户可以通过网页浏览器轻松管理服务器、网站、数据库等各种服务。宝塔面板支持多种功能，包括但不限于：</p><ol><li><p><strong>Web 服务器管理：</strong> 支持常见的 Web 服务器软件，如 Nginx、Apache，以及一键切换、配置虚拟主机等功能。</p></li><li><p><strong>数据库管理：</strong> 支持常见的数据库，如 MySQL、MariaDB、MongoDB、Redis 等，提供数据库的创建、备份、还原等功能。</p></li><li><p><strong>FTP 服务管理：</strong> 可以管理 FTP 服务器，实现文件上传、下载等操作。</p></li><li><p><strong>DNS 服务管理：</strong> 提供域名解析服务，支持添加、删除、修改域名解析记录等功能。</p></li><li><p><strong>SSL 证书管理：</strong> 支持 Let’s Encrypt 免费 SSL 证书，实现网站的 HTTPS 加密访问。</p></li><li><p><strong>安全防护：</strong> 提供防火墙、安全加固等功能，增强服务器安全性。</p></li><li><p><strong>系统监控：</strong> 提供服务器资源使用情况的监控，包括 CPU、内存、磁盘等资源的监控。</p></li><li><p><strong>一键部署应用：</strong> 支持一键部署常见的网站程序，如 WordPress、Discuz、Typecho 等，简化网站部署流程。</p></li></ol><p>总的来说，宝塔面板为服务器管理员提供了一个方便、易用的管理平台，使他们能够更高效地管理和维护服务器，同时降低了操作的复杂度和技术门槛。</p><h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">wget</span> <span class="token operator">&amp;&amp;</span> <span class="token function">wget</span> <span class="token parameter variable">-O</span> install.sh https://download.bt.cn/install/install_6.0.sh <span class="token operator">&amp;&amp;</span> <span class="token function">sh</span> install.sh ed8484bec<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="添加网站"><a href="#添加网站" class="headerlink" title="添加网站"></a>添加网站</h3><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402251952488.png" alt="创建站点"></p><h2 id="wordpress"><a href="#wordpress" class="headerlink" title="wordpress"></a>wordpress</h2><p>在宝塔中的软件商店选择wordpress，一键部署</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402252024141.png" alt="成功！"></p><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><h3 id="设置ecs-user后如何使用root用户登录"><a href="#设置ecs-user后如何使用root用户登录" class="headerlink" title="设置ecs-user后如何使用root用户登录"></a>设置ecs-user后如何使用root用户登录</h3><p>设置普通用户ecs-user作为ECS实例的登录名后，如果某些软件或应用程序可能要求使用root用户权限来运行，此时需要切换到root用户登录以满足软件运行的要求。您可以通过控制台或者登录ECS实例内部为root用户设置密码，设置后就可以使用root用户登录ECS实例。</p><h4 id="通过控制台在线重置"><a href="#通过控制台在线重置" class="headerlink" title="通过控制台在线重置"></a>通过控制台在线重置</h4><p>如果您的ECS实例支持在线重置密码，可以在线重置root的密码。</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402251953505.png" alt="控制台重置"></p><h4 id="登录ECS实例修改"><a href="#登录ECS实例修改" class="headerlink" title="登录ECS实例修改"></a>登录ECS实例修改</h4><ol><li><p>使用ecs-user用户登录待修改的ECS实例。</p><p>具体操作，请参见<a href="https://help.aliyun.com/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key">通过密码或密钥认证登录Linux实例</a>。</p><p><strong>重要</strong></p><p>使用ecs-user用户作为ECS实例的登录名后，您不能直接使用root用户登录实例，而需要使用ecs-user登录名登录实例。</p></li><li><p>根据root用户不同的登录方式，为root用户设置密码或密钥对。</p><ul><li><p>root用户使用密码登录ECS实例</p><ol><li><p>运行以下命令，为root用户设置密码。运行命令后，根据命令行的返回信息设置root用户的密码。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">passwd</span> root<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>配置允许root用户使用密码登录实例。</p><ol><li><p>运行以下命令，打开<code>/etc/ssh/sshd_config</code>文件。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">vi</span> /etc/ssh/sshd_config<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>在<code>/etc/ssh/sshd_config</code>文件中找到以<code>PasswordAuthentication</code>开头的配置行，按i键进入编辑模式，并将该行内容修改为<code>PasswordAuthentication yes</code>。</p><p>文件内容修改后如下图所示：</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402251954377.png" alt="设置成功"></p><blockquote><p>如果<code>PasswordAuthentication</code>的配置默认为<code>yes</code>，则您无需再修改文件内容。</p></blockquote></li><li><p>运行以下命令，重启SSH服务，使配置生效。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> systemctl restart sshd<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>后续您可以使用root用户与密码信息远程登录ECS实例。</p></li></ol></li></ol></li><li><p>root用户使用密钥对登录ECS实例</p></li></ul></li></ol><p>将密钥对的公钥配置信息保存到<code>/root/.ssh/authorized_keys</code>配置文件中，即可使用root用户与密钥对信息远程登录ECS实例。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://www.bilibili.com/video/BV1rU4y1J785/">鱼皮：手把手带你从0搭建个人网站1</a></li><li><a href="https://www.bilibili.com/video/BV14q4y1R7XM/">鱼皮：手把手带你从0搭建个人网站2</a></li><li><a href="https://help.aliyun.com/zh/ecs/user-guide/manage-the-username-used-to-log-on-to-an-ecs-instance?spm=a2c4g.11186623.0.0.51cc48b4xoTK22#e647d8f17fwpj">在Linux系统ECS实例中如何设置登录名为ecs-user或root_云服务器-阿里云帮助中心 (aliyun.com)</a></li><li><a href="https://developer.aliyun.com/article/1211145">阿里云服务器搭建宝塔Linux面板流程（新手教程）-阿里云开发者社区 (aliyun.com)</a></li><li><a href="https://blog.csdn.net/SoloVersion/article/details/123984445">宝塔Linux面板安装以及基本使用教程（超详细）用宝塔安装apache和直接命令按照apache的区别-CSDN博客</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> wordpress </category>
          
      </categories>
      
      
        <tags>
            
            <tag> wordpress </tag>
            
            <tag> 宝塔 </tag>
            
            <tag> 阿里云 </tag>
            
            <tag> Xshell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决夸克网盘网页版不能下载过大文件</title>
      <link href="/posts/c6ea.html"/>
      <url>/posts/c6ea.html</url>
      
        <content type="html"><![CDATA[<h1 id="解决夸克网盘网页不能下载大文件"><a href="#解决夸克网盘网页不能下载大文件" class="headerlink" title="解决夸克网盘网页不能下载大文件"></a>解决夸克网盘网页不能下载大文件</h1><p>近年来，夸克网盘和阿里盘热度很高，所以导致现在很多资源都是通过他们分享，但是夸克网盘和百度网盘一样，网页版不能下载过大容量的文件，过大容量必须下载软件，对于很多不想下载软件的小伙伴来说，实在是麻烦又无可奈何，而且如果不开会员，下载速度也是相当的感人啊😅</p><p>但是没有什么是无所不能的网友不能解决的，总有大神会出手。所有就有了今天要介绍的这位主角——<a href="https://greasyfork.org/zh-CN/scripts/448675-%E5%A4%B8%E5%85%8B%E7%BD%91%E7%9B%98%E7%9B%B4%E9%93%BE%E4%B8%8B%E8%BD%BD">夸克网盘直链下载 (greasyfork.org)</a>，不仅完美解决了网页版不能下载大文件的问题，还能够和IDM等多线程下载工具联手打出组合技，可谓是BUFF拉满，分分钟解决你的烦恼，真是太裤辣😝</p><p>下面给出教程，请速速下载吧！</p><h2 id="油猴下载"><a href="#油猴下载" class="headerlink" title="油猴下载"></a>油猴下载</h2><p>关于油猴这一神器的介绍，我就不多说了，dddd，没用过的可自行去Bing一下。可以在你使用的浏览器里的扩展里下载。</p><h2 id="安装脚本"><a href="#安装脚本" class="headerlink" title="安装脚本"></a>安装脚本</h2><p><a href="https://greasyfork.org/zh-CN/scripts/448675-%E5%A4%B8%E5%85%8B%E7%BD%91%E7%9B%98%E7%9B%B4%E9%93%BE%E4%B8%8B%E8%BD%BD">点击下载</a>，</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402251417789.png" alt="直链脚本"></p><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>下载前需要将资源保存到自己的网盘内，然后在网盘内进行下载</p><p><a href="https://www.niannz.com/3971.html">夸克网盘直链解析，无需客户端，网页端即可满速下载文件 (niannz.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 问题解决 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 夸克网盘 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo升级</title>
      <link href="/posts/f11c.html"/>
      <url>/posts/f11c.html</url>
      
        <content type="html"><![CDATA[<h2 id="hexo升级"><a href="#hexo升级" class="headerlink" title="hexo升级"></a>hexo升级</h2><p>Hexo 的升级相对简单，您可以按照以下步骤进行更新：</p><ol><li><p>首先，确保您已经安装了必要的应用程序：</p><ul><li><strong>Git</strong></li><li><strong>Node.js</strong>（版本不低于10.13，建议使用12.0及以上版本）</li></ul></li><li><p>如果您的电脑中已经安装了上述必备程序，您可以直接前往<a href="https://hexo.io/zh-cn/docs/index.html">Hexo 安装步骤</a>。</p></li><li><p>如果您的电脑中尚未安装所需程序，请根据以下指示完成安装：</p><ul><li><p><strong>安装 Git</strong>：</p><ul><li><p>Windows：下载并安装 <a href="https://git-scm.com/download/win">Git</a>。</p></li><li><p>Mac：使用 Homebrew、MacPorts 或下载 <a href="https://git-scm.com/download/mac">安装程序</a>。</p></li><li><p>Linux (Ubuntu, Debian)：执行以下命令安装 Git：</p><pre class="line-numbers language-none"><code class="language-none">sudo apt-get install git-core<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>Linux (Fedora, Red Hat, CentOS)：执行以下命令安装 Git：</p><pre class="line-numbers language-none"><code class="language-none">sudo yum install git-core<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul></li></ul></li><li><p>接下来，进入您的 Hexo 博客目录，执行以下命令来更新 Hexo 及其插件版本：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 使用淘宝源的 cnpm 替换 npm</span><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> cnpm <span class="token parameter variable">--registry</span><span class="token operator">=</span>https://registry.npm.taobao.orgcnpm <span class="token function">install</span> <span class="token parameter variable">-g</span> cnpm<span class="token comment"># 清除 npm 缓存</span>cnpm cache clean <span class="token parameter variable">-f</span><span class="token comment"># 更新 package.json 中的 Hexo 及个插件版本</span>cnpm <span class="token function">install</span> <span class="token parameter variable">-g</span> npm-check<span class="token comment"># 检查之前安装的插件，查看哪些可以升级</span>npm-check<span class="token comment"># 升级系统中的插件</span>npm-check <span class="token parameter variable">-upgrade</span><span class="token comment"># 更新 Hexo 及所有插件</span>cnpm update<span class="token comment"># 确认 Hexo 已经更新</span>hexo <span class="token parameter variable">-v</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>注意：</p><ol><li><p>在更改 npm 源之前，请确保理解这样做可能会带来的影响。使用淘宝源的<code>cnpm</code>代替<code>npm</code>可以加快下载速度，但也可能会导致某些包的版本不一致或其他问题。请在更改之前备份项目以防万一。</p></li><li><p>在清除 npm 缓存之前，请确保您明白这样做会删除所有已下载的 npm 包。这可能会导致一些依赖重新下载，可能会花费一些时间，但通常不会造成问题。</p></li><li><p>在更新 package.json 中的 Hexo 及其插件版本之前，确保您了解您的项目所需的确切版本。有时候更新到最新版本可能会带来不兼容或者意外的问题。</p></li><li><p>使用 npm-check 来检查并升级插件是一个好主意，但请注意确保升级后的插件与您的项目兼容，并且不会破坏现有功能。</p></li><li><p>在执行 <code>cnpm update</code> 命令之前，请确保你已备份了你的项目数据，以防更新过程中出现意外。</p></li></ol></blockquote></li><li><p>升级之后，你的 Hexo 版本应该会更新到最新版本。现在您可以正常推送您的博客内容了。</p></li></ol><h2 id="切换镜像源"><a href="#切换镜像源" class="headerlink" title="切换镜像源"></a>切换镜像源</h2><p>要将 npm 的镜像源切换回默认的官方源，可以按照以下步骤操作：</p><ol><li><p>打开命令行界面（如终端或命令提示符）。</p></li><li><p>使用以下命令切换回默认的官方源：</p></li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npmjs.org/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这会将 npm 的镜像源更改回默认的官方源。</p><ol start="3"><li>您可以验证一下是否已经成功切换回官方源，执行以下命令：</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> config get registry<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果输出为 <code>https://registry.npmjs.org/</code>，则说明已经成功切换回默认的官方源。</p><p>通过执行以上步骤，您就可以将 npm 的镜像源从淘宝源切换回默认的官方源了。</p><h2 id="附nodejs升级"><a href="#附nodejs升级" class="headerlink" title="附nodejs升级"></a>附nodejs升级</h2><p>Node.js 是一个基于 Chrome 的 V8 JavaScript 引擎的 JavaScript 运行时环境。如果你想升级 Node.js 版本，有几种方法可以选择：</p><ol><li><strong>使用 NPM 更新 Node 版本</strong>：<ul><li>首先，清除 NPM 缓存：运行 <code>npm cache clean -f</code>。</li><li>安装 <code>n</code> 包，用于交互式地管理设备上的 Node 版本：运行 <code>npm install -g n</code>。</li><li>安装新的 Node 版本，例如最新的长期支持版本：运行 <code>n lts</code>。</li><li>如果之前安装过其他版本，可以使用 <code>n prune</code> 命令删除缓存的旧版本，只保留最新安装的版本。</li></ul></li><li><strong>使用 NVM 更新 Node 版本</strong>：<ul><li>NVM（Node Version Manager）帮助你管理 Node 版本。首先，安装 NVM。</li><li>使用 NVM 安装特定版本的 Node：运行 <code>nvm install [version]</code>，例如 <code>nvm install node</code> 安装最新版本。</li><li>卸载其他版本：运行 <code>nvm uninstall [version]</code>。</li><li>设置默认别名以指定特定版本：运行 <code>nvm alias default [version]</code>。</li></ul></li><li><strong>从 Node.js 网站下载更新的 Node 二进制文件</strong>：<ul><li>在 Node.js 下载页面上，你可以找到适用于你设备的最新和长期支持版本。</li><li>下载最新版本还会为你提供最新版本的 NPM。</li></ul></li></ol><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://cloud.tencent.com/developer/article/1918434">Hexo 升级教程-腾讯云开发者社区-腾讯云 (tencent.com)</a></li><li><a href="https://blog.csdn.net/qq_33154343/article/details/108301374">Hexo 升级教程_hexo 更新-CSDN博客</a></li><li><a href="https://hexo.io/zh-cn/docs/index.html">文档 | Hexo</a></li><li><a href="https://blog.csdn.net/qq_22713201/article/details/122486841">如何升级nodejs版本_nodejs升级-CSDN博客</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 升级 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>留言页面添加弹幕</title>
      <link href="/posts/3e08.html"/>
      <url>/posts/3e08.html</url>
      
        <content type="html"><![CDATA[<h1 id="留言板添加弹幕"><a href="#留言板添加弹幕" class="headerlink" title="留言板添加弹幕"></a>留言板添加弹幕</h1><p>之前在一位佬的博客<a href="https://seayj.cn/contact/">contact | SeaYJ’s Blog</a>上看到了留言板上的弹幕功能，于是便想着复刻一个出来。根据大佬的提示，和评论区的原理是一样：利用LeanCloud存储，然后读取内容就可以了。至于弹幕的实现参考这位大佬的项目<a href="https://github.com/yaseng/jquery.barrager.js">yaseng&#x2F;jquery.barrager.js: 专业的网页弹幕插件 (github.com)</a></p><h2 id="jquery-barrager-js"><a href="#jquery-barrager-js" class="headerlink" title="jquery.barrager.js"></a>jquery.barrager.js</h2><p><code>jquery.barrager.js</code> 是一款优雅的网页弹幕插件，支持显示图片、文字以及超链接。支持速度、高度、颜色、数量等自定义。可以轻松集成到论坛、博客等网站中。</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/demo.gif" alt="弹幕演示"></p><p>体验地址：<a href="https://yaseng.org/jquery.barrager.js/">Jquery.barrager.js 专业的网页弹幕插件 (yaseng.org)</a></p><p>实现的一般步骤：</p><ol><li><p><strong>下载 <code>jquery.barrager.js</code> 插件</strong>：</p><ul><li>首先，你需要从 <a href="https://github.com/yaseng/jquery.barrager.js/">这里</a> 下载 <code>jquery.barrager.js</code> 插件的代码。</li></ul></li><li><p><strong>将插件文件放入 Hexo 项目</strong>：</p><ul><li>将下载的 <code>jquery.barrager.js</code> 文件放入你的 Hexo 项目的合适目录，例如 <code>source/js</code>。</li></ul></li><li><p><strong>在 Hexo 主题中引入插件</strong>：</p><ul><li><p>打开你的 Hexo 主题文件（通常是 <code>_config.yml</code> 或其他配置文件）。</p></li><li><p>在合适的位置添加以下代码，以引入 </p><pre class="line-numbers language-none"><code class="language-none">jquery.barrager.js<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p> 插件：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># _config.yml</span><span class="token key atrule">scripts</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> js/jquery.barrager.js<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul></li><li><p><strong>创建弹幕容器</strong>：</p><ul><li><p>在你的 Hexo 页面中，创建一个容器用于显示弹幕。你可以在文章模板或页面模板中添加以下代码：</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>barrager-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul></li><li><p><strong>编写弹幕内容</strong>：</p><ul><li><p>在你的文章或页面中，使用 JavaScript 来添加弹幕内容。例如：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>  <span class="token comment">// 创建弹幕对象</span>  <span class="token keyword">var</span> barrager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Barrager</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    <span class="token literal-property property">container</span><span class="token operator">:</span> <span class="token string">'#barrager-container'</span><span class="token punctuation">,</span> <span class="token comment">// 弹幕容器的选择器</span>    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span>      <span class="token punctuation">&#123;</span> <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">'这是一条弹幕！'</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#ff0000'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token comment">// 添加更多弹幕...</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token comment">// 其他配置项...</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 启动弹幕</span>  barrager<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li><li><p><strong>自定义弹幕样式和行为</strong>：</p><ul><li><code>jquery.barrager.js</code> 支持自定义弹幕的速度、高度、颜色等属性。你可以根据需求调整这些参数。</li></ul></li><li><p><strong>预览和调试</strong>：</p><ul><li>运行 Hexo 本地服务器，查看你的页面是否成功显示弹幕效果。</li><li>调试弹幕的样式和行为，确保满足你的需求。</li></ul></li></ol><p>记得在集成过程中遵循 Hexo 主题的相关规则和文档。祝你成功集成弹幕效果到你的 Hexo 博客！🎉</p><p>更详细的帮助，请查看<a href="https://github.com/yaseng/jquery.barrager.js/">项目文档</a> </p><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/barrager.gif" alt="弹幕效果"></p><h3 id="leancloud设置"><a href="#leancloud设置" class="headerlink" title="leancloud设置"></a>leancloud设置</h3><p>添加用户</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7.png" alt="添加用户"></p><p>新建<code>barrager</code>class</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/%E5%88%9B%E5%BB%BAbarrager.png" alt="创建barrager"></p><h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><ol><li><p>在css下新建<code>barrager.css</code></p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.barrage</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 70px<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> -500px<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 99<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.barrage_box</span> <span class="token punctuation">&#123;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> .5<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">padding-right</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> all .3s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.barrage_box .portrait</span> <span class="token punctuation">&#123;</span>    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>    <span class="token property">margin-top</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>    <span class="token property">margin-left</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.barrage_box .portrait img</span> <span class="token punctuation">&#123;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.barrage_box div.p a</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin-right</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>    <span class="token property">margin-left</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.barrage_box div.p a:hover</span> <span class="token punctuation">&#123;</span>    <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.barrage_box .close</span> <span class="token punctuation">&#123;</span>    <span class="token property">visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>    <span class="token property">margin-left</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> .1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">margin-top</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>/medias/barrager/close.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.barrage_box:hover .close</span> <span class="token punctuation">&#123;</span>    <span class="token property">visibility</span><span class="token punctuation">:</span> visible<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.barrage_box .close a</span> <span class="token punctuation">&#123;</span>    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.barrage_box .close .icon-close</span> <span class="token punctuation">&#123;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> .5<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>    <span class="token property">margin-top</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.barrage .z</span> <span class="token punctuation">&#123;</span>    <span class="token property">float</span><span class="token punctuation">:</span> left <span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.barrage a</span> <span class="token punctuation">&#123;</span>    <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>在js下新建<code>jquery.barrager.js</code></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** *@name     jquery.barrager.js *@version  1.1 *@author   yaseng@uauc.net *@url      https://github.com/yaseng/jquery.barrager.js */</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>$<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">barrager</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">barrage</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>barrage <span class="token operator">=</span> $<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">close</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span><span class="token literal-property property">speed</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span><span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#ffffff'</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> barrage <span class="token operator">||</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> barrager_id <span class="token operator">=</span> <span class="token string">'barrage_'</span> <span class="token operator">+</span> time<span class="token punctuation">;</span><span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token string">'#'</span> <span class="token operator">+</span> barrager_id<span class="token punctuation">;</span><span class="token keyword">const</span> div_barrager <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"&lt;div class='barrage' id='"</span> <span class="token operator">+</span> barrager_id <span class="token operator">+</span> <span class="token string">"'>&lt;/div>"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> this_height <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.35</span><span class="token punctuation">;</span><span class="token keyword">const</span> this_width <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token keyword">const</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span>this_height <span class="token operator">/</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span><span class="token punctuation">(</span>this_height <span class="token operator">/</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">*</span><span class="token punctuation">(</span>this_height <span class="token operator">/</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token operator">*</span><span class="token punctuation">(</span>this_height <span class="token operator">/</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token operator">*</span><span class="token punctuation">(</span>this_height <span class="token operator">/</span> <span class="token number">5</span><span class="token punctuation">)</span>   <span class="token operator">+</span> <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">]</span><span class="token keyword">const</span> bottom <span class="token operator">=</span>array<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>div_barrager<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"bottom"</span><span class="token punctuation">,</span> bottom <span class="token operator">+</span> <span class="token string">"px"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>div_barrager_box <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"&lt;div class='barrage_box cl'>&lt;/div>"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>div_barrager<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>barrage<span class="token punctuation">.</span>img<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>div_barrager_box<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"&lt;a class='portrait z' href='javascript:;'>&lt;/a>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"&lt;img src='' >"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>id <span class="token operator">+</span> <span class="token string">" .barrage_box .portrait"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>img<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> barrage<span class="token punctuation">.</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>div_barrager_box<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" &lt;div class='z p'>&lt;/div>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>barrage<span class="token punctuation">.</span>close<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>div_barrager_box<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" &lt;div class='close z'>&lt;/div>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> content <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"&lt;a title='' href='' target='_blank'>&lt;/a>"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>id <span class="token operator">+</span> <span class="token string">" .barrage_box .p"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>content<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string-property property">'href'</span><span class="token operator">:</span> barrage<span class="token punctuation">.</span>href<span class="token punctuation">,</span><span class="token string-property property">'id'</span><span class="token operator">:</span> barrage<span class="token punctuation">.</span>id<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>barrage<span class="token punctuation">.</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>content<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'color'</span><span class="token punctuation">,</span> barrage<span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>div_barrager<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'margin-right'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">$</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">right</span><span class="token operator">:</span>this_width<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>barrage<span class="token punctuation">.</span>speed<span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">$</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>div_barrager_box<span class="token punctuation">.</span><span class="token function">mouseover</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>     <span class="token function">$</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>div_barrager_box<span class="token punctuation">.</span><span class="token function">mouseout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">$</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">right</span><span class="token operator">:</span>this_width<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>barrage<span class="token punctuation">.</span>speed<span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">$</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">$</span><span class="token punctuation">(</span>id<span class="token operator">+</span><span class="token string">'.barrage .barrage_box .close'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">$</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>$<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>barrager<span class="token punctuation">.</span><span class="token function-variable function">removeAll</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.barrage'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>在<code>contact.ejs</code>中找到合适的位置添加</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center-align<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">></span></span>第一次建站<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">></span></span>还请多多指教！<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">></span></span>在评论区或弹幕留下你的jio印吧！<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">></span></span>( •̀ ω •́ )✧<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bb-section<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-md-8 offset-md-2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-inline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>文字：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>info<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>info<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>发送一条友善的弹幕<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>href<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>链接：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>href<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>href<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>弹幕链接，例如：https://loyeh.cn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>speed<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>速度：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>speed<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>speed<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5~20<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group btn-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>send<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>留言<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clear<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">clear_barrage</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>清除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在<code>contact.ejs</code>末尾加入，填入自己的<code>appId</code>和<code>appKey</code>（在LeanCloud中查找）</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">let</span> e <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"input[name=info]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token punctuation">(</span>e <span class="token operator">=</span> <span class="token string">""</span> <span class="token operator">===</span> e <span class="token operator">?</span> <span class="token string">"hello world"</span> <span class="token operator">:</span> e<span class="token punctuation">,</span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"input[name=href]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">,</span> a <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> <span class="token string">""</span> <span class="token operator">===</span> n <span class="token operator">?</span> <span class="token string">"https://lo-y-eh.github.io/404"</span> <span class="token operator">:</span> n<span class="token punctuation">,</span>                <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"input[name=speed]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">(</span><span class="token number">20</span> <span class="token operator">&lt;</span> a <span class="token operator">||</span> a <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>a <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">const</span> r <span class="token operator">=</span> <span class="token constant">AV</span><span class="token punctuation">.</span>Object<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token string">"barrager"</span><span class="token punctuation">)</span>            <span class="token punctuation">,</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">r</span><span class="token punctuation">;</span>        t<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">,</span>            t<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"info"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">,</span>            t<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"speed"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">,</span>            t<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">" input[ name='info' ] "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">" input[ name='href' ] "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">" input[ name='speed' ] "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>            <span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">clear_barrage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        $<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>barrager<span class="token punctuation">.</span><span class="token function">removeAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token constant">AV</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>         <span class="token literal-property property">appId</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>         <span class="token literal-property property">appKey</span><span class="token operator">:</span> <span class="token string">""</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">do_barrager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">let</span> lists <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AV<span class="token punctuation">.</span>Query</span><span class="token punctuation">(</span><span class="token string">"barrager"</span><span class="token punctuation">)</span>                    <span class="token punctuation">,</span> barrager <span class="token operator">=</span> <span class="token keyword">await</span> query<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>                        lists <span class="token operator">=</span> e                    <span class="token punctuation">&#125;</span>                    <span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">let</span> length <span class="token operator">=</span> lists<span class="token punctuation">.</span>length                    <span class="token punctuation">,</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token keyword">const</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> length<span class="token punctuation">)</span>                        <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">,</span>                            <span class="token function">do_barrager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                        <span class="token keyword">let</span> obj <span class="token operator">=</span> lists<span class="token punctuation">[</span>index<span class="token punctuation">]</span>                            <span class="token punctuation">,</span> jsonObject <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">"("</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">barrager</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                            <span class="token literal-property property">img</span><span class="token operator">:</span> <span class="token string">"/medias/barrager/"</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">".png"</span><span class="token punctuation">,</span>                            <span class="token literal-property property">href</span><span class="token operator">:</span> jsonObject<span class="token punctuation">.</span>href<span class="token punctuation">,</span>                            <span class="token literal-property property">info</span><span class="token operator">:</span> jsonObject<span class="token punctuation">.</span>info<span class="token punctuation">,</span>                            <span class="token literal-property property">speed</span><span class="token operator">:</span> jsonObject<span class="token punctuation">.</span>speed <span class="token operator">-</span> <span class="token number">5</span>                        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                            index<span class="token operator">++</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>                    <span class="token punctuation">,</span> <span class="token number">900</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>            <span class="token function">do_barrager</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>在主题目录下的配置文件中找到<code>libs</code>，在css中引入<code>barrager.css</code>，在js中引入<code>barrager.js</code>。使用<code>hexo s</code>参看效果调试即可。</p></li></ol><h2 id="未完成"><a href="#未完成" class="headerlink" title="未完成"></a>未完成</h2><p>初步构想，在评论旁边设置弹幕，可以与弹幕进行切换</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://blog.leonus.cn/2023/danmaku.html">给你的留言板添加一个弹幕吧（重制） | Leonus</a></p><p><a href="https://github.com/yaseng/jquery.barrager.js">yaseng&#x2F;jquery.barrager.js: 专业的网页弹幕插件 (github.com)</a></p><p><a href="https://seayj.cn/contact/">contact | SeaYJ’s Blog</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 弹幕 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>添加B站番剧列表</title>
      <link href="/posts/db34.html"/>
      <url>/posts/db34.html</url>
      
        <content type="html"><![CDATA[<h2 id="添加番剧列表"><a href="#添加番剧列表" class="headerlink" title="添加番剧列表"></a>添加番剧列表</h2><p>暂未实现</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://blog.ukenn.top/sakura5/">Sakura 主题美化系列（五）添加 BiliBili 番剧列表 – Ukenn Blog</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 番剧列表 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>页脚波浪效果</title>
      <link href="/posts/f421.html"/>
      <url>/posts/f421.html</url>
      
        <content type="html"><![CDATA[<h1 id="页脚波浪效果"><a href="#页脚波浪效果" class="headerlink" title="页脚波浪效果"></a>页脚波浪效果</h1><p>合适的页脚动画可以为网站带来更好的用户体验，增加用户的停留时间和互动频率，同时也有助于提升网站的整体吸引力。</p><p>这里推荐一个提供众多页脚动画的<a href="https://www.bootstrapmb.com/tag/yejiao">网址</a></p><p>这里我选择的页脚波浪效果</p><h2 id="效果预览"><a href="#效果预览" class="headerlink" title="效果预览"></a>效果预览</h2><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402182024874.gif" alt="wave"></p><h2 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h2><ol><li><p>在matery&#x2F;source&#x2F;css下新建footer_wave.css，写入如下代码</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* 设置页脚的顶部外边距为 120px */</span><span class="token selector">footer</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin-top</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 设置波浪容器的定位为相对定位 */</span><span class="token selector">footer .fot-wave-box</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 设置波浪的样式 */</span><span class="token selector">footer .fot-wave</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token comment">/* 使波浪位于页脚上方 125px 处 */</span>    <span class="token property">top</span><span class="token punctuation">:</span> -125px<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 第一个波浪的样式 */</span><span class="token selector">footer .fot-wave#fot-wave_0</span> <span class="token punctuation">&#123;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token comment">/* 应用波浪动画 */</span>    <span class="token property">animation</span><span class="token punctuation">:</span> aniFotWaveMove_00 4s linear infinite<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 第二个波浪的样式 */</span><span class="token selector">footer .fot-wave#fot-wave_1</span> <span class="token punctuation">&#123;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 9<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> .5<span class="token punctuation">;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>    <span class="token comment">/* 应用波浪动画 */</span>    <span class="token property">animation</span><span class="token punctuation">:</span> aniFotWaveMove_01 4s linear infinite<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 第三个波浪的样式 */</span><span class="token selector">footer .fot-wave#fot-wave_2</span> <span class="token punctuation">&#123;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> .2<span class="token punctuation">;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>    <span class="token comment">/* 应用波浪动画 */</span>    <span class="token property">animation</span><span class="token punctuation">:</span> aniFotWaveMove_00 3s linear infinite<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 第四个波浪的样式 */</span><span class="token selector">footer .fot-wave#fot-wave_3</span> <span class="token punctuation">&#123;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 9<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> .7<span class="token punctuation">;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>    <span class="token comment">/* 应用波浪动画 */</span>    <span class="token property">animation</span><span class="token punctuation">:</span> aniFotWaveMove_01 3s linear infinite<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token comment">/* 定义波浪的移动动画 */</span><span class="token atrule"><span class="token rule">@keyframes</span> aniFotWaveMove_00</span> <span class="token punctuation">&#123;</span>    <span class="token selector">0%</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-position-x</span><span class="token punctuation">:</span> 1000px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">100%</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-position-x</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 定义波浪的移动动画 */</span><span class="token atrule"><span class="token rule">@keyframes</span> aniFotWaveMove_01</span> <span class="token punctuation">&#123;</span>    <span class="token selector">0%</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-position-x</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">100%</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-position-x</span><span class="token punctuation">:</span> 1000px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/* Safari 浏览器下的兼容性样式 */</span><span class="token atrule"><span class="token rule">@-webkit-keyframes</span> aniFotWaveMove_00</span> <span class="token punctuation">&#123;</span>    <span class="token selector">0%</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-position-x</span><span class="token punctuation">:</span> 1000px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">100%</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-position-x</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/* Safari 浏览器下的兼容性样式 */</span><span class="token atrule"><span class="token rule">@-webkit-keyframes</span> aniFotWaveMove_01</span> <span class="token punctuation">&#123;</span>    <span class="token selector">0%</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-position-x</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">100%</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-position-x</span><span class="token punctuation">:</span> 1000px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>代码解读：</p><ol><li><p><code>.fot-wave-box</code> 类的 CSS 规则用于设置页脚波浪的容器的位置为相对定位（position: relative），这意味着其子元素的绝对定位（position: absolute）将相对于此容器定位。</p></li><li><p><code>footer</code> 元素的 CSS 规则用于设置页脚的上外边距为 120px。</p></li><li><p><code>.fot-wave</code> 类的 CSS 规则用于设置波浪的样式，将其位置设置为绝对定位，位于页面顶部上方 100px 处，宽度为 100%，高度为 100px。</p></li><li><p><code>.fot-wave</code> 的具体实例（<code>#fot-wave_0</code>, <code>#fot-wave_1</code>, <code>#fot-wave_2</code>, <code>#fot-wave_3</code>）分别设置了不同的样式参数，包括层级（z-index）、透明度（opacity）、底部位置（bottom）以及动画效果。</p></li><li><p><code>@keyframes</code> 和 <code>@-webkit-keyframes</code> 规则定义了两种不同的动画效果（<code>aniFotWaveMove_00</code> 和 <code>aniFotWaveMove_01</code>），分别控制波浪的水平移动，从而实现波浪的动态效果。</p></li></ol><p>综上所述，这段代码主要是用于创建一个具有动态波浪效果的页脚。</p><blockquote><p>注意footer .fot-wave样式中的<code>top</code>需要根据自己的底部信息栏的高度进行设置</p></blockquote></li><li><p>在<code>matery\layout\_partial\footer.ejs</code> 的最上方插入以下代码</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token comment">&lt;!-- 添加页脚波浪代码 --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/css/footer_wave.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">    <span class="token selector">footer .fot-wave</span> <span class="token punctuation">&#123;</span>        <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>/medias/wave.png<span class="token punctuation">)</span></span> repeat-x<span class="token punctuation">;</span>        <span class="token property">background-size</span><span class="token punctuation">:</span> 1000px 100px<span class="token punctuation">;</span>        <span class="token comment">/* 添加 */</span>        <span class="token property">background-repeat</span><span class="token punctuation">:</span> repeat-x<span class="token punctuation">;</span> <span class="token comment">/* 设置波浪在水平方向重复 */</span>        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>        <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>        <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> <span class="token comment">/* 波浪宽度 */</span>        <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token comment">/* 波浪高度 */</span>        <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span> <span class="token comment">/* 确保波浪在内容上方显示 */</span>    <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fot-wave-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fot-wave<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fot-wave_0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fot-wave<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fot-wave_1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fot-wave<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fot-wave_2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fot-wave<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fot-wave_3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>最后进行部署查看效果即可，另外还有一点，最好设置自己的标签栏的颜色和波浪的颜色保持一致，效果才不会显得突兀</p></li></ol><h2 id="Gets"><a href="#Gets" class="headerlink" title="Gets"></a>Gets</h2><p>本次优化页脚的过程中学到了以下几点：</p><ol><li><p>在CSS中，<code>repeat-x</code> 是一个背景重复属性值，它指定背景图像沿着水平方向平铺重复显示，但不在垂直方向重复。换句话说，背景图像将在水平方向上重复，直到填满整个容器，但在垂直方向上不重复。这对于创建水平平铺背景图像非常有用，比如在页脚或者横幅中使用横向的图案或者波浪线条。</p></li><li><p>大多数现代浏览器都支持标准的 <code>box-shadow</code> 属性，无需再单独使用 <code>-webkit-box-shadow</code> 属性</p></li><li><p>针对不同浏览器的前缀是为了确保在不同的浏览器上能够正确地解析和显示样式。由于不同的浏览器厂商在实现CSS标准时可能存在差异，因此在一些新特性或实验性的CSS属性上，开发者需要使用特定浏览器厂商的前缀来确保样式能够正确应用。</p><p>以下是一些常见的浏览器前缀及其对应的浏览器：</p><ul><li><p><code>-webkit-</code>: 适用于WebKit内核的浏览器，例如Chrome和Safari。</p></li><li><p><code>-moz-</code>: 适用于Gecko内核的浏览器，例如Firefox。</p></li><li><p><code>-ms-</code>: 适用于Internet Explorer浏览器。</p></li><li><p><code>-o-</code>: 适用于Opera浏览器。</p></li></ul><p>这些前缀在CSS属性之前添加，以指示特定的样式适用于特定的浏览器。例如，<code>-webkit-transform</code>用于指定Webkit浏览器的变换样式，而<code>-moz-transform</code>用于指定Firefox浏览器的变换样式。</p><p>在过去，由于浏览器的差异性较大，使用浏览器前缀是确保样式兼容性的关键。但随着现代浏览器对CSS标准的更好支持，以及自动供应商前缀的工具的出现，开发者在编写CSS时需要添加浏览器前缀的情况已经大大减少。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 页脚 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>归档页面优化</title>
      <link href="/posts/bd93.html"/>
      <url>/posts/bd93.html</url>
      
        <content type="html"><![CDATA[<h1 id="归档页面优化"><a href="#归档页面优化" class="headerlink" title="归档页面优化"></a>归档页面优化</h1><h2 id="优化一"><a href="#优化一" class="headerlink" title="优化一"></a>优化一</h2><h3 id="效果预览"><a href="#效果预览" class="headerlink" title="效果预览"></a>效果预览</h3><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402161134123.gif" alt="archive"></p><h3 id="修改步骤"><a href="#修改步骤" class="headerlink" title="修改步骤"></a>修改步骤</h3><p>归档的布局文件是主题目录下的<code>/layout/archive.ejs</code>，原代码如下:</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token comment">&lt;!--时间轴区域块--></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cd-timeline<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>       <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> page<span class="token punctuation">.</span>posts<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cd-timeline-block<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>               <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token comment"># year. </span><span class="token delimiter punctuation">%></span></span>               <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">date</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>date<span class="token punctuation">,</span> <span class="token string">'YYYY'</span><span class="token punctuation">)</span> <span class="token operator">!=</span> year<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>                   <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> year <span class="token operator">=</span> <span class="token function">date</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>date<span class="token punctuation">,</span> <span class="token string">'YYYY'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span><span class="token delimiter punctuation">%></span></span>                   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cd-timeline-img year<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zoom-in-up<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span><span class="token string">'/archives/'</span> <span class="token operator">+</span> year<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> year </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>               <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>               <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token comment"># month. </span><span class="token delimiter punctuation">%></span></span>               <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">date</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>date<span class="token punctuation">,</span> <span class="token string">'YYYY-MM'</span><span class="token punctuation">)</span> <span class="token operator">!=</span> month<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>                   <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript">                       month <span class="token operator">=</span> <span class="token function">date</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>date<span class="token punctuation">,</span> <span class="token string">'YYYY-MM'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                       <span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token function">date</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>date<span class="token punctuation">,</span> <span class="token string">'MM'</span><span class="token punctuation">)</span>                   </span><span class="token delimiter punctuation">%></span></span>                   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cd-timeline-img month<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zoom-in-up<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span><span class="token string">'/archives/'</span> <span class="token operator">+</span> year <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> m<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                          <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> m </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>               <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>               <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token comment"># every day posts. </span><span class="token delimiter punctuation">%></span></span>               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cd-timeline-img day<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zoom-in-up<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">date</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>date<span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cd-timeline-content<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-up<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>article col s12 m6<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>path<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-image<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                   <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>post<span class="token punctuation">.</span>img<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>                                       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>img<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span>                                             <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>responsive-img<span class="token punctuation">"</span></span>                                            <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> post<span class="token punctuation">.</span>title </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                   <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>                                       <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript">                                           featureimg <span class="token operator">=</span>                                           featureImages<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token function">hashCode</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>title<span class="token punctuation">)</span>                                           <span class="token operator">%</span> featureImages<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                                       </span><span class="token delimiter punctuation">%></span></span>                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>jsDelivr<span class="token punctuation">.</span>url </span><span class="token delimiter punctuation">%></span></span>                                                 <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span>featureimg<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span>                                     <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>responsive-img<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> post<span class="token punctuation">.</span>title                                                                 </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                   <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>                                   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> post<span class="token punctuation">.</span>title </span><span class="token delimiter punctuation">%></span></span>                                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-content article-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>summary block-with-text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                   <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>post<span class="token punctuation">.</span>summary <span class="token operator">&amp;&amp;</span> post<span class="token punctuation">.</span>summary<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>                                      <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>                                       <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> post<span class="token punctuation">.</span>summary </span><span class="token delimiter punctuation">%></span></span>                                   <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>                                       <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">strip_html</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>                                            <span class="token number">120</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>                                   <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>                               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>publish-info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>publish-date<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>far fa-clock fa-fw icon-date<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>                                  <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> <span class="token function">date</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>date<span class="token punctuation">,</span> config<span class="token punctuation">.</span>date_format<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>                               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                                   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>publish-author<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                       <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>post<span class="token punctuation">.</span>categories <span class="token operator">&amp;&amp;</span>                                           post<span class="token punctuation">.</span>categories<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>                                           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fas fa-bookmark fa-fw                                                      icon-category<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>                                           <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> post<span class="token punctuation">.</span>categories<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">category</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>                                               </span><span class="token delimiter punctuation">%></span></span>                                               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span>category<span class="token punctuation">.</span>path<span class="token punctuation">)</span>                                                        </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post-category<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                   <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> category<span class="token punctuation">.</span>name </span><span class="token delimiter punctuation">%></span></span>                                   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                                           <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span><span class="token delimiter punctuation">%></span></span>                                       <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>post<span class="token punctuation">.</span>author <span class="token operator">&amp;&amp;</span>                                           post<span class="token punctuation">.</span>author<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>                                           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fas fa-user fa-fw<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>                                           <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> post<span class="token punctuation">.</span>author </span><span class="token delimiter punctuation">%></span></span>                                       <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>                                           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fas fa-user fa-fw<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>                                           <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> config<span class="token punctuation">.</span>author </span><span class="token delimiter punctuation">%></span></span>                                       <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>                                   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                           <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>post<span class="token punctuation">.</span>tags <span class="token operator">&amp;&amp;</span> post<span class="token punctuation">.</span>tags<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>                               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-action article-tags<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                   <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> post<span class="token punctuation">.</span>tags<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">tag</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>                                       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span>tag<span class="token punctuation">.</span>path<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span>                                                   <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>chip bg-color<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                             <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> tag<span class="token punctuation">.</span>name </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                                   <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span><span class="token delimiter punctuation">%></span></span>                               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                           <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>                       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span>           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>       <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span><span class="token delimiter punctuation">%></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在主题目录下的<code>/layout/archive.ejs</code>文件中添加如下代码:</p><ul><li><p>先添加<code>时间列表</code>和<code>时间轴</code>的切换按钮</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tag-chips<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">showTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sp-table<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>chip center-align waves-effect waves-light default<span class="token punctuation">"</span></span>                  <span class="token attr-name">data-tagname</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>时间列表<span class="token punctuation">"</span></span>                  <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>76<span class="token punctuation">,</span> 191<span class="token punctuation">,</span> 48<span class="token punctuation">)</span> 0%<span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>15<span class="token punctuation">,</span> 157<span class="token punctuation">,</span> 88<span class="token punctuation">)</span> 100%<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>时间列表            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">showTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sp-timeline<span class="token punctuation">"</span></span>                  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>chip center-align waves-effect waves-light default<span class="token punctuation">"</span></span>                  <span class="token attr-name">data-tagname</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>时间轴<span class="token punctuation">"</span></span>                  <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>249<span class="token punctuation">,</span> 235<span class="token punctuation">,</span> 234<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.6<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>时间轴            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>实现切换效果的<code>js</code>代码:</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">   <span class="token keyword">function</span> <span class="token function">showTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#cd-timeline"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#cd-table"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#sp-timeline"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">,</span> 'linear<span class="token operator">-</span><span class="token function">gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> #4cbf30 <span class="token number">0</span><span class="token operator">%</span><span class="token punctuation">,</span>                          #0f9d58 <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">)</span>'<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#sp-timeline"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'color'</span><span class="token punctuation">,</span> <span class="token string">'#fff'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#sp-table"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">,</span> <span class="token string">'#F9EBEA'</span><span class="token punctuation">)</span>   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#sp-table"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'color'</span><span class="token punctuation">,</span> <span class="token string">'rgba(0,0,0,0.6)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">showTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#cd-timeline"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#cd-table"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#sp-table"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">,</span> 'linear<span class="token operator">-</span><span class="token function">gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> #4cbf30 <span class="token number">0</span><span class="token operator">%</span><span class="token punctuation">,</span>                       #0f9d58 <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">)</span>'<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#sp-table"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'color'</span><span class="token punctuation">,</span> <span class="token string">'#fff'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#sp-timeline"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">,</span> <span class="token string">'#F9EBEA'</span><span class="token punctuation">)</span>   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#sp-timeline"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'color'</span><span class="token punctuation">,</span> <span class="token string">'rgba(0,0,0,0.6)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><code>时间列表</code>代码<a id="时间列表"></a>:</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cd-table<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container archive-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> page<span class="token punctuation">.</span>posts<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>archive<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token comment"># year. </span><span class="token delimiter punctuation">%></span></span>                        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">date</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>date<span class="token punctuation">,</span> <span class="token string">'YYYY'</span><span class="token punctuation">)</span> <span class="token operator">!=</span> year<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>                            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> year <span class="token operator">=</span> <span class="token function">date</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>date<span class="token punctuation">,</span> <span class="token string">'YYYY'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span><span class="token delimiter punctuation">%></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>archive-year<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> year </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> year </span><span class="token delimiter punctuation">%></span></span>年                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span>                        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>articles<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>article content><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>article-sort-post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>article-sort-item_title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>path<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fa fa-clock<span class="token punctuation">"</span></span>                                           <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">font-size</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span><span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>                                         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>time</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-text-small<span class="token punctuation">"</span></span> <span class="token attr-name">datetime</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2021-08-20T20:20:00.000Z<span class="token punctuation">"</span></span>                                         <span class="token attr-name">itemprop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>datePublished<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> #ff542d<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                                          <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">date</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>date<span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>                                           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>time</span><span class="token punctuation">></span></span>                                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h6</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>is-6<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>path<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>path<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                               <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> post<span class="token punctuation">.</span>title </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h6</span><span class="token punctuation">></span></span>                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p>然后即可进行本地预览参看效果，当然你也可以自行修改代码实现更优美的效果。</p><blockquote><p>参考博客：<a href="https://blog.csdn.net/u013044713/article/details/120251025">hexo博客搭建及主题优化(二)_5ezuy.top-CSDN博客</a></p></blockquote><h2 id="优化二"><a href="#优化二" class="headerlink" title="优化二"></a>优化二</h2><p>之前的时间列表样式感觉不是很美观，遂起了修改样式的想法。</p><p>于是博览了众多博客，发现了几款非常不错的归档样式：</p><h3 id="样式一"><a href="#样式一" class="headerlink" title="样式一"></a>样式一</h3><h4 id="效果预览-1"><a href="#效果预览-1" class="headerlink" title="效果预览"></a>效果预览</h4><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402161409489.png" alt="样式一"></p><h4 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h4><p>将<a href="#%E6%97%B6%E9%97%B4%E5%88%97%E8%A1%A8">这段代码</a>中卡片的样式删去这四行代码：</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>然后在archive.ejs中加入以下样式代码：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css">&lt;style>    <span class="token comment">/*归档自定义样式*/</span>    <span class="token selector">.archive-container</span><span class="token punctuation">&#123;</span>      <span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>      <span class="token property">-webkit-border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>      <span class="token property">-moz-border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>      <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>      <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.archive:not(:last-child)</span> <span class="token punctuation">&#123;</span>      <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 3rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token selector">.archive .articles</span> <span class="token punctuation">&#123;</span>      <span class="token property">border-left</span><span class="token punctuation">:</span> 1px solid #dbdbdb<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token selector">.archive .article</span> <span class="token punctuation">&#123;</span>      <span class="token property">border-top</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>      <span class="token property">margin-left</span><span class="token punctuation">:</span> -1px<span class="token punctuation">;</span>      <span class="token property">padding</span><span class="token punctuation">:</span> 0.4rem 1.5rem<span class="token punctuation">;</span>      <span class="token property">border-left</span><span class="token punctuation">:</span> 3px solid transparent<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token selector">.archive .article:hover</span> <span class="token punctuation">&#123;</span>      <span class="token property">transition</span><span class="token punctuation">:</span> all .6s<span class="token punctuation">;</span>      <span class="token property">-webkit-transition</span><span class="token punctuation">:</span> all .6s<span class="token punctuation">;</span>      <span class="token property">-o-transition</span><span class="token punctuation">:</span> all .6s<span class="token punctuation">;</span>      <span class="token property">-moz-transition</span><span class="token punctuation">:</span> all .6s<span class="token punctuation">;</span>      <span class="token property">border-left-color</span><span class="token punctuation">:</span> #0f9d58 <span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token selector">.archive .article time</span> <span class="token punctuation">&#123;</span>      <span class="token property">font-size</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>      <span class="token property">color</span><span class="token punctuation">:</span> deeppink<span class="token punctuation">;</span>      <span class="token comment">/* color: darkgray; */</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">article-sort-item_title</span><span class="token punctuation">&#123;</span>      <span class="token property">display</span><span class="token punctuation">:</span> -webkit-box<span class="token punctuation">;</span>      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>      <span class="token property">height</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>      <span class="token property">color</span><span class="token punctuation">:</span> #4c4948<span class="token punctuation">;</span>      <span class="token property">font-size</span><span class="token punctuation">:</span> .75rem<span class="token punctuation">;</span>      <span class="token property">-webkit-transition</span><span class="token punctuation">:</span> all .3s<span class="token punctuation">;</span>      <span class="token property">-moz-transition</span><span class="token punctuation">:</span> all .3s<span class="token punctuation">;</span>      <span class="token property">-o-transition</span><span class="token punctuation">:</span> all .3s<span class="token punctuation">;</span>      <span class="token property">-ms-transition</span><span class="token punctuation">:</span> all .3s<span class="token punctuation">;</span>      <span class="token property">transition</span><span class="token punctuation">:</span> all .3s<span class="token punctuation">;</span>      <span class="token property">-webkit-line-clamp</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>      <span class="token property">-webkit-box-orient</span><span class="token punctuation">:</span> vertical<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token selector">.archive .article h6</span> <span class="token punctuation">&#123;</span>      <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token selector">.archive .article h6 a</span> <span class="token punctuation">&#123;</span>      <span class="token property">line-height</span><span class="token punctuation">:</span> 2.5<span class="token punctuation">;</span>      <span class="token property">color</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>      <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px dashed transparent<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token selector">.archive .article h6 a:hover</span> <span class="token punctuation">&#123;</span>      <span class="token property">border-bottom-color</span><span class="token punctuation">:</span> #0f9d58<span class="token punctuation">;</span>      <span class="token property">padding-left</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>      <span class="token property">transition</span><span class="token punctuation">:</span> all .5s<span class="token punctuation">;</span>      <span class="token property">-webkit-transition</span><span class="token punctuation">:</span> all .5s<span class="token punctuation">;</span>      <span class="token property">-o-transition</span><span class="token punctuation">:</span> all .5s<span class="token punctuation">;</span>      <span class="token property">-moz-transition</span><span class="token punctuation">:</span> all .5s<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token selector">.archive .articles .imgcontent</span><span class="token punctuation">&#123;</span>      <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>      <span class="token property">width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>      <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token selector">.archive .articles .imgcontent .postimg</span><span class="token punctuation">&#123;</span>      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>      <span class="token property">object-fit</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.archive .articles .imgcontent .postimg:hover</span><span class="token punctuation">&#123;</span>      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.3<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token property">transition</span><span class="token punctuation">:</span> all .6s<span class="token punctuation">;</span>      <span class="token property">-webkit-transition</span><span class="token punctuation">:</span> all .6s<span class="token punctuation">;</span>      <span class="token property">-o-transition</span><span class="token punctuation">:</span> all .6s<span class="token punctuation">;</span>      <span class="token property">-moz-transition</span><span class="token punctuation">:</span> all .6s<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.article-sort-post</span><span class="token punctuation">&#123;</span>      <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>      <span class="token property">top</span><span class="token punctuation">:</span> -16px<span class="token punctuation">;</span>      <span class="token property">left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token selector">.hbe-input-container</span><span class="token punctuation">&#123;</span>      <span class="token property">width</span><span class="token punctuation">:</span> 80%<span class="token punctuation">;</span>      <span class="token property">max-width</span><span class="token punctuation">:</span> 800px<span class="token punctuation">;</span>      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>      <span class="token property">margin</span><span class="token punctuation">:</span> 100px auto<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token selector">.hbe-input-container  .btn-decrypt</span><span class="token punctuation">&#123;</span>      <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>      <span class="token property">vertical-align</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span>      <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>      <span class="token property">height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>      <span class="token property">line-height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>      <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>      <span class="token property">color</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span>      <span class="token property">background-color</span><span class="token punctuation">:</span> #3f90ff<span class="token punctuation">;</span>      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>      <span class="token property">-webkit-border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>      <span class="token property">-moz-border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>      <span class="token property">border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.about-cover</span> <span class="token punctuation">&#123;</span>      <span class="token property">height</span><span class="token punctuation">:</span> 50vh<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.desc-content</span><span class="token punctuation">&#123;</span>      <span class="token property">padding</span><span class="token punctuation">:</span> 0 50px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 601px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>      <span class="token selector">.desc-content</span> <span class="token punctuation">&#123;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 0 15px<span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>        <span class="token selector">.v .vlist .vcard</span> <span class="token punctuation">&#123;</span>      <span class="token property">padding-top</span><span class="token punctuation">:</span> 2.5em <span class="token important">!important</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>     &lt;/style><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>样式来源：<a href="https://blog.sky03.cn/archives/">归档 | Sky03我的薰衣草</a></p></blockquote><h3 id="样式二"><a href="#样式二" class="headerlink" title="样式二"></a>样式二</h3><h4 id="效果预览-2"><a href="#效果预览-2" class="headerlink" title="效果预览"></a>效果预览</h4><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402161414820.png" alt="样式二"></p><h4 id="实现-1"><a href="#实现-1" class="headerlink" title="实现"></a>实现</h4><p>暂未处理，有意向者可以去<a href="https://zhangxiaocai.cn/archives/">归档 | 斯莫笔记 (zhangxiaocai.cn)</a>查看</p><h3 id="样式三"><a href="#样式三" class="headerlink" title="样式三"></a>样式三</h3><h4 id="效果预览-3"><a href="#效果预览-3" class="headerlink" title="效果预览"></a>效果预览</h4><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402161410322.png" alt="样式三"></p><h4 id="实现-2"><a href="#实现-2" class="headerlink" title="实现"></a>实现</h4><p>暂未处理，有意向者可以去<a href="https://seayj.cn/archives/">归档 | SeaYJ’s Blog</a>查看</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 归档 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>友链卡片增加悬停旋转效果</title>
      <link href="/posts/775.html"/>
      <url>/posts/775.html</url>
      
        <content type="html"><![CDATA[<h1 id="友链卡片增加旋转效果"><a href="#友链卡片增加旋转效果" class="headerlink" title="友链卡片增加旋转效果"></a>友链卡片增加旋转效果</h1><h2 id="效果预览"><a href="#效果预览" class="headerlink" title="效果预览"></a>效果预览</h2><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402152041617.gif" alt="rotate"></p><h2 id="修改步骤"><a href="#修改步骤" class="headerlink" title="修改步骤"></a>修改步骤</h2><p><code>matery/layout/friend.ejs</code>原代码</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/bg-cover'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">    <span class="token selector">.friends-container</span> <span class="token punctuation">&#123;</span>        <span class="token property">margin-top</span><span class="token punctuation">:</span> -100px<span class="token punctuation">;</span>        <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.friends-container .tag-title</span> <span class="token punctuation">&#123;</span>        <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>        <span class="token property">color</span><span class="token punctuation">:</span> #3C4858<span class="token punctuation">;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1.75rem<span class="token punctuation">;</span>        <span class="token property">font-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.frind-ship img</span> <span class="token punctuation">&#123;</span>        <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/* 以下是按钮样式 */</span>    <span class="token selector">.frind-ship</span> <span class="token punctuation">&#123;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 10px 20px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.frind-ship .title</span> <span class="token punctuation">&#123;</span>        <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>        <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.frind-ship .title div</span> <span class="token punctuation">&#123;</span>        <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>        <span class="token property">padding-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.frind-ship .title img</span> <span class="token punctuation">&#123;</span>        <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>        <span class="token property">flex-shrink</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.frind-ship .title h1</span> <span class="token punctuation">&#123;</span>        <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>        <span class="token property">border-bottom</span><span class="token punctuation">:</span> 2px solid #fff<span class="token punctuation">;</span>        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>        <span class="token property">top</span><span class="token punctuation">:</span>-15px<span class="token punctuation">;</span>        <span class="token property">left</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.friend-button</span> <span class="token punctuation">&#123;</span>        <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>        <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>        <span class="token property">margin-bottom</span><span class="token punctuation">:</span> -27px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.friend-button a</span> <span class="token punctuation">&#123;</span>        <span class="token property">border-radius</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.friend-all .tag-post</span> <span class="token punctuation">&#123;</span>        <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.button-caution</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> #FF4351<span class="token punctuation">;</span>        <span class="token property">border-color</span><span class="token punctuation">:</span> #FF4351<span class="token punctuation">;</span>        <span class="token property">color</span><span class="token punctuation">:</span> #FFF<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.button</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-weight</span><span class="token punctuation">:</span> 300<span class="token punctuation">;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>        <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"Helvetica Neue Light"</span><span class="token punctuation">,</span> <span class="token string">"Helvetica Neue"</span><span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> <span class="token string">"Lucida Grande"</span><span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>        <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>        <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>        <span class="token property">line-height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 0 40px<span class="token punctuation">;</span>        <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>        <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>        <span class="token property">appearance</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>        <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>        <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>        <span class="token property">-webkit-box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>        <span class="token property">-moz-box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>        <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>        <span class="token property">-webkit-transition-property</span><span class="token punctuation">:</span> all<span class="token punctuation">;</span>        <span class="token property">transition-property</span><span class="token punctuation">:</span> all<span class="token punctuation">;</span>        <span class="token property">-webkit-transition-duration</span><span class="token punctuation">:</span> .3s<span class="token punctuation">;</span>        <span class="token property">transition-duration</span><span class="token punctuation">:</span> .3s<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.title</span> <span class="token punctuation">&#123;</span>        <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0rem <span class="token important">!important</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.card</span> <span class="token punctuation">&#123;</span>        <span class="token property">margin</span><span class="token punctuation">:</span> 3rem 0 1rem 0 <span class="token important">!important</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.button-glow.button-caution</span> <span class="token punctuation">&#123;</span>        <span class="token property">-webkit-animation-name</span><span class="token punctuation">:</span> glowing-caution<span class="token punctuation">;</span>        <span class="token property">animation-name</span><span class="token punctuation">:</span> glowing-caution<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token atrule"><span class="token rule">@-webkit-keyframes</span> glowing-caution</span> <span class="token punctuation">&#123;</span>        <span class="token selector">from</span> <span class="token punctuation">&#123;</span>            <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> 0 0 0 <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 67<span class="token punctuation">,</span> 81<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 0 <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 67<span class="token punctuation">,</span> 81<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token selector">50%</span> <span class="token punctuation">&#123;</span>            <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> 0 0 20px <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 67<span class="token punctuation">,</span> 81<span class="token punctuation">,</span> 0.8<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 20px <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 67<span class="token punctuation">,</span> 81<span class="token punctuation">,</span> 0.8<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token selector">to</span> <span class="token punctuation">&#123;</span>            <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> 0 0 0 <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 67<span class="token punctuation">,</span> 81<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 0 <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 67<span class="token punctuation">,</span> 81<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token atrule"><span class="token rule">@keyframes</span> glowing-caution</span> <span class="token punctuation">&#123;</span>        <span class="token selector">from</span> <span class="token punctuation">&#123;</span>            <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> 0 0 0 <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 67<span class="token punctuation">,</span> 81<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 0 <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 67<span class="token punctuation">,</span> 81<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token selector">50%</span> <span class="token punctuation">&#123;</span>            <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> 0 0 20px <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 67<span class="token punctuation">,</span> 81<span class="token punctuation">,</span> 0.8<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 20px <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 67<span class="token punctuation">,</span> 81<span class="token punctuation">,</span> 0.8<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token selector">to</span> <span class="token punctuation">&#123;</span>            <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> 0 0 0 <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 67<span class="token punctuation">,</span> 81<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 0 <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 67<span class="token punctuation">,</span> 81<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.button-caution:hover</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> #ff7680<span class="token punctuation">;</span>        <span class="token property">border-color</span><span class="token punctuation">:</span> #ff7680<span class="token punctuation">;</span>        <span class="token property">color</span><span class="token punctuation">:</span> #FFF<span class="token punctuation">;</span>        <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.frind-card1</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> #4facfe 0%<span class="token punctuation">,</span> #00f2fe 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.frind-card2</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>135deg<span class="token punctuation">,</span> #667eea 0%<span class="token punctuation">,</span> #764ba2 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.frind-card3</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> #b8cbb8 0%<span class="token punctuation">,</span> #b8cbb8 0%<span class="token punctuation">,</span> #b465da 0%<span class="token punctuation">,</span> #cf6cc9 33%<span class="token punctuation">,</span> #ee609c 66%<span class="token punctuation">,</span> #ee609c 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.frind-card4</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> #6a11cb 0%<span class="token punctuation">,</span> #2575fc 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.frind-card5</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to top<span class="token punctuation">,</span> #c471f5 0%<span class="token punctuation">,</span> #fa71cd 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.frind-card6</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to top<span class="token punctuation">,</span> #48c6ef 0%<span class="token punctuation">,</span> #6f86d6 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.frind-card7</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to top<span class="token punctuation">,</span> #0ba360 0%<span class="token punctuation">,</span> #3cba92 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.frind-card8</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to top<span class="token punctuation">,</span> #0c3483 0%<span class="token punctuation">,</span> #a2b6df 100%<span class="token punctuation">,</span> #6b8cce 100%<span class="token punctuation">,</span> #a2b6df 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.frind-card9</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> #ff758c 0%<span class="token punctuation">,</span> #ff7eb3 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.frind-card10</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to top<span class="token punctuation">,</span> #f77062 0%<span class="token punctuation">,</span> #fe5196 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">article .card</span> <span class="token punctuation">&#123;</span>        <span class="token property">overflow</span><span class="token punctuation">:</span> visible <span class="token important">!important</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container friends-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tag-title center-align<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fas fa-address-book<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> <span class="token function">__</span><span class="token punctuation">(</span><span class="token string">'friends'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>friends-link<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>site<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> site<span class="token punctuation">.</span>data<span class="token punctuation">.</span>friends<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>                    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">var</span> friends <span class="token operator">=</span> site<span class="token punctuation">.</span>data<span class="token punctuation">.</span>friends<span class="token punctuation">;</span> </span><span class="token delimiter punctuation">%></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row tags-posts friend-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> friends<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>                        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">var</span> friend <span class="token operator">=</span> friends<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> </span><span class="token delimiter punctuation">%></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col s12 m6 l4 friend-div<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zoom-in-up<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card frind-card<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>frind-ship<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span>friend<span class="token punctuation">.</span>avatar<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>                                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>friend-name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> friend<span class="token punctuation">.</span>name </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>                                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span><span class="token property">top</span><span class="token punctuation">:</span> -35px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> friend<span class="token punctuation">.</span>introduction </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>friend-button<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span>friend<span class="token punctuation">.</span>url<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span>                                            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button button-glow button-rounded button-caution<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> friend<span class="token punctuation">.</span>title </span><span class="token delimiter punctuation">%></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>page<span class="token punctuation">.</span>content <span class="token operator">&amp;&amp;</span> page<span class="token punctuation">.</span>content<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> page<span class="token punctuation">.</span>content </span><span class="token delimiter punctuation">%></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>gitalk <span class="token operator">&amp;&amp;</span> theme<span class="token punctuation">.</span>gitalk<span class="token punctuation">.</span>enable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/gitalk'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>gitment<span class="token punctuation">.</span>enable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/gitment'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>disqus<span class="token punctuation">.</span>enable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/disqus'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>livere <span class="token operator">&amp;&amp;</span> theme<span class="token punctuation">.</span>livere<span class="token punctuation">.</span>enable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/livere'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>valine <span class="token operator">&amp;&amp;</span> theme<span class="token punctuation">.</span>valine<span class="token punctuation">.</span>enable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/valine'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#friends-link'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">masonry</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            <span class="token literal-property property">itemSelector</span><span class="token operator">:</span> <span class="token string">'.friend-div'</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>在<code>.frind-ship .title img</code>中添加一行代码：<code>transition: all 1s;</code></p></li><li><p>在<code>.frind-ship .title img</code>添加：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* 悬浮旋转 */</span><span class="token selector">.friend-div:hover .title img</span> <span class="token punctuation">&#123;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-ms-transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-moz-transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-o-transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p>最后使用hexo cl &amp;&amp; hexo g &amp;&amp; hexo s即可一键插看效果。</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 友链 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>新建文章自动打开编辑器</title>
      <link href="/posts/24ab.html"/>
      <url>/posts/24ab.html</url>
      
        <content type="html"><![CDATA[<h1 id="新建文章自动打开编辑器"><a href="#新建文章自动打开编辑器" class="headerlink" title="新建文章自动打开编辑器"></a>新建文章自动打开编辑器</h1><h2 id="新建文章自动打开typora"><a href="#新建文章自动打开typora" class="headerlink" title="新建文章自动打开typora"></a>新建文章自动打开typora</h2><p>在博客文件根目录新建<code>scripts</code>目录，在目录下新建<code>auto_open.js</code>，添加以下代码：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> spawn <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'child_process'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spawn<span class="token punctuation">;</span> hexo<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'new'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token function">spawn</span><span class="token punctuation">(</span><span class="token string">'E:/Typora/typora/Typora.exe'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>data<span class="token punctuation">.</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>注意：一定要找准你需要的编辑器所在的路径</p></blockquote><h2 id="新建文章自动打开本地Vim编辑器"><a href="#新建文章自动打开本地Vim编辑器" class="headerlink" title="新建文章自动打开本地Vim编辑器"></a>新建文章自动打开本地Vim编辑器</h2><p>对于Linux , MacOS 等类UNIX系统用户，在终端中输入<code>vim $hexo/scripts/auto_open.js</code></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> spawn <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'child_process'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spawn<span class="token punctuation">;</span><span class="token comment">// Hexo 3</span>hexo<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'new'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">spawn</span><span class="token punctuation">(</span><span class="token string">'vim'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>data<span class="token punctuation">.</span>path<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">stdio</span><span class="token operator">:</span> <span class="token string">'inherit'</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 自动化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自定义鼠标样式</title>
      <link href="/posts/dafc.html"/>
      <url>/posts/dafc.html</url>
      
        <content type="html"><![CDATA[<h1 id="自定义鼠标样式"><a href="#自定义鼠标样式" class="headerlink" title="自定义鼠标样式"></a>自定义鼠标样式</h1><h2 id="方式一"><a href="#方式一" class="headerlink" title="方式一"></a>方式一</h2><ol><li><p>首先将鼠标样式下载到本地，推荐到<a href="https://zhutix.com/ico/ori-cursors/">致美化</a>下载自己喜欢的鼠标样式，放在主题文件夹下的medias目录下</p></li><li><p>打开<code>themes\matery\source\css</code>下的<strong>my.css</strong>文件，添加内容如下：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">*</span><span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"/medias/imgs/zhengchang.ico"</span><span class="token punctuation">)</span></span><span class="token punctuation">,</span>auto<span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">:active</span><span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"/medias/imgs/dianji.ico"</span><span class="token punctuation">)</span></span><span class="token punctuation">,</span>auto<span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">butterfly:在 /themes/butterfly/source/css路径下创建一个mouse.css文件，在文件中添加如下代码： body</span> <span class="token punctuation">&#123;</span>   <span class="token property">cursor</span><span class="token punctuation">:</span><span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@latest/Hexo/img/default.cur<span class="token punctuation">)</span></span><span class="token punctuation">,</span>         default<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token selector">a, img</span> <span class="token punctuation">&#123;</span>   <span class="token property">cursor</span><span class="token punctuation">:</span><span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@latest/Hexo/img/pointer.cur<span class="token punctuation">)</span></span><span class="token punctuation">,</span>         default<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>打开站点主题配置文件_config.butterfly.yml，找到inject，在head处直接引入该文件：<span class="token property">inject</span><span class="token punctuation">:</span><span class="token property">head</span><span class="token punctuation">:</span>- &lt;link rel=<span class="token string">"stylesheet"</span> href=<span class="token string">"/css/mouse.css"</span>><span class="token property">原文链接：https</span><span class="token punctuation">:</span>//blog.csdn.net/qq_60750453/article/details/124716738<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><p>seaYJ</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* build time:Sun Jun 16 2024 21:33:57 GMT+0800 (中国标准时间)*/</span><span class="token selector">body,div,html,span</span> <span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>/cursor/normal.png<span class="token punctuation">)</span></span><span class="token punctuation">,</span>auto<span class="token important">!important</span><span class="token punctuation">&#125;</span><span class="token selector">#vcomments svg,a,button</span> <span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>/cursor/a.png<span class="token punctuation">)</span></span><span class="token punctuation">,</span>auto<span class="token important">!important</span><span class="token punctuation">&#125;</span><span class="token selector">::-moz-selection</span> <span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>/cursor/love.png<span class="token punctuation">)</span></span><span class="token punctuation">,</span>auto<span class="token important">!important</span><span class="token punctuation">&#125;</span><span class="token selector">::selection,img,pre,select</span> <span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>/cursor/love.png<span class="token punctuation">)</span></span><span class="token punctuation">,</span>auto<span class="token important">!important</span><span class="token punctuation">&#125;</span><span class="token selector">input,textarea</span> <span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>/cursor/input.png<span class="token punctuation">)</span></span><span class="token punctuation">,</span>auto<span class="token important">!important</span><span class="token punctuation">&#125;</span><span class="token selector">.celeste canvas</span> <span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>/cursor/move.png<span class="token punctuation">)</span></span><span class="token punctuation">,</span>auto<span class="token important">!important</span><span class="token punctuation">&#125;</span><span class="token comment">/* rebuild by neat */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a href="https://blog.csdn.net/qq_60750453/article/details/124716738">Hexo修改鼠标样式_hexo好看的光标-CSDN博客</a></p><p>[Hexo之自定义鼠标样式 | 遇见西门 (simon96.online)](<a href="https://www.simon96.online/2018/11/16/hexo-do-mouse/#:~:text=%E8%87%AA%E5%AE%9A%E4%B9%89%E9%BC%A0%E6%A0%87%E6%A0%B7%E5%BC%8F%E6%89%93%E5%BC%80">https://www.simon96.online/2018/11/16/hexo-do-mouse/#:~:text=自定义鼠标样式打开</a> themes%2F*%2Fsource%2Fcss%2F_custom%2Fcustom.styl%2C在里面写下如下代码： 1234567%2F%2F 鼠标样式 *,%26%23123%3B cursor%3A url(%26quot%3Bhttp%3A%2F%2Fom8u46rmb.bkt.clouddn.com%2Fsword2.ico%26quot%3B)%2Cauto!important %26%23125%3B %3Aactive %26%23123%3B)</p><p><a href="https://kainote.top/2022/01/07/hexo%E8%87%AA%E5%AE%9A%E4%B9%89%E9%BC%A0%E6%A0%87%E6%8C%87%E9%92%88%E6%A0%B7%E5%BC%8F/">hexo自定义鼠标指针样式 | KAI’S NOTE (kainote.top)</a></p><h2 id="方式二"><a href="#方式二" class="headerlink" title="方式二"></a>方式二</h2><p>添加同心圆鼠标样式</p><ol><li><p>在<code>matery\source\js\</code>下新建文件<code>cursor.js</code>，粘贴如下代码：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">CURSOR</span><span class="token punctuation">;</span>Math<span class="token punctuation">.</span><span class="token function-variable function">lerp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> n<span class="token punctuation">)</span> <span class="token operator">*</span> a <span class="token operator">+</span> n <span class="token operator">*</span> b<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token function-variable function">getStyle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> attr</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> window<span class="token punctuation">.</span>getComputedStyle            <span class="token operator">?</span> window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">[</span>attr<span class="token punctuation">]</span>            <span class="token operator">:</span> el<span class="token punctuation">.</span>currentStyle<span class="token punctuation">[</span>attr<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Cursor</span> <span class="token punctuation">&#123;</span>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">curr</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token literal-property property">prev</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pt <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> top</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>cursor<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>left<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>cursor<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>top<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>cursor<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>cursor <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>cursor<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">"cursor"</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>cursor<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hidden"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cursor<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pt <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'*[style*="cursor:pointer"]'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=></span> el<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>scr <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"style"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//可自行定义鼠标的尺寸和颜色，支持RGB写法和英文名称写法，如green</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>scr<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">* &#123;cursor: url("data:image/svg+xml,&lt;svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12px' height='12px'>&lt;circle cx='6' cy='6' r='6' opacity='1.0' fill='rgb(57, 197, 187)'/>&lt;/svg>") 6 6, auto&#125;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>scr<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>cursor<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"hover"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>cursor<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"active"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">curr</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token literal-property property">prev</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pt <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseover'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pt<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>cursor<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hover"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseout'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pt<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>cursor<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"hover"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>curr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>curr <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">x</span><span class="token operator">:</span> e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> <span class="token number">8</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>cursor<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"hidden"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseenter'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>cursor<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"hidden"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseleave'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>cursor<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hidden"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousedown'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>cursor<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"active"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseup'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>cursor<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"active"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>prev<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">lerp</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>curr<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token number">0.15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">lerp</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>curr<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token number">0.15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>curr<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token constant">CURSOR</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token constant">CURSOR</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>在<code>themes\matery\source\css\my.css</code>中加入</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">#cursor</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>     <span class="token property">height</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>     <span class="token property">border-radius</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>     <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>57<span class="token punctuation">,</span> 197<span class="token punctuation">,</span> 187<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 可修改颜色 */</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.25<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 10086<span class="token punctuation">;</span>    <span class="token property">pointer-events</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> 0.2s ease-in-out<span class="token punctuation">;</span>    <span class="token property">transition-property</span><span class="token punctuation">:</span> background<span class="token punctuation">,</span> opacity<span class="token punctuation">,</span> transform<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>2.0<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 使用 transform 放大 2.0 倍 */</span><span class="token punctuation">&#125;</span><span class="token selector">#cursor.hidden</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">#cursor.hover</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.1<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>2.5<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>2.5<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-moz-transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>2.5<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-ms-transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>2.5<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-o-transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>2.5<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">#cursor.active</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-moz-transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-ms-transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-o-transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>在<code>themes\matery\layout\layout.ejs</code>中加入</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>jsDelivr<span class="token punctuation">.</span>url </span><span class="token delimiter punctuation">%></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span><span class="token string">'/js/cursor.js'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>确保在<code>themes\matery\_config.yml</code>的libs中的css和js中引入了<code>my.css</code>和<code>cursor.js</code></p></blockquote></li><li><p>使用hexo s查看效果<br><img src="https://s2.loli.net/2024/06/23/LIzU3tCeSxprbV7.gif" alt="效果演示"></p></li></ol><h2 id="参考代码"><a href="#参考代码" class="headerlink" title="参考代码"></a>参考代码</h2><ul><li><a href="https://haosirl.gitee.io/2022/01/23/bo-ke-xiu-gai-shu-biao-yang-shi/">博客修改鼠标样式 | 豪先生博客 (gitee.io)</a></li><li><a href="https://javalog.cn/post/hexo-yalia-mouse-cursor.html">给Hexo的Yilia主题增加好看的鼠标指针图标 | JAVA日志 (javalog.cn)</a></li><li><a href="https://blog.csdn.net/qq_60750453/article/details/124716738">Hexo修改鼠标样式_hexo好看的光标-CSDN博客</a></li><li><a href="https://www.fomal.cc/posts/9ac969bb.html">分类: 魔改教程 | Fomalhaut🥝</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 鼠标样式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>梦幻背景</title>
      <link href="/posts/ede0.html"/>
      <url>/posts/ede0.html</url>
      
        <content type="html"><![CDATA[<h2 id="预览效果"><a href="#预览效果" class="headerlink" title="预览效果"></a>预览效果</h2><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402131725476.gif" alt="dreamland"></p><h2 id="博文历程"><a href="#博文历程" class="headerlink" title="博文历程"></a>博文历程</h2><p>说实话，这篇博客能完成，我深感惊喜，因为之前在这篇<a href="https://blog.csdn.net/Zz_cheng/article/details/116719634">博文</a>，见到了一种非常好看的动态背景，无奈因原博文的关键代码图片链接失效了(canvas_moving.js)，所以当时无法在自己的网站上实现，尽管我努力尝试通过网上搜寻该博主相关信息，企图通过蛛丝马迹找到一些残留的线索，很遗憾没有找到。</p><p>然而我实在是不愿意轻易放弃这个动态背景，在网络上四处查找类似效果的网站或相关教程，但是结果却不尽人意。抱着碰运气的心态，我后面又陆续找了一段时间，但是依旧无果。本以为真是有缘无份，时隔6个月，今天却通过一个之前发现过的博客网站的一个友链找到了：<a href="https://www.mobaijun.com/">框架師 (mobaijun.com)</a>，这位大佬使用的正是这个背景。oh my god，激动之情溢于言表，有一种柳暗花明的感觉。</p><p>于是我立马进入这位大佬的博客里观摩一番，却没有找到相关教程，同时也注意到这位大佬的申明<code>“本站不接受任何的个性化需求的求助类咨询，任何有关个性化需求的求助类问题一律不予回复，诸如“求…资源”等问题”</code>，看来想走捷径是不可能了，只好自己动手了——F12启动！</p><p>于是成功发现了博文所缺失的关键部分的样式代码——<a href="https://tencent.cos.mobaijun.com/libs/others/canva_moving_effect.js">canva_moving_effect.js</a></p><p>原代码未格式化，这里给出格式化后的canvas_moving.js代码：<a id="canvas_moving.js"></a></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> canvas <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#Dreamland"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token string">"canvas"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        background <span class="token operator">=</span> canvas<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        foreground1 <span class="token operator">=</span> canvas<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        foreground2 <span class="token operator">=</span> canvas<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        config <span class="token operator">=</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">circle</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">amount</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>                <span class="token literal-property property">layer</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>                <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">157</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">207</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                <span class="token literal-property property">alpha</span><span class="token operator">:</span> <span class="token number">0.3</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">line</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">amount</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>                <span class="token literal-property property">layer</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>                <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                <span class="token literal-property property">alpha</span><span class="token operator">:</span> <span class="token number">0.3</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">speed</span><span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span>            <span class="token literal-property property">angle</span><span class="token operator">:</span> <span class="token number">20</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>background<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> bctx <span class="token operator">=</span> background<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            fctx1 <span class="token operator">=</span> foreground1<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            fctx2 <span class="token operator">=</span> foreground2<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token constant">M</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>Math<span class="token punctuation">,</span>            degree <span class="token operator">=</span> config<span class="token punctuation">.</span>angle <span class="token operator">/</span> <span class="token number">360</span> <span class="token operator">*</span> <span class="token constant">M</span><span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span>            circles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            lines <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            wWidth<span class="token punctuation">,</span>            wHeight<span class="token punctuation">,</span>            timer<span class="token punctuation">;</span>        <span class="token keyword">var</span> <span class="token function-variable function">setCanvasHeight</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            wWidth <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            wHeight <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            canvas<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> wWidth<span class="token punctuation">;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> wHeight<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> <span class="token function-variable function">drawCircle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius<span class="token punctuation">,</span> color<span class="token punctuation">,</span> alpha</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> gradient <span class="token operator">=</span> fctx1<span class="token punctuation">.</span><span class="token function">createRadialGradient</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"rgba("</span> <span class="token operator">+</span> color<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> color<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> color<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> alpha <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"rgba("</span> <span class="token operator">+</span> color<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> color<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> color<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> <span class="token punctuation">(</span>alpha <span class="token operator">-</span> <span class="token number">0.1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            fctx1<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            fctx1<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">M</span><span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            fctx1<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> gradient<span class="token punctuation">;</span>            fctx1<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> <span class="token function-variable function">drawLine</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> width<span class="token punctuation">,</span> color<span class="token punctuation">,</span> alpha</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> endX <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>degree<span class="token punctuation">)</span> <span class="token operator">*</span> width<span class="token punctuation">,</span>                endY <span class="token operator">=</span> y <span class="token operator">-</span> <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>degree<span class="token punctuation">)</span> <span class="token operator">*</span> width<span class="token punctuation">,</span>                gradient <span class="token operator">=</span> fctx2<span class="token punctuation">.</span><span class="token function">createLinearGradient</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> endX<span class="token punctuation">,</span> endY<span class="token punctuation">)</span><span class="token punctuation">;</span>            gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"rgba("</span> <span class="token operator">+</span> color<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> color<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> color<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> alpha <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"rgba("</span> <span class="token operator">+</span> color<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> color<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> color<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> <span class="token punctuation">(</span>alpha <span class="token operator">-</span> <span class="token number">0.1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            fctx2<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            fctx2<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>            fctx2<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>endX<span class="token punctuation">,</span> endY<span class="token punctuation">)</span><span class="token punctuation">;</span>            fctx2<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>            fctx2<span class="token punctuation">.</span>lineCap <span class="token operator">=</span> <span class="token string">"round"</span><span class="token punctuation">;</span>            fctx2<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> gradient<span class="token punctuation">;</span>            fctx2<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> <span class="token function-variable function">drawBack</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            bctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> wWidth<span class="token punctuation">,</span> wHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> gradient <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            gradient<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> bctx<span class="token punctuation">.</span><span class="token function">createRadialGradient</span><span class="token punctuation">(</span>wWidth <span class="token operator">*</span> <span class="token number">0.3</span><span class="token punctuation">,</span> wHeight <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> wWidth <span class="token operator">*</span> <span class="token number">0.3</span><span class="token punctuation">,</span> wHeight <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">,</span> wWidth <span class="token operator">*</span> <span class="token number">0.9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            gradient<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"rgb(118,128,128)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            gradient<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"transparent"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            bctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>wWidth<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            bctx<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            bctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            bctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> gradient<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            bctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> wWidth<span class="token punctuation">,</span> wHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>            gradient<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> bctx<span class="token punctuation">.</span><span class="token function">createRadialGradient</span><span class="token punctuation">(</span>wWidth <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">,</span> wHeight <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> wWidth <span class="token operator">*</span> <span class="token number">0.3</span><span class="token punctuation">,</span> wHeight <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">,</span> wWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>            gradient<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"rgb(0, 150, 240)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            gradient<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token string">"transparent"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            bctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>wWidth<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            bctx<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            bctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            bctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> gradient<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            bctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> wWidth<span class="token punctuation">,</span> wHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>            gradient<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> bctx<span class="token punctuation">.</span><span class="token function">createRadialGradient</span><span class="token punctuation">(</span>wWidth <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">,</span> wHeight <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> wWidth <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">,</span> wHeight <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">,</span> wWidth <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            gradient<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"rgb(40, 20, 105)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            gradient<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"transparent"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            bctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            bctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> gradient<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            bctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> wWidth<span class="token punctuation">,</span> wHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> <span class="token function-variable function">animate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> sin <span class="token operator">=</span> <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>degree<span class="token punctuation">)</span><span class="token punctuation">,</span>                cos <span class="token operator">=</span> <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>degree<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>circle<span class="token punctuation">.</span>amount <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span>circle<span class="token punctuation">.</span>layer <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                fctx1<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> wWidth<span class="token punctuation">,</span> wHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> circles<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">var</span> item <span class="token operator">=</span> circles<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>                        x <span class="token operator">=</span> item<span class="token punctuation">.</span>x<span class="token punctuation">,</span>                        y <span class="token operator">=</span> item<span class="token punctuation">.</span>y<span class="token punctuation">,</span>                        radius <span class="token operator">=</span> item<span class="token punctuation">.</span>radius<span class="token punctuation">,</span>                        speed <span class="token operator">=</span> item<span class="token punctuation">.</span>speed<span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">></span> wWidth <span class="token operator">+</span> radius<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        x <span class="token operator">=</span> <span class="token operator">-</span>radius<span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&lt;</span> <span class="token operator">-</span>radius<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        x <span class="token operator">=</span> wWidth <span class="token operator">+</span> radius<span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                        x <span class="token operator">+=</span> sin <span class="token operator">*</span> speed<span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">></span> wHeight <span class="token operator">+</span> radius<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        y <span class="token operator">=</span> <span class="token operator">-</span>radius<span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">&lt;</span> <span class="token operator">-</span>radius<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        y <span class="token operator">=</span> wHeight <span class="token operator">+</span> radius<span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                        y <span class="token operator">-=</span> cos <span class="token operator">*</span> speed<span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                    item<span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>                    item<span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>                    <span class="token function">drawCircle</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius<span class="token punctuation">,</span> item<span class="token punctuation">.</span>color<span class="token punctuation">,</span> item<span class="token punctuation">.</span>alpha<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>line<span class="token punctuation">.</span>amount <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span>line<span class="token punctuation">.</span>layer <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                fctx2<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> wWidth<span class="token punctuation">,</span> wHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> lines<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">var</span> item <span class="token operator">=</span> lines<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>                        x <span class="token operator">=</span> item<span class="token punctuation">.</span>x<span class="token punctuation">,</span>                        y <span class="token operator">=</span> item<span class="token punctuation">.</span>y<span class="token punctuation">,</span>                        width <span class="token operator">=</span> item<span class="token punctuation">.</span>width<span class="token punctuation">,</span>                        speed <span class="token operator">=</span> item<span class="token punctuation">.</span>speed<span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">></span> wWidth <span class="token operator">+</span> width <span class="token operator">*</span> sin<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        x <span class="token operator">=</span> <span class="token operator">-</span>width <span class="token operator">*</span> sin<span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&lt;</span> <span class="token operator">-</span>width <span class="token operator">*</span> sin<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        x <span class="token operator">=</span> wWidth <span class="token operator">+</span> width <span class="token operator">*</span> sin<span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                        x <span class="token operator">+=</span> sin <span class="token operator">*</span> speed<span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">></span> wHeight <span class="token operator">+</span> width <span class="token operator">*</span> cos<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        y <span class="token operator">=</span> <span class="token operator">-</span>width <span class="token operator">*</span> cos<span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">&lt;</span> <span class="token operator">-</span>width <span class="token operator">*</span> cos<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        y <span class="token operator">=</span> wHeight <span class="token operator">+</span> width <span class="token operator">*</span> cos<span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                        y <span class="token operator">-=</span> cos <span class="token operator">*</span> speed<span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                    item<span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>                    item<span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>                    <span class="token function">drawLine</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> width<span class="token punctuation">,</span> item<span class="token punctuation">.</span>color<span class="token punctuation">,</span> item<span class="token punctuation">.</span>alpha<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            timer <span class="token operator">=</span> <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> <span class="token function-variable function">createItem</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            circles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            lines <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>circle<span class="token punctuation">.</span>amount <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span>circle<span class="token punctuation">.</span>layer <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> config<span class="token punctuation">.</span>circle<span class="token punctuation">.</span>amount <span class="token operator">/</span> config<span class="token punctuation">.</span>circle<span class="token punctuation">.</span>layer<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> config<span class="token punctuation">.</span>circle<span class="token punctuation">.</span>layer<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        circles<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                            <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> wWidth<span class="token punctuation">,</span>                            <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> wHeight<span class="token punctuation">,</span>                            <span class="token literal-property property">radius</span><span class="token operator">:</span> <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">20</span> <span class="token operator">+</span> j <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">20</span> <span class="token operator">+</span> j <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                            <span class="token literal-property property">color</span><span class="token operator">:</span> config<span class="token punctuation">.</span>circle<span class="token punctuation">.</span>color<span class="token punctuation">,</span>                            <span class="token literal-property property">alpha</span><span class="token operator">:</span> <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>circle<span class="token punctuation">.</span>alpha <span class="token operator">-</span> j <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                            <span class="token literal-property property">speed</span><span class="token operator">:</span> config<span class="token punctuation">.</span>speed <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> j <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">)</span>                        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>line<span class="token punctuation">.</span>amount <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span>line<span class="token punctuation">.</span>layer <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> m <span class="token operator">&lt;</span> config<span class="token punctuation">.</span>line<span class="token punctuation">.</span>amount <span class="token operator">/</span> config<span class="token punctuation">.</span>line<span class="token punctuation">.</span>layer<span class="token punctuation">;</span> m<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> config<span class="token punctuation">.</span>line<span class="token punctuation">.</span>layer<span class="token punctuation">;</span> n<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        lines<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                            <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> wWidth<span class="token punctuation">,</span>                            <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> wHeight<span class="token punctuation">,</span>                            <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">20</span> <span class="token operator">+</span> n <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">20</span> <span class="token operator">+</span> n <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                            <span class="token literal-property property">color</span><span class="token operator">:</span> config<span class="token punctuation">.</span>line<span class="token punctuation">.</span>color<span class="token punctuation">,</span>                            <span class="token literal-property property">alpha</span><span class="token operator">:</span> <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>line<span class="token punctuation">.</span>alpha <span class="token operator">-</span> n <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                            <span class="token literal-property property">speed</span><span class="token operator">:</span> config<span class="token punctuation">.</span>speed <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> n <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">)</span>                        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>            timer <span class="token operator">=</span> <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">drawBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">setCanvasHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">createItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">setCanvasHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">createItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="设置步骤"><a href="#设置步骤" class="headerlink" title="设置步骤"></a>设置步骤</h2><h3 id="layout-ejs"><a href="#layout-ejs" class="headerlink" title="layout.ejs"></a>layout.ejs</h3><p>使用html5的canvas，配合jQuery库实现，实现代码：</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token comment">&lt;!--动态背景--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Dreamland<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/js/canvas_moving.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在<code>/themes/matery/layout/layout.ejs</code>文件中加入以上代码。</p><blockquote><p>注意：一定要事先查看是否引入<strong>jQuery依赖</strong>，一定要有！！！</p><p>要检查是否引入了jQuery依赖，可以按照以下步骤进行：</p><ol><li><p><strong>查看页面源代码</strong>：在浏览器中打开你想要检查的页面，然后右键点击页面上的空白区域，选择“查看页面源代码”或者“检查元素”。在源代码中搜索关键词“jQuery”或者“$”，看看是否有相关的引入语句。</p></li><li><p><strong>检查页面加载的资源</strong>：在浏览器中使用开发者工具（通常通过按下F12键或右键点击页面并选择“检查”来打开）查看页面加载的资源。在网络选项卡中，可以看到页面加载的所有文件，包括JavaScript文件。检查是否有名为“jQuery”的JavaScript文件加载。</p></li><li><p><strong>查看页面的JavaScript代码</strong>：在源代码或者开发者工具中查看页面的JavaScript代码，查找是否有使用“$”或“jQuery”关键字的地方。如果有，那么很可能是引入了jQuery依赖。</p></li><li><p><strong>查看HTML中的script标签</strong>：查看HTML代码中的script标签，看是否有引入jQuery的CDN链接或者本地文件路径。</p></li><li><p><strong>查看站点配置文件</strong>：如果是通过Hexo或者其他静态网站生成器构建的站点，可以查看站点的配置文件，通常在根目录下的_config.yml或者_config.js文件中，查找是否有引入jQuery的配置项。</p></li></ol><p>通过以上方法，你应该能够确定是否在页面中引入了jQuery依赖。</p></blockquote><h3 id="matery-css"><a href="#matery-css" class="headerlink" title="matery.css"></a>matery.css</h3><p>在<code>themes/matery/source/css/matery.css</code>最后添加以下代码：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/*动态背景*/</span><span class="token selector">#Dreamland</span> <span class="token punctuation">&#123;</span><span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span><span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">#Dreamland canvas</span> <span class="token punctuation">&#123;</span><span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span><span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="canvas-moving-js"><a href="#canvas-moving-js" class="headerlink" title="canvas_moving.js"></a>canvas_moving.js</h3><p>在<code>themes\hexo-theme-matery\source\js</code>下新建<code>canvas_moving.js</code>文件，添加<a href="#canvas_moving.js">前面的代码</a></p><p>最后执行<code>hexo cl &amp;&amp; hexo g &amp;&amp; hexo s</code> 一键进行本地查看效果，修改无误后使用<code>hexo d</code>进行部署。</p><h2 id="参考博文"><a href="#参考博文" class="headerlink" title="参考博文"></a>参考博文</h2><ul><li><a href="https://blog.csdn.net/Zz_cheng/article/details/116719634">2021 hexo matery主题个性魔改_hexo主题雪花飘落-CSDN博客</a></li><li><a href="https://www.mobaijun.com/">框架師 (mobaijun.com)</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 背景 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机科学速成课</title>
      <link href="/posts/5d3a.html"/>
      <url>/posts/5d3a.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>md格式优化</title>
      <link href="/posts/2eb3.html"/>
      <url>/posts/2eb3.html</url>
      
        <content type="html"><![CDATA[<h1 id="md样式修改"><a href="#md样式修改" class="headerlink" title="md样式修改"></a>md样式修改</h1><h2 id="背景修改"><a href="#背景修改" class="headerlink" title="背景修改"></a>背景修改</h2><p>原代码</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">&#123;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> #eaeaea<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #34495e<span class="token punctuation">;</span>    <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>优化</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">&#123;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> #eaeaea<span class="token punctuation">;</span><span class="token comment">/* 背景颜色 */</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>   <span class="token comment">/* 边距 */</span>    <span class="token property">color</span><span class="token punctuation">:</span> #34495e<span class="token punctuation">;</span>      <span class="token comment">/* 文字颜色 */</span>    <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>        <span class="token comment">/* background: linear-gradient(60deg, #3ab5b0 0%, #3d99be 31%, #56317a 100%); */</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>123deg<span class="token punctuation">,</span> #eec7ee 0%<span class="token punctuation">,</span> #90e2ea 50%<span class="token punctuation">,</span> #c1f7b3 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/* 渐变背景色 */</span>    <span class="token property">background-attachment</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>    <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>优化后的代码主要在以下几个方面进行了改进：</p><ol><li><p>添加了注释，使代码更具可读性。</p></li><li><p><strong>渐变背景：</strong></p><ul><li>引入了渐变背景，通过<code>linear-gradient</code>属性创建一个颜色渐变效果，使页面背景更具视觉吸引力。</li><li>使用了更生动和搭配的颜色，增强了页面的整体美感。</li></ul></li><li><p><strong>背景附着和尺寸：</strong></p><ul><li>添加了<code>background-attachment: fixed;</code>属性，使背景固定在视口中，而不随页面滚动而滚动。</li><li>设置了<code>background-size: cover;</code>，确保背景图片始终覆盖整个视口，不会出现不完整或拉伸的情况。</li></ul></li></ol><h2 id="标题优化"><a href="#标题优化" class="headerlink" title="标题优化"></a>标题优化</h2><p>原标题只有一种颜色，在文章里没有区分度，所以决定对标签颜色进行修改。</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402051945970.png" alt="修改前"></p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402051941232.png" alt="修改后"></p><p>原代码</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">h1</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 48px 0 22px -5px<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 2.0rem<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 2.0rem<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">h2</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 42px 0 18px -5px<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.8rem<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 1.8rem<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">h3</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 38px 0 15px -4px<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.6rem<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 1.7rem<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">h4</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 32px 0 12px -4px<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.45rem<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 1.45rem<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">h5</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 28px 0 8px -4px<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.2rem<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 1.2rem<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">h6</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 22px 0 4px -4px<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.1rem<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 1.1rem<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>优化代码</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* 标题1样式 */</span><span class="token selector">h1</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 48px 0 22px -5px<span class="token punctuation">;</span>       <span class="token comment">/* 上、下、左边距 */</span>    <span class="token comment">/*font-size: 2.0rem;*/</span>              <span class="token comment">/* 字体大小 */</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 2.2rem<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>              <span class="token comment">/* 字体粗细 */</span>    <span class="token comment">/*line-height: 2.0rem;*/</span>            <span class="token comment">/* 行高 */</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 2.2rem<span class="token punctuation">;</span>    <span class="token comment">/* color: #42b983 !important; */</span>    <span class="token property">color</span><span class="token punctuation">:</span> #7fbaf1 <span class="token important">!important</span><span class="token punctuation">;</span>    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>             <span class="token comment">/* 新增居中样式 */</span><span class="token punctuation">&#125;</span><span class="token comment">/* 标题2样式 */</span><span class="token selector">h2</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 42px 0 18px -5px<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.8rem<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 1.8rem<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #42b983 <span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 标题3样式 */</span><span class="token selector">h3</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 38px 0 15px -4px<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span>    <span class="token comment">/* color: #42b983 !important; */</span>    <span class="token property">color</span><span class="token punctuation">:</span> #9b59b6 <span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 标题4样式 */</span><span class="token selector">h4</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 32px 0 12px -4px<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.4rem<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 1.4rem<span class="token punctuation">;</span>    <span class="token comment">/* color: #42b983 !important; */</span>    <span class="token property">color</span><span class="token punctuation">:</span> #ff5733 <span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 标题5样式 */</span><span class="token selector">h5</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 28px 0 8px -4px<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.2rem<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 1.2rem<span class="token punctuation">;</span>    <span class="token comment">/* color: #42b983 !important; */</span>    <span class="token property">color</span><span class="token punctuation">:</span> #9b59b6 <span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 标题6样式 */</span><span class="token selector">h6</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 22px 0 4px -4px<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.1rem<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 1.1rem<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> 500<span class="token punctuation">;</span>    <span class="token comment">/* color: #b94252 !important; */</span>    <span class="token property">color</span><span class="token punctuation">:</span> #e74c3c <span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>修改说明：</p><ol><li><p>修改了字体大小和行高，使标题间更具区分度</p></li><li><p>修改自定义颜色，使每级标题具有不同的颜色，扩大区分度。博主不是很懂颜色搭配，如果有其他更舒适的颜色配置可以在下面留言框留言(⊙o⊙)哦</p></li><li><p>新增标题居中：<code>text-align: center;</code><br>这里我只设置了二级标题居中，有需要的可以自行设置其他居中，这里我给出所有标题居中的设置：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">h1, h2, h3, h4, h5, h6</span> <span class="token punctuation">&#123;</span>    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>如果只是设置某一级标题居中，可以只在该级标题中插入<code>text-align: center;</code></p></li></ol><h2 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h2><p>分割线样式代码在这，伙伴们可以自行修改：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* 分割线样式 */</span><span class="token selector">hr</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 20px 0<span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">border-top</span><span class="token punctuation">:</span> 1px solid #ccc<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里我对分割线没做修改，只是在二级标题下添加了分割线，毕竟没有分割线的样式看着真实难受：</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402051926475.png" alt="无分割线"></p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402051928326.png" alt="有分割线"></p><p>不知道兄弟们觉得哪个更好看，不过我觉得还是有分割线更有条理一些。萝卜白菜各有所爱嘛O(∩_∩)O~</p><p>要在标题下添加分割线只需添加以下代码：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">h1::after,h2::after,h3::after,h4::after,h5::after,h6::after</span> <span class="token punctuation">&#123;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span> <span class="token comment">/* 分割线的颜色 */</span>    <span class="token property">margin-top</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>    <span class="token comment">/* 调整分割线与标题之间的垂直间距 */</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这是给所有标题下都添加分割线，博主觉得给所有标题添加并不美观，所以只给二级标题下添加了。</p><h2 id="引用块"><a href="#引用块" class="headerlink" title="引用块"></a>引用块</h2><p>原代码</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">blockquote</span> <span class="token punctuation">&#123;</span>    <span class="token property">border-left</span><span class="token punctuation">:</span> 5px solid #42b983<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 0.8rem 0.2rem 0.8rem<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>66<span class="token punctuation">,</span> 185<span class="token punctuation">,</span> 131<span class="token punctuation">,</span> .1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402051954660.png" alt="修改前"></p><p>原来的样式是尖角，同时我感觉边距不是很合适，所以修改了这两处样式：</p><ul><li>修改边距</li><li>边框改为圆角</li></ul><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* 引用块样式 */</span><span class="token selector">blockquote</span> <span class="token punctuation">&#123;</span>    <span class="token property">border-left</span><span class="token punctuation">:</span> 5px solid #42b983<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0.5rem 0.8rem 0.3rem 0.8rem<span class="token punctuation">;</span>   <span class="token comment">/* 上、右、下、左边距 */</span>    <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>66<span class="token punctuation">,</span> 185<span class="token punctuation">,</span> 131<span class="token punctuation">,</span> .1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px 10px 10px 5px<span class="token punctuation">;</span>   <span class="token comment">/*添加圆角*/</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402052035722.png" alt="修改后"></p><h2 id="行内代码"><a href="#行内代码" class="headerlink" title="行内代码"></a>行内代码</h2><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">code</span> <span class="token punctuation">&#123;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 1px 5px<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 13px <span class="token important">!important</span><span class="token punctuation">;</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> Inconsolata<span class="token punctuation">,</span> Monaco<span class="token punctuation">,</span> Consolas<span class="token punctuation">,</span> <span class="token string">'Courier New'</span><span class="token punctuation">,</span> Courier<span class="token punctuation">,</span> monospace<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 0.91rem<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #e96900<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> #f8f8f8<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402052042846.png" alt="修改前"></p><p>原格式看起来不够清晰，所以我修改了一下颜色，这样看起来更清晰。</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402052048298.png" alt="优化后"></p><p>优化代码如下：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* 行内代码样式优化 */</span><span class="token selector">code</span> <span class="token punctuation">&#123;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 1px 5px<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 13px <span class="token important">!important</span><span class="token punctuation">;</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> Inconsolata<span class="token punctuation">,</span> Monaco<span class="token punctuation">,</span> Consolas<span class="token punctuation">,</span> <span class="token string">'Courier New'</span><span class="token punctuation">,</span> Courier<span class="token punctuation">,</span> monospace<span class="token punctuation">;</span>    <span class="token property">word-break</span><span class="token punctuation">:</span> break-word<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 2.1rem<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> .2rem .6rem<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #E66161<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> #FF6A6A22<span class="token punctuation">;</span>    <span class="token comment">/* F12 查看css确实好用 */</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="选中"><a href="#选中" class="headerlink" title="选中"></a>选中</h2><p>默认的选中是深蓝色背景，白色字体（几乎所有网站的默认样式），博主觉得有些审美疲劳了，为了和博客的底色更搭，所以我决定修改一下选中样式。</p><p>只需在博客的主要css文件中添加以下代码即可（matery主题是<code>matery.css</code>）</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">::selection</span> <span class="token punctuation">&#123;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> #97e262<span class="token punctuation">;</span>  <span class="token comment">/* 设置选中文本的背景色 */</span>    <span class="token property">color</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span><span class="token comment">/* 设置选中文本的文本颜色 */</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402052229232.png" alt="选中效果"></p><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ol><li><p><code>padding-bottom: 10px;</code> 表示在元素的底部（下边缘）设置内边距，即在元素的内容区域和其边框之间添加额外的空间，高度为 10 像素。具体而言，如果你有一个元素，并且为它应用了 <code>padding-bottom: 10px;</code>，那么元素的底部将有 10 像素的空白区域。这可以用来调整元素内部内容和边框之间的距离，或者在布局中为元素留出一些空间。</p></li><li><p><code>border-radius: 5px 10px 10px 5px;</code> 是 CSS 中设置圆角边框的属性，它定义了四个圆角的半径。</p><p>具体来说，这个属性值的含义是按照顺时针方向，分别对应左上、右上、右下、左下四个角的半径。在这个例子中：</p><ul><li>左上角：5px</li><li>右上角：10px</li><li>右下角：10px</li><li>左下角：5px</li></ul><p>这样设置的效果是，元素的左上角和左下角的圆角半径为 5px，而右上角和右下角的圆角半径为 10px。这种方式允许你为每个角指定不同的圆角半径，以创建各种不同形状的圆角。</p></li><li><p>这段代码是为元素添加阴影效果的 CSS 样式。在这里，使用了两个属性 <code>-webkit-box-shadow</code> 和 <code>box-shadow</code>，分别是针对 WebKit 浏览器和其他浏览器的标准。</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> 20px 0 #ffbd2e<span class="token punctuation">,</span> 40px 0 #27c93f<span class="token punctuation">;</span><span class="token property">box-shadow</span><span class="token punctuation">:</span> 20px 0 #ffbd2e<span class="token punctuation">,</span> 40px 0 #27c93f<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>解析：</p><ul><li><code>-webkit-box-shadow</code> 是 WebKit 浏览器专有的属性，用于设置元素的阴影效果。</li><li><code>box-shadow</code> 是标准 CSS 属性，支持大多数现代浏览器，也用于设置元素的阴影效果。</li></ul><p>两者都接受多个参数，其中：</p><ul><li><code>20px 0 #ffbd2e</code> 表示第一个阴影，水平偏移为 20px，垂直偏移为 0，颜色为 #ffbd2e。</li><li><code>40px 0 #27c93f</code> 表示第二个阴影，水平偏移为 40px，垂直偏移为 0，颜色为 #27c93f。</li></ul><p>这样的设置会在元素的右侧产生两个阴影，一个偏移 20px，另一个偏移 40px，分别用不同的颜色表示。这种效果常用于制作立体感，使元素看起来有立体的投影。</p></li><li><p>这段代码使用了 <code>-webkit-filter</code> 属性，该属性用于对元素应用图像滤镜效果。在这里使用了 <code>invert(50%)</code>，表示将元素中的颜色反转（即反相）一半。</p><p>解析：</p><ul><li><code>-webkit-filter</code> 是 WebKit 浏览器专有的属性，用于应用图像滤镜效果。</li><li><code>invert(50%)</code> 是滤镜效果中的一种，它将元素的颜色反转。括号中的参数 <code>50%</code> 表示反转一半的颜色，即使得元素呈现一种半反转的效果。</li></ul><p>具体效果是将元素的亮度和颜色反转一半，使得原本的颜色变得更浅或更深，以达到反转效果。这样的滤镜效果常用于调整图像颜色，或者在特定场景下实现视觉效果的需求。需要注意的是，滤镜效果的兼容性可能因浏览器而异，所以在使用时应该谨慎考虑浏览器的支持情况。</p></li><li><p>这段代码是用于禁止用户选择（文本选中）的 CSS 样式。不同浏览器厂商采用不同的前缀来支持这一功能，因此提供了对 WebKit（Chrome、Safari）、Mozilla（Firefox）、Microsoft（Internet Explorer、Edge）浏览器以及标准规范的支持。</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token property">-webkit-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">-moz-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">-ms-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">user-select</span><span class="token punctuation">:</span> none<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>解析：</p><ul><li><code>-webkit-user-select: none;</code>: WebKit 浏览器（例如 Chrome 和 Safari）的私有属性，用于禁止用户选择文本。</li><li><code>-moz-user-select: none;</code>: Mozilla 浏览器（例如 Firefox）的私有属性，同样用于禁止用户选择文本。</li><li><code>-ms-user-select: none;</code>: Microsoft 浏览器（例如 Internet Explorer 和 Edge）的私有属性，同样用于禁止用户选择文本。</li><li><code>user-select: none;</code>: 标准 CSS 属性，用于禁止用户选择文本。</li></ul><p>这样设置后，页面中的文本内容将无法被用户选中。这在一些特定的应用场景中可能会用到，例如避免用户复制网站上的内容，或者在实现一些特殊效果时禁止文本选择。需要注意的是，这种设置可能会影响用户体验，因此在使用时应根据具体情况进行权衡。</p></li><li><p>这段代码是使用 <code>-webkit-transition</code> 属性为元素的所有属性（<code>all</code>）设置过渡效果。过渡效果用于在元素属性发生变化时，使变化更加平滑和渐变。</p><p>解析：</p><ul><li><code>-webkit-transition: all .3s;</code>: WebKit 浏览器（例如 Chrome 和 Safari）的私有属性，用于指定元素的过渡效果。<ul><li><code>all</code>: 表示对所有属性都应用过渡效果。</li><li><code>.3s</code>: 表示过渡的持续时间为 0.3 秒。这个值可以根据实际需要进行调整，决定了过渡效果的时长。</li></ul></li></ul><p>这样的设置将在元素属性发生变化时（例如颜色、尺寸、位置等），以 0.3 秒的时间内过渡到新的状态，使变化更加平滑。过渡效果是一种改善用户体验的手段，可以使页面中的元素变化显得更加流畅和自然。</p><p>需要注意的是，虽然上述代码使用了 WebKit 浏览器的私有属性，但通常为了兼容性，你可能还需要添加标准的过渡属性，例如 <code>transition: all .3s;</code>。这样可以确保在其他浏览器中也能正常使用过渡效果。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>右键菜单</title>
      <link href="/posts/92dc.html"/>
      <url>/posts/92dc.html</url>
      
        <content type="html"><![CDATA[<h1 id="增加右键菜单"><a href="#增加右键菜单" class="headerlink" title="增加右键菜单"></a>增加右键菜单</h1><p>同主题的小伙伴可能发现了，博客网站的右键菜单实在是功能少的可怜，一个好的右键菜单可以让访客朋友的用户体验提高不少，所以下面我们就来就是实现给我买的博客网站添加一个功能更丰富的右键菜单😋</p><h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404292134042.png" alt="右键菜单"></p><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>找到<code>themes\matery\source\css\matery.css</code>，加入</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* 右键菜单的基本样式 */</span><span class="token selector">#rightMenu</span> <span class="token punctuation">&#123;</span>    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0 .25rem<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 10rem<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> fit-content<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 10%<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 10%<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> .85<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">backdrop-filter</span><span class="token punctuation">:</span> <span class="token function">blur</span><span class="token punctuation">(</span>20px<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 99994<span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #e3e8f7<span class="token punctuation">;</span>    <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 12px 4px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> .05<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> border-color .3s<span class="token punctuation">,</span> box-shadow .3s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">#rightMenu:hover</span> <span class="token punctuation">&#123;</span>    <span class="token property">border-color</span><span class="token punctuation">:</span> #177cb0<span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 8px 12px -3px <span class="token function">rgba</span><span class="token punctuation">(</span>66<span class="token punctuation">,</span> 89<span class="token punctuation">,</span> 239<span class="token punctuation">,</span> .14<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 右键菜单组样式 */</span><span class="token selector">#rightMenu .rightMenu-group</span> <span class="token punctuation">&#123;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> .35rem .3rem<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> .3s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">#rightMenu .rightMenu-group.rightMenu-small</span> <span class="token punctuation">&#123;</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">#rightMenu .rightMenu-line</span> <span class="token punctuation">&#123;</span>    <span class="token property">border-top</span><span class="token punctuation">:</span> 1px dashed <span class="token function">rgba</span><span class="token punctuation">(</span>66<span class="token punctuation">,</span> 89<span class="token punctuation">,</span> 239<span class="token punctuation">,</span> .14<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 菜单项的基本样式 */</span><span class="token selector">#rightMenu .rightMenu-item</span> <span class="token punctuation">&#123;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> .3s<span class="token punctuation">;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #525f7f<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> .25rem 0<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> .25rem 0<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.rightMenu-small .rightMenu-item</span> <span class="token punctuation">&#123;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>    <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">#rightMenu .rightMenu-group .rightMenu-item i</span> <span class="token punctuation">&#123;</span>    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0 .25rem<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">#rightMenu .rightMenu-line .rightMenu-item i</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0 .25rem<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">#rightMenu .rightMenu-group .rightMenu-item span</span> <span class="token punctuation">&#123;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">#rightMenu .rightMenu-item:hover</span> <span class="token punctuation">&#123;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> #177cb0<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 8px 12px -3px <span class="token function">rgba</span><span class="token punctuation">(</span>66<span class="token punctuation">,</span> 89<span class="token punctuation">,</span> 239<span class="token punctuation">,</span> .14<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">#rightMenu .rightMenu-item:active</span> <span class="token punctuation">&#123;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>.97<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 遮罩层样式 */</span><span class="token selector">#rightmenu-mask</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100vw<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> 0 0<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 99993<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0 <span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>定位到主题文件夹下的页面布局代码，即<code>matery/layout/layout.ejs</code>，在<code>&lt;main&gt;</code>标签中加入：</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token comment">&lt;!-- 添加右键菜单 --></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>RightMenu<span class="token punctuation">.</span>enable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rightMenu<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">top</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span> <span class="token property">left</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span> <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- 基本操作组 --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rightMenu-group rightMenu-small<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">const</span> basicOps <span class="token operator">=</span> <span class="token punctuation">[</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-backward'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'返回'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-arrow-left'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-forward'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'前进'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-arrow-right'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-refresh'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'刷新'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-bolt'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-top'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'返回顶部'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-arrow-up'</span> <span class="token punctuation">&#125;</span>            <span class="token punctuation">]</span><span class="token punctuation">;</span>             basicOps<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">op</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rightMenu-item<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> op<span class="token punctuation">.</span>id </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> op<span class="token punctuation">.</span>title </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> op<span class="token punctuation">.</span>icon </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span><span class="token delimiter punctuation">%></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- 插件操作组 --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rightMenu-group rightMenu-line rightMenuPlugin<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">const</span> pluginOps <span class="token operator">=</span> <span class="token punctuation">[</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-copytext'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-copy'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'复制选中'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-copylink'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-link'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'复制链接'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-pastetext'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-paste'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'粘贴文本'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-commenttext'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-comment-medical'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'引用到评论'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-newwindow'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-window-restore'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'新窗口打开'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-copyimg'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-images'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'复制此图片'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-downloadimg'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-download'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'下载此图片'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-search'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-magnifying-glass'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'站内搜索'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-searchBing'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-magnifying-glass'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'必应搜索'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-music-toggle'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-play'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'播放音乐'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-music-back'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-backward'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'切换到上一首'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-music-forward'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-forward'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'切换到下一首'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-music-playlist'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-radio'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'查看所有歌曲'</span><span class="token punctuation">,</span> <span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token string">'https://music.163.com/#/playlist?app_version=8.8.36&amp;id=5197802668'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-music-copyMusicName'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-copy'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'复制歌名'</span> <span class="token punctuation">&#125;</span>            <span class="token punctuation">]</span><span class="token punctuation">;</span>            pluginOps<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">op</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rightMenu-item<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> op<span class="token punctuation">.</span>id </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> op<span class="token punctuation">.</span>icon </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> op<span class="token punctuation">.</span>text </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span><span class="token delimiter punctuation">%></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- 其他操作组 --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rightMenu-group rightMenu-line rightMenuOther<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">const</span> otherOps <span class="token operator">=</span> <span class="token punctuation">[</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-randomWebsite'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-paper-plane'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'次元跃迁'</span><span class="token punctuation">,</span> <span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token string">'https://travel.moe/go.html'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-randomPost'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-shoe-prints'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'随便逛逛'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-categories'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-cube'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'博客分类'</span><span class="token punctuation">,</span> <span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token string">'/categories/'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-tags'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-tags'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'文章标签'</span><span class="token punctuation">,</span> <span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token string">'/tags/'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-privacy'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-hands'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'隐私协议'</span><span class="token punctuation">,</span> <span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token string">'/privacy/'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-cc'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-closed-captioning'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'版权协议'</span><span class="token punctuation">,</span> <span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token string">'/cc/'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-writing'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-feather'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'行文规范'</span><span class="token punctuation">,</span> <span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token string">'/SEAEPOCH-WRITING-STANDARDS/'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-copy'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-copy'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'复制地址'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'menu-darkmode'</span><span class="token punctuation">,</span> <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'fas fa-moon'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'深色模式'</span><span class="token punctuation">,</span> <span class="token literal-property property">extraClass</span><span class="token operator">:</span> <span class="token string">'menu-darkmode-text'</span> <span class="token punctuation">&#125;</span>            <span class="token punctuation">]</span><span class="token punctuation">;</span>            otherOps<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">op</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rightMenu-item menu-link<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> op<span class="token punctuation">.</span>link <span class="token operator">||</span> <span class="token string">'#'</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> op<span class="token punctuation">.</span>id </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> op<span class="token punctuation">.</span>link <span class="token operator">?</span> <span class="token string">'_blank'</span> <span class="token operator">:</span> <span class="token string">'_self'</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>noopener<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> op<span class="token punctuation">.</span>icon </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> op<span class="token punctuation">.</span>extraClass <span class="token operator">||</span> <span class="token string">''</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> op<span class="token punctuation">.</span>text </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span><span class="token delimiter punctuation">%></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rightmenu-mask<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> none</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/js/rightMenu.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><span class="token function">addRightMenuClickEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在<code>matery/source/js</code>下新建rightMenu.js，添加</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 初始化函数</span><span class="token keyword">let</span> rm <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">const</span> btf <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token function-variable function">scrollToDest</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">pos<span class="token punctuation">,</span> time <span class="token operator">=</span> <span class="token number">500</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> time <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> currentPos <span class="token operator">=</span> window<span class="token punctuation">.</span>scrollY <span class="token operator">||</span> window<span class="token punctuation">.</span>screenTop<span class="token punctuation">;</span>    pos <span class="token operator">-=</span> <span class="token number">70</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'CSS'</span> <span class="token keyword">in</span> window <span class="token operator">&amp;&amp;</span> <span class="token constant">CSS</span><span class="token punctuation">.</span><span class="token function">supports</span><span class="token punctuation">(</span><span class="token string">'scroll-behavior'</span><span class="token punctuation">,</span> <span class="token string">'smooth'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">top</span><span class="token operator">:</span> pos<span class="token punctuation">,</span> <span class="token literal-property property">behavior</span><span class="token operator">:</span> <span class="token string">'smooth'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">let</span> start <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>      window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token parameter">currentTime</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        start <span class="token operator">=</span> start <span class="token operator">||</span> currentTime<span class="token punctuation">;</span>        <span class="token keyword">const</span> progress <span class="token operator">=</span> currentTime <span class="token operator">-</span> start<span class="token punctuation">;</span>        <span class="token keyword">const</span> distance <span class="token operator">=</span> pos <span class="token operator">-</span> currentPos<span class="token punctuation">;</span>        window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> currentPos <span class="token operator">+</span> <span class="token punctuation">(</span>distance <span class="token operator">*</span> progress<span class="token punctuation">)</span> <span class="token operator">/</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>progress <span class="token operator">&lt;</span> time<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>          window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">const</span> heo <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token function-variable function">downloadImage</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">imgsrc<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>rm<span class="token punctuation">.</span>downloadimging<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;span>有正在进行中的下载，请稍后再试&lt;/span>'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    rm<span class="token punctuation">.</span>downloadimging <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;span>正在下载中，请稍后&lt;/span>'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token keyword">let</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      image<span class="token punctuation">.</span>crossOrigin <span class="token operator">=</span> <span class="token string">"anonymous"</span><span class="token punctuation">;</span>      image<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        <span class="token keyword">let</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"canvas"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> image<span class="token punctuation">.</span>width<span class="token punctuation">;</span>        canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> image<span class="token punctuation">.</span>height<span class="token punctuation">;</span>        <span class="token keyword">let</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> image<span class="token punctuation">.</span>width<span class="token punctuation">,</span> image<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> url <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token string">"image/png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">.</span>download <span class="token operator">=</span> name <span class="token operator">||</span> <span class="token string">"photo"</span><span class="token punctuation">;</span>        a<span class="token punctuation">.</span>href <span class="token operator">=</span> url<span class="token punctuation">;</span>        a<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MouseEvent</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;span>图片已添加盲水印，请遵守版权协议&lt;/span>'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        rm<span class="token punctuation">.</span>downloadimging <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>      image<span class="token punctuation">.</span>src <span class="token operator">=</span> imgsrc<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token function-variable function">musicToggle</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"等待开发..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token function-variable function">musicSkipBack</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"等待开发..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token function-variable function">musicSkipForward</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"等待开发..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token function-variable function">musicGetName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"等待开发..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// 禁止图片拖拽</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"dragstart"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 显示和隐藏菜单</span>rm<span class="token punctuation">.</span><span class="token function-variable function">showRightMenu</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">isTrue<span class="token punctuation">,</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#rightMenu'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>x<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>y<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span>isTrue<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#rightmenu-mask'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'display'</span><span class="token punctuation">,</span> isTrue <span class="token operator">?</span> <span class="token string">'flex'</span> <span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>rm<span class="token punctuation">.</span><span class="token function-variable function">hideRightMenu</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> rm<span class="token punctuation">.</span><span class="token function">showRightMenu</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// 更新尺寸</span>rm<span class="token punctuation">.</span><span class="token function-variable function">reloadrmSize</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  rm<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#rightMenu'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  rm<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#rightMenu'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">let</span> domhref <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span> domImgSrc <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span> globalEvent <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token comment">// 右键菜单监听初始化</span>window<span class="token punctuation">.</span><span class="token function-variable function">oncontextmenu</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth <span class="token operator">&lt;=</span> <span class="token number">768</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> pageX <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">,</span> pageY <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>  globalEvent <span class="token operator">=</span> event<span class="token punctuation">;</span>  <span class="token keyword">let</span> $rightMenuOther <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.rightMenuOther'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> $rightMenuPlugin <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.rightMenuPlugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> href <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>href<span class="token punctuation">,</span> imgsrc <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>currentSrc<span class="token punctuation">;</span>  <span class="token keyword">let</span> pluginMode <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.rightMenuPlugin, .rightMenuCopyText, .rightMenuCommentText, .rightMenuSearch, .rightMenuSearchBing'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>selectTextNow <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    pluginMode <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.rightMenuCopyText, .rightMenuCommentText, .rightMenuSearch, .rightMenuSearchBing'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>href<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    pluginMode <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-newwindow, #menu-copylink'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    domhref <span class="token operator">=</span> href<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-newwindow, #menu-copylink'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>imgsrc<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    pluginMode <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-copyimg, #menu-downloadimg'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    domImgSrc <span class="token operator">=</span> imgsrc<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-copyimg, #menu-downloadimg'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token string">'textarea'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    pluginMode <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-pastetext'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-pastetext'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>nodeName <span class="token operator">==</span> <span class="token string">"METING-JS"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    pluginMode <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.rightMenuMusic'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.rightMenuMusic'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>pluginMode<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    $rightMenuOther<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    $rightMenuPlugin<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    $rightMenuPlugin<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  rm<span class="token punctuation">.</span><span class="token function">reloadrmSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>pageX <span class="token operator">+</span> rm<span class="token punctuation">.</span>width <span class="token operator">></span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    pageX <span class="token operator">-=</span> rm<span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>pageY <span class="token operator">+</span> rm<span class="token punctuation">.</span>height <span class="token operator">></span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    pageY <span class="token operator">-=</span> pageY <span class="token operator">+</span> rm<span class="token punctuation">.</span>height <span class="token operator">-</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  rm<span class="token punctuation">.</span><span class="token function">showRightMenu</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> pageY<span class="token punctuation">,</span> pageX<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// 下载图片状态</span>rm<span class="token punctuation">.</span>downloadimging <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment">// 复制图片到剪贴板</span>rm<span class="token punctuation">.</span><span class="token function-variable function">writeClipImg</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">imgsrc</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;span>正在下载中，请稍后&lt;/span>'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>rm<span class="token punctuation">.</span>downloadimging<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>  rm<span class="token punctuation">.</span>downloadimging <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">await</span> <span class="token function">copyImage</span><span class="token punctuation">(</span>imgsrc<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;span>复制成功！图片已添加盲水印，请遵守版权协议&lt;/span>'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    rm<span class="token punctuation">.</span>downloadimging <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">imageToBlob</span><span class="token punctuation">(</span><span class="token parameter">imageURL</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> c <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"canvas"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> ctx <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  img<span class="token punctuation">.</span>crossOrigin <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>  img<span class="token punctuation">.</span>src <span class="token operator">=</span> imageURL<span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      c<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>naturalWidth<span class="token punctuation">;</span>      c<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>naturalHeight<span class="token punctuation">;</span>      ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      c<span class="token punctuation">.</span><span class="token function">toBlob</span><span class="token punctuation">(</span><span class="token parameter">blob</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"image/png"</span><span class="token punctuation">,</span> <span class="token number">0.75</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">copyImage</span><span class="token punctuation">(</span><span class="token parameter">imageURL</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">imageToBlob</span><span class="token punctuation">(</span>imageURL<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> item <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClipboardItem</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token string-property property">"image/png"</span><span class="token operator">:</span> blob <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>rm<span class="token punctuation">.</span><span class="token function-variable function">switchDarkMode</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token function">switchNightMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>rm<span class="token punctuation">.</span><span class="token function-variable function">copyUrl</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> input <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"&lt;input id='copyVal'>"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">"copy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  input<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">stopMaskScroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#rightmenu-mask, #rightMenu'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"mousewheel"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>rm<span class="token punctuation">.</span><span class="token function-variable function">rightmenuCopyText</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">txt</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">)</span> navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">writeText</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token punctuation">;</span>  rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>rm<span class="token punctuation">.</span><span class="token function-variable function">copyPageUrl</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  rm<span class="token punctuation">.</span><span class="token function">copyUrl</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;span>复制本页链接地址成功&lt;/span>'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>rm<span class="token punctuation">.</span><span class="token function-variable function">sharePage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  rm<span class="token punctuation">.</span><span class="token function">copyUrl</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;span>复制本页链接地址成功&lt;/span>'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// 复制当前选中文本</span><span class="token keyword">let</span> selectTextNow <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>document<span class="token punctuation">.</span>onmouseup <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function-variable function">ondblclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  selectTextNow <span class="token operator">=</span> window<span class="token punctuation">.</span>getSelection <span class="token operator">?</span> window<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> document<span class="token punctuation">.</span>selection<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>rm<span class="token punctuation">.</span><span class="token function-variable function">readClipboard</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">readText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">clipText</span> <span class="token operator">=></span> rm<span class="token punctuation">.</span><span class="token function">insertAtCaret</span><span class="token punctuation">(</span>globalEvent<span class="token punctuation">.</span>target<span class="token punctuation">,</span> clipText<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>rm<span class="token punctuation">.</span><span class="token function-variable function">insertAtCaret</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elemt<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> startPos <span class="token operator">=</span> elemt<span class="token punctuation">.</span>selectionStart<span class="token punctuation">,</span> endPos <span class="token operator">=</span> elemt<span class="token punctuation">.</span>selectionEnd<span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>selection<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    elemt<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    document<span class="token punctuation">.</span>selection<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text <span class="token operator">=</span> value<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>startPos <span class="token operator">||</span> startPos <span class="token operator">===</span> <span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> scrollTop <span class="token operator">=</span> elemt<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>    elemt<span class="token punctuation">.</span>value <span class="token operator">=</span> elemt<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> startPos<span class="token punctuation">)</span> <span class="token operator">+</span> value <span class="token operator">+</span> elemt<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>endPos<span class="token punctuation">)</span><span class="token punctuation">;</span>    elemt<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    elemt<span class="token punctuation">.</span>selectionStart <span class="token operator">=</span> elemt<span class="token punctuation">.</span>selectionEnd <span class="token operator">=</span> startPos <span class="token operator">+</span> value<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    elemt<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> scrollTop<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    elemt<span class="token punctuation">.</span>value <span class="token operator">+=</span> value<span class="token punctuation">;</span>    elemt<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>rm<span class="token punctuation">.</span><span class="token function-variable function">pasteText</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> rm<span class="token punctuation">.</span><span class="token function">readClipboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>rm<span class="token punctuation">.</span><span class="token function-variable function">rightMenuCommentText</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">txt</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> input <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#veditor'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> inputValue <span class="token operator">=</span> txt<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'\n> '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  input<span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>inputValue<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">\n\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  btf<span class="token punctuation">.</span><span class="token function">scrollToDest</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  input<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token function">stopMaskScroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>stopMaskScroll<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>现在你就可以本地部署并查看效果了</p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://blog.meta-code.top/2022/06/12/2022-68/">【Hexo博客】魔改美化 Butterfly 主题右键菜单 | 百里飞洋 (meta-code.top)</a></p><p><a href="https://seayj.cn/">SeaYJ’s Blog</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 右键菜单 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>页面特效</title>
      <link href="/posts/2506.html"/>
      <url>/posts/2506.html</url>
      
        <content type="html"><![CDATA[<h1 id="页面特效"><a href="#页面特效" class="headerlink" title="页面特效"></a>页面特效</h1><h2 id="动态线条"><a href="#动态线条" class="headerlink" title="动态线条"></a>动态线条</h2><p>在<code>themes/matery/layout/layout.ejs</code>文件中添加：</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token comment">&lt;!--动态线条背景--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>122 103 238<span class="token punctuation">"</span></span> <span class="token attr-name">opacity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>0.7<span class="token punctuation">'</span></span> <span class="token attr-name">zIndex</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>-2<span class="token punctuation">"</span></span> <span class="token attr-name">count</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>200<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>参数说明：</p><ul><li>color：线条颜色，三个数字分别为(R,G,B)，默认：（0,0,0）</li><li>opacity：线条透明度（0~1），默认：0.5</li><li>count：线条的总数量，默认：150</li><li>zIndex：背景图层所在的位置，默认：-1</li></ul><blockquote><p>参考：<a href="https://crazyyuchi.github.io/2022/05/02/bo-ke-da-jian-mei-hua-ju-xi-ban-ben/#toc-heading-28">博客搭建+美化（巨细版本） | 兴平 (crazyyuchi.github.io)</a></p></blockquote><h2 id="樱花特效"><a href="#樱花特效" class="headerlink" title="樱花特效"></a>樱花特效</h2><p>在<code>themes/matery/source/js</code>下新建sakura.js，打开这个网址<a href="https://cdn.jsdelivr.net/gh/Yafine/cdn@2.5/source/js/sakura.js">连接</a>，将内容复制粘贴到sakura.js即可。</p><p>然后在themes&#x2F;matery&#x2F;layout&#x2F;layout.ejs文件内添加下面的内容：</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token comment">//只在桌面版网页启用特效</span>    <span class="token keyword">var</span> windowWidth <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>windowWidth <span class="token operator">></span> <span class="token number">768</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'&lt;script type="text/javascript" src="/js/sakura.js">&lt;\/script>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>参考：<a href="https://crazyyuchi.github.io/2022/05/02/bo-ke-da-jian-mei-hua-ju-xi-ban-ben/#toc-heading-28">博客搭建+美化（巨细版本） | 兴平 (crazyyuchi.github.io)</a></p></blockquote><h2 id="雪花特效"><a href="#雪花特效" class="headerlink" title="雪花特效"></a>雪花特效</h2><p>在<code>themes/matery/source/libs/others</code>下新建文件<code>snow.js</code>，并插入如下代码：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/*样式一*/</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    $<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">snow</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> $flake <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'&lt;div id="snowbox" />'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string-property property">'position'</span><span class="token operator">:</span> <span class="token string">'absolute'</span><span class="token punctuation">,</span><span class="token string-property property">'z-index'</span><span class="token operator">:</span><span class="token string">'9999'</span><span class="token punctuation">,</span> <span class="token string-property property">'top'</span><span class="token operator">:</span> <span class="token string">'-50px'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">'&amp;#10052;'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    documentHeight  <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    documentWidth   <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    defaults <span class="token operator">=</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">minSize</span>     <span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>        <span class="token literal-property property">maxSize</span>     <span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>        <span class="token literal-property property">newOn</span>       <span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>        <span class="token literal-property property">flakeColor</span>  <span class="token operator">:</span> <span class="token string">"#AFDAEF"</span> <span class="token comment">/* 此处可以定义雪花颜色，若要白色可以改为#FFFFFF */</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    options <span class="token operator">=</span> $<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> defaults<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> interval<span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> startPositionLeft <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> documentWidth <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">,</span>    startOpacity <span class="token operator">=</span> <span class="token number">0.5</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    sizeFlake <span class="token operator">=</span> options<span class="token punctuation">.</span>minSize <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> options<span class="token punctuation">.</span>maxSize<span class="token punctuation">,</span>    endPositionTop <span class="token operator">=</span> documentHeight <span class="token operator">-</span> <span class="token number">200</span><span class="token punctuation">,</span>    endPositionLeft <span class="token operator">=</span> startPositionLeft <span class="token operator">-</span> <span class="token number">500</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">500</span><span class="token punctuation">,</span>    durationFall <span class="token operator">=</span> documentHeight <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">5000</span><span class="token punctuation">;</span>    $flake<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token literal-property property">left</span><span class="token operator">:</span> startPositionLeft<span class="token punctuation">,</span>        <span class="token literal-property property">opacity</span><span class="token operator">:</span> startOpacity<span class="token punctuation">,</span>        <span class="token string-property property">'font-size'</span><span class="token operator">:</span> sizeFlake<span class="token punctuation">,</span>        <span class="token literal-property property">color</span><span class="token operator">:</span> options<span class="token punctuation">.</span>flakeColor    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token literal-property property">top</span><span class="token operator">:</span> endPositionTop<span class="token punctuation">,</span>        <span class="token literal-property property">left</span><span class="token operator">:</span> endPositionLeft<span class="token punctuation">,</span>        <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0.2</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>durationFall<span class="token punctuation">,</span><span class="token string">'linear'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> options<span class="token punctuation">.</span>newOn<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    $<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">snow</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>         <span class="token literal-property property">minSize</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">/* 定义雪花最小尺寸 */</span>        <span class="token literal-property property">maxSize</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token comment">/* 定义雪花最大尺寸 */</span>        <span class="token literal-property property">newOn</span><span class="token operator">:</span> <span class="token number">300</span>  <span class="token comment">/* 定义密集程度，数字越小越密集 */</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/*样式二*/</span><span class="token comment">/* 控制下雪 */</span><span class="token keyword">function</span> <span class="token function">snowFall</span><span class="token punctuation">(</span><span class="token parameter">snow</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/* 可配置属性 */</span>    snow <span class="token operator">=</span> snow <span class="token operator">||</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>maxFlake <span class="token operator">=</span> snow<span class="token punctuation">.</span>maxFlake <span class="token operator">||</span> <span class="token number">200</span><span class="token punctuation">;</span>   <span class="token comment">/* 最多片数 */</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>flakeSize <span class="token operator">=</span> snow<span class="token punctuation">.</span>flakeSize <span class="token operator">||</span> <span class="token number">10</span><span class="token punctuation">;</span>  <span class="token comment">/* 雪花形状 */</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>fallSpeed <span class="token operator">=</span> snow<span class="token punctuation">.</span>fallSpeed <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">;</span>   <span class="token comment">/* 坠落速度 */</span><span class="token punctuation">&#125;</span><span class="token comment">/* 兼容写法 */</span>requestAnimationFrame <span class="token operator">=</span> window<span class="token punctuation">.</span>requestAnimationFrame <span class="token operator">||</span>    window<span class="token punctuation">.</span>mozRequestAnimationFrame <span class="token operator">||</span>    window<span class="token punctuation">.</span>webkitRequestAnimationFrame <span class="token operator">||</span>    window<span class="token punctuation">.</span>msRequestAnimationFrame <span class="token operator">||</span>    window<span class="token punctuation">.</span>oRequestAnimationFrame <span class="token operator">||</span>    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> <span class="token number">1000</span> <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>cancelAnimationFrame <span class="token operator">=</span> window<span class="token punctuation">.</span>cancelAnimationFrame <span class="token operator">||</span>    window<span class="token punctuation">.</span>mozCancelAnimationFrame <span class="token operator">||</span>    window<span class="token punctuation">.</span>webkitCancelAnimationFrame <span class="token operator">||</span>    window<span class="token punctuation">.</span>msCancelAnimationFrame <span class="token operator">||</span>    window<span class="token punctuation">.</span>oCancelAnimationFrame<span class="token punctuation">;</span><span class="token comment">/* 开始下雪 */</span>snowFall<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">start</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">/* 创建画布 */</span>    <span class="token function">snowCanvas</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/* 创建雪花形状 */</span>    <span class="token function">createFlakes</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/* 画雪 */</span>    <span class="token function">drawSnow</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">/* 创建画布 */</span><span class="token keyword">function</span> <span class="token function">snowCanvas</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/* 添加Dom结点 */</span>    <span class="token keyword">var</span> snowcanvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"canvas"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    snowcanvas<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">"snowfall"</span><span class="token punctuation">;</span>    snowcanvas<span class="token punctuation">.</span>width <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">;</span>    snowcanvas<span class="token punctuation">.</span>height <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>    snowcanvas<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"style"</span><span class="token punctuation">,</span> <span class="token string">"position:absolute; top: 0; left: 0; z-index: 1; pointer-events: none;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>snowcanvas<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>canvas <span class="token operator">=</span> snowcanvas<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>ctx <span class="token operator">=</span> snowcanvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/* 窗口大小改变的处理 */</span>    window<span class="token punctuation">.</span><span class="token function-variable function">onresize</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        snowcanvas<span class="token punctuation">.</span>width <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">;</span>        <span class="token comment">/* snowcanvas.height = window.innerHeight */</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 雪运动对象 */</span><span class="token keyword">function</span> <span class="token function">flakeMove</span><span class="token punctuation">(</span><span class="token parameter">canvasWidth<span class="token punctuation">,</span> canvasHeight<span class="token punctuation">,</span> flakeSize<span class="token punctuation">,</span> fallSpeed</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> canvasWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">/* x坐标 */</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> canvasHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">/* y坐标 */</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> flakeSize <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>          <span class="token comment">/* 形状 */</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>maxSize <span class="token operator">=</span> flakeSize<span class="token punctuation">;</span>                           <span class="token comment">/* 最大形状 */</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>speed <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1</span> <span class="token operator">+</span> fallSpeed<span class="token punctuation">;</span>         <span class="token comment">/* 坠落速度 */</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>fallSpeed <span class="token operator">=</span> fallSpeed<span class="token punctuation">;</span>                         <span class="token comment">/* 坠落速度 */</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>velY <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>speed<span class="token punctuation">;</span>                             <span class="token comment">/* Y方向速度 */</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>velX <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                                      <span class="token comment">/* X方向速度 */</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>stepSize <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">30</span><span class="token punctuation">;</span>                 <span class="token comment">/* 步长 */</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>step <span class="token operator">=</span> <span class="token number">0</span>                                       <span class="token comment">/* 步数 */</span><span class="token punctuation">&#125;</span>flakeMove<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">update</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span>        y <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>    <span class="token comment">/* 左右摆动(余弦) */</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>velX <span class="token operator">*=</span> <span class="token number">0.98</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>velY <span class="token operator">&lt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>speed<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>velY <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>speed    <span class="token punctuation">&#125;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>velX <span class="token operator">+=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>step <span class="token operator">+=</span> <span class="token number">.05</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>stepSize<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>velY<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>velX<span class="token punctuation">;</span>    <span class="token comment">/* 飞出边界的处理 */</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">>=</span> canvas<span class="token punctuation">.</span>width <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">>=</span> canvas<span class="token punctuation">.</span>height <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">/* 飞出边界-放置最顶端继续坠落 */</span>flakeMove<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">reset</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">width<span class="token punctuation">,</span> height</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> width<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxSize <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>speed <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fallSpeed<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>velY <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>speed<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>velX <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// 渲染雪花-随机形状（此处可修改雪花颜色！！！）</span>flakeMove<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> snowFlake <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createRadialGradient</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>    snowFlake<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"rgba(255, 255, 255, 0.9)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">/* 此处是雪花颜色，默认是白色 */</span>    snowFlake<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">.5</span><span class="token punctuation">,</span> <span class="token string">"rgba(255, 255, 255, 0.5)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 若要改为其他颜色，请自行查 */</span>    snowFlake<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"rgba(255, 255, 255, 0)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/* 找16进制的RGB 颜色代码。 */</span>    ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> snowFlake<span class="token punctuation">;</span>    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">/* 创建雪花-定义形状 */</span><span class="token keyword">function</span> <span class="token function">createFlakes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> maxFlake <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxFlake<span class="token punctuation">,</span>        flakes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flakes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        canvas <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> maxFlake<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        flakes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">flakeMove</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flakeSize<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fallSpeed<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 画雪 */</span><span class="token keyword">function</span> <span class="token function">drawSnow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> maxFlake <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxFlake<span class="token punctuation">,</span>        flakes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flakes<span class="token punctuation">;</span>    ctx <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">,</span> canvas <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">,</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token comment">/* 清空雪花 */</span>    ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> e <span class="token operator">&lt;</span> maxFlake<span class="token punctuation">;</span> e<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        flakes<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        flakes<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/*  一帧一帧的画 */</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>loop <span class="token operator">=</span> <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">drawSnow</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>that<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 调用及控制方法 */</span><span class="token keyword">var</span> snow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">snowFall</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">maxFlake</span><span class="token operator">:</span><span class="token number">60</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>snow<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在<code>themes/matery/layout/layout.ejs</code>里添加：</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token comment">&lt;!-- 雪花特效 --></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>snow<span class="token punctuation">.</span>enable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>libs<span class="token punctuation">.</span>js<span class="token punctuation">.</span>snow </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>然后在主题配置文件里<code>libs.js</code>里添加一行</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">snow</span><span class="token punctuation">:</span> /libs/others/snow.js<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>最后在主题配置文件最后添加：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># 雪花特效</span><span class="token key atrule">snow</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>参考：<a href="https://godweiyang.com/2018/04/13/hexo-blog/#toc-heading-20">超详细Hexo+Github博客搭建小白教程 | 韦阳的博客 (godweiyang.com)</a></p></blockquote><h2 id="鼠标特效"><a href="#鼠标特效" class="headerlink" title="鼠标特效"></a>鼠标特效</h2><h3 id="点击显示文字"><a href="#点击显示文字" class="headerlink" title="点击显示文字"></a>点击显示文字</h3><p>在 <code>themes\matery\source\js</code> 下新建 <code>click_show_text.js</code></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> a_idx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token function">jQuery</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span>        <span class="token punctuation">(</span><span class="token string">"富强"</span><span class="token punctuation">,</span> <span class="token string">"民主"</span><span class="token punctuation">,</span> <span class="token string">"文明"</span><span class="token punctuation">,</span> <span class="token string">"和谐"</span><span class="token punctuation">,</span> <span class="token string">"自由"</span><span class="token punctuation">,</span> <span class="token string">"平等"</span><span class="token punctuation">,</span> <span class="token string">"公正"</span><span class="token punctuation">,</span> <span class="token string">"法治"</span><span class="token punctuation">,</span> <span class="token string">"爱国"</span><span class="token punctuation">,</span> <span class="token string">"敬业"</span><span class="token punctuation">,</span> <span class="token string">"诚信"</span><span class="token punctuation">,</span> <span class="token string">"友善"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> $i <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"&lt;span/>"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>a_idx<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        a_idx <span class="token operator">=</span> <span class="token punctuation">(</span>a_idx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">var</span> x <span class="token operator">=</span> e<span class="token punctuation">.</span>pageX<span class="token punctuation">,</span>        y <span class="token operator">=</span> e<span class="token punctuation">.</span>pageY<span class="token punctuation">;</span>        $i<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            <span class="token string-property property">"z-index"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>            <span class="token string-property property">"top"</span><span class="token operator">:</span> y <span class="token operator">-</span> <span class="token number">20</span><span class="token punctuation">,</span>            <span class="token string-property property">"left"</span><span class="token operator">:</span> x<span class="token punctuation">,</span>            <span class="token string-property property">"position"</span><span class="token operator">:</span> <span class="token string">"absolute"</span><span class="token punctuation">,</span>            <span class="token string-property property">"font-weight"</span><span class="token operator">:</span> <span class="token string">"bold"</span><span class="token punctuation">,</span>            <span class="token string-property property">"color"</span><span class="token operator">:</span> <span class="token string">"rgb("</span> <span class="token operator">+</span> <span class="token operator">~</span><span class="token operator">~</span><span class="token punctuation">(</span><span class="token number">255</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> <span class="token operator">~</span><span class="token operator">~</span><span class="token punctuation">(</span><span class="token number">255</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> <span class="token operator">~</span><span class="token operator">~</span><span class="token punctuation">(</span><span class="token number">255</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">")"</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>$i<span class="token punctuation">)</span><span class="token punctuation">;</span>        $i<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            <span class="token string-property property">"top"</span><span class="token operator">:</span> y <span class="token operator">-</span> <span class="token number">180</span><span class="token punctuation">,</span>            <span class="token string-property property">"opacity"</span><span class="token operator">:</span> <span class="token number">0</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token number">3000</span><span class="token punctuation">,</span>    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       $i<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token string">'delay()'</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".buryit"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">"onclick"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在<code>themes\matery\layout\layout.ejs</code> 的 <code>body</code> 标签里引入</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>单击显示文字<span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span> src<span class="token operator">=</span><span class="token string">"/js/click_show_text.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>参考：<a href="https://yunfulin.gitee.io/blog/no-013.html#toc-heading-5">Matery主题优化（一） | YF小林犟 (gitee.io)</a></p></blockquote><h3 id="礼花特效"><a href="#礼花特效" class="headerlink" title="礼花特效"></a>礼花特效</h3><p>在主题文件 <code>themes\hexo-theme-matery\source\js</code> 下新建 <code>mouse_snow.js</code></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">function</span> <span class="token function">t</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token function">i</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">function</span> <span class="token function">i</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"mousemove"</span><span class="token punctuation">,</span> o<span class="token punctuation">)</span><span class="token punctuation">,</span>      document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"touchmove"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">,</span>      document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"touchstart"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">,</span>      window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"resize"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">function</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      d <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span>      window<span class="token punctuation">.</span>innerHeight  <span class="token punctuation">&#125;</span>  <span class="token keyword">function</span> <span class="token function">e</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>touches<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> t<span class="token punctuation">.</span>touches<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>              <span class="token function">s</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>touches<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>clientX<span class="token punctuation">,</span> t<span class="token punctuation">.</span>touches<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>clientY<span class="token punctuation">,</span> r<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> r<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">function</span> <span class="token function">o</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      u<span class="token punctuation">.</span>x <span class="token operator">=</span> t<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span>      u<span class="token punctuation">.</span>y <span class="token operator">=</span> t<span class="token punctuation">.</span>clientY<span class="token punctuation">,</span>      <span class="token function">s</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>x<span class="token punctuation">,</span> u<span class="token punctuation">.</span>y<span class="token punctuation">,</span> r<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> r<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">function</span> <span class="token function">s</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> i<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">l</span><span class="token punctuation">;</span>      e<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> i<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">,</span>      f<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">function</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> t <span class="token operator">&lt;</span> f<span class="token punctuation">.</span>length<span class="token punctuation">;</span> t<span class="token operator">++</span><span class="token punctuation">)</span>          f<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> f<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> t <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> t<span class="token operator">--</span><span class="token punctuation">)</span>          f<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>lifeSpan <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>f<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">die</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>          f<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token function">h</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">function</span> <span class="token function">l</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>character <span class="token operator">=</span> <span class="token string">"*"</span><span class="token punctuation">,</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>lifeSpan <span class="token operator">=</span> <span class="token number">120</span><span class="token punctuation">,</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>initialStyles <span class="token operator">=</span> <span class="token punctuation">&#123;</span>          <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">"fixed"</span><span class="token punctuation">,</span>          <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token string">"0"</span><span class="token punctuation">,</span>          <span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token string">"block"</span><span class="token punctuation">,</span>          <span class="token literal-property property">pointerEvents</span><span class="token operator">:</span> <span class="token string">"none"</span><span class="token punctuation">,</span>          <span class="token string-property property">"z-index"</span><span class="token operator">:</span> <span class="token string">"10000000"</span><span class="token punctuation">,</span>          <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">"20px"</span><span class="token punctuation">,</span>          <span class="token string-property property">"will-change"</span><span class="token operator">:</span> <span class="token string">"transform"</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> i<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>velocity <span class="token operator">=</span> <span class="token punctuation">&#123;</span>              <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">.5</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>              <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">1</span>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token punctuation">&#123;</span>              <span class="token literal-property property">x</span><span class="token operator">:</span> t <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">,</span>              <span class="token literal-property property">y</span><span class="token operator">:</span> i <span class="token operator">-</span> <span class="token number">20</span>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>initialStyles<span class="token punctuation">.</span>color <span class="token operator">=</span> n<span class="token punctuation">,</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"span"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>character<span class="token punctuation">,</span>          <span class="token function">c</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>initialStyles<span class="token punctuation">)</span><span class="token punctuation">,</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>          document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">)</span>      <span class="token punctuation">&#125;</span>      <span class="token punctuation">,</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">update</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>velocity<span class="token punctuation">.</span>x<span class="token punctuation">,</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>velocity<span class="token punctuation">.</span>y<span class="token punctuation">,</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>lifeSpan<span class="token operator">--</span><span class="token punctuation">,</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">"translate3d("</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token string">"px,"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token string">"px,0) scale("</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lifeSpan <span class="token operator">/</span> <span class="token number">120</span> <span class="token operator">+</span> <span class="token string">")"</span>      <span class="token punctuation">&#125;</span>      <span class="token punctuation">,</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">die</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">)</span>      <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">function</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> n <span class="token keyword">in</span> i<span class="token punctuation">)</span>          t<span class="token punctuation">.</span>style<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">[</span>n<span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"#D61C59"</span><span class="token punctuation">,</span> <span class="token string">"#E7D84B"</span><span class="token punctuation">,</span> <span class="token string">"#1B8798"</span><span class="token punctuation">]</span>    <span class="token punctuation">,</span> d <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth    <span class="token punctuation">,</span> u <span class="token operator">=</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span>  <span class="token punctuation">&#123;</span>      <span class="token literal-property property">x</span><span class="token operator">:</span> d <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>      <span class="token literal-property property">y</span><span class="token operator">:</span> d <span class="token operator">/</span> <span class="token number">2</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token function">t</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在<code>themes\matery\layout\layout.ejs</code> 的 <code>body</code> 标签里面 引入</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 鼠标移动特效 <span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span> src<span class="token operator">=</span><span class="token string">"/js/mouse_snow.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>参考：<a href="https://yunfulin.gitee.io/blog/no-013.html#toc-heading-5">Matery主题优化（一） | YF小林犟 (gitee.io)</a></p></blockquote><h3 id="点击爆炸"><a href="#点击爆炸" class="headerlink" title="点击爆炸"></a>点击爆炸</h3><p>在<code>themes/matery/source/js</code>下新建fireworks.js，打开这个网址<a href="https://cdn.jsdelivr.net/gh/Yafine/cdn@2.5/source/js/fireworks.js">连接</a>，将内容复制粘贴到fireworks.js即可。</p><p>然后再到themes&#x2F;matery&#x2F;layout&#x2F;layout.ejs中添加：</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fireworks<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span><span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span> <span class="token property">pointer-events</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>//cdn.bootcss.com/animejs/2.2.0/anime.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/js/fireworks.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>然后hexo clean &amp;&amp; hexo g &amp;&amp; hexo s即可进行本地预览，就可以查看效果了。</p><blockquote><p>参考：<a href="https://crazyyuchi.github.io/2022/05/02/bo-ke-da-jian-mei-hua-ju-xi-ban-ben/#toc-heading-28">博客搭建+美化（巨细版本） | 兴平 (crazyyuchi.github.io)</a></p></blockquote><h3 id="浮出爱心"><a href="#浮出爱心" class="headerlink" title="浮出爱心"></a>浮出爱心</h3><p>在<code>themes/matery/source/libs/others</code>下新建文件<code>click_love.js</code>，并插入如下代码：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>a</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">function</span> <span class="token function">r</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> e<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>e<span class="token operator">&lt;</span>n<span class="token punctuation">.</span>length<span class="token punctuation">;</span>e<span class="token operator">++</span><span class="token punctuation">)</span>            n<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>alpha<span class="token operator">&lt;=</span><span class="token number">0</span><span class="token operator">?</span>                <span class="token punctuation">(</span>t<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>n<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>el<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span>                <span class="token punctuation">(</span>n<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token operator">--</span><span class="token punctuation">,</span>n<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>scale<span class="token operator">+=</span><span class="token number">.004</span><span class="token punctuation">,</span>n<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>alpha<span class="token operator">-=</span><span class="token number">.013</span><span class="token punctuation">,</span>                 n<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText<span class="token operator">=</span><span class="token string">"left:"</span><span class="token operator">+</span>n<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token operator">+</span><span class="token string">"px;top:"</span><span class="token operator">+</span>n<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token operator">+</span><span class="token string">"px;opacity:"</span><span class="token operator">+</span>n<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>alpha<span class="token operator">+</span><span class="token string">";transform:scale("</span><span class="token operator">+</span>n<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>scale<span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span>n<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>scale<span class="token operator">+</span><span class="token string">") rotate(45deg);background:"</span><span class="token operator">+</span>n<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>color<span class="token operator">+</span><span class="token string">";z-index:99999"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">var</span> n<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    e<span class="token punctuation">.</span>requestAnimationFrame<span class="token operator">=</span>e<span class="token punctuation">.</span>requestAnimationFrame<span class="token operator">||</span>e<span class="token punctuation">.</span>webkitRequestAnimationFrame<span class="token operator">||</span>e<span class="token punctuation">.</span>mozRequestAnimationFrame<span class="token operator">||</span>e<span class="token punctuation">.</span>oRequestAnimationFrame<span class="token operator">||</span>e<span class="token punctuation">.</span>msRequestAnimationFrame<span class="token operator">||</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token number">1e3</span><span class="token operator">/</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> a<span class="token operator">=</span>t<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"style"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">.</span>type<span class="token operator">=</span><span class="token string">"text/css"</span><span class="token punctuation">;</span>        <span class="token keyword">try</span><span class="token punctuation">&#123;</span>            a<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            a<span class="token punctuation">.</span>styleSheet<span class="token punctuation">.</span>cssText<span class="token operator">=</span>e        <span class="token punctuation">&#125;</span>        t<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"head"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token string">".heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> a<span class="token operator">=</span><span class="token string">"function"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token punctuation">.</span>onclick<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>onclick<span class="token punctuation">;</span>        e<span class="token punctuation">.</span><span class="token function-variable function">onclick</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            a<span class="token operator">&amp;&amp;</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> a<span class="token operator">=</span>t<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                a<span class="token punctuation">.</span>className<span class="token operator">=</span><span class="token string">"heart"</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">el</span><span class="token operator">:</span>a<span class="token punctuation">,</span><span class="token literal-property property">x</span><span class="token operator">:</span>e<span class="token punctuation">.</span>clientX<span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token literal-property property">y</span><span class="token operator">:</span>e<span class="token punctuation">.</span>clientY<span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token literal-property property">scale</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">alpha</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">"rgb("</span><span class="token operator">+</span><span class="token operator">~</span><span class="token operator">~</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span><span class="token operator">~</span><span class="token operator">~</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span><span class="token operator">~</span><span class="token operator">~</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">")"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">r</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span>document<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在<code>themes/matery/layout/layout.ejs</code>里添加：</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token comment">&lt;!--  --></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>clicklove<span class="token punctuation">.</span>enable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>jsDelivr<span class="token punctuation">.</span>url </span><span class="token delimiter punctuation">%></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">url_for</span><span class="token punctuation">(</span>theme<span class="token punctuation">.</span>libs<span class="token punctuation">.</span>js<span class="token punctuation">.</span>clicklove<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span> <span class="token attr-name">async</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>async<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>然后在主题配置文件里<code>libs.js</code>里添加一行</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">snow</span><span class="token punctuation">:</span> /libs/others/click_love.js<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>最后在主题配置文件最后添加：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># 点击页面浮出'爱心'效果</span><span class="token key atrule">clicklove</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="推荐阅读"><a href="#推荐阅读" class="headerlink" title="推荐阅读"></a>推荐阅读</h3><p><a href="https://www.jb51.net/article/132511.htm">10个经典的网页鼠标特效代码_javascript技巧_脚本之家 (jb51.net)</a></p><h2 id="动态标签栏"><a href="#动态标签栏" class="headerlink" title="动态标签栏"></a>动态标签栏</h2><p>在文件 <code>themes\matery\layout\layout.ejs</code> 的 <code>body</code> 标签里添加</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 动态标签栏 <span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">></span>  <span class="token keyword">var</span> OriginTitile <span class="token operator">=</span> document<span class="token punctuation">.</span>title<span class="token punctuation">,</span> st<span class="token punctuation">;</span>   document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"visibilitychange"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     document<span class="token punctuation">.</span>hidden <span class="token operator">?</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">"爱我，别走！"</span><span class="token punctuation">,</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>st<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">"咦，你来啦！"</span><span class="token punctuation">,</span> st <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> document<span class="token punctuation">.</span>title <span class="token operator">=</span> OriginTitile <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">3e3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><a href="https://yunfulin.gitee.io/blog/no-013.html#toc-heading-5">Matery主题优化（一） | YF小林犟 (gitee.io)</a></p></blockquote><h2 id="冒泡特效"><a href="#冒泡特效" class="headerlink" title="冒泡特效"></a>冒泡特效</h2><p>在 <code>themes&gt;matery&gt;source&gt;libs&gt;others</code>下新建一个文件 bubble.js</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 首页轮播冒泡</span><span class="token keyword">function</span> <span class="token function">bubble</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.carousel-item, .pd-header'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">circleMagic</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    <span class="token literal-property property">radius</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>    <span class="token literal-property property">density</span><span class="token operator">:</span> <span class="token number">.2</span><span class="token punctuation">,</span>    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'rgba(255,255,255,.4)'</span><span class="token punctuation">,</span>    <span class="token literal-property property">clearOffset</span><span class="token operator">:</span> <span class="token number">0.99</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token operator">!</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  p<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">circleMagic</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> o<span class="token punctuation">,</span> a<span class="token punctuation">,</span> n<span class="token punctuation">,</span> r<span class="token punctuation">,</span> e <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>      i <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      d <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">"rgba(255,0,0,.5)"</span><span class="token punctuation">,</span>        <span class="token literal-property property">radius</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>        <span class="token literal-property property">density</span><span class="token operator">:</span> <span class="token number">.3</span><span class="token punctuation">,</span>        <span class="token literal-property property">clearOffset</span><span class="token operator">:</span> <span class="token number">.2</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">,</span>      l <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">function</span> <span class="token function">c</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      e <span class="token operator">=</span> <span class="token operator">!</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop <span class="token operator">></span> a<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">s</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      o <span class="token operator">=</span> l<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span> a <span class="token operator">=</span> l<span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span> l<span class="token punctuation">.</span>height <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token string">"px"</span><span class="token punctuation">,</span> n<span class="token punctuation">.</span>width <span class="token operator">=</span> o<span class="token punctuation">,</span> n<span class="token punctuation">.</span>height <span class="token operator">=</span> a    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">h</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> t <span class="token keyword">in</span> r<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> o<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span> i<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">f</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>      <span class="token keyword">function</span> <span class="token function">e</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        t<span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> o<span class="token punctuation">,</span> t<span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token number">100</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span>alpha <span class="token operator">=</span> <span class="token number">.1</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> d<span class="token punctuation">.</span>clearOffset<span class="token punctuation">,</span>          t<span class="token punctuation">.</span>scale <span class="token operator">=</span> <span class="token number">.1</span> <span class="token operator">+</span> <span class="token number">.3</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span>speed <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"random"</span> <span class="token operator">===</span> d<span class="token punctuation">.</span>color <span class="token operator">?</span> t<span class="token punctuation">.</span>color <span class="token operator">=</span>            <span class="token string">"rgba("</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">255</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">", "</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">", "</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>              <span class="token number">0</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">", "</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">")"</span> <span class="token operator">:</span> t<span class="token punctuation">.</span>color <span class="token operator">=</span> d<span class="token punctuation">.</span>color      <span class="token punctuation">&#125;</span>      t<span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token function">e</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">draw</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        t<span class="token punctuation">.</span>alpha <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">e</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y <span class="token operator">-=</span> t<span class="token punctuation">.</span>speed<span class="token punctuation">,</span> t<span class="token punctuation">.</span>alpha <span class="token operator">-=</span> <span class="token number">5e-4</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x<span class="token punctuation">,</span> t<span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y<span class="token punctuation">,</span>          t<span class="token punctuation">.</span>scale <span class="token operator">*</span> d<span class="token punctuation">.</span>radius<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> t<span class="token punctuation">.</span>color<span class="token punctuation">,</span> r<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span> <span class="token operator">!</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      o <span class="token operator">=</span> l<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">,</span> a <span class="token operator">=</span> l<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">,</span>        <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token keyword">var</span> t <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"canvas"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          t<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">"canvas"</span><span class="token punctuation">;</span>          t<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>          t<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token number">0</span>          t<span class="token punctuation">.</span>style<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token number">0</span>          t<span class="token punctuation">.</span>style<span class="token punctuation">.</span>zIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>          t<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">"absolute"</span><span class="token punctuation">;</span>          l<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>          t<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token string">"hidden"</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"canvas"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width <span class="token operator">=</span> o<span class="token punctuation">,</span> n<span class="token punctuation">.</span>height <span class="token operator">=</span> a<span class="token punctuation">,</span> r <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> t <span class="token operator">&lt;</span> o <span class="token operator">*</span> d<span class="token punctuation">.</span>density<span class="token punctuation">;</span> t<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">f</span><span class="token punctuation">;</span>        i<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>      <span class="token punctuation">&#125;</span>      <span class="token function">h</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"scroll"</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"resize"</span><span class="token punctuation">,</span> s<span class="token punctuation">,</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">bubble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在主题的配置文件 <code>themes\hexo-theme-matery\_config.yml</code> 找到 <code>libs:</code> 然后在 js 下引入</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token literal-property property">bubble</span><span class="token operator">:</span> <span class="token operator">/</span>libs<span class="token operator">/</span>others<span class="token operator">/</span>bubble<span class="token punctuation">.</span>js<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在主题的配置文件 <code>themes\hexo-theme-matery\_config.yml</code> 的底部，添加下面代码</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"># 首页轮播冒泡<span class="token literal-property property">bubble</span><span class="token operator">:</span>  <span class="token literal-property property">enable</span><span class="token operator">:</span> <span class="token boolean">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>在文件 <code>themes\hexo-theme-matery\layout\layout.ejs</code> 的 <code>body</code> 标签里面 引入</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 白色冒泡 <span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>bubble<span class="token punctuation">.</span>enable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token operator">%</span><span class="token operator">></span>  <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span> src<span class="token operator">=</span><span class="token string">"&lt;%- theme.jsDelivr.url %>&lt;%- url_for(theme.libs.js.bubble) %>"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">&#125;</span> <span class="token operator">%</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>参考：<a href="https://yunfulin.gitee.io/blog/no-013.html#toc-heading-1">Matery主题优化（一） | YF小林犟 (gitee.io)</a></p></blockquote><h2 id="打字特效"><a href="#打字特效" class="headerlink" title="打字特效"></a>打字特效</h2><p>首先在<code>themes\matery\source\js</code>下新建<code>activate-power-mode.js</code></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">webpackUniversalModuleDefinition</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> factory</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> module <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span> <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> exports<span class="token punctuation">[</span><span class="token string">"POWERMODE"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> root<span class="token punctuation">[</span><span class="token string">"POWERMODE"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">modules</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> installedModules <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token keyword">function</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token parameter">moduleId</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span> installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span>exports<span class="token punctuation">;</span>            <span class="token keyword">var</span> module <span class="token operator">=</span> installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">exports</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token literal-property property">id</span><span class="token operator">:</span> moduleId<span class="token punctuation">,</span> <span class="token literal-property property">loaded</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>            modules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> module<span class="token punctuation">,</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> __webpack_require__<span class="token punctuation">)</span><span class="token punctuation">;</span>            module<span class="token punctuation">.</span>loaded <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        __webpack_require__<span class="token punctuation">.</span>m <span class="token operator">=</span> modules<span class="token punctuation">;</span>        __webpack_require__<span class="token punctuation">.</span>c <span class="token operator">=</span> installedModules<span class="token punctuation">;</span>        __webpack_require__<span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> __webpack_require__</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token string">'use strict'</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">;</span>        canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">;</span>        canvas<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token string">'position: fixed; top: 0; left: 0; pointer-events: none; z-index: 0'</span><span class="token punctuation">;</span>        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">;</span>            canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> particles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> particlePointer <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token constant">POWERMODE</span><span class="token punctuation">.</span>shake <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">function</span> <span class="token function">getRandom</span><span class="token punctuation">(</span><span class="token parameter">min<span class="token punctuation">,</span> max</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max <span class="token operator">-</span> min<span class="token punctuation">)</span> <span class="token operator">+</span> min<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">function</span> <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">POWERMODE</span><span class="token punctuation">.</span>colorful<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> u <span class="token operator">=</span> <span class="token function">getRandom</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">360</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token string">'hsla('</span> <span class="token operator">+</span> <span class="token function">getRandom</span><span class="token punctuation">(</span>u <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">,</span> u <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">', 100%, '</span> <span class="token operator">+</span> <span class="token function">getRandom</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'%, '</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span>color<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">function</span> <span class="token function">getCaret</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span>activeElement<span class="token punctuation">;</span>            <span class="token keyword">var</span> bcr<span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>tagName <span class="token operator">===</span> <span class="token string">'TEXTAREA'</span> <span class="token operator">||</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>tagName <span class="token operator">===</span> <span class="token string">'INPUT'</span> <span class="token operator">&amp;&amp;</span> el<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'text'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> offset <span class="token operator">=</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> el<span class="token punctuation">.</span>selectionStart<span class="token punctuation">)</span><span class="token punctuation">;</span>                bcr <span class="token operator">=</span> el<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>                    <span class="token literal-property property">x</span><span class="token operator">:</span> offset<span class="token punctuation">.</span>left <span class="token operator">+</span> bcr<span class="token punctuation">.</span>left<span class="token punctuation">,</span>                    <span class="token literal-property property">y</span><span class="token operator">:</span> offset<span class="token punctuation">.</span>top <span class="token operator">+</span> bcr<span class="token punctuation">.</span>top<span class="token punctuation">,</span>                    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token function">getColor</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">var</span> selection <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>selection<span class="token punctuation">.</span>rangeCount<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> range <span class="token operator">=</span> selection<span class="token punctuation">.</span><span class="token function">getRangeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">var</span> startNode <span class="token operator">=</span> range<span class="token punctuation">.</span>startContainer<span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>startNode<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> document<span class="token punctuation">.</span><span class="token constant">TEXT_NODE</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    startNode <span class="token operator">=</span> startNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                bcr <span class="token operator">=</span> range<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>                    <span class="token literal-property property">x</span><span class="token operator">:</span> bcr<span class="token punctuation">.</span>left<span class="token punctuation">,</span>                    <span class="token literal-property property">y</span><span class="token operator">:</span> bcr<span class="token punctuation">.</span>top<span class="token punctuation">,</span>                    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token function">getColor</span><span class="token punctuation">(</span>startNode<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'transparent'</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">function</span> <span class="token function">createParticle</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> color</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">x</span><span class="token operator">:</span> x<span class="token punctuation">,</span>                <span class="token literal-property property">y</span><span class="token operator">:</span> y<span class="token punctuation">,</span>                <span class="token literal-property property">alpha</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>                <span class="token literal-property property">color</span><span class="token operator">:</span> color<span class="token punctuation">,</span>                <span class="token literal-property property">velocity</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span>                    <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">3.5</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">function</span> <span class="token constant">POWERMODE</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> caret <span class="token operator">=</span> <span class="token function">getCaret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> numParticles <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>numParticles<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                particles<span class="token punctuation">[</span>particlePointer<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">createParticle</span><span class="token punctuation">(</span>caret<span class="token punctuation">.</span>x<span class="token punctuation">,</span> caret<span class="token punctuation">.</span>y<span class="token punctuation">,</span> caret<span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>                particlePointer <span class="token operator">=</span> <span class="token punctuation">(</span>particlePointer <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">500</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">POWERMODE</span><span class="token punctuation">.</span>shake<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> intensity <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">var</span> x <span class="token operator">=</span> intensity <span class="token operator">*</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0.5</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">var</span> y <span class="token operator">=</span> intensity <span class="token operator">*</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0.5</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>marginLeft <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>                document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>marginTop <span class="token operator">=</span> y <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>marginLeft <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>                    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>marginTop <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token constant">POWERMODE</span><span class="token punctuation">.</span>colorful <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">function</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>loop<span class="token punctuation">)</span><span class="token punctuation">;</span>            context<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> particles<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> particle <span class="token operator">=</span> particles<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>particle<span class="token punctuation">.</span>alpha <span class="token operator">&lt;=</span> <span class="token number">0.1</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>                particle<span class="token punctuation">.</span>velocity<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token number">0.075</span><span class="token punctuation">;</span>                particle<span class="token punctuation">.</span>x <span class="token operator">+=</span> particle<span class="token punctuation">.</span>velocity<span class="token punctuation">.</span>x<span class="token punctuation">;</span>                particle<span class="token punctuation">.</span>y <span class="token operator">+=</span> particle<span class="token punctuation">.</span>velocity<span class="token punctuation">.</span>y<span class="token punctuation">;</span>                particle<span class="token punctuation">.</span>alpha <span class="token operator">*=</span> <span class="token number">0.96</span><span class="token punctuation">;</span>                context<span class="token punctuation">.</span>globalAlpha <span class="token operator">=</span> particle<span class="token punctuation">.</span>alpha<span class="token punctuation">;</span>                context<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> particle<span class="token punctuation">.</span>color<span class="token punctuation">;</span>                context<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>particle<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>particle<span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>loop<span class="token punctuation">)</span><span class="token punctuation">;</span>        module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token constant">POWERMODE</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> exports</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> properties <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'direction'</span><span class="token punctuation">,</span> <span class="token string">'boxSizing'</span><span class="token punctuation">,</span> <span class="token string">'width'</span><span class="token punctuation">,</span> <span class="token string">'height'</span><span class="token punctuation">,</span> <span class="token string">'overflowX'</span><span class="token punctuation">,</span> <span class="token string">'overflowY'</span><span class="token punctuation">,</span> <span class="token string">'borderTopWidth'</span><span class="token punctuation">,</span> <span class="token string">'borderRightWidth'</span><span class="token punctuation">,</span> <span class="token string">'borderBottomWidth'</span><span class="token punctuation">,</span> <span class="token string">'borderLeftWidth'</span><span class="token punctuation">,</span> <span class="token string">'borderStyle'</span><span class="token punctuation">,</span> <span class="token string">'paddingTop'</span><span class="token punctuation">,</span> <span class="token string">'paddingRight'</span><span class="token punctuation">,</span> <span class="token string">'paddingBottom'</span><span class="token punctuation">,</span> <span class="token string">'paddingLeft'</span><span class="token punctuation">,</span> <span class="token string">'fontStyle'</span><span class="token punctuation">,</span> <span class="token string">'fontVariant'</span><span class="token punctuation">,</span> <span class="token string">'fontWeight'</span><span class="token punctuation">,</span> <span class="token string">'fontStretch'</span><span class="token punctuation">,</span> <span class="token string">'fontSize'</span><span class="token punctuation">,</span> <span class="token string">'fontSizeAdjust'</span><span class="token punctuation">,</span> <span class="token string">'lineHeight'</span><span class="token punctuation">,</span> <span class="token string">'fontFamily'</span><span class="token punctuation">,</span> <span class="token string">'textAlign'</span><span class="token punctuation">,</span> <span class="token string">'textTransform'</span><span class="token punctuation">,</span> <span class="token string">'textIndent'</span><span class="token punctuation">,</span> <span class="token string">'textDecoration'</span><span class="token punctuation">,</span> <span class="token string">'letterSpacing'</span><span class="token punctuation">,</span> <span class="token string">'wordSpacing'</span><span class="token punctuation">,</span> <span class="token string">'tabSize'</span><span class="token punctuation">,</span> <span class="token string">'MozTabSize'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> isFirefox <span class="token operator">=</span> window<span class="token punctuation">.</span>mozInnerScreenX <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token keyword">function</span> <span class="token function">getCaretCoordinates</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> position<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> debug <span class="token operator">=</span> options <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>debug <span class="token operator">||</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>debug<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">var</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#input-textarea-caret-position-mirror-div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        el<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>                <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                div<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">'input-textarea-caret-position-mirror-div'</span><span class="token punctuation">;</span>                document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">var</span> style <span class="token operator">=</span> div<span class="token punctuation">.</span>style<span class="token punctuation">;</span>                <span class="token keyword">var</span> computed <span class="token operator">=</span> window<span class="token punctuation">.</span>getComputedStyle <span class="token operator">?</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span> <span class="token operator">:</span> element<span class="token punctuation">.</span>currentStyle<span class="token punctuation">;</span>                style<span class="token punctuation">.</span>whiteSpace <span class="token operator">=</span> <span class="token string">'pre-wrap'</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>nodeName <span class="token operator">!==</span> <span class="token string">'INPUT'</span><span class="token punctuation">)</span> style<span class="token punctuation">.</span>wordWrap <span class="token operator">=</span> <span class="token string">'break-word'</span><span class="token punctuation">;</span>                style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'absolute'</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>debug<span class="token punctuation">)</span> style<span class="token punctuation">.</span>visibility <span class="token operator">=</span> <span class="token string">'hidden'</span><span class="token punctuation">;</span>                properties<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">prop</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    style<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> computed<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>isFirefox<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>scrollHeight <span class="token operator">></span> <span class="token function">parseInt</span><span class="token punctuation">(</span>computed<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">)</span> style<span class="token punctuation">.</span>overflowY <span class="token operator">=</span> <span class="token string">'scroll'</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                    style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token string">'hidden'</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                div<span class="token punctuation">.</span>textContent <span class="token operator">=</span> element<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> position<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>nodeName <span class="token operator">===</span> <span class="token string">'INPUT'</span><span class="token punctuation">)</span> div<span class="token punctuation">.</span>textContent <span class="token operator">=</span> div<span class="token punctuation">.</span>textContent<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">"\u00a0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">var</span> span <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                span<span class="token punctuation">.</span>textContent <span class="token operator">=</span> element<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'.'</span><span class="token punctuation">;</span>                div<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>span<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">var</span> coordinates <span class="token operator">=</span> <span class="token punctuation">&#123;</span>                    <span class="token literal-property property">top</span><span class="token operator">:</span> span<span class="token punctuation">.</span>offsetTop <span class="token operator">+</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>computed<span class="token punctuation">[</span><span class="token string">'borderTopWidth'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token literal-property property">left</span><span class="token operator">:</span> span<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>computed<span class="token punctuation">[</span><span class="token string">'borderLeftWidth'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>debug<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    span<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'#aaa'</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token keyword">return</span> coordinates<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> module <span class="token operator">!=</span> <span class="token string">"undefined"</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> module<span class="token punctuation">.</span>exports <span class="token operator">!=</span> <span class="token string">"undefined"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                module<span class="token punctuation">.</span>exports <span class="token operator">=</span> getCaretCoordinates<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                window<span class="token punctuation">.</span>getCaretCoordinates <span class="token operator">=</span> getCaretCoordinates<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>然后在<code>themes\matery\layout\layout.ejs</code>中添加</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token comment">&lt;!-- 添加打字爆炸特效 --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/js/activate-power-mode.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token constant">POWERMODE</span><span class="token punctuation">.</span>colorful <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// make power mode colorful</span>    <span class="token constant">POWERMODE</span><span class="token punctuation">.</span>shake <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// turn off shake</span>    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token constant">POWERMODE</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 特效 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>valine</title>
      <link href="/posts/9997.html"/>
      <url>/posts/9997.html</url>
      
        <content type="html"><![CDATA[<h1 id="valine评论系统详细配置"><a href="#valine评论系统详细配置" class="headerlink" title="valine评论系统详细配置"></a>valine评论系统详细配置</h1><p><a href="https://cloud.tencent.com/developer/article/2122077">valine评论设置邮件通知和valine-admin后台管理-腾讯云开发者社区-腾讯云 (tencent.com)</a></p><p><a href="https://blog.csdn.net/z_johnny/article/details/104211572">https://blog.csdn.net/z_johnny/article/details/104211572</a></p><p><a href="https://hwame.top/20200520/hello-hexo-optimization.html">Hexo博客搭建(3)——优化评论系统 | 鴻塵 (hwame.top)</a></p><p><a href="https://seayj.cn/articles/30931/">Valine评论系统优化 | SeaYJ’s Blog</a></p><p><a href="https://deserts.io/valine-admin-document/">Valine Admin 配置手册 (deserts.io)</a></p><p><a href="https://cloud.tencent.com/developer/article/1581174">Valine Admin 配置手册-腾讯云开发者社区-腾讯云 (tencent.com)</a></p><p><a href="https://cloud.tencent.com/developer/article/1798117">Hexo matery主题评论系统valine改版记录-腾讯云开发者社区-腾讯云 (tencent.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> valine </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>修改字体</title>
      <link href="/posts/3356.html"/>
      <url>/posts/3356.html</url>
      
        <content type="html"><![CDATA[<h1 id="字体修改"><a href="#字体修改" class="headerlink" title="字体修改"></a>字体修改</h1><h2 id="常见字体"><a href="#常见字体" class="headerlink" title="常见字体"></a>常见字体</h2><p>字体文件格式在Web开发中扮演着重要的角色，以下是几种常见的web字体格式：</p><ol><li><p><strong>TrueType (.ttf)</strong></p><ul><li>TrueType 是一种广泛应用于Windows和Mac操作系统的字体格式。它通过数学模式定义轮廓技术，使得字体在缩放或旋转时保持清晰无锯齿的显示效果。</li></ul></li><li><p><strong>Embedded Open Type (.eot)</strong></p><ul><li>EOT（嵌入式OpenType）是微软专为网页设计的一种字体格式，允许将OpenType字体嵌入到网页并由浏览器下载渲染。这种格式确保字体只在用户浏览当前页面时临时安装在系统中。</li></ul></li><li><p><strong>OpenType (.otf)</strong></p><ul><li>OpenType是一种高级的字型格式，结合了TrueType和PostScript的优点，支持多种复杂特性如连字、多语言支持等。由微软与Adobe联合开发，其文件扩展名为.otf。</li></ul></li><li><p><strong>Web Open Font Format (.woff)</strong></p><ul><li>WOFF（Web Open Font Format）是专门为网络应用优化的字体格式，是对TrueType和OpenType格式的封装和压缩版本。WOFF文件包含了字体数据和元数据，并针对网络传输进行了高效压缩，无加密或DRM保护措施，被各大主流字体供应商广泛支持。</li></ul></li><li><p><strong>SVG Fonts (.svg, .svgz)</strong></p><ul><li>SVG Fonts 使用SVG（Scalable Vector Graphics）技术来呈现字体，这意味着它们本质上是矢量图形，可以任意缩放而不失真。SVG字体可以通过简单的文本命令实现丰富的图形图像效果，包括色彩渐变、路径、自定义字体以及透明和滤镜效果等。其中.svgz是gzip压缩过的SVG字体格式，更利于网络传输。</li></ul></li></ol><p>CSS支持字体样式，通过@font-face属性在网页中嵌入自定义字体，主流的浏览器都支持这种方式，同时CSS字体属性还可以定义字体，加粗，大小，文字样式等。</p><p>默认支持:</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">body</span><span class="token punctuation">&#123;</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"serif"</span><span class="token punctuation">,</span><span class="token string">"sans-serif"</span><span class="token punctuation">,</span><span class="token string">"cursive"</span><span class="token punctuation">,</span><span class="token string">"fantasy"</span><span class="token punctuation">,</span><span class="token string">"monospace"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">body</span><span class="token punctuation">&#123;</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"sans-serif,monospace,微软雅黑,黑体,宋体"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>&lt;body><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>我喜欢的写法：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.myfont</span><span class="token punctuation">&#123;</span>    <span class="token property">font-family</span><span class="token punctuation">:</span><span class="token string">"微软雅黑"</span><span class="token punctuation">,</span><span class="token string">"黑体"</span><span class="token punctuation">,</span><span class="token string">"宋体"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myfont<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> Hello World! 这个网站很酷 zhangxiaocai.cn <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="自定义引入"><a href="#自定义引入" class="headerlink" title="自定义引入"></a>自定义引入</h3><p>如果想使用自定义的字体，首先引入</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">&#123;</span>       <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'myfont'</span><span class="token punctuation">;</span>       <span class="token property">src</span><span class="token punctuation">:</span><span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'字体文件1.woff'</span><span class="token punctuation">)</span></span><span class="token punctuation">,</span>     <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'字体文件2.ttf'</span><span class="token punctuation">)</span></span><span class="token punctuation">,</span>       <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'字体文件3.eot'</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">body</span><span class="token punctuation">&#123;</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'myfont'</span> <span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://zhangxiaocai.cn/posts/8f5c11d2.html">静态博客-字体更换 | 斯莫笔记 (zhangxiaocai.cn)</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 字体 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo优化</title>
      <link href="/posts/8410.html"/>
      <url>/posts/8410.html</url>
      
        <content type="html"><![CDATA[<h1 id="hexo优化"><a href="#hexo优化" class="headerlink" title="hexo优化"></a>hexo优化</h1><h2 id="cnpm"><a href="#cnpm" class="headerlink" title="cnpm"></a>cnpm</h2><blockquote><p><strong>本节参考自　<a href="http://npm.taobao.org/">淘宝 NPM 镜像</a></strong></p></blockquote><p>这是一个完整 <strong>npmjs.org</strong> 镜像，你可以用此代替官方版本（只读），同步频率目前为 10 分钟 一次以保证尽量与官方服务器同步。在 <strong>npm</strong> 无法同步时提供帮助。</p><p><strong>打开命令行窗口安装</strong>：<code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code></p><h3 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h3><h4 id="安装模块"><a href="#安装模块" class="headerlink" title="安装模块"></a>安装模块</h4><p>从 <a href="https://registry.npm.taobao.org/">registry.npm.taobao.org</a> 安装所有模块。当安装的时候发现安装的模块还没有同步过来，淘宝 NPM 会自动在后台进行同步，并且会让你从官方 NPM <a href="https://registry.npm.taobao.org/">registry.npm.taobao.org</a> 进行安装。下次你再安装这个模块的时候，就会直接从 淘宝 NPM 安装了。</p><pre class="line-numbers language-none"><code class="language-none">$ cnpm install [name]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="同步模块"><a href="#同步模块" class="headerlink" title="同步模块"></a>同步模块</h4><p>直接通过 <code>sync</code> 命令马上同步一个模块, 只有 <code>cnpm</code> 命令行才有此功能:</p><pre class="line-numbers language-none"><code class="language-none">$ cnpm sync connect<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>当然, 你可以直接通过 web 方式来同步: <a href="https://npm.taobao.org/sync/connect">&#x2F;sync&#x2F;connect</a></p><pre class="line-numbers language-none"><code class="language-none">$ open https:&#x2F;&#x2F;npm.taobao.org&#x2F;sync&#x2F;connect<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="其它命令"><a href="#其它命令" class="headerlink" title="其它命令"></a>其它命令</h4><p>支持 <code>npm</code> 除了 <code>publish</code> 之外的所有命令, 如:</p><pre class="line-numbers language-none"><code class="language-none">$ cnpm info connect<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="InstantClick"><a href="#InstantClick" class="headerlink" title="InstantClick"></a>InstantClick</h2><p><strong>本节参考自　<a href="https://www.liuxinggang.com/2016-12-06-hexo%E5%8D%9A%E5%AE%A2%E8%BF%9B%E9%98%B6%EF%BC%8D%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">刘兴刚博客</a></strong></p><p><strong>Next 主题 现已集成 quicklink</strong></p><p>通常，我们为了减少 <strong>DNS</strong> 的查询时间，使用 <strong>dns prefetch</strong> 为该页面中的链接做解析，提升页面的加载速度。类似的，我们可以在鼠标滑到链接上到点击的时间间隙去加载这个页面，通常这个间隙有几百毫秒，利用 <strong>InstantClick</strong>，我们可以充分利用这几百毫秒，让网站能够瞬间显示新页面，几乎没有延迟。</p><p>但是 <strong>InstantClick</strong> 并不能滥用，许多 <strong>js</strong> 无法与它兼容，如<strong>谷歌分析</strong>、<strong>百度统计</strong>以及 <strong>fancybox</strong>。</p><p>初始化并解决部分 <strong>js</strong> 无法加载的问题：</p><p><strong>打开</strong>　<code>\hexo-theme-next\layout\_partials\head.njk</code></p><p><strong>添加</strong></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"\js\custom\instantclick.min.js"</span> data<span class="token operator">-</span>no<span class="token operator">-</span>instant<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>   <span class="token operator">&lt;</span>script data<span class="token operator">-</span>no<span class="token operator">-</span>instant<span class="token operator">></span>   InstantClick<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">isInitialLoad</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   <span class="token keyword">if</span> <span class="token punctuation">(</span>isInitialLoad <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> MathJax <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token comment">// support MathJax</span>     MathJax<span class="token punctuation">.</span>Hub<span class="token punctuation">.</span><span class="token function">Queue</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"Typeset"</span><span class="token punctuation">,</span>MathJax<span class="token punctuation">.</span>Hub<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> prettyPrint <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token comment">// support google code prettify</span>     <span class="token function">prettyPrint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> _hmt <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span>  <span class="token comment">// support 百度统计</span>     _hmt<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'_trackPageview'</span><span class="token punctuation">,</span> location<span class="token punctuation">.</span>pathname <span class="token operator">+</span> location<span class="token punctuation">.</span>search<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> ga <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span>  <span class="token comment">// support google analytics</span>       <span class="token function">ga</span><span class="token punctuation">(</span><span class="token string">'send'</span><span class="token punctuation">,</span> <span class="token string">'pageview'</span><span class="token punctuation">,</span> location<span class="token punctuation">.</span>pathname <span class="token operator">+</span> location<span class="token punctuation">.</span>search<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   InstantClick<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>下载</strong>　 <a href="http://instantclick.io/v3.1.0/instantclick.min.js">instantclick.min.js</a></p><p><strong>打开</strong>　<code>\hexo-theme-next\source\js\custom\</code></p><p><strong>放置</strong>　<code>instantclick.min.js</code></p><p>这时候对于所有链接都开启<strong>预加载模式</strong>，但可以把部分链接加入黑名单：<br><code>&lt;a href=&quot;\blog\&quot; data-no-instant&gt;Blog&lt;/a&gt;</code></p><h2 id="压缩"><a href="#压缩" class="headerlink" title="压缩"></a>压缩</h2><h3 id="5-1-Gulp"><a href="#5-1-Gulp" class="headerlink" title="5.1. Gulp"></a>5.1. Gulp</h3><p><strong>本节参考自　<a href="https://chanshiyu.com/">蝉時雨</a></strong></p><p><strong>gulp.js</strong> 是基于流的自动化构建工具，我们可以使用 <strong>Gulp</strong> 为 Hexo 压缩文件</p><p><strong>在 \blog\ 打开命令行窗口</strong></p><p><strong>安装</strong></p><pre class="line-numbers language-none"><code class="language-none">npm install gulp --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>再根据需要安装以下模块</strong></p><pre class="line-numbers language-none"><code class="language-none">npm install gulp-minify-css --savenpm install gulp-uglify --savenpm install gulp-htmlmin --savenpm install gulp-htmlclean --savenpm install gulp-imagemin --save<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>打开</strong>　<code>\blog\</code></p><p><strong>新建</strong>　<code>gulpfile.js</code></p><p><strong>添加</strong></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> minifycss <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-minify-css'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> uglify <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-uglify'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> htmlmin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-htmlmin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> htmlclean <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-htmlclean'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> imagemin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-imagemin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 压缩html文件</span>gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'minify-html'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./public/**/*.html'</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">htmlclean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">htmlmin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token literal-property property">removeComments</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token literal-property property">minifyJS</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token literal-property property">minifyCSS</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token literal-property property">minifyURLs</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 压缩css文件</span>gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'minify-css'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./public/**/*.css'</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">minifycss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 压缩js文件</span>gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'minify-js'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'./public/**/.js'</span><span class="token punctuation">,</span><span class="token string">'!./public/js/**/*min.js'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">uglify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 压缩 public/images 目录内图片</span>gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'minify-images'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./public/images/**/*.*'</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">imagemin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>     <span class="token literal-property property">optimizationLevel</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">//类型：Number  默认：3  取值范围：0-7（优化等级）</span>     <span class="token literal-property property">progressive</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//类型：Boolean 默认：false 无损压缩jpg图片</span>     <span class="token literal-property property">interlaced</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//类型：Boolean 默认：false 隔行扫描gif进行渲染</span>     <span class="token literal-property property">multipass</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//类型：Boolean 默认：false 多次优化svg直到完全优化</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./public/uploads'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 默认任务 gulp 4.0 适用的方式</span>gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span> gulp<span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token string">'minify-html'</span><span class="token punctuation">,</span> <span class="token string">'minify-css'</span><span class="token punctuation">,</span> <span class="token string">'minify-js'</span><span class="token punctuation">,</span> <span class="token string">'minify-images'</span> <span class="token comment">//build the website</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>依照格式，删除未安装模块的代码部分</strong></p><p><strong>在命令行内输入 <code>$ gulp</code> 即可运行</strong></p><p><strong>一键同步代码参照　<a href="https://qianling.pw/hexo-optimization/#7">7. 批处理脚本自动创建文章及一键部署</a></strong></p><p><strong>把因删除空格缩小的间距调整回来：</strong></p><p><strong>打开</strong>　<code>\blog\source\_data\styles.styl</code></p><p><strong>添加</strong></p><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; gulp 间距调整span.leancloud-visitors-count, span.post-comments-count.valine-comment-count &#123;  padding-left: 2px;&#125;i.fa.fa-ravelry &#123;  padding-left: 5px;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-2-hexo-neat"><a href="#5-2-hexo-neat" class="headerlink" title="5.2. hexo-neat"></a>5.2. hexo-neat</h3><p><strong>本节参考自　<a href="https://blog.csdn.net/lewky_liu/article/details/82432003">Hexo瞎折腾系列(5) - 使用hexo-neat插件压缩页面静态资源</a></strong></p><p><strong>已知 BUG：</strong></p><ul><li><strong>压缩 md 文件会使 markdown 语法的代码块消失</strong></li><li><strong>会删除全角空格</strong></li></ul><p><strong>安装</strong>　<code>npm install hexo-neat --save</code></p><p><strong>打开</strong>　<code>\blog\_config.yml</code></p><p><strong>添加</strong></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># hexo-neat</span><span class="token comment"># 开关</span><span class="token key atrule">neat_enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token comment"># 压缩 html</span><span class="token key atrule">neat_html</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">exclude</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token string">'**/*.md'</span><span class="token comment"># 压缩 css</span><span class="token key atrule">neat_css</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">exclude</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token string">'**/*.min.css'</span><span class="token comment"># 压缩 js</span><span class="token key atrule">neat_js</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">mangle</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">output</span><span class="token punctuation">:</span>  <span class="token key atrule">compress</span><span class="token punctuation">:</span>  <span class="token key atrule">exclude</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token string">'**/*.min.js'</span>  <span class="token punctuation">-</span> <span class="token string">'**/jquery.fancybox.pack.js'</span>  <span class="token punctuation">-</span> <span class="token string">'**/index.js'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Service-Worker"><a href="#Service-Worker" class="headerlink" title="Service Worker"></a>Service Worker</h2><p><strong>教程　<a href="https://qianling.pw/service-worker/">Hexo 部署 Service Worker</a></strong></p><p>Service workers 本质上充当 Web 应用程序与浏览器之间的代理服务器，为了适应越来越多的网页应用而产生。</p><p>它可以通过拦截并修改访问和资源请求，缓存特定的网页资源，并可以将网页做到离线可用；</p><p>同时 Service Workers 也能做到定期后台同步与信息推送。</p><p>部署成功后，您可以节省用户流量、提升页面二次加载速度等。</p><h2 id="批处理脚本自动创建文章及一键部署"><a href="#批处理脚本自动创建文章及一键部署" class="headerlink" title="批处理脚本自动创建文章及一键部署"></a>批处理脚本自动创建文章及一键部署</h2><p><strong>打开</strong>　<code>\blog\</code></p><p><strong>新建</strong>　<code>新建文章.bat</code></p><p><strong>添加</strong></p><pre class="line-numbers language-none"><code class="language-none">set &quot;a&#x3D;%date:~,4%&quot;set &quot;b&#x3D;%date:~5,2%&quot;set &quot;c&#x3D;%date:~8,2%&quot;hexo new &quot;%a%-%b%-%c%&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>命名格式为　<code>年-月-日.md</code></strong></p><p><strong>部署可写为</strong>　<code>hexo clean &amp; hexo g -d</code></p><p><strong>若使用 gulp 则写为</strong>　<code>hexo clean &amp; hexo g &amp;&amp; gulp &amp; hexo deploy</code></p><h2 id="添加标题底部横线"><a href="#添加标题底部横线" class="headerlink" title="添加标题底部横线"></a>添加标题底部横线</h2><p><strong>本节参考自　<a href="http://yuchen-lea.github.io/">跬步</a></strong></p><p><strong>打开</strong>　<code>\blog\source\_data\styles.styl</code></p><p><strong>添加</strong></p><pre class="line-numbers language-none"><code class="language-none">h1, h2, h3, h4, h5, h6 &#123;  border-bottom: 2px solid #8c8c8c;  padding: 0 5% 2px 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="阅读进度条"><a href="#阅读进度条" class="headerlink" title="阅读进度条"></a>阅读进度条</h2><p><strong>本节参考自　<a href="https://isudox.com/2016/07/14/customize-hexo-theme/">I sudo X</a></strong></p><p><strong>比自带的更好看。</strong></p><p><strong>打开</strong>　<code>\blog\source\_data\header.njk</code></p><p><strong>添加</strong></p><pre class="line-numbers language-none"><code class="language-none">&lt;div class&#x3D;&quot;top-scroll-bar&quot;&gt;&lt;&#x2F;div&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>打开</strong>　<code>\blog\source\_data\styles.styl</code></p><p><strong>添加</strong></p><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;顶部阅读进度条.top-scroll-bar &#123;  position: fixed;  height: 3px;  top: 0;  left: 0;  transition-duration: 0.7s,0.7s;  transiton-property: width,background;  z-index: 99999;  display: none;  background: #37C6C0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>打开</strong>　<code>\hexo-theme-next\source\js\custom\custom.js</code></p><p><strong>添加</strong></p><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;阅读进度条$(document).ready(function () &#123;  $(window).scroll(function()&#123;  $(&quot;.top-scroll-bar&quot;).attr(&quot;style&quot;, &quot;width: &quot; + ($(this).scrollTop() &#x2F; ($(document).height() - $(this).height()) * 100) + &quot;%; display: block;&quot;);  var s&#x3D;$(window).scrollTop();  var a&#x3D;$(document).height();  var b&#x3D;$(window).height();  var result&#x3D;parseInt(s&#x2F;(a-b)*100);  $(&quot;.top-scroll-bar&quot;).css(&quot;width&quot;,result+&quot;%&quot;);  if(result&gt;&#x3D;0&amp;&amp;result&lt;&#x3D;19)  $(&quot;.top-scroll-bar&quot;).css(&quot;background&quot;,&quot;#cccccc&quot;);  if(result&gt;&#x3D;20&amp;&amp;result&lt;&#x3D;39)  $(&quot;.top-scroll-bar&quot;).css(&quot;background&quot;,&quot;#50bcb6&quot;);  if(result&gt;&#x3D;40&amp;&amp;result&lt;&#x3D;59)  $(&quot;.top-scroll-bar&quot;).css(&quot;background&quot;,&quot;#85c440&quot;);  if(result&gt;&#x3D;60&amp;&amp;result&lt;&#x3D;79)  $(&quot;.top-scroll-bar&quot;).css(&quot;background&quot;,&quot;#f2b63c&quot;);  if(result&gt;&#x3D;80&amp;&amp;result&lt;&#x3D;99)  $(&quot;.top-scroll-bar&quot;).css(&quot;background&quot;,&quot;#FF0000&quot;);  if(result&#x3D;&#x3D;100)  $(&quot;.top-scroll-bar&quot;).css(&quot;background&quot;,&quot;#f58ca1&quot;);  &#125;);&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="在线阅读pdf"><a href="#在线阅读pdf" class="headerlink" title="在线阅读pdf"></a>在线阅读pdf</h2><p>参考：<a href="https://breezs.gitee.io/posts/202203081740.html">如何在hexo博客中在线阅读pdf | 冰山一树Sankey (gitee.io)</a></p><h2 id="图片懒加载"><a href="#图片懒加载" class="headerlink" title="图片懒加载"></a>图片懒加载</h2><h2 id="添加二级菜单功能"><a href="#添加二级菜单功能" class="headerlink" title="添加二级菜单功能#"></a>添加二级菜单功能<a href="https://www.cnblogs.com/chendeqiang/p/12861726.html#727338988">#</a></h2><p><a href="https://sunhwee.com/posts/65d7181d.html">https://sunhwee.com/posts/65d7181d.html</a></p><h2 id="双部署分流操作"><a href="#双部署分流操作" class="headerlink" title="双部署分流操作#"></a>双部署分流操作<a href="https://www.cnblogs.com/chendeqiang/p/12861726.html#3338530695">#</a></h2><p><a href="http://www.purethought.cn/74d17cc3.html">www.purethought.cn/74d17cc3.html</a></p><h2 id="远程部署"><a href="#远程部署" class="headerlink" title="远程部署#"></a>远程部署<a href="https://www.cnblogs.com/chendeqiang/p/12861726.html#3568245540">#</a></h2><p>应用腾讯CloudStudio进行远程部署hexo。这样的好处是获得了集成化开发环境和全网化开发化境，只要有电脑有网络的地方都可以部署博客了。</p><h3 id="私有仓库"><a href="#私有仓库" class="headerlink" title="私有仓库#"></a>私有仓库<a href="https://www.cnblogs.com/chendeqiang/p/12861726.html#3620572302">#</a></h3><p>默认情况下github的仓库是公有的，仓库的内容会被所有人看见，因此先建立个私有化仓库存储源码。<br>在github上新建一个<code>Private</code>仓库，如：Blog</p><h3 id="上传源码"><a href="#上传源码" class="headerlink" title="上传源码#"></a>上传源码<a href="https://www.cnblogs.com/chendeqiang/p/12861726.html#194976405">#</a></h3><p>删除第三方主题下的.git文件夹；<br>配置.gitignore文件：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Copy.DS_StoreThumbs.dbdb.json*.lognode_modules/public/.deploy*/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>上传源码到私有仓库</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Copygit init  //初始化本地仓库<span class="token function">git</span> remote <span class="token function">add</span> origin 私有仓库的git地址  //添加远程仓库<span class="token function">git</span> pull origin master<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span> //添加本地所有文件到仓库        <span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">"blog源文件"</span> //添加commit<span class="token function">git</span> push <span class="token parameter variable">-u</span> origin master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="CloudStudio"><a href="#CloudStudio" class="headerlink" title="CloudStudio#"></a>CloudStudio<a href="https://www.cnblogs.com/chendeqiang/p/12861726.html#2131830712">#</a></h3><p>申请CloudStudio账号，并<code>新建工作空间</code><br>先选择运行环境，hexo<br>然后来源选其他git仓库，填写私有仓库的git地址 ，并将PUblishKey添加到github里<br>等个三五分钟，就会看到CloudStudio工作站了<br>这样就可以使用CloudStudio部署博客了，例如使用<code>hexo g</code>测试一下先。</p><h2 id="流程图"><a href="#流程图" class="headerlink" title="流程图#"></a>流程图<a href="https://www.cnblogs.com/chendeqiang/p/12861726.html#2934767672">#</a></h2><p>安装</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> hexo-filter-flowchart<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>用法</p><pre class="line-numbers language-out" data-language="out"><code class="language-out">&#96; &#96; &#96;flowst&#x3D;&gt;start: Start|past:&gt;https:&#x2F;&#x2F;www.baidu.com[blank]e&#x3D;&gt;end: End:&gt;https:&#x2F;&#x2F;www.baidu.comop1&#x3D;&gt;operation: My Operation|pastop2&#x3D;&gt;operation: Stuff|currentsub1&#x3D;&gt;subroutine: My Subroutine|invalidcond&#x3D;&gt;condition: Yesor No?|approved:&gt;https:&#x2F;&#x2F;www.baidu.comc2&#x3D;&gt;condition: Good idea|rejectedio&#x3D;&gt;inputoutput: catch something...|requestst-&gt;op1(right)-&gt;condcond(yes, right)-&gt;c2cond(no)-&gt;sub1(left)-&gt;op1c2(yes)-&gt;io-&gt;ec2(no)-&gt;op2-&gt;e&#96; &#96; &#96;st&#x3D;&gt;start: Start|past:&gt;https:&#x2F;&#x2F;www.baidu.com[blank]e&#x3D;&gt;end: End:&gt;https:&#x2F;&#x2F;www.baidu.comop1&#x3D;&gt;operation: My Operation|pastop2&#x3D;&gt;operation: Stuff|currentsub1&#x3D;&gt;subroutine: My Subroutine|invalidcond&#x3D;&gt;condition: Yesor No?|approved:&gt;https:&#x2F;&#x2F;www.baidu.comc2&#x3D;&gt;condition: Good idea|rejectedio&#x3D;&gt;inputoutput: catch something...|requestst-&gt;op1(right)-&gt;condcond(yes, right)-&gt;c2cond(no)-&gt;sub1(left)-&gt;op1c2(yes)-&gt;io-&gt;ec2(no)-&gt;op2-&gt;e<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="SEO优化"><a href="#SEO优化" class="headerlink" title="SEO优化"></a>SEO优化</h2><p>- </p><ul><li><a href="https://blog.tianyichuxin.com/2022/05/42878.html#toc-heading-1">基于Hexo的matery主题搭建博客并深度优化 | 天弈初心 (tianyichuxin.com)</a></li></ul><h2 id="amp优化"><a href="#amp优化" class="headerlink" title="amp优化"></a>amp优化</h2><p><a href="https://www.cnblogs.com/chendeqiang/p/12861726.html">博客-hexo-matery主题改造笔记 - 多弗朗强哥 - 博客园 (cnblogs.com)</a></p><p><code>hexo-generator-amp</code></p><h2 id="静态资源加速，jsdelivr的替代品"><a href="#静态资源加速，jsdelivr的替代品" class="headerlink" title="静态资源加速，jsdelivr的替代品"></a>静态资源加速，jsdelivr的替代品</h2><p><a href="https://blog.luzy.top/posts/2757854163/#more">静态资源加速，寻找jsdelivr的替代品 - 江风引雨の小po站 (luzy.top)</a></p><p><a href="https://blog.luzy.top/posts/2757854163/#more">静态资源加速，寻找jsdelivr的替代品 - 江风引雨の小po站 (luzy.top)</a></p><h2 id="文末结束标记"><a href="#文末结束标记" class="headerlink" title="文末结束标记"></a>文末结束标记</h2><p><strong>本节参考自　<a href="http://www.wuxubj.cn/2016/08/Hexo-nexT-build-personal-blog/#5-3-%E6%96%87%E7%AB%A0%E6%9C%AB%E5%B0%BE%E6%B7%BB%E5%8A%A0%E2%80%9C%E6%9C%AC%E6%96%87%E7%BB%93%E6%9D%9F%E2%80%9D%E6%A0%87%E8%AE%B0/">务虚笔记</a></strong></p><h2 id="自定义内置标签"><a href="#自定义内置标签" class="headerlink" title="自定义内置标签"></a>自定义内置标签</h2><p><a href="https://www.cnblogs.com/chendeqiang/p/12861726.html">博客-hexo-matery主题改造笔记 - 多弗朗强哥 - 博客园 (cnblogs.com)</a></p><p>在themes&#x2F;主题 下新建scripts文件夹，hexo会自动执行此文件夹的内容。<br>在scripts文件夾下新建block.js</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Copyhexo<span class="token punctuation">.</span>extend<span class="token punctuation">.</span>tag<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">args<span class="token punctuation">,</span> content</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token keyword">var</span> className <span class="token operator">=</span>  args<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token string">'&lt;div class="uk-alert uk-alert-danger">&lt;i class="fa fa-warning">&lt;/i> '</span> <span class="token operator">+</span> content <span class="token operator">+</span> <span class="token string">'&lt;/div>'</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">ends</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>hexo<span class="token punctuation">.</span>extend<span class="token punctuation">.</span>tag<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">args<span class="token punctuation">,</span> content</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token keyword">var</span> className <span class="token operator">=</span>  args<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token string">'&lt;div class="uk-alert uk-alert-success">&lt;i class="fa fa-check-circle">&lt;/i> '</span> <span class="token operator">+</span> content <span class="token operator">+</span> <span class="token string">'&lt;/div>'</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">ends</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>hexo<span class="token punctuation">.</span>extend<span class="token punctuation">.</span>tag<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">args<span class="token punctuation">,</span> content</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token keyword">var</span> className <span class="token operator">=</span>  args<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token string">'&lt;div class="uk-alert uk-alert-warning">&lt;i class="fa fa-exclamation-circle">&lt;/i> '</span> <span class="token operator">+</span> content <span class="token operator">+</span> <span class="token string">'&lt;/div>'</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">ends</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在themes&#x2F;主题&#x2F;source&#x2F;css&#x2F;my.css內添加</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">Copy.uk-alert</span> <span class="token punctuation">&#123;</span>  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>  <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span> #ebf7fd<span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span> #2d7091<span class="token punctuation">;</span>  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid <span class="token function">rgba</span><span class="token punctuation">(</span>45<span class="token punctuation">,</span> 112<span class="token punctuation">,</span> 145<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>  <span class="token property">text-shadow</span><span class="token punctuation">:</span> 0 1px 0 #ffffff<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* Modifier: `uk-alert-success` ========================================================================== */</span><span class="token selector">.uk-alert-success</span> <span class="token punctuation">&#123;</span>  <span class="token property">background</span><span class="token punctuation">:</span> #f2fae3<span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span> #659f13<span class="token punctuation">;</span>  <span class="token property">border-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>101<span class="token punctuation">,</span> 159<span class="token punctuation">,</span> 19<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* Modifier: `uk-alert-warning` ========================================================================== */</span><span class="token selector">.uk-alert-warning</span> <span class="token punctuation">&#123;</span>  <span class="token property">background</span><span class="token punctuation">:</span> #fffceb<span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span> #e28327<span class="token punctuation">;</span>  <span class="token property">border-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>226<span class="token punctuation">,</span> 131<span class="token punctuation">,</span> 39<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* Modifier: `uk-alert-danger` ========================================================================== */</span><span class="token selector">.uk-alert-danger</span> <span class="token punctuation">&#123;</span>  <span class="token property">background</span><span class="token punctuation">:</span> #fff1f0<span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span> #d85030<span class="token punctuation">;</span>  <span class="token property">border-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>216<span class="token punctuation">,</span> 80<span class="token punctuation">,</span> 48<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>然後就可以使用了。<br>用法：</p><pre class="line-numbers language-w" data-language="w"><code class="language-w"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><ul><li><p><a href="https://qianling.pw/hexo-optimization/">Hexo 优化汇总 | 千灵 (qianling.pw)</a></p></li><li><p><a href="https://blog.csdn.net/qq_44846853/article/details/104563887">Hexo博客主题安装和优化（二）_hexo matery设置雪花飘落-CSDN博客</a></p></li><li><p><a href="https://blog.sky03.cn/posts/42790.html">Hexo进阶之各种优化 | Sky03我的薰衣草</a></p></li><li><p><a href="https://www.cnblogs.com/chendeqiang/p/12861726.html">博客-hexo-matery主题改造笔记 - 多弗朗强哥 - 博客园 (cnblogs.com)</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker常用命令</title>
      <link href="/posts/1d91.html"/>
      <url>/posts/1d91.html</url>
      
        <content type="html"><![CDATA[<h1 id="Docker常用命令"><a href="#Docker常用命令" class="headerlink" title="Docker常用命令"></a>Docker常用命令</h1><p>开始入门Docker学习，开始时间的晚了点，只能多花点功夫努力学习了。</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402032139023.png" alt="DockerCheatSheet"></p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402032139991.png" alt="DockerXmind"></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>相册设置</title>
      <link href="/posts/fb80.html"/>
      <url>/posts/fb80.html</url>
      
        <content type="html"><![CDATA[<h1 id="添加相册"><a href="#添加相册" class="headerlink" title="添加相册"></a>添加相册</h1><h2 id="为什么添加相册"><a href="#为什么添加相册" class="headerlink" title="为什么添加相册"></a>为什么添加相册</h2><p>个人博客中添加相册功能，不仅具备多项实用性与娱乐性优点，而且能够丰富博客的表达形式与内容层次：</p><ol><li><strong>保存和展示图片</strong>：博主可以将自己拍摄或收集到的各种喜欢的图片上传至相册，如旅行照片、作品集、灵感素材等，为自己的博客创建一个独特的视觉档案库，方便随时查看和分享。</li><li><strong>记录日常生活</strong>：通过相册功能，博主能够以直观且生动的方式记录下生活中的点点滴滴，如美食制作过程、家庭聚会瞬间、学习工作进展、户外探险经历等。这些图像资料既是对生活记忆的有效留存，也是向读者展现真实自我、增进情感交流的重要载体。</li><li><strong>激发创作灵感</strong>：对于艺术创作者或者写作者来说，过往的图片记录可能是未来的创作源泉，相册的存在可以帮助他们回顾过去，挖掘新的创意灵感。</li></ol><p>综上所述，在个人博客中添加相册功能，不仅可以满足博主个性化的需求，还能有效增强博客的吸引力，提升用户的浏览满意度，并为博主提供一个珍贵的记忆宝库和持续创新的动力来源。</p><h2 id="样式一"><a href="#样式一" class="headerlink" title="样式一"></a>样式一</h2><h3 id="演示效果"><a href="#演示效果" class="headerlink" title="演示效果"></a>演示效果</h3><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402022017255.png" alt="galleries"></p><h3 id="添加【相册】菜单"><a href="#添加【相册】菜单" class="headerlink" title="添加【相册】菜单"></a>添加【相册】菜单</h3><ol><li><p>进入主题（matery）下的配置文件_config.yml，在menu下添加以下代码：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">Galleries</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /galleries    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fa<span class="token punctuation">-</span>photo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>在主题（matery）下的languages下的</p><p>default.yml（英文）添加：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">galleries</span><span class="token punctuation">:</span> galleries<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>zh-CN.yml（中文）添加：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">galleries</span><span class="token punctuation">:</span> 相册<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>在matery&#x2F;layout&#x2F;_partial&#x2F;下的<code>navigation.ejs</code>和<code>mobile-nav.ejs</code>文件里添加：</p><p>至于添加的位置，打开文件后就知道了，里面会有类似格式的代码，很容易找到的</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">menuMap.set("Galleries"<span class="token punctuation">,</span> "相册");<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>在站点根目录source下新建galleries文件，然后在该目录下新建index.md，添加以下代码：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> 相册<span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"galleries"</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h3 id="设置样式"><a href="#设置样式" class="headerlink" title="设置样式"></a>设置样式</h3><p>在matery&#x2F;source&#x2F;css下新建gallery.css文件，添加以下样式：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.gallery-wrapper</span><span class="token punctuation">&#123;</span>  <span class="token property">padding-top</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.gallery-wrapper .gallery-box</span><span class="token punctuation">&#123;</span>  <span class="token property">padding</span><span class="token punctuation">:</span> 5px <span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.gallery-wrapper .gallery-item</span> <span class="token punctuation">&#123;</span>  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>  <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>  <span class="token property">padding</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>  <span class="token property">-moz-box-shadow</span><span class="token punctuation">:</span> 0 1px 3px 0 <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.22<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> 0 1px 3px 0 <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.22<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 1px 3px 0 <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.22<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.gallery-cover-box</span><span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  <span class="token property">padding-top</span><span class="token punctuation">:</span> 60%<span class="token punctuation">;</span>  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span> center center no-repeat<span class="token punctuation">;</span>  <span class="token property">-webkit-background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>  <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.gallery-cover-box .gallery-cover-img</span> <span class="token punctuation">&#123;</span>  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>  <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>  <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.gallery-item .gallery-name</span><span class="token punctuation">&#123;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>  <span class="token property">line-height</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.waterfall</span> <span class="token punctuation">&#123;</span>  <span class="token property">column-count</span><span class="token punctuation">:</span> 3<span class="token punctuation">;</span>  <span class="token property">column-gap</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.photo-wrapper</span><span class="token punctuation">&#123;</span>  <span class="token property">padding-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.photo-item</span> <span class="token punctuation">&#123;</span>  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>  <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">-moz-page-break-inside</span><span class="token punctuation">:</span> avoid<span class="token punctuation">;</span>  <span class="token property">-webkit-column-break-inside</span><span class="token punctuation">:</span> avoid<span class="token punctuation">;</span>  <span class="token property">break-inside</span><span class="token punctuation">:</span> avoid<span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>  <span class="token property">-moz-box-shadow</span><span class="token punctuation">:</span> 0 1px 3px 0 <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.22<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> 0 1px 3px 0 <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.22<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 1px 3px 0 <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.22<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.photo-item img</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.photo-item .photo-name</span><span class="token punctuation">&#123;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>  <span class="token property">line-height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>  <span class="token property">border-top</span><span class="token punctuation">:</span> 1px solid #dddddd<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/*适配移动端布局*/</span><span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 601px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>  <span class="token selector">.waterfall</span> <span class="token punctuation">&#123;</span>    <span class="token property">column-count</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>    <span class="token property">column-gap</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在matery&#x2F;layout目录下</p><ul><li><p>新建galleries.ejs文件，添加以下代码：</p><pre class="line-numbers language-ej" data-language="ej"><code class="language-ej">&lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;&#x2F;css&#x2F;gallery.css&quot;&gt;&lt;%- partial(&#39;_partial&#x2F;bg-cover&#39;) %&gt;&lt;main class&#x3D;&quot;content&quot;&gt;    &lt;div class&#x3D;&quot;container&quot;&gt;        &lt;% if (site.data &amp;&amp; site.data.galleries) &#123; %&gt;        &lt;% var galleries &#x3D; site.data.galleries; %&gt;        &lt;div class&#x3D;&quot;gallery-wrapper row&quot;&gt;            &lt;% for (var i &#x3D; 0, len &#x3D; galleries.length; i &lt; len; i++) &#123; %&gt;            &lt;% var gallery &#x3D; galleries[i]; %&gt;            &lt;div class&#x3D;&quot;col s6 m4 l4 xl3 gallery-box&quot;&gt;                &lt;a href&#x3D;&quot;.&#x2F;&lt;%- gallery.name %&gt;&quot; class&#x3D;&quot;gallery-item&quot; data-aos&#x3D;&quot;zoom-in-up&quot;&gt;                    &lt;div class&#x3D;&quot;gallery-cover-box&quot; style&#x3D;&quot;background-image: url(http:&#x2F;&#x2F;图片地址.com&#x2F;&lt;%- gallery.cover%&gt;);&quot;&gt;                    &lt;&#x2F;div&gt;                    &lt;p class&#x3D;&quot;gallery-name&quot;&gt;                        &lt;%- gallery.name %&gt;                    &lt;&#x2F;p&gt;                &lt;&#x2F;a&gt;            &lt;&#x2F;div&gt;            &lt;% &#125; %&gt;        &lt;&#x2F;div&gt;        &lt;% &#125; %&gt;    &lt;&#x2F;div&gt;&lt;&#x2F;main&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>新建gallery.ejs，添加以下代码：</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/css/gallery.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/libs/fancybox/jquery.fancybox.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/libs/justifiedGallery/justifiedGallery.min.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/post-cover'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"><span class="token keyword">let</span> galleries <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>site<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> site<span class="token punctuation">.</span>data<span class="token punctuation">.</span>galleries<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    galleries <span class="token operator">=</span> site<span class="token punctuation">.</span>data<span class="token punctuation">.</span>galleries<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> pageTitle <span class="token operator">=</span> page<span class="token punctuation">.</span>title<span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">getCurrentGallery</span><span class="token punctuation">(</span><span class="token parameter">galleries<span class="token punctuation">,</span> pageTitle</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> galleries<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>galleries<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">==</span> pageTitle<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> galleries<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> currentGallery <span class="token operator">=</span> <span class="token function">getCurrentGallery</span><span class="token punctuation">(</span>galleries<span class="token punctuation">,</span> pageTitle<span class="token punctuation">)</span><span class="token keyword">var</span> photos <span class="token operator">=</span> currentGallery<span class="token punctuation">.</span>photos<span class="token punctuation">;</span><span class="token keyword">let</span> imageStr <span class="token operator">=</span> <span class="token string">''</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> photos<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> photo <span class="token operator">=</span> photos<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    imageStr <span class="token operator">+=</span> <span class="token string">"&lt;a href=\"http://图片地址.com/"</span> <span class="token operator">+</span> photo <span class="token operator">+</span> <span class="token string">"\""</span> <span class="token operator">+</span>            <span class="token string">"     class=\"photo-item\" rel=\"example_group\""</span> <span class="token operator">+</span>            <span class="token string">"     data-fancybox=\"images\">"</span> <span class="token operator">+</span>            <span class="token string">"      &lt;img src=\"http://图片地址.com/"</span> <span class="token operator">+</span> photo <span class="token operator">+</span> <span class="token string">"\""</span> <span class="token operator">+</span>            <span class="token string">"       alt="</span> <span class="token operator">+</span> photo <span class="token operator">+</span> <span class="token string">">\n"</span> <span class="token operator">+</span>            <span class="token string">"    &lt;/a>"</span><span class="token punctuation">&#125;</span></span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>photo-wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>waterfall<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mygallery<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> imageStr </span><span class="token delimiter punctuation">%></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/libs/fancybox/fancybox.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/libs/justifiedGallery/justifiedGallery.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"a[rel=example_group]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fancybox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#mygallery"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">justifiedGallery</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">margins</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token literal-property property">rowHeight</span><span class="token operator">:</span> <span class="token number">150</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h3 id="添加图片"><a href="#添加图片" class="headerlink" title="添加图片"></a>添加图片</h3><ol><li><p>在站点目录sources&#x2F;_data下新建一个galleries.json的文件，模板如下：</p><p>每个相册有以下字段：</p><ul><li>name是相册标题</li><li>cover是封面图片，从相册里随便选一个就行</li><li>description是相册介绍</li><li>photos是图片列表</li></ul><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>  <span class="token punctuation">&#123;</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"美女"</span><span class="token punctuation">,</span>    <span class="token property">"cover"</span><span class="token operator">:</span> <span class="token string">"美女/IMG_20171109_124516.jpg"</span><span class="token punctuation">,</span>    <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"2017年记录"</span><span class="token punctuation">,</span>    <span class="token property">"photos"</span><span class="token operator">:</span> <span class="token punctuation">[</span>      <span class="token string">"美女/IMG_美女0924_110224.jpg"</span><span class="token punctuation">,</span>      <span class="token string">"美女/IMG_美女0924_113412.jpg"</span><span class="token punctuation">,</span>      <span class="token string">"美女/IMG_美女1109_124516.jpg"</span><span class="token punctuation">,</span>      <span class="token string">"美女/IMG_美女1125_125304.jpg"</span><span class="token punctuation">,</span>      <span class="token string">"美女/IMG_美女1126_181605.jpg"</span>    <span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#123;</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"动漫"</span><span class="token punctuation">,</span>    <span class="token property">"cover"</span><span class="token operator">:</span> <span class="token string">"动漫/IMG_20181124_125818.jpg"</span><span class="token punctuation">,</span>    <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"2018年记录"</span><span class="token punctuation">,</span>    <span class="token property">"photos"</span><span class="token operator">:</span> <span class="token punctuation">[</span>      <span class="token string">"动漫/IMG_动漫0204_113055.jpg"</span><span class="token punctuation">,</span>      <span class="token string">"动漫/IMG_动漫0204_113302.jpg"</span><span class="token punctuation">,</span>      <span class="token string">"动漫/IMG_动漫0204_113442.jpg"</span><span class="token punctuation">,</span>      <span class="token string">"动漫/IMG_动漫0208_083336.jpg"</span>    <span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#123;</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"游玩"</span><span class="token punctuation">,</span>    <span class="token property">"cover"</span><span class="token operator">:</span> <span class="token string">"游玩/IMG_游玩0331_165713_1.jpg"</span><span class="token punctuation">,</span>    <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"游玩年记录"</span><span class="token punctuation">,</span>    <span class="token property">"photos"</span><span class="token operator">:</span> <span class="token punctuation">[</span>      <span class="token string">"游玩/IMG_游玩0118_200104.jpg"</span><span class="token punctuation">,</span>      <span class="token string">"游玩/IMG_游玩0118_200120.jpg"</span><span class="token punctuation">,</span>      <span class="token string">"游玩/IMG_游玩0118_200456.jpg"</span>    <span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>在galleries下建立对应的相册名称的文件夹，比如我的相册需要建：comic、 scene、sightseeing、person四个目录</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402072201517.png" alt="相册文件夹"></p><p>然后在下面再分别新建index.md文件，添加:</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> comic<span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"gallery"</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h3 id="选择布局"><a href="#选择布局" class="headerlink" title="选择布局"></a>选择布局</h3><p>上面的博客用的布局比较简单粗暴，都是固定的大小和宽高比。但是不同的图片有不同的宽高比，用这种模式的话图片有两种显示方式：</p><ul><li>一是强制缩放到固定的宽高，缺点是图片会变形</li><li>二是裁切只显示一部分，缺点是图片显示不全</li></ul><p>那么有没有两全齐美的办法呢？答案是肯定的，选用CSS3的新特性实现的瀑布流布局，特点是等宽布局，固定列数，图片高度自适应。瀑布流布局虽美观且现代化，但图片按照列垂直顺序排列，不符合阅读习惯。</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402022020011.png" alt="瀑布流"></p><p>另外一种布局是等高布局，图片高度一致，宽度自适应，图片托管网站flickr就是用的这种模式，但用CSS方法是实现不了，因为每一行最后张图片不一定能正好撑满这一行，需要用js动态设置图片的宽高来实现，justifiedGallery插件就是来完成这个的。</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402071927010.png" alt="等高布局"></p><p>下面代码的功能就是初始化这个插件，间距是5px，每一行的高度是150px</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs">$("#mygallery").justifiedGallery(&#123;margins: 5, rowHeight: 150&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这两种布局上面的代码里都是包含了的。是可以手动切换，只需要把上面那句代码注释掉就会切换到瀑布流布局。</p><p>当然，你要是对这个样式不满意也可以自行设计样式。</p><h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><p><a href="https://crazyyuchi.github.io/2022/06/27/xin-jian-xiang-ce/">新建相册 | 兴平 (crazyyuchi.github.io)</a></p><h2 id="样式二"><a href="#样式二" class="headerlink" title="样式二"></a>样式二</h2><p>上面的样式虽然也很不错，但是对于喜欢折腾的我来说还是稍有不足，所以在我翻阅了众多大佬的博客网站后——终于发现一个页面设计[极为优秀的博客网站](<a href="https://nekodeng.gitee.io/">itsNeko「生活日志」 (gitee.io)</a>)，博主貌似还是一位小姐姐，不得不感叹小姐姐的实力太强啦，从她的博客里也学到了很多，对此深表感谢。</p><p>下面就是小姐姐的优秀作业展示时间：</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402072119989.png" alt="优雅！"></p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402072121783.png" alt="实在是优雅"></p><blockquote><p>设置教程可以参考小姐姐的博文：</p><p><a href="https://nekodeng.gitee.io/posts/waterfall-flow-photo-album.html#toc-heading-1">关于给hexo博客增加相册页面（实现瀑布流相册，实现加密相册） | itsNeko「生活日志」 (gitee.io)</a></p></blockquote><h2 id="我的样式"><a href="#我的样式" class="headerlink" title="我的样式"></a>我的样式</h2><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402072053757.png" alt="我的样式"></p><p>特点：</p><ul><li><p>采用透明边框</p></li><li><p>添加了相册选中动画，当选中相册时，相册会发生偏转<br><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402072058371.png" alt="偏转"></p></li><li><p>为提升访客浏览体验，我引入了图片选中动画效果：对未选中的图片应用了优雅的灰色蒙板处理。这样一来，在初始状态下所有图片将以淡雅的灰色呈现，从而减少视觉干扰。当用户点击选中某张图片时，该图片将适度放大并褪去蒙板，还原其原有的鲜艳色彩，这一设计旨在引导用户的注意力更集中于当前所关注的图片内容上，有效避免其他图片对视线的分散影响。</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402072106787.png" alt="选中前"></p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402072109604.png" alt="选中后"></p></li></ul><h3 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h3><p>和样式一的设置流程大致相同，只是代码样式不同</p><p><code>galleries.ejs</code></p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/bg-cover'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">        <span class="token selector">.gallery-wrapper</span> <span class="token punctuation">&#123;</span>            <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>            <span class="token property">flex-wrap</span><span class="token punctuation">:</span> wrap<span class="token punctuation">;</span>            <span class="token property">justify-content</span><span class="token punctuation">:</span> space-around<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token selector">.gallery-box</span> <span class="token punctuation">&#123;</span>            <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>            <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>            <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>            <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>            <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>            <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 4px 8px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.1<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token property">transition</span><span class="token punctuation">:</span> transform 0.3s ease-in-out<span class="token punctuation">,</span> box-shadow 0.3s ease-in-out<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token selector">.gallery-box:hover</span> <span class="token punctuation">&#123;</span>            <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.05<span class="token punctuation">)</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-5deg<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 8px 16px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token selector">.gallery-item</span> <span class="token punctuation">&#123;</span>            <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>            <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>            <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token selector">.gallery-cover-box</span> <span class="token punctuation">&#123;</span>            <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>            <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>            <span class="token property">background-position</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>            <span class="token property">border-top-left-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>            <span class="token property">border-top-right-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token selector">.gallery-info</span> <span class="token punctuation">&#123;</span>            <span class="token property">padding</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token selector">.gallery-name</span> <span class="token punctuation">&#123;</span>            <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>            <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>            <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>site<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> site<span class="token punctuation">.</span>data<span class="token punctuation">.</span>galleries<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">var</span> galleries<span class="token operator">=</span>site<span class="token punctuation">.</span>data<span class="token punctuation">.</span>galleries<span class="token punctuation">;</span> </span><span class="token delimiter punctuation">%></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gallery-wrapper row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> len<span class="token operator">=</span>galleries<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>                        <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">var</span> gallery<span class="token operator">=</span>galleries<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> </span><span class="token delimiter punctuation">%></span></span>                            <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">let</span> imgUrl<span class="token operator">=</span><span class="token function">url_for</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/galleries/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>gallery<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>gallery<span class="token punctuation">.</span>cover<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col s12 m6 l4 xl3 gallery-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> gallery<span class="token punctuation">.</span>name </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gallery-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gallery-cover-box<span class="token punctuation">"</span></span>                                            <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> imgUrl </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gallery-info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gallery-name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> gallery<span class="token punctuation">.</span>name </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                                <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>gallery.ejs</code></p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/css/gallery.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/libs/fancybox/jquery.fancybox.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/libs/justifiedGallery/justifiedGallery.min.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/post-cover'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">let</span> galleries <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>site<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> site<span class="token punctuation">.</span>data<span class="token punctuation">.</span>galleries<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  galleries <span class="token operator">=</span> site<span class="token punctuation">.</span>data<span class="token punctuation">.</span>galleries<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> pageTitle <span class="token operator">=</span> page<span class="token punctuation">.</span>title<span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">getCurrentGallery</span><span class="token punctuation">(</span><span class="token parameter">galleries<span class="token punctuation">,</span> pageTitle</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> galleries<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>galleries<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">==</span> pageTitle<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> galleries<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> currentGallery <span class="token operator">=</span> <span class="token function">getCurrentGallery</span><span class="token punctuation">(</span>galleries<span class="token punctuation">,</span> pageTitle<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> photos <span class="token operator">=</span> currentGallery<span class="token punctuation">.</span>photos<span class="token punctuation">;</span><span class="token keyword">let</span> imageStr <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> photos<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">var</span> photo <span class="token operator">=</span> photos<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> photoPath <span class="token operator">=</span> <span class="token string">'/medias/galleries/'</span> <span class="token operator">+</span> currentGallery<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> photo<span class="token punctuation">;</span>  imageStr <span class="token operator">+=</span> <span class="token string">"&lt;a href=\""</span> <span class="token operator">+</span> photoPath <span class="token operator">+</span> <span class="token string">"\" class=\"photo-item\" rel=\"example_group\" data-fancybox=\"images\">"</span> <span class="token operator">+</span>               <span class="token string">"&lt;img src=\""</span> <span class="token operator">+</span> photoPath <span class="token operator">+</span><span class="token string">"\" alt=\""</span> <span class="token operator">+</span> photo <span class="token operator">+</span> <span class="token string">"\">"</span> <span class="token operator">+</span>             <span class="token string">"&lt;/a>"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>photo-wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>waterfall<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mygallery<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> imageStr </span><span class="token delimiter punctuation">%></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/libs/fancybox/fancybox.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/libs/justifiedGallery/justifiedGallery.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">  <span class="token selector">.photo-item img</span> <span class="token punctuation">&#123;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> transform 0.3s ease-in-out<span class="token punctuation">,</span> box-shadow 0.3s ease-in-out<span class="token punctuation">,</span> filter 0.3s ease-in-out<span class="token punctuation">;</span>    <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">grayscale</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span> <span class="token function">opacity</span><span class="token punctuation">(</span>0.7<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 4px 8px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.1<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.photo-item:hover img</span> <span class="token punctuation">&#123;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.08<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">grayscale</span><span class="token punctuation">(</span>0%<span class="token punctuation">)</span> <span class="token function">opacity</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 8px 16px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token comment">// 初始化 fancybox</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"[rel=example_group]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fancybox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 配置循环播放</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"[rel=example_group]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fancybox</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token literal-property property">loop</span><span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#mygallery"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">justifiedGallery</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token literal-property property">margins</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>        <span class="token literal-property property">rowHeight</span><span class="token operator">:</span> <span class="token number">150</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="fancybox"><a href="#fancybox" class="headerlink" title="fancybox"></a>fancybox</h2><p>2024&#x2F;2&#x2F;15更新，这几天查看友链时，发现了一种也挺不错的博客相册布局，不仅可以进行图片放大查看、图片播放，还可以进行所有图片的缩略图预览，唯一不足的是暂时没办法将功能添加到我的样式中，毕竟和瀑布流布局还是风格迥异的。</p><h3 id="效果预览"><a href="#效果预览" class="headerlink" title="效果预览"></a>效果预览</h3><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402161149591.gif" alt="slide"></p><h3 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h3><p><a href="https://www.cdnpkg.com/fancybox/file/jquery.fancybox.min.css/?id=35159">JQUERY.FANCYBOX.MIN.CSS: DOWNLOAD - CDNPKG</a></p><p><a href="https://yafine.github.io/posts/20200221224129-3b98">修改matery原有主题相册 | 过客~励む (yafine.github.io)</a></p><p><a href="https://tianma8023.github.io/post/hexo-material-intergrate-image-display-feature/">Hexo 折腾：利用 Fancybox 添加图片放大预览查看功能 | Tianma (tianma8023.github.io)</a></p><h3 id="需要的代码"><a href="#需要的代码" class="headerlink" title="需要的代码"></a>需要的代码</h3><p>fancybox&#x2F;3.5.7：</p><ul><li><p>jquery.fancybox.min.js</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// ==================================================</span><span class="token comment">// fancyBox v3.5.7</span><span class="token comment">//</span><span class="token comment">// Licensed GPLv3 for open source use</span><span class="token comment">// or fancyBox Commercial License for commercial use</span><span class="token comment">//</span><span class="token comment">// http://fancyapps.com/fancybox/</span><span class="token comment">// Copyright 2019 fancyApps</span><span class="token comment">//</span><span class="token comment">// ==================================================</span><span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> n<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token string">"use strict"</span><span class="token punctuation">;</span>    <span class="token keyword">function</span> <span class="token function">i</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> a<span class="token punctuation">,</span> s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        t <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span><span class="token function">isDefaultPrevented</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        e <span class="token operator">=</span> e <span class="token operator">||</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        t <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>data<span class="token punctuation">.</span>options<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        o <span class="token operator">=</span> e<span class="token punctuation">.</span>$target <span class="token operator">||</span> <span class="token function">n</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>currentTarget<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"blur"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">(</span>a <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span>$trigger <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span>$trigger<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>selector <span class="token operator">?</span> s <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>selector<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> o<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"data-fancybox"</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">,</span>        i <span class="token operator">?</span> <span class="token punctuation">(</span>s <span class="token operator">=</span> t<span class="token punctuation">.</span>data <span class="token operator">?</span> t<span class="token punctuation">.</span>data<span class="token punctuation">.</span>items <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        s <span class="token operator">=</span> s<span class="token punctuation">.</span>length <span class="token operator">?</span> s<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">'[data-fancybox="'</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">'"]'</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">'[data-fancybox="'</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">'"]'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> s <span class="token operator">=</span> <span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        r <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span>        r <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        a <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> e<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">,</span>        a<span class="token punctuation">.</span>$trigger <span class="token operator">=</span> o<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>console <span class="token operator">=</span> t<span class="token punctuation">.</span>console <span class="token operator">||</span> <span class="token punctuation">&#123;</span>        <span class="token function-variable function">info</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>fancybox<span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token keyword">void</span> console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"fancyBox already initialized"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">closeExisting</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            <span class="token literal-property property">loop</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            <span class="token literal-property property">gutter</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>            <span class="token literal-property property">keyboard</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>            <span class="token literal-property property">preventCaptionOverlap</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>            <span class="token literal-property property">arrows</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>            <span class="token literal-property property">infobar</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>            <span class="token literal-property property">smallBtn</span><span class="token operator">:</span> <span class="token string">"auto"</span><span class="token punctuation">,</span>            <span class="token literal-property property">toolbar</span><span class="token operator">:</span> <span class="token string">"auto"</span><span class="token punctuation">,</span>            <span class="token literal-property property">buttons</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"zoom"</span><span class="token punctuation">,</span> <span class="token string">"slideShow"</span><span class="token punctuation">,</span> <span class="token string">"thumbs"</span><span class="token punctuation">,</span> <span class="token string">"close"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token literal-property property">idleTime</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>            <span class="token literal-property property">protect</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            <span class="token literal-property property">modal</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            <span class="token literal-property property">image</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">preload</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">ajax</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">settings</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                        <span class="token literal-property property">fancybox</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">0</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">iframe</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">tpl</span><span class="token operator">:</span> <span class="token string">'&lt;iframe id="fancybox-frame&#123;rnd&#125;" name="fancybox-frame&#123;rnd&#125;" class="fancybox-iframe" allowfullscreen="allowfullscreen" allow="autoplay; fullscreen" src="">&lt;/iframe>'</span><span class="token punctuation">,</span>                <span class="token literal-property property">preload</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>                <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token literal-property property">attr</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token literal-property property">scrolling</span><span class="token operator">:</span> <span class="token string">"auto"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">video</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">tpl</span><span class="token operator">:</span> <span class="token string">'&lt;video class="fancybox-video" controls controlsList="nodownload" poster="&#123;&#123;poster&#125;&#125;">&lt;source src="&#123;&#123;src&#125;&#125;" type="&#123;&#123;format&#125;&#125;" />Sorry, your browser doesn\'t support embedded videos, &lt;a href="&#123;&#123;src&#125;&#125;">download&lt;/a> and watch with your favorite video player!&lt;/video>'</span><span class="token punctuation">,</span>                <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>                <span class="token literal-property property">autoStart</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">0</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">defaultType</span><span class="token operator">:</span> <span class="token string">"image"</span><span class="token punctuation">,</span>            <span class="token literal-property property">animationEffect</span><span class="token operator">:</span> <span class="token string">"zoom"</span><span class="token punctuation">,</span>            <span class="token literal-property property">animationDuration</span><span class="token operator">:</span> <span class="token number">366</span><span class="token punctuation">,</span>            <span class="token literal-property property">zoomOpacity</span><span class="token operator">:</span> <span class="token string">"auto"</span><span class="token punctuation">,</span>            <span class="token literal-property property">transitionEffect</span><span class="token operator">:</span> <span class="token string">"fade"</span><span class="token punctuation">,</span>            <span class="token literal-property property">transitionDuration</span><span class="token operator">:</span> <span class="token number">366</span><span class="token punctuation">,</span>            <span class="token literal-property property">slideClass</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>            <span class="token literal-property property">baseClass</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>            <span class="token literal-property property">baseTpl</span><span class="token operator">:</span> <span class="token string">'&lt;div class="fancybox-container" role="dialog" tabindex="-1">&lt;div class="fancybox-bg">&lt;/div>&lt;div class="fancybox-inner">&lt;div class="fancybox-infobar">&lt;span data-fancybox-index>&lt;/span>&amp;nbsp;/&amp;nbsp;&lt;span data-fancybox-count>&lt;/span>&lt;/div>&lt;div class="fancybox-toolbar">&#123;&#123;buttons&#125;&#125;&lt;/div>&lt;div class="fancybox-navigation">&#123;&#123;arrows&#125;&#125;&lt;/div>&lt;div class="fancybox-stage">&lt;/div>&lt;div class="fancybox-caption">&lt;div class="fancybox-caption__body">&lt;/div>&lt;/div>&lt;/div>&lt;/div>'</span><span class="token punctuation">,</span>            <span class="token literal-property property">spinnerTpl</span><span class="token operator">:</span> <span class="token string">'&lt;div class="fancybox-loading">&lt;/div>'</span><span class="token punctuation">,</span>            <span class="token literal-property property">errorTpl</span><span class="token operator">:</span> <span class="token string">'&lt;div class="fancybox-error">&lt;p>&#123;&#123;ERROR&#125;&#125;&lt;/p>&lt;/div>'</span><span class="token punctuation">,</span>            <span class="token literal-property property">btnTpl</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">download</span><span class="token operator">:</span> <span class="token string">'&lt;a download data-fancybox-download class="fancybox-button fancybox-button--download" title="&#123;&#123;DOWNLOAD&#125;&#125;" href="javascript:;">&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">&lt;path d="M18.62 17.09V19H5.38v-1.91zm-2.97-6.96L17 11.45l-5 4.87-5-4.87 1.36-1.32 2.68 2.64V5h1.92v7.77z"/>&lt;/svg>&lt;/a>'</span><span class="token punctuation">,</span>                <span class="token literal-property property">zoom</span><span class="token operator">:</span> <span class="token string">'&lt;button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="&#123;&#123;ZOOM&#125;&#125;">&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">&lt;path d="M18.7 17.3l-3-3a5.9 5.9 0 0 0-.6-7.6 5.9 5.9 0 0 0-8.4 0 5.9 5.9 0 0 0 0 8.4 5.9 5.9 0 0 0 7.7.7l3 3a1 1 0 0 0 1.3 0c.4-.5.4-1 0-1.5zM8.1 13.8a4 4 0 0 1 0-5.7 4 4 0 0 1 5.7 0 4 4 0 0 1 0 5.7 4 4 0 0 1-5.7 0z"/>&lt;/svg>&lt;/button>'</span><span class="token punctuation">,</span>                <span class="token literal-property property">close</span><span class="token operator">:</span> <span class="token string">'&lt;button data-fancybox-close class="fancybox-button fancybox-button--close" title="&#123;&#123;CLOSE&#125;&#125;">&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">&lt;path d="M12 10.6L6.6 5.2 5.2 6.6l5.4 5.4-5.4 5.4 1.4 1.4 5.4-5.4 5.4 5.4 1.4-1.4-5.4-5.4 5.4-5.4-1.4-1.4-5.4 5.4z"/>&lt;/svg>&lt;/button>'</span><span class="token punctuation">,</span>                <span class="token literal-property property">arrowLeft</span><span class="token operator">:</span> <span class="token string">'&lt;button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="&#123;&#123;PREV&#125;&#125;">&lt;div>&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">&lt;path d="M11.28 15.7l-1.34 1.37L5 12l4.94-5.07 1.34 1.38-2.68 2.72H19v1.94H8.6z"/>&lt;/svg>&lt;/div>&lt;/button>'</span><span class="token punctuation">,</span>                <span class="token literal-property property">arrowRight</span><span class="token operator">:</span> <span class="token string">'&lt;button data-fancybox-next class="fancybox-button fancybox-button--arrow_right" title="&#123;&#123;NEXT&#125;&#125;">&lt;div>&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">&lt;path d="M15.4 12.97l-2.68 2.72 1.34 1.38L19 12l-4.94-5.07-1.34 1.38 2.68 2.72H5v1.94z"/>&lt;/svg>&lt;/div>&lt;/button>'</span><span class="token punctuation">,</span>                <span class="token literal-property property">smallBtn</span><span class="token operator">:</span> <span class="token string">'&lt;button type="button" data-fancybox-close class="fancybox-button fancybox-close-small" title="&#123;&#123;CLOSE&#125;&#125;">&lt;svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 24 24">&lt;path d="M13 12l5-5-1-1-5 5-5-5-1 1 5 5-5 5 1 1 5-5 5 5 1-1z"/>&lt;/svg>&lt;/button>'</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">parentEl</span><span class="token operator">:</span> <span class="token string">"body"</span><span class="token punctuation">,</span>            <span class="token literal-property property">hideScrollbar</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>            <span class="token literal-property property">autoFocus</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>            <span class="token literal-property property">backFocus</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>            <span class="token literal-property property">trapFocus</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>            <span class="token literal-property property">fullScreen</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">autoStart</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">touch</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">vertical</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>                <span class="token literal-property property">momentum</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">0</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>            <span class="token literal-property property">media</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">slideShow</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">autoStart</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                <span class="token literal-property property">speed</span><span class="token operator">:</span> <span class="token number">3e3</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">thumbs</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">autoStart</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                <span class="token literal-property property">hideOnClose</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>                <span class="token literal-property property">parentEl</span><span class="token operator">:</span> <span class="token string">".fancybox-container"</span><span class="token punctuation">,</span>                <span class="token literal-property property">axis</span><span class="token operator">:</span> <span class="token string">"y"</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">wheel</span><span class="token operator">:</span> <span class="token string">"auto"</span><span class="token punctuation">,</span>            <span class="token literal-property property">onInit</span><span class="token operator">:</span> n<span class="token punctuation">.</span>noop<span class="token punctuation">,</span>            <span class="token literal-property property">beforeLoad</span><span class="token operator">:</span> n<span class="token punctuation">.</span>noop<span class="token punctuation">,</span>            <span class="token literal-property property">afterLoad</span><span class="token operator">:</span> n<span class="token punctuation">.</span>noop<span class="token punctuation">,</span>            <span class="token literal-property property">beforeShow</span><span class="token operator">:</span> n<span class="token punctuation">.</span>noop<span class="token punctuation">,</span>            <span class="token literal-property property">afterShow</span><span class="token operator">:</span> n<span class="token punctuation">.</span>noop<span class="token punctuation">,</span>            <span class="token literal-property property">beforeClose</span><span class="token operator">:</span> n<span class="token punctuation">.</span>noop<span class="token punctuation">,</span>            <span class="token literal-property property">afterClose</span><span class="token operator">:</span> n<span class="token punctuation">.</span>noop<span class="token punctuation">,</span>            <span class="token literal-property property">onActivate</span><span class="token operator">:</span> n<span class="token punctuation">.</span>noop<span class="token punctuation">,</span>            <span class="token literal-property property">onDeactivate</span><span class="token operator">:</span> n<span class="token punctuation">.</span>noop<span class="token punctuation">,</span>            <span class="token function-variable function">clickContent</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token string">"image"</span> <span class="token operator">===</span> t<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> <span class="token string">"zoom"</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">clickSlide</span><span class="token operator">:</span> <span class="token string">"close"</span><span class="token punctuation">,</span>            <span class="token literal-property property">clickOutside</span><span class="token operator">:</span> <span class="token string">"close"</span><span class="token punctuation">,</span>            <span class="token literal-property property">dblclickContent</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            <span class="token literal-property property">dblclickSlide</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            <span class="token literal-property property">dblclickOutside</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">preventCaptionOverlap</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                <span class="token literal-property property">idleTime</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                <span class="token function-variable function">clickContent</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> <span class="token string">"image"</span> <span class="token operator">===</span> t<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> <span class="token string">"toggleControls"</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token function-variable function">clickSlide</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> <span class="token string">"image"</span> <span class="token operator">===</span> t<span class="token punctuation">.</span>type <span class="token operator">?</span> <span class="token string">"toggleControls"</span> <span class="token operator">:</span> <span class="token string">"close"</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token function-variable function">dblclickContent</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> <span class="token string">"image"</span> <span class="token operator">===</span> t<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> <span class="token string">"zoom"</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token function-variable function">dblclickSlide</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> <span class="token string">"image"</span> <span class="token operator">===</span> t<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> <span class="token string">"zoom"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">lang</span><span class="token operator">:</span> <span class="token string">"en"</span><span class="token punctuation">,</span>            <span class="token literal-property property">i18n</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">en</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token constant">CLOSE</span><span class="token operator">:</span> <span class="token string">"Close"</span><span class="token punctuation">,</span>                    <span class="token constant">NEXT</span><span class="token operator">:</span> <span class="token string">"Next"</span><span class="token punctuation">,</span>                    <span class="token constant">PREV</span><span class="token operator">:</span> <span class="token string">"Previous"</span><span class="token punctuation">,</span>                    <span class="token constant">ERROR</span><span class="token operator">:</span> <span class="token string">"The requested content cannot be loaded. &lt;br/> Please try again later."</span><span class="token punctuation">,</span>                    <span class="token constant">PLAY_START</span><span class="token operator">:</span> <span class="token string">"Start slideshow"</span><span class="token punctuation">,</span>                    <span class="token constant">PLAY_STOP</span><span class="token operator">:</span> <span class="token string">"Pause slideshow"</span><span class="token punctuation">,</span>                    <span class="token constant">FULL_SCREEN</span><span class="token operator">:</span> <span class="token string">"Full screen"</span><span class="token punctuation">,</span>                    <span class="token constant">THUMBS</span><span class="token operator">:</span> <span class="token string">"Thumbnails"</span><span class="token punctuation">,</span>                    <span class="token constant">DOWNLOAD</span><span class="token operator">:</span> <span class="token string">"Download"</span><span class="token punctuation">,</span>                    <span class="token constant">SHARE</span><span class="token operator">:</span> <span class="token string">"Share"</span><span class="token punctuation">,</span>                    <span class="token constant">ZOOM</span><span class="token operator">:</span> <span class="token string">"Zoom"</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token literal-property property">de</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token constant">CLOSE</span><span class="token operator">:</span> <span class="token string">"Schlie&amp;szlig;en"</span><span class="token punctuation">,</span>                    <span class="token constant">NEXT</span><span class="token operator">:</span> <span class="token string">"Weiter"</span><span class="token punctuation">,</span>                    <span class="token constant">PREV</span><span class="token operator">:</span> <span class="token string">"Zur&amp;uuml;ck"</span><span class="token punctuation">,</span>                    <span class="token constant">ERROR</span><span class="token operator">:</span> <span class="token string">"Die angeforderten Daten konnten nicht geladen werden. &lt;br/> Bitte versuchen Sie es sp&amp;auml;ter nochmal."</span><span class="token punctuation">,</span>                    <span class="token constant">PLAY_START</span><span class="token operator">:</span> <span class="token string">"Diaschau starten"</span><span class="token punctuation">,</span>                    <span class="token constant">PLAY_STOP</span><span class="token operator">:</span> <span class="token string">"Diaschau beenden"</span><span class="token punctuation">,</span>                    <span class="token constant">FULL_SCREEN</span><span class="token operator">:</span> <span class="token string">"Vollbild"</span><span class="token punctuation">,</span>                    <span class="token constant">THUMBS</span><span class="token operator">:</span> <span class="token string">"Vorschaubilder"</span><span class="token punctuation">,</span>                    <span class="token constant">DOWNLOAD</span><span class="token operator">:</span> <span class="token string">"Herunterladen"</span><span class="token punctuation">,</span>                    <span class="token constant">SHARE</span><span class="token operator">:</span> <span class="token string">"Teilen"</span><span class="token punctuation">,</span>                    <span class="token constant">ZOOM</span><span class="token operator">:</span> <span class="token string">"Vergr&amp;ouml;&amp;szlig;ern"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>          <span class="token punctuation">,</span> s <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>          <span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>          <span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token number">0</span>          <span class="token punctuation">,</span> <span class="token function-variable function">l</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> t <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>hasOwnProperty <span class="token operator">&amp;&amp;</span> t <span class="token keyword">instanceof</span> <span class="token class-name">n</span>        <span class="token punctuation">&#125;</span>          <span class="token punctuation">,</span> <span class="token function-variable function">d</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> t<span class="token punctuation">.</span>requestAnimationFrame <span class="token operator">||</span> t<span class="token punctuation">.</span>webkitRequestAnimationFrame <span class="token operator">||</span> t<span class="token punctuation">.</span>mozRequestAnimationFrame <span class="token operator">||</span> t<span class="token punctuation">.</span>oRequestAnimationFrame <span class="token operator">||</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> t<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token number">1e3</span> <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token punctuation">,</span> <span class="token function-variable function">u</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> t<span class="token punctuation">.</span>cancelAnimationFrame <span class="token operator">||</span> t<span class="token punctuation">.</span>webkitCancelAnimationFrame <span class="token operator">||</span> t<span class="token punctuation">.</span>mozCancelAnimationFrame <span class="token operator">||</span> t<span class="token punctuation">.</span>oCancelAnimationFrame <span class="token operator">||</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                t<span class="token punctuation">.</span><span class="token function">clearTimeout</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token punctuation">,</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> t<span class="token punctuation">,</span> n <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"fakeelement"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token string">"transitionend"</span><span class="token punctuation">,</span>                <span class="token literal-property property">OTransition</span><span class="token operator">:</span> <span class="token string">"oTransitionEnd"</span><span class="token punctuation">,</span>                <span class="token literal-property property">MozTransition</span><span class="token operator">:</span> <span class="token string">"transitionend"</span><span class="token punctuation">,</span>                <span class="token literal-property property">WebkitTransition</span><span class="token operator">:</span> <span class="token string">"webkitTransitionEnd"</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>t <span class="token keyword">in</span> o<span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> n<span class="token punctuation">.</span>style<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span>                    <span class="token keyword">return</span> o<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token string">"transitionend"</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token punctuation">,</span> <span class="token function-variable function">p</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> t <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>offsetHeight        <span class="token punctuation">&#125;</span>          <span class="token punctuation">,</span> <span class="token function-variable function">h</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> o <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> t<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> n<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                n<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            o        <span class="token punctuation">&#125;</span>          <span class="token punctuation">,</span> <span class="token function-variable function">g</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> o<span class="token punctuation">,</span> i<span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">!</span>t <span class="token operator">||</span> t<span class="token punctuation">.</span>ownerDocument <span class="token operator">!==</span> e<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token function">n</span><span class="token punctuation">(</span><span class="token string">".fancybox-container"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"pointer-events"</span><span class="token punctuation">,</span> <span class="token string">"none"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            o <span class="token operator">=</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">x</span><span class="token operator">:</span> t<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left <span class="token operator">+</span> t<span class="token punctuation">.</span>offsetWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>                <span class="token literal-property property">y</span><span class="token operator">:</span> t<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top <span class="token operator">+</span> t<span class="token punctuation">.</span>offsetHeight <span class="token operator">/</span> <span class="token number">2</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            i <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">elementFromPoint</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>x<span class="token punctuation">,</span> o<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">===</span> t<span class="token punctuation">,</span>            <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">".fancybox-container"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"pointer-events"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            i<span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>          <span class="token punctuation">,</span> <span class="token function-variable function">b</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>            i<span class="token punctuation">.</span>opts <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                <span class="token literal-property property">index</span><span class="token operator">:</span> o            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span>defaults<span class="token punctuation">)</span><span class="token punctuation">,</span>            n<span class="token punctuation">.</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span>opts <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>opts<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span>isMobile <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span>opts <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>opts<span class="token punctuation">,</span> i<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>mobile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>id <span class="token operator">=</span> i<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>id <span class="token operator">||</span> <span class="token operator">++</span>c<span class="token punctuation">,</span>            i<span class="token punctuation">.</span>currIndex <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>index<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>prevIndex <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>prevPos <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>currPos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>firstRun <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>group <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>slides <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span><span class="token function">addContent</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> i<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        n<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>            <span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> a <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> s <span class="token operator">=</span> a<span class="token punctuation">.</span>group<span class="token punctuation">[</span>a<span class="token punctuation">.</span>currIndex<span class="token punctuation">]</span><span class="token punctuation">,</span> r <span class="token operator">=</span> s<span class="token punctuation">.</span>opts<span class="token punctuation">;</span>                r<span class="token punctuation">.</span>closeExisting <span class="token operator">&amp;&amp;</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-active"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token operator">!</span>n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token number">1</span> <span class="token operator">!==</span> r<span class="token punctuation">.</span>hideScrollbar <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span>isMobile <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollHeight <span class="token operator">></span> t<span class="token punctuation">.</span>innerHeight <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token function">n</span><span class="token punctuation">(</span><span class="token string">"head"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'&lt;style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar&#123;margin-right:'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>innerWidth <span class="token operator">-</span> e<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"px;&#125;&lt;/style>"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"compensate-for-scrollbar"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                i <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>buttons<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    i <span class="token operator">+=</span> r<span class="token punctuation">.</span>btnTpl<span class="token punctuation">[</span>e<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">""</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                o <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> r<span class="token punctuation">.</span>baseTpl<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"&#123;&#123;buttons&#125;&#125;"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"&#123;&#123;arrows&#125;&#125;"</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>btnTpl<span class="token punctuation">.</span>arrowLeft <span class="token operator">+</span> r<span class="token punctuation">.</span>btnTpl<span class="token punctuation">.</span>arrowRight<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token string">"fancybox-container-"</span> <span class="token operator">+</span> a<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>baseClass<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">"FancyBox"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>parentEl<span class="token punctuation">)</span><span class="token punctuation">,</span>                a<span class="token punctuation">.</span>$refs <span class="token operator">=</span> <span class="token punctuation">&#123;</span>                    <span class="token literal-property property">container</span><span class="token operator">:</span> o                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">[</span><span class="token string">"bg"</span><span class="token punctuation">,</span> <span class="token string">"inner"</span><span class="token punctuation">,</span> <span class="token string">"infobar"</span><span class="token punctuation">,</span> <span class="token string">"toolbar"</span><span class="token punctuation">,</span> <span class="token string">"stage"</span><span class="token punctuation">,</span> <span class="token string">"caption"</span><span class="token punctuation">,</span> <span class="token string">"navigation"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    a<span class="token punctuation">.</span>$refs<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> o<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">".fancybox-"</span> <span class="token operator">+</span> t<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                a<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"onInit"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                a<span class="token punctuation">.</span><span class="token function">activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                a<span class="token punctuation">.</span><span class="token function">jumpTo</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>currIndex<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">translate</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> n <span class="token operator">=</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>i18n<span class="token punctuation">[</span>t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>lang<span class="token punctuation">]</span> <span class="token operator">||</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>i18n<span class="token punctuation">.</span>en<span class="token punctuation">;</span>                <span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\&#123;\&#123;(\w+)\&#125;\&#125;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">===</span> n<span class="token punctuation">[</span>e<span class="token punctuation">]</span> <span class="token operator">?</span> t <span class="token operator">:</span> n<span class="token punctuation">[</span>e<span class="token punctuation">]</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">addContent</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e<span class="token punctuation">,</span> o <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> i <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>                n<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">var</span> i<span class="token punctuation">,</span> a<span class="token punctuation">,</span> s<span class="token punctuation">,</span> r<span class="token punctuation">,</span> c<span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>                    n<span class="token punctuation">.</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span>l <span class="token operator">=</span> e<span class="token punctuation">,</span>                    d <span class="token operator">=</span> e<span class="token punctuation">.</span>opts <span class="token operator">||</span> e<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">"object"</span> <span class="token operator">===</span> n<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>                    d <span class="token operator">=</span> i<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                    d <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> d<span class="token punctuation">.</span>options<span class="token punctuation">)</span><span class="token punctuation">,</span>                    d<span class="token punctuation">.</span>$orig <span class="token operator">=</span> i<span class="token punctuation">,</span>                    l<span class="token punctuation">.</span>src <span class="token operator">=</span> o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>src <span class="token operator">||</span> d<span class="token punctuation">.</span>src <span class="token operator">||</span> i<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    l<span class="token punctuation">.</span>type <span class="token operator">||</span> l<span class="token punctuation">.</span>src <span class="token operator">||</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"inline"</span><span class="token punctuation">,</span>                    l<span class="token punctuation">.</span>src <span class="token operator">=</span> e<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> l <span class="token operator">=</span> <span class="token punctuation">&#123;</span>                        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"html"</span><span class="token punctuation">,</span>                        <span class="token literal-property property">src</span><span class="token operator">:</span> e <span class="token operator">+</span> <span class="token string">""</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                    l<span class="token punctuation">.</span>opts <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> o<span class="token punctuation">.</span>opts<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">,</span>                    n<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>buttons<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>buttons <span class="token operator">=</span> d<span class="token punctuation">.</span>buttons<span class="token punctuation">)</span><span class="token punctuation">,</span>                    n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span>isMobile <span class="token operator">&amp;&amp;</span> l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>mobile <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>opts <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">,</span> l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>mobile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    a <span class="token operator">=</span> l<span class="token punctuation">.</span>type <span class="token operator">||</span> l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>type<span class="token punctuation">,</span>                    r <span class="token operator">=</span> l<span class="token punctuation">.</span>src <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">,</span>                    <span class="token operator">!</span>a <span class="token operator">&amp;&amp;</span> r <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>s <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(mp4|mov|ogv|webm)((\?|#).*)?$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span>a <span class="token operator">=</span> <span class="token string">"video"</span><span class="token punctuation">,</span>                    l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>video<span class="token punctuation">.</span>format <span class="token operator">||</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>video<span class="token punctuation">.</span>format <span class="token operator">=</span> <span class="token string">"video/"</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token string">"ogv"</span> <span class="token operator">===</span> s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token string">"ogg"</span> <span class="token operator">:</span> s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> r<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> a <span class="token operator">=</span> <span class="token string">"image"</span> <span class="token operator">:</span> r<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(pdf)((\?|#).*)?$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span>a <span class="token operator">=</span> <span class="token string">"iframe"</span><span class="token punctuation">,</span>                    l <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>                        <span class="token literal-property property">contentType</span><span class="token operator">:</span> <span class="token string">"pdf"</span><span class="token punctuation">,</span>                        <span class="token literal-property property">opts</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                            <span class="token literal-property property">iframe</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                                <span class="token literal-property property">preload</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span>                            <span class="token punctuation">&#125;</span>                        <span class="token punctuation">&#125;</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">"#"</span> <span class="token operator">===</span> r<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>a <span class="token operator">=</span> <span class="token string">"inline"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    a <span class="token operator">?</span> l<span class="token punctuation">.</span>type <span class="token operator">=</span> a <span class="token operator">:</span> o<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"objectNeedsType"</span><span class="token punctuation">,</span> l<span class="token punctuation">)</span><span class="token punctuation">,</span>                    l<span class="token punctuation">.</span>contentType <span class="token operator">||</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>contentType <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span>type<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"html"</span><span class="token punctuation">,</span> <span class="token string">"inline"</span><span class="token punctuation">,</span> <span class="token string">"ajax"</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token string">"html"</span> <span class="token operator">:</span> l<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">,</span>                    l<span class="token punctuation">.</span>index <span class="token operator">=</span> o<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length<span class="token punctuation">,</span>                    <span class="token string">"auto"</span> <span class="token operator">==</span> l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>smallBtn <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>smallBtn <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span>type<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"html"</span><span class="token punctuation">,</span> <span class="token string">"inline"</span><span class="token punctuation">,</span> <span class="token string">"ajax"</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token string">"auto"</span> <span class="token operator">===</span> l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>toolbar <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>toolbar <span class="token operator">=</span> <span class="token operator">!</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>smallBtn<span class="token punctuation">)</span><span class="token punctuation">,</span>                    l<span class="token punctuation">.</span>$thumb <span class="token operator">=</span> l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>$thumb <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">,</span>                    l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>$trigger <span class="token operator">&amp;&amp;</span> l<span class="token punctuation">.</span>index <span class="token operator">===</span> o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>index <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>$thumb <span class="token operator">=</span> l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>$trigger<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"img:first"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    l<span class="token punctuation">.</span>$thumb<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>$orig <span class="token operator">=</span> l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>$trigger<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    l<span class="token punctuation">.</span>$thumb <span class="token operator">&amp;&amp;</span> l<span class="token punctuation">.</span>$thumb<span class="token punctuation">.</span>length <span class="token operator">||</span> <span class="token operator">!</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>$orig <span class="token operator">||</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>$thumb <span class="token operator">=</span> l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>$orig<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"img:first"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    l<span class="token punctuation">.</span>$thumb <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>l<span class="token punctuation">.</span>$thumb<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>$thumb <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    l<span class="token punctuation">.</span>thumb <span class="token operator">=</span> l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>thumb <span class="token operator">||</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>$thumb <span class="token operator">?</span> l<span class="token punctuation">.</span>$thumb<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>src <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token string">"function"</span> <span class="token operator">===</span> n<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>caption<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>caption <span class="token operator">=</span> l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span><span class="token function">caption</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token punctuation">[</span>o<span class="token punctuation">,</span> l<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token string">"function"</span> <span class="token operator">===</span> n<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>caption<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>caption <span class="token operator">=</span> o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span><span class="token function">caption</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token punctuation">[</span>o<span class="token punctuation">,</span> l<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>caption <span class="token keyword">instanceof</span> <span class="token class-name">n</span> <span class="token operator">||</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>caption <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">===</span> l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>caption <span class="token operator">?</span> <span class="token string">""</span> <span class="token operator">:</span> l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>caption <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token string">"ajax"</span> <span class="token operator">===</span> l<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>c <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    c<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>src <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>filter <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    l<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>modal <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>opts <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> l<span class="token punctuation">.</span>opts<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>                        <span class="token literal-property property">trapFocus</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>                        <span class="token literal-property property">infobar</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                        <span class="token literal-property property">toolbar</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                        <span class="token literal-property property">smallBtn</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                        <span class="token literal-property property">keyboard</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                        <span class="token literal-property property">slideShow</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                        <span class="token literal-property property">fullScreen</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                        <span class="token literal-property property">thumbs</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                        <span class="token literal-property property">touch</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                        <span class="token literal-property property">clickContent</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                        <span class="token literal-property property">clickSlide</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                        <span class="token literal-property property">clickOutside</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                        <span class="token literal-property property">dblclickContent</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                        <span class="token literal-property property">dblclickSlide</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                        <span class="token literal-property property">dblclickOutside</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    o<span class="token punctuation">.</span>group<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>slides<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">updateControls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token punctuation">(</span>e <span class="token operator">=</span> o<span class="token punctuation">.</span>Thumbs<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>isActive <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">addEvents</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>                e<span class="token punctuation">.</span><span class="token function">removeEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"click.fb-close"</span><span class="token punctuation">,</span> <span class="token string">"[data-fancybox-close]"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    t<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    t<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    e<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"touchstart.fb-prev click.fb-prev"</span><span class="token punctuation">,</span> <span class="token string">"[data-fancybox-prev]"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    t<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    t<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    e<span class="token punctuation">.</span><span class="token function">previous</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"touchstart.fb-next click.fb-next"</span><span class="token punctuation">,</span> <span class="token string">"[data-fancybox-next]"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    t<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    t<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    e<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"click.fb"</span><span class="token punctuation">,</span> <span class="token string">"[data-fancybox-zoom]"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">[</span>e<span class="token punctuation">.</span><span class="token function">isScaledDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"scaleToActual"</span> <span class="token operator">:</span> <span class="token string">"scaleToFit"</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                s<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"orientationchange.fb resize.fb"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    t <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>originalEvent <span class="token operator">&amp;&amp;</span> <span class="token string">"resize"</span> <span class="token operator">===</span> t<span class="token punctuation">.</span>originalEvent<span class="token punctuation">.</span>type <span class="token operator">?</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>requestId <span class="token operator">&amp;&amp;</span> <span class="token function">u</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>requestId<span class="token punctuation">)</span><span class="token punctuation">,</span>                    e<span class="token punctuation">.</span>requestId <span class="token operator">=</span> <span class="token function">d</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        e<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>current <span class="token operator">&amp;&amp;</span> <span class="token string">"iframe"</span> <span class="token operator">===</span> e<span class="token punctuation">.</span>current<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        e<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                        e<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span>isMobile <span class="token operator">?</span> <span class="token number">600</span> <span class="token operator">:</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                r<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"keydown.fb"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">var</span> o <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox <span class="token operator">?</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span>                      <span class="token punctuation">,</span> i <span class="token operator">=</span> o<span class="token punctuation">.</span>current                      <span class="token punctuation">,</span> a <span class="token operator">=</span> t<span class="token punctuation">.</span>keyCode <span class="token operator">||</span> t<span class="token punctuation">.</span>which<span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">9</span> <span class="token operator">==</span> a<span class="token punctuation">)</span>                        <span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>trapFocus <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">!</span>i<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>keyboard <span class="token operator">||</span> t<span class="token punctuation">.</span>ctrlKey <span class="token operator">||</span> t<span class="token punctuation">.</span>altKey <span class="token operator">||</span> t<span class="token punctuation">.</span>shiftKey <span class="token operator">||</span> <span class="token function">n</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">"input,textarea,video,audio,select"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                        <span class="token keyword">return</span> <span class="token number">8</span> <span class="token operator">===</span> a <span class="token operator">||</span> <span class="token number">27</span> <span class="token operator">===</span> a <span class="token operator">?</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                        <span class="token keyword">void</span> e<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">37</span> <span class="token operator">===</span> a <span class="token operator">||</span> <span class="token number">38</span> <span class="token operator">===</span> a <span class="token operator">?</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                        <span class="token keyword">void</span> e<span class="token punctuation">.</span><span class="token function">previous</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">39</span> <span class="token operator">===</span> a <span class="token operator">||</span> <span class="token number">40</span> <span class="token operator">===</span> a <span class="token operator">?</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                        <span class="token keyword">void</span> e<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">void</span> e<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"afterKeydown"</span><span class="token punctuation">,</span> t<span class="token punctuation">,</span> a<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span>group<span class="token punctuation">[</span>e<span class="token punctuation">.</span>currIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>opts<span class="token punctuation">.</span>idleTime <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>idleSecondsCounter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>                r<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span>idleSecondsCounter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>                    e<span class="token punctuation">.</span>isIdle <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span><span class="token function">showControls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    e<span class="token punctuation">.</span>isIdle <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span>idleInterval <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token operator">++</span>e<span class="token punctuation">.</span>idleSecondsCounter <span class="token operator">>=</span> e<span class="token punctuation">.</span>group<span class="token punctuation">[</span>e<span class="token punctuation">.</span>currIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>opts<span class="token punctuation">.</span>idleTime <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>e<span class="token punctuation">.</span>isDragging <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>isIdle <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>                    e<span class="token punctuation">.</span>idleSecondsCounter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>                    e<span class="token punctuation">.</span><span class="token function">hideControls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1e3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">removeEvents</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>                s<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">"orientationchange.fb resize.fb"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                r<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">"keydown.fb .fb-idle"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">".fb-close .fb-prev .fb-next"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span>idleInterval <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">clearInterval</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>idleInterval<span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span>idleInterval <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">previous</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">jumpTo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currPos <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">jumpTo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currPos <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">jumpTo</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> a<span class="token punctuation">,</span> s<span class="token punctuation">,</span> r<span class="token punctuation">,</span> c<span class="token punctuation">,</span> l<span class="token punctuation">,</span> d<span class="token punctuation">,</span> u<span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> h <span class="token operator">=</span> f<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length<span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>isDragging <span class="token operator">||</span> f<span class="token punctuation">.</span>isClosing <span class="token operator">||</span> f<span class="token punctuation">.</span>isAnimating <span class="token operator">&amp;&amp;</span> f<span class="token punctuation">.</span>firstRun<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token operator">!</span><span class="token punctuation">(</span>a <span class="token operator">=</span> f<span class="token punctuation">.</span>current <span class="token operator">?</span> f<span class="token punctuation">.</span>current<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>loop <span class="token operator">:</span> f<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>loop<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> t <span class="token operator">>=</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span>                        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">=</span> f<span class="token punctuation">.</span>firstRun <span class="token operator">=</span> <span class="token operator">!</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>slides<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>                    r <span class="token operator">=</span> f<span class="token punctuation">.</span>current<span class="token punctuation">,</span>                    f<span class="token punctuation">.</span>prevIndex <span class="token operator">=</span> f<span class="token punctuation">.</span>currIndex<span class="token punctuation">,</span>                    f<span class="token punctuation">.</span>prevPos <span class="token operator">=</span> f<span class="token punctuation">.</span>currPos<span class="token punctuation">,</span>                    s <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">createSlide</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>                    h <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>a <span class="token operator">||</span> s<span class="token punctuation">.</span>index <span class="token operator">&lt;</span> h <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> f<span class="token punctuation">.</span><span class="token function">createSlide</span><span class="token punctuation">(</span>t <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token punctuation">(</span>a <span class="token operator">||</span> s<span class="token punctuation">.</span>index <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> f<span class="token punctuation">.</span><span class="token function">createSlide</span><span class="token punctuation">(</span>t <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    f<span class="token punctuation">.</span>current <span class="token operator">=</span> s<span class="token punctuation">,</span>                    f<span class="token punctuation">.</span>currIndex <span class="token operator">=</span> s<span class="token punctuation">.</span>index<span class="token punctuation">,</span>                    f<span class="token punctuation">.</span>currPos <span class="token operator">=</span> s<span class="token punctuation">.</span>pos<span class="token punctuation">,</span>                    f<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"beforeShow"</span><span class="token punctuation">,</span> o<span class="token punctuation">)</span><span class="token punctuation">,</span>                    f<span class="token punctuation">.</span><span class="token function">updateControls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    s<span class="token punctuation">.</span>forcedDuration <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">,</span>                    n<span class="token punctuation">.</span><span class="token function">isNumeric</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">?</span> s<span class="token punctuation">.</span>forcedDuration <span class="token operator">=</span> e <span class="token operator">:</span> e <span class="token operator">=</span> s<span class="token punctuation">.</span>opts<span class="token punctuation">[</span>o <span class="token operator">?</span> <span class="token string">"animationDuration"</span> <span class="token operator">:</span> <span class="token string">"transitionDuration"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    e <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    i <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">isMoved</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span>                    s<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-slide--current"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    o<span class="token punctuation">)</span>                        <span class="token keyword">return</span> s<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>animationEffect <span class="token operator">&amp;&amp;</span> e <span class="token operator">&amp;&amp;</span> f<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"transition-duration"</span><span class="token punctuation">,</span> e <span class="token operator">+</span> <span class="token string">"ms"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                        f<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-is-open"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"focus"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                        f<span class="token punctuation">.</span><span class="token function">loadSlide</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span>                        <span class="token keyword">void</span> f<span class="token punctuation">.</span><span class="token function">preload</span><span class="token punctuation">(</span><span class="token string">"image"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    c <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>$slide<span class="token punctuation">)</span><span class="token punctuation">,</span>                    l <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>stage<span class="token punctuation">)</span><span class="token punctuation">,</span>                    n<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>slides<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>$slide<span class="token punctuation">,</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    r<span class="token punctuation">.</span>pos <span class="token operator">!==</span> s<span class="token punctuation">.</span>pos <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>r<span class="token punctuation">.</span>isComplete <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    r<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-slide--complete fancybox-slide--current"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    i <span class="token operator">?</span> <span class="token punctuation">(</span>u <span class="token operator">=</span> c<span class="token punctuation">.</span>left <span class="token operator">-</span> <span class="token punctuation">(</span>r<span class="token punctuation">.</span>pos <span class="token operator">*</span> c<span class="token punctuation">.</span>width <span class="token operator">+</span> r<span class="token punctuation">.</span>pos <span class="token operator">*</span> r<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>gutter<span class="token punctuation">)</span><span class="token punctuation">,</span>                    n<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>slides<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        o<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-animated"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                            <span class="token keyword">return</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^|\s)fancybox-fx-\S+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span>                        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token keyword">var</span> i <span class="token operator">=</span> o<span class="token punctuation">.</span>pos <span class="token operator">*</span> c<span class="token punctuation">.</span>width <span class="token operator">+</span> o<span class="token punctuation">.</span>pos <span class="token operator">*</span> o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>gutter<span class="token punctuation">;</span>                        n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">setTranslate</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>$slide<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>                            <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                            <span class="token literal-property property">left</span><span class="token operator">:</span> i <span class="token operator">-</span> l<span class="token punctuation">.</span>left <span class="token operator">+</span> u                        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                        o<span class="token punctuation">.</span>pos <span class="token operator">!==</span> s<span class="token punctuation">.</span>pos <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-slide--"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>pos <span class="token operator">></span> s<span class="token punctuation">.</span>pos <span class="token operator">?</span> <span class="token string">"next"</span> <span class="token operator">:</span> <span class="token string">"previous"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                        <span class="token function">p</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>$slide<span class="token punctuation">)</span><span class="token punctuation">,</span>                        n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>$slide<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>                            <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                            <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>pos <span class="token operator">-</span> s<span class="token punctuation">.</span>pos<span class="token punctuation">)</span> <span class="token operator">*</span> c<span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>pos <span class="token operator">-</span> s<span class="token punctuation">.</span>pos<span class="token punctuation">)</span> <span class="token operator">*</span> o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>gutter                        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> e<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                            o<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                                <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>                                <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token string">""</span>                            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-slide--next fancybox-slide--previous"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                            o<span class="token punctuation">.</span>pos <span class="token operator">===</span> f<span class="token punctuation">.</span>currPos <span class="token operator">&amp;&amp;</span> f<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> e <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>transitionEffect <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>d <span class="token operator">=</span> <span class="token string">"fancybox-animated fancybox-fx-"</span> <span class="token operator">+</span> s<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>transitionEffect<span class="token punctuation">,</span>                    r<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-slide--"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>r<span class="token punctuation">.</span>pos <span class="token operator">></span> s<span class="token punctuation">.</span>pos <span class="token operator">?</span> <span class="token string">"next"</span> <span class="token operator">:</span> <span class="token string">"previous"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>$slide<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        r<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-slide--next fancybox-slide--previous"</span><span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    s<span class="token punctuation">.</span>isLoaded <span class="token operator">?</span> f<span class="token punctuation">.</span><span class="token function">revealContent</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">:</span> f<span class="token punctuation">.</span><span class="token function">loadSlide</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span>                    f<span class="token punctuation">.</span><span class="token function">preload</span><span class="token punctuation">(</span><span class="token string">"image"</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">createSlide</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> o <span class="token operator">=</span> t <span class="token operator">%</span> i<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length<span class="token punctuation">,</span>                o <span class="token operator">=</span> o <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> i<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">+</span> o <span class="token operator">:</span> o<span class="token punctuation">,</span>                <span class="token operator">!</span>i<span class="token punctuation">.</span>slides<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> i<span class="token punctuation">.</span>group<span class="token punctuation">[</span>o<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">'&lt;div class="fancybox-slide">&lt;/div>'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>stage<span class="token punctuation">)</span><span class="token punctuation">,</span>                i<span class="token punctuation">.</span>slides<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> i<span class="token punctuation">.</span>group<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>                    <span class="token literal-property property">pos</span><span class="token operator">:</span> t<span class="token punctuation">,</span>                    <span class="token literal-property property">$slide</span><span class="token operator">:</span> e<span class="token punctuation">,</span>                    <span class="token literal-property property">isLoaded</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                i<span class="token punctuation">.</span><span class="token function">updateSlide</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>slides<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                i<span class="token punctuation">.</span>slides<span class="token punctuation">[</span>t<span class="token punctuation">]</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">scaleToActual</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> i<span class="token punctuation">,</span> a<span class="token punctuation">,</span> s<span class="token punctuation">,</span> r<span class="token punctuation">,</span> c<span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> d <span class="token operator">=</span> l<span class="token punctuation">.</span>current<span class="token punctuation">,</span> u <span class="token operator">=</span> d<span class="token punctuation">.</span>$content<span class="token punctuation">,</span> f <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>$slide<span class="token punctuation">)</span><span class="token punctuation">.</span>width<span class="token punctuation">,</span> p <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>$slide<span class="token punctuation">)</span><span class="token punctuation">.</span>height<span class="token punctuation">,</span> h <span class="token operator">=</span> d<span class="token punctuation">.</span>width<span class="token punctuation">,</span> g <span class="token operator">=</span> d<span class="token punctuation">.</span>height<span class="token punctuation">;</span>                l<span class="token punctuation">.</span>isAnimating <span class="token operator">||</span> l<span class="token punctuation">.</span><span class="token function">isMoved</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span>u <span class="token operator">||</span> <span class="token string">"image"</span> <span class="token operator">!=</span> d<span class="token punctuation">.</span>type <span class="token operator">||</span> <span class="token operator">!</span>d<span class="token punctuation">.</span>isLoaded <span class="token operator">||</span> d<span class="token punctuation">.</span>hasError <span class="token operator">||</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>isAnimating <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">,</span>                t <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">===</span> t <span class="token operator">?</span> <span class="token number">.5</span> <span class="token operator">*</span> f <span class="token operator">:</span> t<span class="token punctuation">,</span>                e <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">===</span> e <span class="token operator">?</span> <span class="token number">.5</span> <span class="token operator">*</span> p <span class="token operator">:</span> e<span class="token punctuation">,</span>                i <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">,</span>                i<span class="token punctuation">.</span>top <span class="token operator">-=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>$slide<span class="token punctuation">)</span><span class="token punctuation">.</span>top<span class="token punctuation">,</span>                i<span class="token punctuation">.</span>left <span class="token operator">-=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>$slide<span class="token punctuation">)</span><span class="token punctuation">.</span>left<span class="token punctuation">,</span>                r <span class="token operator">=</span> h <span class="token operator">/</span> i<span class="token punctuation">.</span>width<span class="token punctuation">,</span>                c <span class="token operator">=</span> g <span class="token operator">/</span> i<span class="token punctuation">.</span>height<span class="token punctuation">,</span>                a <span class="token operator">=</span> <span class="token number">.5</span> <span class="token operator">*</span> f <span class="token operator">-</span> <span class="token number">.5</span> <span class="token operator">*</span> h<span class="token punctuation">,</span>                s <span class="token operator">=</span> <span class="token number">.5</span> <span class="token operator">*</span> p <span class="token operator">-</span> <span class="token number">.5</span> <span class="token operator">*</span> g<span class="token punctuation">,</span>                h <span class="token operator">></span> f <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>a <span class="token operator">=</span> i<span class="token punctuation">.</span>left <span class="token operator">*</span> r <span class="token operator">-</span> <span class="token punctuation">(</span>t <span class="token operator">*</span> r <span class="token operator">-</span> t<span class="token punctuation">)</span><span class="token punctuation">,</span>                a <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                a <span class="token operator">&lt;</span> f <span class="token operator">-</span> h <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>a <span class="token operator">=</span> f <span class="token operator">-</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                g <span class="token operator">></span> p <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>s <span class="token operator">=</span> i<span class="token punctuation">.</span>top <span class="token operator">*</span> c <span class="token operator">-</span> <span class="token punctuation">(</span>e <span class="token operator">*</span> c <span class="token operator">-</span> e<span class="token punctuation">)</span><span class="token punctuation">,</span>                s <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                s <span class="token operator">&lt;</span> p <span class="token operator">-</span> g <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>s <span class="token operator">=</span> p <span class="token operator">-</span> g<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                l<span class="token punctuation">.</span><span class="token function">updateCursor</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> g<span class="token punctuation">)</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>                    <span class="token literal-property property">top</span><span class="token operator">:</span> s<span class="token punctuation">,</span>                    <span class="token literal-property property">left</span><span class="token operator">:</span> a<span class="token punctuation">,</span>                    <span class="token literal-property property">scaleX</span><span class="token operator">:</span> r<span class="token punctuation">,</span>                    <span class="token literal-property property">scaleY</span><span class="token operator">:</span> c                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> o <span class="token operator">||</span> <span class="token number">366</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    l<span class="token punctuation">.</span>isAnimating <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                l<span class="token punctuation">.</span>SlideShow <span class="token operator">&amp;&amp;</span> l<span class="token punctuation">.</span>SlideShow<span class="token punctuation">.</span>isActive <span class="token operator">&amp;&amp;</span> l<span class="token punctuation">.</span>SlideShow<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">scaleToFit</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e<span class="token punctuation">,</span> o <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> i <span class="token operator">=</span> o<span class="token punctuation">.</span>current<span class="token punctuation">,</span> a <span class="token operator">=</span> i<span class="token punctuation">.</span>$content<span class="token punctuation">;</span>                o<span class="token punctuation">.</span>isAnimating <span class="token operator">||</span> o<span class="token punctuation">.</span><span class="token function">isMoved</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span>a <span class="token operator">||</span> <span class="token string">"image"</span> <span class="token operator">!=</span> i<span class="token punctuation">.</span>type <span class="token operator">||</span> <span class="token operator">!</span>i<span class="token punctuation">.</span>isLoaded <span class="token operator">||</span> i<span class="token punctuation">.</span>hasError <span class="token operator">||</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>isAnimating <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>                e <span class="token operator">=</span> o<span class="token punctuation">.</span><span class="token function">getFitPos</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>                o<span class="token punctuation">.</span><span class="token function">updateCursor</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>width<span class="token punctuation">,</span> e<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>                    <span class="token literal-property property">top</span><span class="token operator">:</span> e<span class="token punctuation">.</span>top<span class="token punctuation">,</span>                    <span class="token literal-property property">left</span><span class="token operator">:</span> e<span class="token punctuation">.</span>left<span class="token punctuation">,</span>                    <span class="token literal-property property">scaleX</span><span class="token operator">:</span> e<span class="token punctuation">.</span>width <span class="token operator">/</span> a<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token literal-property property">scaleY</span><span class="token operator">:</span> e<span class="token punctuation">.</span>height <span class="token operator">/</span> a<span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> t <span class="token operator">||</span> <span class="token number">366</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    o<span class="token punctuation">.</span>isAnimating <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">getFitPos</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> a<span class="token punctuation">,</span> s <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> r <span class="token operator">=</span> t<span class="token punctuation">.</span>$content<span class="token punctuation">,</span> c <span class="token operator">=</span> t<span class="token punctuation">.</span>$slide<span class="token punctuation">,</span> l <span class="token operator">=</span> t<span class="token punctuation">.</span>width <span class="token operator">||</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>width<span class="token punctuation">,</span> d <span class="token operator">=</span> t<span class="token punctuation">.</span>height <span class="token operator">||</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>height<span class="token punctuation">,</span> u <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>isLoaded <span class="token operator">&amp;&amp;</span> r <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>stage<span class="token punctuation">)</span><span class="token punctuation">.</span>width<span class="token punctuation">,</span>                o <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>stage<span class="token punctuation">)</span><span class="token punctuation">.</span>height<span class="token punctuation">,</span>                e <span class="token operator">-=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"paddingLeft"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"paddingRight"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"marginLeft"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"marginRight"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                o <span class="token operator">-=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"paddingTop"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"paddingBottom"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"marginTop"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"marginBottom"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                l <span class="token operator">&amp;&amp;</span> d <span class="token operator">||</span> <span class="token punctuation">(</span>l <span class="token operator">=</span> e<span class="token punctuation">,</span>                d <span class="token operator">=</span> o<span class="token punctuation">)</span><span class="token punctuation">,</span>                i <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> e <span class="token operator">/</span> l<span class="token punctuation">,</span> o <span class="token operator">/</span> d<span class="token punctuation">)</span><span class="token punctuation">,</span>                l <span class="token operator">*=</span> i<span class="token punctuation">,</span>                d <span class="token operator">*=</span> i<span class="token punctuation">,</span>                l <span class="token operator">></span> e <span class="token operator">-</span> <span class="token number">.5</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>l <span class="token operator">=</span> e<span class="token punctuation">)</span><span class="token punctuation">,</span>                d <span class="token operator">></span> o <span class="token operator">-</span> <span class="token number">.5</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>d <span class="token operator">=</span> o<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token string">"image"</span> <span class="token operator">===</span> t<span class="token punctuation">.</span>type <span class="token operator">?</span> <span class="token punctuation">(</span>u<span class="token punctuation">.</span>top <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">.5</span> <span class="token operator">*</span> <span class="token punctuation">(</span>o <span class="token operator">-</span> d<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"paddingTop"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                u<span class="token punctuation">.</span>left <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">.5</span> <span class="token operator">*</span> <span class="token punctuation">(</span>e <span class="token operator">-</span> l<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"paddingLeft"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">"video"</span> <span class="token operator">===</span> t<span class="token punctuation">.</span>contentType <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>a <span class="token operator">=</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>width <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>height <span class="token operator">?</span> l <span class="token operator">/</span> d <span class="token operator">:</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>ratio <span class="token operator">||</span> <span class="token number">16</span> <span class="token operator">/</span> <span class="token number">9</span><span class="token punctuation">,</span>                d <span class="token operator">></span> l <span class="token operator">/</span> a <span class="token operator">?</span> d <span class="token operator">=</span> l <span class="token operator">/</span> a <span class="token operator">:</span> l <span class="token operator">></span> d <span class="token operator">*</span> a <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>l <span class="token operator">=</span> d <span class="token operator">*</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                u<span class="token punctuation">.</span>width <span class="token operator">=</span> l<span class="token punctuation">,</span>                u<span class="token punctuation">.</span>height <span class="token operator">=</span> d<span class="token punctuation">,</span>                u<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>                n<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>slides<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">updateSlide</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> t<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">updateSlide</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">this</span>                  <span class="token punctuation">,</span> i <span class="token operator">=</span> t <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>$content                  <span class="token punctuation">,</span> a <span class="token operator">=</span> t<span class="token punctuation">.</span>width <span class="token operator">||</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>width                  <span class="token punctuation">,</span> s <span class="token operator">=</span> t<span class="token punctuation">.</span>height <span class="token operator">||</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>height                  <span class="token punctuation">,</span> r <span class="token operator">=</span> t<span class="token punctuation">.</span>$slide<span class="token punctuation">;</span>                o<span class="token punctuation">.</span><span class="token function">adjustCaption</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>                i <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>a <span class="token operator">||</span> s <span class="token operator">||</span> <span class="token string">"video"</span> <span class="token operator">===</span> t<span class="token punctuation">.</span>contentType<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>t<span class="token punctuation">.</span>hasError <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">setTranslate</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> o<span class="token punctuation">.</span><span class="token function">getFitPos</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>pos <span class="token operator">===</span> o<span class="token punctuation">.</span>currPos <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>isAnimating <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                o<span class="token punctuation">.</span><span class="token function">updateCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                o<span class="token punctuation">.</span><span class="token function">adjustLayout</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>                r<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"refresh"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>pos <span class="token operator">===</span> o<span class="token punctuation">.</span>currPos <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>toolbar<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>navigation<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">".fancybox-button--arrow_right"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggleClass</span><span class="token punctuation">(</span><span class="token string">"compensate-for-scrollbar"</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>scrollHeight <span class="token operator">></span> r<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>clientHeight<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                o<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"onUpdate"</span><span class="token punctuation">,</span> t<span class="token punctuation">,</span> e<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">centerSlide</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">this</span>                  <span class="token punctuation">,</span> o <span class="token operator">=</span> e<span class="token punctuation">.</span>current                  <span class="token punctuation">,</span> i <span class="token operator">=</span> o<span class="token punctuation">.</span>$slide<span class="token punctuation">;</span>                <span class="token operator">!</span>e<span class="token punctuation">.</span>isClosing <span class="token operator">&amp;&amp;</span> o <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span><span class="token function">siblings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                    <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>                    <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token string">""</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                i<span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-slide--previous fancybox-slide--next"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>                    <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                    <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                    <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">1</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">===</span> t <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> t<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    i<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                        <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>                        <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token string">""</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    o<span class="token punctuation">.</span>isComplete <span class="token operator">||</span> e<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">isMoved</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i <span class="token operator">=</span> t <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span>i <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>stage<span class="token punctuation">)</span><span class="token punctuation">,</span>                e <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>$slide<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token operator">!</span>i<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-animated"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>top <span class="token operator">-</span> o<span class="token punctuation">.</span>top<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">.5</span> <span class="token operator">||</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>left <span class="token operator">-</span> o<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">updateCursor</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> a <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> s <span class="token operator">=</span> a<span class="token punctuation">.</span>current<span class="token punctuation">,</span> r <span class="token operator">=</span> a<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">;</span>                s <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>a<span class="token punctuation">.</span>isClosing <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span>Guestures <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-zoomOut fancybox-can-swipe fancybox-can-pan"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                o <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">canPan</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">,</span>                i <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>o <span class="token operator">||</span> a<span class="token punctuation">.</span><span class="token function">isZoomable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                r<span class="token punctuation">.</span><span class="token function">toggleClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-is-zoomable"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">"[data-fancybox-zoom]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">"disabled"</span><span class="token punctuation">,</span> <span class="token operator">!</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>                o <span class="token operator">?</span> r<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-can-pan"</span><span class="token punctuation">)</span> <span class="token operator">:</span> i <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token string">"zoom"</span> <span class="token operator">===</span> s<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>clickContent <span class="token operator">||</span> n<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>clickContent<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"zoom"</span> <span class="token operator">==</span> s<span class="token punctuation">.</span>opts<span class="token punctuation">.</span><span class="token function">clickContent</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> r<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-can-zoomIn"</span><span class="token punctuation">)</span> <span class="token operator">:</span> s<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>touch <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>touch<span class="token punctuation">.</span>vertical <span class="token operator">||</span> a<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"video"</span> <span class="token operator">!==</span> s<span class="token punctuation">.</span>contentType <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-can-swipe"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">isZoomable</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> t<span class="token punctuation">,</span> e <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> n <span class="token operator">=</span> e<span class="token punctuation">.</span>current<span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>e<span class="token punctuation">.</span>isClosing <span class="token operator">&amp;&amp;</span> <span class="token string">"image"</span> <span class="token operator">===</span> n<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>n<span class="token punctuation">.</span>hasError<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>n<span class="token punctuation">.</span>isLoaded<span class="token punctuation">)</span>                        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getFitPos</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span>width <span class="token operator">></span> t<span class="token punctuation">.</span>width <span class="token operator">||</span> n<span class="token punctuation">.</span>height <span class="token operator">></span> t<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">)</span>                        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token number">0</span>                <span class="token punctuation">&#125;</span>                <span class="token keyword">return</span> <span class="token operator">!</span><span class="token number">1</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">isScaledDown</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">this</span>                  <span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span>                  <span class="token punctuation">,</span> a <span class="token operator">=</span> o<span class="token punctuation">.</span>current                  <span class="token punctuation">,</span> s <span class="token operator">=</span> a<span class="token punctuation">.</span>$content<span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> t <span class="token operator">&amp;&amp;</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> e <span class="token operator">?</span> i <span class="token operator">=</span> t <span class="token operator">&lt;</span> a<span class="token punctuation">.</span>width <span class="token operator">&amp;&amp;</span> e <span class="token operator">&lt;</span> a<span class="token punctuation">.</span>height <span class="token operator">:</span> s <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span>                i <span class="token operator">=</span> i<span class="token punctuation">.</span>width <span class="token operator">&lt;</span> a<span class="token punctuation">.</span>width <span class="token operator">&amp;&amp;</span> i<span class="token punctuation">.</span>height <span class="token operator">&lt;</span> a<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">,</span>                i            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">canPan</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">this</span>                  <span class="token punctuation">,</span> i <span class="token operator">=</span> o<span class="token punctuation">.</span>current                  <span class="token punctuation">,</span> a <span class="token operator">=</span> <span class="token keyword">null</span>                  <span class="token punctuation">,</span> s <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token string">"image"</span> <span class="token operator">===</span> i<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span>isComplete <span class="token operator">||</span> t <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>i<span class="token punctuation">.</span>hasError <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>s <span class="token operator">=</span> o<span class="token punctuation">.</span><span class="token function">getFitPos</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> t <span class="token operator">&amp;&amp;</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> e <span class="token operator">?</span> a <span class="token operator">=</span> <span class="token punctuation">&#123;</span>                    <span class="token literal-property property">width</span><span class="token operator">:</span> t<span class="token punctuation">,</span>                    <span class="token literal-property property">height</span><span class="token operator">:</span> e                <span class="token punctuation">&#125;</span> <span class="token operator">:</span> i<span class="token punctuation">.</span>isComplete <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>a <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>$content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                a <span class="token operator">&amp;&amp;</span> s <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>s <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>width <span class="token operator">-</span> s<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1.5</span> <span class="token operator">||</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>height <span class="token operator">-</span> s<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                s            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">loadSlide</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> a <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>t<span class="token punctuation">.</span>isLoading <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>t<span class="token punctuation">.</span>isLoaded<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>isLoading <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>                    <span class="token operator">!</span><span class="token number">1</span> <span class="token operator">===</span> a<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"beforeLoad"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">)</span>                        <span class="token keyword">return</span> t<span class="token punctuation">.</span>isLoading <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                        <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">;</span>                    <span class="token keyword">switch</span> <span class="token punctuation">(</span>e <span class="token operator">=</span> t<span class="token punctuation">.</span>type<span class="token punctuation">,</span>                    o <span class="token operator">=</span> t<span class="token punctuation">.</span>$slide<span class="token punctuation">,</span>                    o<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">"refresh"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"onReset"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>slideClass<span class="token punctuation">)</span><span class="token punctuation">,</span>                    e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">case</span> <span class="token string">"image"</span><span class="token operator">:</span>                        a<span class="token punctuation">.</span><span class="token function">setImage</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token keyword">break</span><span class="token punctuation">;</span>                    <span class="token keyword">case</span> <span class="token string">"iframe"</span><span class="token operator">:</span>                        a<span class="token punctuation">.</span><span class="token function">setIframe</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token keyword">break</span><span class="token punctuation">;</span>                    <span class="token keyword">case</span> <span class="token string">"html"</span><span class="token operator">:</span>                        a<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> t<span class="token punctuation">.</span>src <span class="token operator">||</span> t<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token keyword">break</span><span class="token punctuation">;</span>                    <span class="token keyword">case</span> <span class="token string">"video"</span><span class="token operator">:</span>                        a<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>video<span class="token punctuation">.</span>tpl<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\&#123;\&#123;src\&#125;\&#125;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> t<span class="token punctuation">.</span>src<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"&#123;&#123;format&#125;&#125;"</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>videoFormat <span class="token operator">||</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>video<span class="token punctuation">.</span>format <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"&#123;&#123;poster&#125;&#125;"</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span>thumb <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token keyword">break</span><span class="token punctuation">;</span>                    <span class="token keyword">case</span> <span class="token string">"inline"</span><span class="token operator">:</span>                        <span class="token function">n</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>src<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">?</span> a<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token function">n</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>src<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">setError</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token keyword">break</span><span class="token punctuation">;</span>                    <span class="token keyword">case</span> <span class="token string">"ajax"</span><span class="token operator">:</span>                        a<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>                        i <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>ajax<span class="token punctuation">.</span>settings<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>                            <span class="token literal-property property">url</span><span class="token operator">:</span> t<span class="token punctuation">.</span>src<span class="token punctuation">,</span>                            <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                                <span class="token string">"success"</span> <span class="token operator">===</span> n <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> e<span class="token punctuation">)</span>                            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                            <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                                e <span class="token operator">&amp;&amp;</span> <span class="token string">"abort"</span> <span class="token operator">!==</span> n <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span><span class="token function">setError</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>                            <span class="token punctuation">&#125;</span>                        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                        o<span class="token punctuation">.</span><span class="token function">one</span><span class="token punctuation">(</span><span class="token string">"onReset"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                            i<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token keyword">break</span><span class="token punctuation">;</span>                    <span class="token keyword">default</span><span class="token operator">:</span>                        a<span class="token punctuation">.</span><span class="token function">setError</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span>                    <span class="token keyword">return</span> <span class="token operator">!</span><span class="token number">0</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">setImage</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> o<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">var</span> e <span class="token operator">=</span> t<span class="token punctuation">.</span>$image<span class="token punctuation">;</span>                    i<span class="token punctuation">.</span>isClosing <span class="token operator">||</span> <span class="token operator">!</span>t<span class="token punctuation">.</span>isLoading <span class="token operator">||</span> e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>complete <span class="token operator">||</span> t<span class="token punctuation">.</span>hasError <span class="token operator">||</span> i<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                i<span class="token punctuation">.</span><span class="token function">checkSrcset</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>$content <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">'&lt;div class="fancybox-content">&lt;/div>'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-is-hidden"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-slide--image"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token operator">!</span><span class="token number">1</span> <span class="token operator">!==</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>preload <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>width <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>height <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>thumb <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>width <span class="token operator">=</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>width<span class="token punctuation">,</span>                t<span class="token punctuation">.</span>height <span class="token operator">=</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>height<span class="token punctuation">,</span>                o <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                o<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token function">n</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    t<span class="token punctuation">.</span>$ghost <span class="token operator">=</span> <span class="token keyword">null</span>                <span class="token punctuation">&#125;</span>                <span class="token punctuation">,</span>                o<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    i<span class="token punctuation">.</span><span class="token function">afterLoad</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span>                <span class="token punctuation">,</span>                t<span class="token punctuation">.</span>$ghost <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-image"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>$content<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"src"</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span>thumb<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                i<span class="token punctuation">.</span><span class="token function">setBigImage</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">checkSrcset</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> n<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> a<span class="token punctuation">,</span> s <span class="token operator">=</span> e<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>srcset <span class="token operator">||</span> e<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>image<span class="token punctuation">.</span>srcset<span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    i <span class="token operator">=</span> t<span class="token punctuation">.</span>devicePixelRatio <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">,</span>                    a <span class="token operator">=</span> t<span class="token punctuation">.</span>innerWidth <span class="token operator">*</span> i<span class="token punctuation">,</span>                    o <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>                        <span class="token keyword">return</span> t<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                            <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">===</span> n<span class="token punctuation">)</span>                                <span class="token keyword">return</span> e<span class="token punctuation">.</span>url <span class="token operator">=</span> t<span class="token punctuation">;</span>                            o <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>value <span class="token operator">=</span> o<span class="token punctuation">,</span>                            e<span class="token punctuation">.</span>postfix <span class="token operator">=</span> t<span class="token punctuation">[</span>t<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                        e                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    o<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token keyword">return</span> t<span class="token punctuation">.</span>value <span class="token operator">-</span> e<span class="token punctuation">.</span>value                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> o<span class="token punctuation">.</span>length<span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token keyword">var</span> c <span class="token operator">=</span> o<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">;</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"w"</span> <span class="token operator">===</span> c<span class="token punctuation">.</span>postfix <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span>value <span class="token operator">>=</span> a <span class="token operator">||</span> <span class="token string">"x"</span> <span class="token operator">===</span> c<span class="token punctuation">.</span>postfix <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span>value <span class="token operator">>=</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                            n <span class="token operator">=</span> c<span class="token punctuation">;</span>                            <span class="token keyword">break</span>                        <span class="token punctuation">&#125;</span>                    <span class="token punctuation">&#125;</span>                    <span class="token operator">!</span>n <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> o<span class="token punctuation">[</span>o<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    n <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>src <span class="token operator">=</span> n<span class="token punctuation">.</span>url<span class="token punctuation">,</span>                    e<span class="token punctuation">.</span>width <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>height <span class="token operator">&amp;&amp;</span> <span class="token string">"w"</span> <span class="token operator">==</span> n<span class="token punctuation">.</span>postfix <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>height <span class="token operator">=</span> e<span class="token punctuation">.</span>width <span class="token operator">/</span> e<span class="token punctuation">.</span>height <span class="token operator">*</span> n<span class="token punctuation">.</span>value<span class="token punctuation">,</span>                    e<span class="token punctuation">.</span>width <span class="token operator">=</span> n<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">,</span>                    e<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>srcset <span class="token operator">=</span> s<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">setBigImage</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">this</span>                  <span class="token punctuation">,</span> i <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span>                  <span class="token punctuation">,</span> a <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>                t<span class="token punctuation">.</span>$image <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">one</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    o<span class="token punctuation">.</span><span class="token function">setError</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">one</span><span class="token punctuation">(</span><span class="token string">"load"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">var</span> e<span class="token punctuation">;</span>                    t<span class="token punctuation">.</span>$ghost <span class="token operator">||</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">resolveImageSlideSize</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>naturalWidth<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>naturalHeight<span class="token punctuation">)</span><span class="token punctuation">,</span>                    o<span class="token punctuation">.</span><span class="token function">afterLoad</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    o<span class="token punctuation">.</span>isClosing <span class="token operator">||</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>srcset <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e <span class="token operator">=</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>sizes<span class="token punctuation">,</span>                    e <span class="token operator">&amp;&amp;</span> <span class="token string">"auto"</span> <span class="token operator">!==</span> e <span class="token operator">||</span> <span class="token punctuation">(</span>e <span class="token operator">=</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>width <span class="token operator">/</span> t<span class="token punctuation">.</span>height <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> s<span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">"100"</span> <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>width <span class="token operator">/</span> t<span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"vw"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    a<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"sizes"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"srcset"</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>srcset<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    t<span class="token punctuation">.</span>$ghost <span class="token operator">&amp;&amp;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        t<span class="token punctuation">.</span>$ghost <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>o<span class="token punctuation">.</span>isClosing <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>$ghost<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">1e3</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">1600</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    o<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-image"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"src"</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span>src<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>$content<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token punctuation">(</span>i<span class="token punctuation">.</span>complete <span class="token operator">||</span> <span class="token string">"complete"</span> <span class="token operator">==</span> i<span class="token punctuation">.</span>readyState<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span>naturalWidth <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span>naturalHeight <span class="token operator">?</span> a<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"load"</span><span class="token punctuation">)</span> <span class="token operator">:</span> i<span class="token punctuation">.</span>error <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">resolveImageSlideSize</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>width<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>                  <span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>height<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                t<span class="token punctuation">.</span>width <span class="token operator">=</span> e<span class="token punctuation">,</span>                t<span class="token punctuation">.</span>height <span class="token operator">=</span> n<span class="token punctuation">,</span>                o <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>width <span class="token operator">=</span> o<span class="token punctuation">,</span>                t<span class="token punctuation">.</span>height <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>o <span class="token operator">*</span> n <span class="token operator">/</span> e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>width <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>i <span class="token operator">*</span> e <span class="token operator">/</span> n<span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>height <span class="token operator">=</span> i<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">setIframe</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e<span class="token punctuation">,</span> o <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> i <span class="token operator">=</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>iframe<span class="token punctuation">,</span> a <span class="token operator">=</span> t<span class="token punctuation">.</span>$slide<span class="token punctuation">;</span>                t<span class="token punctuation">.</span>$content <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">'&lt;div class="fancybox-content'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span>preload <span class="token operator">?</span> <span class="token string">" fancybox-is-hidden"</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'">&lt;/div>'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>css<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>                a<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-slide--"</span> <span class="token operator">+</span> t<span class="token punctuation">.</span>contentType<span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>$iframe <span class="token operator">=</span> e <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>tpl<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\&#123;rnd\&#125;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>attr<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>$content<span class="token punctuation">)</span><span class="token punctuation">,</span>                i<span class="token punctuation">.</span>preload <span class="token operator">?</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"load.fb error.fb"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>isReady <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>                    t<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"refresh"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    o<span class="token punctuation">.</span><span class="token function">afterLoad</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                a<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"refresh.fb"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">var</span> n<span class="token punctuation">,</span> o<span class="token punctuation">,</span> s <span class="token operator">=</span> t<span class="token punctuation">.</span>$content<span class="token punctuation">,</span> r <span class="token operator">=</span> i<span class="token punctuation">.</span>css<span class="token punctuation">.</span>width<span class="token punctuation">,</span> c <span class="token operator">=</span> i<span class="token punctuation">.</span>css<span class="token punctuation">.</span>height<span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">===</span> e<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isReady<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                            n <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">contents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                            o <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span>                        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>                        o <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"overflow"</span><span class="token punctuation">,</span> <span class="token string">"visible"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                        s<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                            <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">"100%"</span><span class="token punctuation">,</span>                            <span class="token string-property property">"max-width"</span><span class="token operator">:</span> <span class="token string">"100%"</span><span class="token punctuation">,</span>                            <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">"9999px"</span>                        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                        <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">===</span> r <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>r <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>o<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span> o<span class="token punctuation">.</span><span class="token function">outerWidth</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                        s<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"width"</span><span class="token punctuation">,</span> r <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"max-width"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                        <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">===</span> c <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>c <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>o<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span> o<span class="token punctuation">.</span><span class="token function">outerHeight</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                        s<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"height"</span><span class="token punctuation">,</span> c <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                        a<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"overflow"</span><span class="token punctuation">,</span> <span class="token string">"auto"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                        s<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-is-hidden"</span><span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> o<span class="token punctuation">.</span><span class="token function">afterLoad</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"src"</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span>src<span class="token punctuation">)</span><span class="token punctuation">,</span>                a<span class="token punctuation">.</span><span class="token function">one</span><span class="token punctuation">(</span><span class="token string">"onReset"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                        <span class="token function">n</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"iframe"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unbind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"src"</span><span class="token punctuation">,</span> <span class="token string">"//about:blank"</span><span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>                    <span class="token function">n</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">"refresh.fb"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    t<span class="token punctuation">.</span>isLoaded <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                    t<span class="token punctuation">.</span>isRevealed <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">setContent</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>                o<span class="token punctuation">.</span>isClosing <span class="token operator">||</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>$content <span class="token operator">&amp;&amp;</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>$content<span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token function">l</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-content"</span><span class="token punctuation">)</span> <span class="token operator">||</span> e<span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-content"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span><span class="token function">parents</span><span class="token punctuation">(</span><span class="token string">".fancybox-slide"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"onReset"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>$placeholder <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">"&lt;div>"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">insertAfter</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"display"</span><span class="token punctuation">,</span> <span class="token string">"inline-block"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> t<span class="token punctuation">.</span>hasError <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token string">"string"</span> <span class="token operator">===</span> n<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">"&lt;div>"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>filter <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">"&lt;div>"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>filter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">one</span><span class="token punctuation">(</span><span class="token string">"onReset"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token function">n</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"video,audio"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    t<span class="token punctuation">.</span>$placeholder <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>$placeholder<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-content"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    t<span class="token punctuation">.</span>$placeholder <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    t<span class="token punctuation">.</span>$smallBtn <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>$smallBtn<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    t<span class="token punctuation">.</span>$smallBtn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    t<span class="token punctuation">.</span>hasError <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token function">n</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    t<span class="token punctuation">.</span>isLoaded <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                    t<span class="token punctuation">.</span>isRevealed <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>$slide<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">"video,audio"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-video"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token string">"&lt;div>&lt;/div>"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>contentType <span class="token operator">=</span> <span class="token string">"video"</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>width <span class="token operator">=</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>width <span class="token operator">||</span> <span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"width"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>height <span class="token operator">=</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>height <span class="token operator">||</span> <span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"height"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>$content <span class="token operator">=</span> t<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">"div,form,main,video,audio,article,.fancybox-content"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>$content<span class="token punctuation">.</span><span class="token function">siblings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>$content<span class="token punctuation">.</span>length <span class="token operator">||</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>$content <span class="token operator">=</span> t<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">wrapInner</span><span class="token punctuation">(</span><span class="token string">"&lt;div>&lt;/div>"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>$content<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-content"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-slide--"</span> <span class="token operator">+</span> t<span class="token punctuation">.</span>contentType<span class="token punctuation">)</span><span class="token punctuation">,</span>                o<span class="token punctuation">.</span><span class="token function">afterLoad</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">setError</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                t<span class="token punctuation">.</span>hasError <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"onReset"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-slide--"</span> <span class="token operator">+</span> t<span class="token punctuation">.</span>contentType<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-slide--error"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>contentType <span class="token operator">=</span> <span class="token string">"html"</span><span class="token punctuation">,</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>errorTpl<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>pos <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currPos <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isAnimating <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">showLoading</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>                <span class="token punctuation">(</span>t <span class="token operator">=</span> t <span class="token operator">||</span> e<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>t<span class="token punctuation">.</span>$spinner <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>$spinner <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> e<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>spinnerTpl<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>$slide<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token string">"fast"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">hideLoading</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>                <span class="token punctuation">(</span>t <span class="token operator">=</span> t <span class="token operator">||</span> e<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>$spinner <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>$spinner<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">delete</span> t<span class="token punctuation">.</span>$spinner<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">afterLoad</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>                e<span class="token punctuation">.</span>isClosing <span class="token operator">||</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>isLoading <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>isLoaded <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"afterLoad"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token operator">!</span>t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>smallBtn <span class="token operator">||</span> t<span class="token punctuation">.</span>$smallBtn <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>$smallBtn<span class="token punctuation">.</span>length <span class="token operator">||</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>$smallBtn <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>btnTpl<span class="token punctuation">.</span>smallBtn<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>$content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>protect <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>$content <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>t<span class="token punctuation">.</span>hasError <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>$content<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"contextmenu.fb"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> <span class="token number">2</span> <span class="token operator">==</span> t<span class="token punctuation">.</span>button <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token operator">!</span><span class="token number">0</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token string">"image"</span> <span class="token operator">===</span> t<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">'&lt;div class="fancybox-spaceball">&lt;/div>'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>$content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span><span class="token function">adjustCaption</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span><span class="token function">adjustLayout</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>pos <span class="token operator">===</span> e<span class="token punctuation">.</span>currPos <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span><span class="token function">updateCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span><span class="token function">revealContent</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">adjustCaption</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e<span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> o <span class="token operator">=</span> t <span class="token operator">||</span> n<span class="token punctuation">.</span>current<span class="token punctuation">,</span> i <span class="token operator">=</span> o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>caption<span class="token punctuation">,</span> a <span class="token operator">=</span> o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>preventCaptionOverlap<span class="token punctuation">,</span> s <span class="token operator">=</span> n<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>caption<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">;</span>                s<span class="token punctuation">.</span><span class="token function">toggleClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-caption--separate"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">,</span>                a <span class="token operator">&amp;&amp;</span> i <span class="token operator">&amp;&amp;</span> i<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>pos <span class="token operator">!==</span> n<span class="token punctuation">.</span>currPos <span class="token operator">?</span> <span class="token punctuation">(</span>e <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>                r <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">outerHeight</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> n<span class="token punctuation">.</span>$caption <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>r <span class="token operator">=</span> n<span class="token punctuation">.</span>$caption<span class="token punctuation">.</span><span class="token function">outerHeight</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                o<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"padding-bottom"</span><span class="token punctuation">,</span> r <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">adjustLayout</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e<span class="token punctuation">,</span> n<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> a <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> s <span class="token operator">=</span> t <span class="token operator">||</span> a<span class="token punctuation">.</span>current<span class="token punctuation">;</span>                s<span class="token punctuation">.</span>isLoaded <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token number">0</span> <span class="token operator">!==</span> s<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>disableLayoutFix <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>$content<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"margin-bottom"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                s<span class="token punctuation">.</span>$content<span class="token punctuation">.</span><span class="token function">outerHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> s<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">.5</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o <span class="token operator">=</span> s<span class="token punctuation">.</span>$slide<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">[</span><span class="token string">"padding-bottom"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                i <span class="token operator">=</span> s<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"padding-bottom"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token function">parseFloat</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e <span class="token operator">=</span> s<span class="token punctuation">.</span>$slide<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>scrollHeight<span class="token punctuation">,</span>                s<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"padding-bottom"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>e <span class="token operator">-</span> s<span class="token punctuation">.</span>$slide<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>scrollHeight<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span>                s<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"padding-bottom"</span><span class="token punctuation">,</span> o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                s<span class="token punctuation">.</span>$content<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"margin-bottom"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">revealContent</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> a<span class="token punctuation">,</span> s <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> r <span class="token operator">=</span> t<span class="token punctuation">.</span>$slide<span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span> d <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">isMoved</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span> u <span class="token operator">=</span> t<span class="token punctuation">.</span>isRevealed<span class="token punctuation">;</span>                <span class="token keyword">return</span> t<span class="token punctuation">.</span>isRevealed <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>                e <span class="token operator">=</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">[</span>s<span class="token punctuation">.</span>firstRun <span class="token operator">?</span> <span class="token string">"animationEffect"</span> <span class="token operator">:</span> <span class="token string">"transitionEffect"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                i <span class="token operator">=</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">[</span>s<span class="token punctuation">.</span>firstRun <span class="token operator">?</span> <span class="token string">"animationDuration"</span> <span class="token operator">:</span> <span class="token string">"transitionDuration"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                i <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">===</span> t<span class="token punctuation">.</span>forcedDuration <span class="token operator">?</span> i <span class="token operator">:</span> t<span class="token punctuation">.</span>forcedDuration<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token operator">!</span>d <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>pos <span class="token operator">===</span> s<span class="token punctuation">.</span>currPos <span class="token operator">&amp;&amp;</span> i <span class="token operator">||</span> <span class="token punctuation">(</span>e <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token string">"zoom"</span> <span class="token operator">===</span> e <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>pos <span class="token operator">===</span> s<span class="token punctuation">.</span>currPos <span class="token operator">&amp;&amp;</span> i <span class="token operator">&amp;&amp;</span> <span class="token string">"image"</span> <span class="token operator">===</span> t<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>t<span class="token punctuation">.</span>hasError <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>l <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">getThumbPos</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> c <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">getFitPos</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">:</span> e <span class="token operator">=</span> <span class="token string">"fade"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token string">"zoom"</span> <span class="token operator">===</span> e <span class="token operator">?</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>isAnimating <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>                c<span class="token punctuation">.</span>scaleX <span class="token operator">=</span> c<span class="token punctuation">.</span>width <span class="token operator">/</span> l<span class="token punctuation">.</span>width<span class="token punctuation">,</span>                c<span class="token punctuation">.</span>scaleY <span class="token operator">=</span> c<span class="token punctuation">.</span>height <span class="token operator">/</span> l<span class="token punctuation">.</span>height<span class="token punctuation">,</span>                a <span class="token operator">=</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>zoomOpacity<span class="token punctuation">,</span>                <span class="token string">"auto"</span> <span class="token operator">==</span> a <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>a <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>width <span class="token operator">/</span> t<span class="token punctuation">.</span>height <span class="token operator">-</span> l<span class="token punctuation">.</span>width <span class="token operator">/</span> l<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                a <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token number">.1</span><span class="token punctuation">,</span>                c<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">setTranslate</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>$content<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-is-hidden"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token function">p</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>$content<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">void</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>$content<span class="token punctuation">,</span> c<span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    s<span class="token punctuation">.</span>isAnimating <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                    s<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">updateSlide</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>                e <span class="token operator">?</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span>                o <span class="token operator">=</span> <span class="token string">"fancybox-slide--"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>pos <span class="token operator">>=</span> s<span class="token punctuation">.</span>prevPos <span class="token operator">?</span> <span class="token string">"next"</span> <span class="token operator">:</span> <span class="token string">"previous"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" fancybox-animated fancybox-fx-"</span> <span class="token operator">+</span> e<span class="token punctuation">,</span>                r<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-slide--current"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>$content<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-is-hidden"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token function">p</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token string">"image"</span> <span class="token operator">!==</span> t<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>$content<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">void</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token string">"fancybox-slide--current"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    r<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                        <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>                        <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token string">""</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    t<span class="token punctuation">.</span>pos <span class="token operator">===</span> s<span class="token punctuation">.</span>currPos <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>$content<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-is-hidden"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                u <span class="token operator">||</span> <span class="token operator">!</span>d <span class="token operator">||</span> <span class="token string">"image"</span> <span class="token operator">!==</span> t<span class="token punctuation">.</span>type <span class="token operator">||</span> t<span class="token punctuation">.</span>hasError <span class="token operator">||</span> t<span class="token punctuation">.</span>$content<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token string">"fast"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">void</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>pos <span class="token operator">===</span> s<span class="token punctuation">.</span>currPos <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">getThumbPos</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> a<span class="token punctuation">,</span> s<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span> c <span class="token operator">=</span> t<span class="token punctuation">.</span>$thumb<span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">!</span>c <span class="token operator">||</span> <span class="token operator">!</span><span class="token function">g</span><span class="token punctuation">(</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">,</span>                o <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"border-top-width"</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                i <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"border-right-width"</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                a <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"border-bottom-width"</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                s <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"border-left-width"</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                r <span class="token operator">=</span> <span class="token punctuation">&#123;</span>                    <span class="token literal-property property">top</span><span class="token operator">:</span> e<span class="token punctuation">.</span>top <span class="token operator">+</span> o<span class="token punctuation">,</span>                    <span class="token literal-property property">left</span><span class="token operator">:</span> e<span class="token punctuation">.</span>left <span class="token operator">+</span> s<span class="token punctuation">,</span>                    <span class="token literal-property property">width</span><span class="token operator">:</span> e<span class="token punctuation">.</span>width <span class="token operator">-</span> i <span class="token operator">-</span> s<span class="token punctuation">,</span>                    <span class="token literal-property property">height</span><span class="token operator">:</span> e<span class="token punctuation">.</span>height <span class="token operator">-</span> o <span class="token operator">-</span> a<span class="token punctuation">,</span>                    <span class="token literal-property property">scaleX</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>                    <span class="token literal-property property">scaleY</span><span class="token operator">:</span> <span class="token number">1</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span>width <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>height <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">complete</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> t<span class="token punctuation">,</span> e <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> o <span class="token operator">=</span> e<span class="token punctuation">.</span>current<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>                <span class="token operator">!</span>e<span class="token punctuation">.</span><span class="token function">isMoved</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span>isLoaded <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>isComplete <span class="token operator">||</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>isComplete <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>                o<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">siblings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"onReset"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span><span class="token function">preload</span><span class="token punctuation">(</span><span class="token string">"inline"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token function">p</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>$slide<span class="token punctuation">)</span><span class="token punctuation">,</span>                o<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-slide--complete"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>slides<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    o<span class="token punctuation">.</span>pos <span class="token operator">>=</span> e<span class="token punctuation">.</span>currPos <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span>pos <span class="token operator">&lt;=</span> e<span class="token punctuation">.</span>currPos <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">?</span> i<span class="token punctuation">[</span>o<span class="token punctuation">.</span>pos<span class="token punctuation">]</span> <span class="token operator">=</span> o <span class="token operator">:</span> o <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>$slide<span class="token punctuation">)</span><span class="token punctuation">,</span>                    o<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span>slides <span class="token operator">=</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span>isAnimating <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span><span class="token function">updateCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"afterShow"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>video<span class="token punctuation">.</span>autoStart <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"video,audio"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">":visible:first"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"play"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">one</span><span class="token punctuation">(</span><span class="token string">"ended"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    Document<span class="token punctuation">.</span>exitFullscreen <span class="token operator">?</span> Document<span class="token punctuation">.</span><span class="token function">exitFullscreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>webkitExitFullscreen <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">webkitExitFullscreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    e<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>autoFocus <span class="token operator">&amp;&amp;</span> <span class="token string">"html"</span> <span class="token operator">===</span> o<span class="token punctuation">.</span>contentType <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> o<span class="token punctuation">.</span>$content<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"input[autofocus]:enabled:visible:first"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>length <span class="token operator">?</span> t<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"focus"</span><span class="token punctuation">)</span> <span class="token operator">:</span> e<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                o<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">scrollTop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollLeft</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">preload</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e<span class="token punctuation">,</span> n<span class="token punctuation">,</span> o <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>                o<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">||</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> o<span class="token punctuation">.</span>slides<span class="token punctuation">[</span>o<span class="token punctuation">.</span>currPos <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                e <span class="token operator">=</span> o<span class="token punctuation">.</span>slides<span class="token punctuation">[</span>o<span class="token punctuation">.</span>currPos <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>type <span class="token operator">===</span> t <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span><span class="token function">loadSlide</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>                n <span class="token operator">&amp;&amp;</span> n<span class="token punctuation">.</span>type <span class="token operator">===</span> t <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span><span class="token function">loadSlide</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">focus</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> i<span class="token punctuation">,</span> a<span class="token punctuation">,</span> s <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"a[href]"</span><span class="token punctuation">,</span> <span class="token string">"area[href]"</span><span class="token punctuation">,</span> <span class="token string">'input:not([disabled]):not([type="hidden"]):not([aria-hidden])'</span><span class="token punctuation">,</span> <span class="token string">"select:not([disabled]):not([aria-hidden])"</span><span class="token punctuation">,</span> <span class="token string">"textarea:not([disabled]):not([aria-hidden])"</span><span class="token punctuation">,</span> <span class="token string">"button:not([disabled]):not([aria-hidden])"</span><span class="token punctuation">,</span> <span class="token string">"iframe"</span><span class="token punctuation">,</span> <span class="token string">"object"</span><span class="token punctuation">,</span> <span class="token string">"embed"</span><span class="token punctuation">,</span> <span class="token string">"video"</span><span class="token punctuation">,</span> <span class="token string">"audio"</span><span class="token punctuation">,</span> <span class="token string">"[contenteditable]"</span><span class="token punctuation">,</span> <span class="token string">'[tabindex]:not([tabindex^="-"])'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                s<span class="token punctuation">.</span>isClosing <span class="token operator">||</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token operator">!</span>t <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>current <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>current<span class="token punctuation">.</span>isComplete <span class="token operator">?</span> s<span class="token punctuation">.</span>current<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"*:visible"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>o <span class="token operator">?</span> <span class="token string">":not(.fancybox-close-small)"</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> s<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"*:visible"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                i <span class="token operator">=</span> i<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> <span class="token string">"hidden"</span> <span class="token operator">!==</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"visibility"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">n</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span><span class="token string">"disabled"</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                i<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token punctuation">(</span>a <span class="token operator">=</span> i<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>activeElement<span class="token punctuation">)</span><span class="token punctuation">,</span>                t <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>shiftKey <span class="token operator">?</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token number">0</span> <span class="token operator">==</span> a<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                i<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"focus"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> a <span class="token operator">==</span> i<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                i<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"focus"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> s<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"focus"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">activate</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>                <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">".fancybox-container"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">"FancyBox"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>id <span class="token operator">!==</span> t<span class="token punctuation">.</span>id <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>e<span class="token punctuation">.</span>isClosing <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"onDeactivate"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    e<span class="token punctuation">.</span><span class="token function">removeEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    e<span class="token punctuation">.</span>isVisible <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>isVisible <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>                <span class="token punctuation">(</span>t<span class="token punctuation">.</span>current <span class="token operator">||</span> t<span class="token punctuation">.</span>isIdle<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span><span class="token function">updateControls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"onActivate"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span><span class="token function">addEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">close</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> a<span class="token punctuation">,</span> s<span class="token punctuation">,</span> r<span class="token punctuation">,</span> c<span class="token punctuation">,</span> l<span class="token punctuation">,</span> u <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> f <span class="token operator">=</span> u<span class="token punctuation">.</span>current<span class="token punctuation">,</span> <span class="token function-variable function">h</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    u<span class="token punctuation">.</span><span class="token function">cleanUp</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token operator">!</span>u<span class="token punctuation">.</span>isClosing <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>u<span class="token punctuation">.</span>isClosing <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>                <span class="token operator">!</span><span class="token number">1</span> <span class="token operator">===</span> u<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"beforeClose"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span>u<span class="token punctuation">.</span>isClosing <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                <span class="token function">d</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    u<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>u<span class="token punctuation">.</span><span class="token function">removeEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                a <span class="token operator">=</span> f<span class="token punctuation">.</span>$content<span class="token punctuation">,</span>                o <span class="token operator">=</span> f<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>animationEffect<span class="token punctuation">,</span>                i <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">isNumeric</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">?</span> e <span class="token operator">:</span> o <span class="token operator">?</span> f<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>animationDuration <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                f<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token operator">!</span><span class="token number">0</span> <span class="token operator">!==</span> t <span class="token operator">?</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>$slide<span class="token punctuation">)</span> <span class="token operator">:</span> o <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                f<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">siblings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"onReset"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                i <span class="token operator">&amp;&amp;</span> u<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-is-open"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-is-closing"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"transition-duration"</span><span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token string">"ms"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                u<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">,</span>                u<span class="token punctuation">.</span><span class="token function">hideControls</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                u<span class="token punctuation">.</span><span class="token function">updateCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token string">"zoom"</span> <span class="token operator">!==</span> o <span class="token operator">||</span> a <span class="token operator">&amp;&amp;</span> i <span class="token operator">&amp;&amp;</span> <span class="token string">"image"</span> <span class="token operator">===</span> f<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>u<span class="token punctuation">.</span><span class="token function">isMoved</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>f<span class="token punctuation">.</span>hasError <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>l <span class="token operator">=</span> u<span class="token punctuation">.</span><span class="token function">getThumbPos</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>o <span class="token operator">=</span> <span class="token string">"fade"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token string">"zoom"</span> <span class="token operator">===</span> o <span class="token operator">?</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>                s <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>                c <span class="token operator">=</span> <span class="token punctuation">&#123;</span>                    <span class="token literal-property property">top</span><span class="token operator">:</span> s<span class="token punctuation">.</span>top<span class="token punctuation">,</span>                    <span class="token literal-property property">left</span><span class="token operator">:</span> s<span class="token punctuation">.</span>left<span class="token punctuation">,</span>                    <span class="token literal-property property">scaleX</span><span class="token operator">:</span> s<span class="token punctuation">.</span>width <span class="token operator">/</span> l<span class="token punctuation">.</span>width<span class="token punctuation">,</span>                    <span class="token literal-property property">scaleY</span><span class="token operator">:</span> s<span class="token punctuation">.</span>height <span class="token operator">/</span> l<span class="token punctuation">.</span>height<span class="token punctuation">,</span>                    <span class="token literal-property property">width</span><span class="token operator">:</span> l<span class="token punctuation">.</span>width<span class="token punctuation">,</span>                    <span class="token literal-property property">height</span><span class="token operator">:</span> l<span class="token punctuation">.</span>height                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                r <span class="token operator">=</span> f<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>zoomOpacity<span class="token punctuation">,</span>                <span class="token string">"auto"</span> <span class="token operator">==</span> r <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>r <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>width <span class="token operator">/</span> f<span class="token punctuation">.</span>height <span class="token operator">-</span> l<span class="token punctuation">.</span>width <span class="token operator">/</span> l<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                r <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">setTranslate</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token function">p</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> l<span class="token punctuation">,</span> i<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>o <span class="token operator">&amp;&amp;</span> i <span class="token operator">?</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-slide--previous"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-slide--current"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"fancybox-animated fancybox-fx-"</span> <span class="token operator">+</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> h<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token operator">!</span><span class="token number">0</span> <span class="token operator">===</span> t <span class="token operator">?</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">cleanUp</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> a<span class="token punctuation">,</span> s <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> r <span class="token operator">=</span> s<span class="token punctuation">.</span>current<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>$orig<span class="token punctuation">;</span>                s<span class="token punctuation">.</span>current<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"onReset"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                s<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                s<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"afterClose"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">,</span>                s<span class="token punctuation">.</span>current<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>backFocus <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>r <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">":visible"</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>r <span class="token operator">=</span> s<span class="token punctuation">.</span>$trigger<span class="token punctuation">)</span><span class="token punctuation">,</span>                r <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> t<span class="token punctuation">.</span>scrollX<span class="token punctuation">,</span>                a <span class="token operator">=</span> t<span class="token punctuation">.</span>scrollY<span class="token punctuation">,</span>                r<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"focus"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">"html, body"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollTop</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollLeft</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                s<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>                o <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                o <span class="token operator">?</span> o<span class="token punctuation">.</span><span class="token function">activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token function">n</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-active compensate-for-scrollbar"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">"#fancybox-style-noscroll"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">trigger</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> o<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> s <span class="token operator">=</span> e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>opts <span class="token operator">?</span> e <span class="token operator">:</span> a<span class="token punctuation">.</span>current<span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>s <span class="token operator">?</span> i<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">:</span> s <span class="token operator">=</span> a<span class="token punctuation">,</span>                i<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>opts<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o <span class="token operator">=</span> s<span class="token punctuation">.</span>opts<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token operator">!</span><span class="token number">1</span> <span class="token operator">===</span> o<span class="token punctuation">)</span>                    <span class="token keyword">return</span> o<span class="token punctuation">;</span>                <span class="token string">"afterClose"</span> <span class="token operator">!==</span> t <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span>$refs <span class="token operator">?</span> a<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>t <span class="token operator">+</span> <span class="token string">".fb"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">:</span> r<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>t <span class="token operator">+</span> <span class="token string">".fb"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">updateControls</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">this</span>                  <span class="token punctuation">,</span> o <span class="token operator">=</span> t<span class="token punctuation">.</span>current                  <span class="token punctuation">,</span> i <span class="token operator">=</span> o<span class="token punctuation">.</span>index                  <span class="token punctuation">,</span> a <span class="token operator">=</span> t<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container                  <span class="token punctuation">,</span> s <span class="token operator">=</span> t<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>caption                  <span class="token punctuation">,</span> r <span class="token operator">=</span> o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>caption<span class="token punctuation">;</span>                o<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"refresh"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                r <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>$caption <span class="token operator">=</span> s<span class="token punctuation">,</span>                s<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> t<span class="token punctuation">.</span>$caption <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>hasHiddenControls <span class="token operator">||</span> t<span class="token punctuation">.</span>isIdle <span class="token operator">||</span> t<span class="token punctuation">.</span><span class="token function">showControls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                a<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"[data-fancybox-count]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">,</span>                a<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"[data-fancybox-index]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                a<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"[data-fancybox-prev]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">"disabled"</span><span class="token punctuation">,</span> <span class="token operator">!</span>o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>loop <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                a<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"[data-fancybox-next]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">"disabled"</span><span class="token punctuation">,</span> <span class="token operator">!</span>o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>loop <span class="token operator">&amp;&amp;</span> i <span class="token operator">>=</span> t<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token string">"image"</span> <span class="token operator">===</span> o<span class="token punctuation">.</span>type <span class="token operator">?</span> a<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"[data-fancybox-zoom]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"[data-fancybox-download]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">,</span> o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>image<span class="token punctuation">.</span>src <span class="token operator">||</span> o<span class="token punctuation">.</span>src<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>toolbar <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"[data-fancybox-download],[data-fancybox-zoom]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>activeElement<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">":hidden,[disabled]"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"focus"</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">hideControls</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">this</span>                  <span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"infobar"</span><span class="token punctuation">,</span> <span class="token string">"toolbar"</span><span class="token punctuation">,</span> <span class="token string">"nav"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token operator">!</span>t <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>current<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>preventCaptionOverlap <span class="token operator">||</span> n<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"caption"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> <span class="token string">"fancybox-show-"</span> <span class="token operator">+</span> t                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>hasHiddenControls <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">showControls</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">this</span>                  <span class="token punctuation">,</span> e <span class="token operator">=</span> t<span class="token punctuation">.</span>current <span class="token operator">?</span> t<span class="token punctuation">.</span>current<span class="token punctuation">.</span>opts <span class="token operator">:</span> t<span class="token punctuation">.</span>opts                  <span class="token punctuation">,</span> n <span class="token operator">=</span> t<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">;</span>                t<span class="token punctuation">.</span>hasHiddenControls <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>idleSecondsCounter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span><span class="token function">toggleClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-show-toolbar"</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">.</span>toolbar <span class="token operator">||</span> <span class="token operator">!</span>e<span class="token punctuation">.</span>buttons<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggleClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-show-infobar"</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>infobar <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggleClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-show-caption"</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token operator">!</span>t<span class="token punctuation">.</span>$caption<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggleClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-show-nav"</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>arrows <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggleClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-is-modal"</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token operator">!</span>e<span class="token punctuation">.</span>modal<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">toggleControls</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>hasHiddenControls <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showControls</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hideControls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        n<span class="token punctuation">.</span>fancybox <span class="token operator">=</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token string">"3.5.7"</span><span class="token punctuation">,</span>            <span class="token literal-property property">defaults</span><span class="token operator">:</span> a<span class="token punctuation">,</span>            <span class="token function-variable function">getInstance</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">'.fancybox-container:not(".fancybox-is-closing"):last'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">"FancyBox"</span><span class="token punctuation">)</span>                  <span class="token punctuation">,</span> o <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> e <span class="token keyword">instanceof</span> <span class="token class-name">b</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token string">"string"</span> <span class="token operator">===</span> n<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">?</span> e<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> o<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">"function"</span> <span class="token operator">===</span> n<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">t</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> o<span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">open</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">b</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>e<span class="token punctuation">,</span>n<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">close</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                e <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token operator">!</span><span class="token number">0</span> <span class="token operator">===</span> t <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">destroy</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                r<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">"click.fb-start"</span><span class="token punctuation">,</span> <span class="token string">"**"</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">isMobile</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token function-variable function">use3d</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> n <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> t<span class="token punctuation">.</span>getComputedStyle <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token string">"transform"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>documentMode <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>documentMode <span class="token operator">&lt;</span> <span class="token number">11</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token function-variable function">getTranslate</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> e<span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">!</span>t <span class="token operator">||</span> <span class="token operator">!</span>t<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e <span class="token operator">=</span> t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token punctuation">&#123;</span>                    <span class="token literal-property property">top</span><span class="token operator">:</span> e<span class="token punctuation">.</span>top <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">,</span>                    <span class="token literal-property property">left</span><span class="token operator">:</span> e<span class="token punctuation">.</span>left <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">,</span>                    <span class="token literal-property property">width</span><span class="token operator">:</span> e<span class="token punctuation">.</span>width<span class="token punctuation">,</span>                    <span class="token literal-property property">height</span><span class="token operator">:</span> e<span class="token punctuation">.</span>height<span class="token punctuation">,</span>                    <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"opacity"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">setTranslate</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token string">""</span>                  <span class="token punctuation">,</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">)</span>                    <span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">===</span> e<span class="token punctuation">.</span>left <span class="token operator">&amp;&amp;</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">===</span> e<span class="token punctuation">.</span>top <span class="token operator">||</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">===</span> e<span class="token punctuation">.</span>left <span class="token operator">?</span> t<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left <span class="token operator">:</span> e<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"px, "</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">===</span> e<span class="token punctuation">.</span>top <span class="token operator">?</span> t<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top <span class="token operator">:</span> e<span class="token punctuation">.</span>top<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"px"</span><span class="token punctuation">,</span>                    n <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>use3d <span class="token operator">?</span> <span class="token string">"translate3d("</span> <span class="token operator">+</span> n <span class="token operator">+</span> <span class="token string">", 0px)"</span> <span class="token operator">:</span> <span class="token string">"translate("</span> <span class="token operator">+</span> n <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> e<span class="token punctuation">.</span>scaleX <span class="token operator">&amp;&amp;</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> e<span class="token punctuation">.</span>scaleY <span class="token operator">?</span> n <span class="token operator">+=</span> <span class="token string">" scale("</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>scaleX <span class="token operator">+</span> <span class="token string">", "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>scaleY <span class="token operator">+</span> <span class="token string">")"</span> <span class="token operator">:</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> e<span class="token punctuation">.</span>scaleX <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>n <span class="token operator">+=</span> <span class="token string">" scaleX("</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>scaleX <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    n<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>transform <span class="token operator">=</span> n<span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> e<span class="token punctuation">.</span>opacity <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>opacity <span class="token operator">=</span> e<span class="token punctuation">.</span>opacity<span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> e<span class="token punctuation">.</span>width <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>width <span class="token operator">=</span> e<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> e<span class="token punctuation">.</span>height <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>height <span class="token operator">=</span> e<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">,</span>                    t<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">animate</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> a</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> s<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>                n<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> o<span class="token punctuation">,</span>                o <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                r<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>                s <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token punctuation">(</span><span class="token operator">!</span>c <span class="token operator">||</span> <span class="token operator">!</span>c<span class="token punctuation">.</span>originalEvent <span class="token operator">||</span> t<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>originalEvent<span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"z-index"</span> <span class="token operator">!=</span> c<span class="token punctuation">.</span>originalEvent<span class="token punctuation">.</span>propertyName<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>                    n<span class="token punctuation">.</span><span class="token function">isNumeric</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"transition-duration"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    n<span class="token punctuation">.</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> e<span class="token punctuation">.</span>scaleX <span class="token operator">&amp;&amp;</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> e<span class="token punctuation">.</span>scaleY <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">.</span><span class="token function">setTranslate</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>                        <span class="token literal-property property">top</span><span class="token operator">:</span> e<span class="token punctuation">.</span>top<span class="token punctuation">,</span>                        <span class="token literal-property property">left</span><span class="token operator">:</span> e<span class="token punctuation">.</span>left<span class="token punctuation">,</span>                        <span class="token literal-property property">width</span><span class="token operator">:</span> s<span class="token punctuation">.</span>width <span class="token operator">*</span> e<span class="token punctuation">.</span>scaleX<span class="token punctuation">,</span>                        <span class="token literal-property property">height</span><span class="token operator">:</span> s<span class="token punctuation">.</span>height <span class="token operator">*</span> e<span class="token punctuation">.</span>scaleY<span class="token punctuation">,</span>                        <span class="token literal-property property">scaleX</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>                        <span class="token literal-property property">scaleY</span><span class="token operator">:</span> <span class="token number">1</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token operator">!</span><span class="token number">0</span> <span class="token operator">!==</span> a <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>                    n<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">i</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span><span class="token function">isNumeric</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"transition-duration"</span><span class="token punctuation">,</span> o <span class="token operator">+</span> <span class="token string">"ms"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> e<span class="token punctuation">.</span>scaleX <span class="token operator">&amp;&amp;</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> e<span class="token punctuation">.</span>scaleY <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">delete</span> e<span class="token punctuation">.</span>width<span class="token punctuation">,</span>                <span class="token keyword">delete</span> e<span class="token punctuation">.</span>height<span class="token punctuation">,</span>                t<span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-slide--image"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-is-scaling"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">setTranslate</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> t<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">"timer"</span><span class="token punctuation">,</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    t<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> o <span class="token operator">+</span> <span class="token number">33</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">stop</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                t <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token function">clearTimeout</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">"timer"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                e <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"transition-duration"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-is-scaling"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        n<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">fancybox</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> e<span class="token punctuation">;</span>            <span class="token keyword">return</span> t <span class="token operator">=</span> t <span class="token operator">||</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            e <span class="token operator">=</span> t<span class="token punctuation">.</span>selector <span class="token operator">||</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            e <span class="token operator">?</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">"click.fb-start"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"click.fb-start"</span><span class="token punctuation">,</span> e<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">options</span><span class="token operator">:</span> t            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">"click.fb-start"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"click.fb-start"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">items</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">,</span>                <span class="token literal-property property">options</span><span class="token operator">:</span> t            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token keyword">this</span>        <span class="token punctuation">&#125;</span>        <span class="token punctuation">,</span>        r<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"click.fb-start"</span><span class="token punctuation">,</span> <span class="token string">"[data-fancybox]"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span>        r<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"click.fb-start"</span><span class="token punctuation">,</span> <span class="token string">"[data-fancybox-trigger]"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">'[data-fancybox="'</span> <span class="token operator">+</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"data-fancybox-trigger"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'"]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token function">n</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"data-fancybox-index"</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"click.fb-start"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">$trigger</span><span class="token operator">:</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            r<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"mousedown mouseup focus blur"</span><span class="token punctuation">,</span> <span class="token string">".fancybox-button"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">switch</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">case</span> <span class="token string">"mousedown"</span><span class="token operator">:</span>                    t <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"mouseup"</span><span class="token operator">:</span>                    t <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"focusin"</span><span class="token operator">:</span>                    <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">".fancybox-button"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-focus"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token function">n</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">"[disabled]"</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-focus"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"focusout"</span><span class="token operator">:</span>                    <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">".fancybox-button"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-focus"</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> document<span class="token punctuation">,</span> jQuery<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token string">"use strict"</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">youtube</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">matcher</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&amp;)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]&#123;11&#125;|\?listType=(.*)&amp;list=(.*))(.*)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>            <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">autoplay</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>                <span class="token literal-property property">autohide</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>                <span class="token literal-property property">fs</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>                <span class="token literal-property property">rel</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                <span class="token literal-property property">hd</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>                <span class="token literal-property property">wmode</span><span class="token operator">:</span> <span class="token string">"transparent"</span><span class="token punctuation">,</span>                <span class="token literal-property property">enablejsapi</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>                <span class="token literal-property property">html5</span><span class="token operator">:</span> <span class="token number">1</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">paramPlace</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"iframe"</span><span class="token punctuation">,</span>            <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">"https://www.youtube-nocookie.com/embed/$4"</span><span class="token punctuation">,</span>            <span class="token literal-property property">thumb</span><span class="token operator">:</span> <span class="token string">"https://img.youtube.com/vi/$4/hqdefault.jpg"</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token literal-property property">vimeo</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">matcher</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^.+vimeo.com\/(.*\/)?([\d]+)(.*)?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>            <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">autoplay</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>                <span class="token literal-property property">hd</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>                <span class="token literal-property property">show_title</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>                <span class="token literal-property property">show_byline</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>                <span class="token literal-property property">show_portrait</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                <span class="token literal-property property">fullscreen</span><span class="token operator">:</span> <span class="token number">1</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">paramPlace</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"iframe"</span><span class="token punctuation">,</span>            <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">"//player.vimeo.com/video/$2"</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token literal-property property">instagram</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">matcher</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"image"</span><span class="token punctuation">,</span>            <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">"//$1/p/$2/media/?size=l"</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token literal-property property">gmap_place</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">matcher</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(maps\.)?google\.([a-z]&#123;2,3&#125;(\.[a-z]&#123;2&#125;)?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"iframe"</span><span class="token punctuation">,</span>            <span class="token function-variable function">url</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token string">"//maps.google."</span> <span class="token operator">+</span> t<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"/?ll="</span> <span class="token operator">+</span> <span class="token punctuation">(</span>t<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span> <span class="token operator">?</span> t<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"&amp;z="</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>t<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span> <span class="token operator">?</span> t<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">"&amp;"</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">:</span> t<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">"&amp;"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"&amp;output="</span> <span class="token operator">+</span> <span class="token punctuation">(</span>t<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"layer=c"</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">"svembed"</span> <span class="token operator">:</span> <span class="token string">"embed"</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token literal-property property">gmap_search</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">matcher</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(maps\.)?google\.([a-z]&#123;2,3&#125;(\.[a-z]&#123;2&#125;)?)\/(maps\/search\/)(.*)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"iframe"</span><span class="token punctuation">,</span>            <span class="token function-variable function">url</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token string">"//maps.google."</span> <span class="token operator">+</span> t<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"/maps?q="</span> <span class="token operator">+</span> t<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"query="</span><span class="token punctuation">,</span> <span class="token string">"q="</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"api=1"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"&amp;output=embed"</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>      <span class="token punctuation">,</span> <span class="token function-variable function">n</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> n<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span>            <span class="token keyword">return</span> o <span class="token operator">=</span> o <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">,</span>            <span class="token string">"object"</span> <span class="token operator">===</span> t<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">param</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            t<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"$"</span> <span class="token operator">+</span> t<span class="token punctuation">,</span> n <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            o<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e <span class="token operator">+=</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"?"</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">"&amp;"</span> <span class="token operator">:</span> <span class="token string">"?"</span><span class="token punctuation">)</span> <span class="token operator">+</span> o<span class="token punctuation">)</span><span class="token punctuation">,</span>            e    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token function">t</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"objectNeedsType.fb"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> a</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> s<span class="token punctuation">,</span> r<span class="token punctuation">,</span> c<span class="token punctuation">,</span> l<span class="token punctuation">,</span> d<span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> p <span class="token operator">=</span> a<span class="token punctuation">.</span>src <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">,</span> h <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">;</span>        s <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> e<span class="token punctuation">,</span> a<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>media<span class="token punctuation">)</span><span class="token punctuation">,</span>        t<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>matcher<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>h <span class="token operator">=</span> o<span class="token punctuation">.</span>type<span class="token punctuation">,</span>                f <span class="token operator">=</span> e<span class="token punctuation">,</span>                u <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                o<span class="token punctuation">.</span>paramPlace <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">[</span>o<span class="token punctuation">.</span>paramPlace<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    d <span class="token operator">=</span> c<span class="token punctuation">[</span>o<span class="token punctuation">.</span>paramPlace<span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token string">"?"</span> <span class="token operator">==</span> d<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>d <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    d <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"&amp;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> d<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token keyword">var</span> s <span class="token operator">=</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"="</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token number">2</span> <span class="token operator">==</span> s<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>u<span class="token punctuation">[</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>                <span class="token keyword">return</span> l <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> o<span class="token punctuation">.</span>params<span class="token punctuation">,</span> a<span class="token punctuation">.</span>opts<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">,</span> u<span class="token punctuation">)</span><span class="token punctuation">,</span>                p <span class="token operator">=</span> <span class="token string">"function"</span> <span class="token operator">===</span> t<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>url<span class="token punctuation">)</span> <span class="token operator">?</span> o<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> l<span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">n</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>url<span class="token punctuation">,</span> c<span class="token punctuation">,</span> l<span class="token punctuation">)</span><span class="token punctuation">,</span>                r <span class="token operator">=</span> <span class="token string">"function"</span> <span class="token operator">===</span> t<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>thumb<span class="token punctuation">)</span> <span class="token operator">?</span> o<span class="token punctuation">.</span><span class="token function">thumb</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> l<span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">n</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>thumb<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token string">"youtube"</span> <span class="token operator">===</span> e <span class="token operator">?</span> p <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&amp;t=((\d+)m)?(\d+)s</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> n<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> <span class="token string">"&amp;start="</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>n <span class="token operator">?</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">"vimeo"</span> <span class="token operator">===</span> e <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>p <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"&amp;%23"</span><span class="token punctuation">,</span> <span class="token string">"#"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token operator">!</span><span class="token number">1</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        h <span class="token operator">?</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>thumb <span class="token operator">||</span> a<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>$thumb <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>$thumb<span class="token punctuation">.</span>length <span class="token operator">||</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>thumb <span class="token operator">=</span> r<span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token string">"iframe"</span> <span class="token operator">===</span> h <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>opts <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>opts<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">iframe</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">preload</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                <span class="token literal-property property">attr</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token literal-property property">scrolling</span><span class="token operator">:</span> <span class="token string">"no"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        t<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">type</span><span class="token operator">:</span> h<span class="token punctuation">,</span>            <span class="token literal-property property">src</span><span class="token operator">:</span> p<span class="token punctuation">,</span>            <span class="token literal-property property">origSrc</span><span class="token operator">:</span> a<span class="token punctuation">.</span>src<span class="token punctuation">,</span>            <span class="token literal-property property">contentSource</span><span class="token operator">:</span> f<span class="token punctuation">,</span>            <span class="token literal-property property">contentType</span><span class="token operator">:</span> <span class="token string">"image"</span> <span class="token operator">===</span> h <span class="token operator">?</span> <span class="token string">"image"</span> <span class="token operator">:</span> <span class="token string">"gmap_place"</span> <span class="token operator">==</span> f <span class="token operator">||</span> <span class="token string">"gmap_search"</span> <span class="token operator">==</span> f <span class="token operator">?</span> <span class="token string">"map"</span> <span class="token operator">:</span> <span class="token string">"video"</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> p <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>type <span class="token operator">=</span> a<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>defaultType<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">youtube</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">"https://www.youtube.com/iframe_api"</span><span class="token punctuation">,</span>            <span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">"YT"</span><span class="token punctuation">,</span>            <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            <span class="token literal-property property">loaded</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token literal-property property">vimeo</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">"https://player.vimeo.com/api/player.js"</span><span class="token punctuation">,</span>            <span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">"Vimeo"</span><span class="token punctuation">,</span>            <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            <span class="token literal-property property">loaded</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token function-variable function">load</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> e<span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>loaded<span class="token punctuation">)</span>                <span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    n<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>loading <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>            e <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            e<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"text/javascript"</span><span class="token punctuation">,</span>            e<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>src<span class="token punctuation">,</span>            <span class="token string">"youtube"</span> <span class="token operator">===</span> t <span class="token operator">?</span> window<span class="token punctuation">.</span><span class="token function-variable function">onYouTubeIframeAPIReady</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                n<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>loaded <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>            <span class="token operator">:</span> e<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                n<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>loaded <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>            <span class="token punctuation">,</span>            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token function-variable function">done</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> n<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i<span class="token punctuation">;</span>            <span class="token string">"youtube"</span> <span class="token operator">===</span> e <span class="token operator">&amp;&amp;</span> <span class="token keyword">delete</span> window<span class="token punctuation">.</span>onYouTubeIframeAPIReady<span class="token punctuation">,</span>            <span class="token punctuation">(</span>n <span class="token operator">=</span> t<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o <span class="token operator">=</span> n<span class="token punctuation">.</span>current<span class="token punctuation">.</span>$content<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"iframe"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">"youtube"</span> <span class="token operator">===</span> e <span class="token operator">&amp;&amp;</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> <span class="token constant">YT</span> <span class="token operator">&amp;&amp;</span> <span class="token constant">YT</span> <span class="token operator">?</span> i <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">YT<span class="token punctuation">.</span>Player</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>                <span class="token literal-property property">events</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token function-variable function">onStateChange</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token number">0</span> <span class="token operator">==</span> t<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> n<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">"vimeo"</span> <span class="token operator">===</span> e <span class="token operator">&amp;&amp;</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> Vimeo <span class="token operator">&amp;&amp;</span> Vimeo <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vimeo<span class="token punctuation">.</span>Player</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"ended"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                n<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token function">t</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token string-property property">"afterShow.fb"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token string">"youtube"</span> <span class="token operator">===</span> n<span class="token punctuation">.</span>contentSource <span class="token operator">||</span> <span class="token string">"vimeo"</span> <span class="token operator">===</span> n<span class="token punctuation">.</span>contentSource<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>contentSource<span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token string">"use strict"</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> <span class="token function-variable function">o</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> t<span class="token punctuation">.</span>requestAnimationFrame <span class="token operator">||</span> t<span class="token punctuation">.</span>webkitRequestAnimationFrame <span class="token operator">||</span> t<span class="token punctuation">.</span>mozRequestAnimationFrame <span class="token operator">||</span> t<span class="token punctuation">.</span>oRequestAnimationFrame <span class="token operator">||</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> t<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token number">1e3</span> <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">,</span> <span class="token function-variable function">i</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> t<span class="token punctuation">.</span>cancelAnimationFrame <span class="token operator">||</span> t<span class="token punctuation">.</span>webkitCancelAnimationFrame <span class="token operator">||</span> t<span class="token punctuation">.</span>mozCancelAnimationFrame <span class="token operator">||</span> t<span class="token punctuation">.</span>oCancelAnimationFrame <span class="token operator">||</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            t<span class="token punctuation">.</span><span class="token function">clearTimeout</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">,</span> <span class="token function-variable function">a</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        e <span class="token operator">=</span> e<span class="token punctuation">.</span>originalEvent <span class="token operator">||</span> e <span class="token operator">||</span> t<span class="token punctuation">.</span>e<span class="token punctuation">,</span>        e <span class="token operator">=</span> e<span class="token punctuation">.</span>touches <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">.</span>length <span class="token operator">?</span> e<span class="token punctuation">.</span>touches <span class="token operator">:</span> e<span class="token punctuation">.</span>changedTouches <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>changedTouches<span class="token punctuation">.</span>length <span class="token operator">?</span> e<span class="token punctuation">.</span>changedTouches <span class="token operator">:</span> <span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> o <span class="token keyword">in</span> e<span class="token punctuation">)</span>            e<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">.</span>pageX <span class="token operator">?</span> n<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                <span class="token literal-property property">x</span><span class="token operator">:</span> e<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">.</span>pageX<span class="token punctuation">,</span>                <span class="token literal-property property">y</span><span class="token operator">:</span> e<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">.</span>pageY            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token operator">:</span> e<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">.</span>clientX <span class="token operator">&amp;&amp;</span> n<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                <span class="token literal-property property">x</span><span class="token operator">:</span> e<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">.</span>clientX<span class="token punctuation">,</span>                <span class="token literal-property property">y</span><span class="token operator">:</span> e<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">.</span>clientY            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> n    <span class="token punctuation">&#125;</span>      <span class="token punctuation">,</span> <span class="token function-variable function">s</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> e <span class="token operator">&amp;&amp;</span> t <span class="token operator">?</span> <span class="token string">"x"</span> <span class="token operator">===</span> n <span class="token operator">?</span> t<span class="token punctuation">.</span>x <span class="token operator">-</span> e<span class="token punctuation">.</span>x <span class="token operator">:</span> <span class="token string">"y"</span> <span class="token operator">===</span> n <span class="token operator">?</span> t<span class="token punctuation">.</span>y <span class="token operator">-</span> e<span class="token punctuation">.</span>y <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>x <span class="token operator">-</span> e<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>y <span class="token operator">-</span> e<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">0</span>    <span class="token punctuation">&#125;</span>      <span class="token punctuation">,</span> <span class="token function-variable function">r</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">'a,area,button,[role="button"],input,label,select,summary,textarea,video,audio,iframe'</span><span class="token punctuation">)</span> <span class="token operator">||</span> n<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>onclick<span class="token punctuation">)</span> <span class="token operator">||</span> t<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">"selectable"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> o <span class="token operator">=</span> t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>attributes<span class="token punctuation">,</span> i <span class="token operator">=</span> o<span class="token punctuation">.</span>length<span class="token punctuation">;</span> e <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> e<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"data-fancybox-"</span> <span class="token operator">===</span> o<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token number">1</span>    <span class="token punctuation">&#125;</span>      <span class="token punctuation">,</span> <span class="token function-variable function">c</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> n <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">"overflow-y"</span><span class="token punctuation">]</span>          <span class="token punctuation">,</span> o <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">"overflow-x"</span><span class="token punctuation">]</span>          <span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"scroll"</span> <span class="token operator">===</span> n <span class="token operator">||</span> <span class="token string">"auto"</span> <span class="token operator">===</span> n<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>scrollHeight <span class="token operator">></span> e<span class="token punctuation">.</span>clientHeight          <span class="token punctuation">,</span> a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"scroll"</span> <span class="token operator">===</span> o <span class="token operator">||</span> <span class="token string">"auto"</span> <span class="token operator">===</span> o<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>scrollWidth <span class="token operator">></span> e<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>        <span class="token keyword">return</span> i <span class="token operator">||</span> a    <span class="token punctuation">&#125;</span>      <span class="token punctuation">,</span> <span class="token function-variable function">l</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">;</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">=</span> <span class="token function">c</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token operator">!</span>t<span class="token punctuation">.</span>length <span class="token operator">||</span> t<span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-stage"</span><span class="token punctuation">)</span> <span class="token operator">||</span> t<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">break</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> e    <span class="token punctuation">&#125;</span>      <span class="token punctuation">,</span> <span class="token function-variable function">d</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        e<span class="token punctuation">.</span>instance <span class="token operator">=</span> t<span class="token punctuation">,</span>        e<span class="token punctuation">.</span>$bg <span class="token operator">=</span> t<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>bg<span class="token punctuation">,</span>        e<span class="token punctuation">.</span>$stage <span class="token operator">=</span> t<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>stage<span class="token punctuation">,</span>        e<span class="token punctuation">.</span>$container <span class="token operator">=</span> t<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">,</span>        e<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        e<span class="token punctuation">.</span>$container<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"touchstart.fb.touch mousedown.fb.touch"</span><span class="token punctuation">,</span> n<span class="token punctuation">.</span><span class="token function">proxy</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"ontouchstart"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    d<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">destroy</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        t<span class="token punctuation">.</span>$container<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">".fb.touch"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">".fb.touch"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        t<span class="token punctuation">.</span>requestId <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token function">i</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>requestId<span class="token punctuation">)</span><span class="token punctuation">,</span>        t<span class="token punctuation">.</span>requestId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        t<span class="token punctuation">.</span>tapped <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token function">clearTimeout</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>tapped<span class="token punctuation">)</span><span class="token punctuation">,</span>        t<span class="token punctuation">.</span>tapped <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">,</span>    d<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">ontouchstart</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token keyword">this</span>          <span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>target<span class="token punctuation">)</span>          <span class="token punctuation">,</span> d <span class="token operator">=</span> i<span class="token punctuation">.</span>instance          <span class="token punctuation">,</span> u <span class="token operator">=</span> d<span class="token punctuation">.</span>current          <span class="token punctuation">,</span> f <span class="token operator">=</span> u<span class="token punctuation">.</span>$slide          <span class="token punctuation">,</span> p <span class="token operator">=</span> u<span class="token punctuation">.</span>$content          <span class="token punctuation">,</span> h <span class="token operator">=</span> <span class="token string">"touchstart"</span> <span class="token operator">==</span> o<span class="token punctuation">.</span>type<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>h <span class="token operator">&amp;&amp;</span> i<span class="token punctuation">.</span>$container<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">"mousedown.fb.touch"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">(</span><span class="token operator">!</span>o<span class="token punctuation">.</span>originalEvent <span class="token operator">||</span> <span class="token number">2</span> <span class="token operator">!=</span> o<span class="token punctuation">.</span>originalEvent<span class="token punctuation">.</span>button<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> f<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">r</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">r</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>originalEvent<span class="token punctuation">.</span>clientX <span class="token operator">></span> c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientWidth <span class="token operator">+</span> c<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>u <span class="token operator">||</span> d<span class="token punctuation">.</span>isAnimating <span class="token operator">||</span> u<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-animated"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> o<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">void</span> o<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            i<span class="token punctuation">.</span>realPoints <span class="token operator">=</span> i<span class="token punctuation">.</span>startPoints <span class="token operator">=</span> <span class="token function">a</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>startPoints<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>u<span class="token punctuation">.</span>touch <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>startEvent <span class="token operator">=</span> o<span class="token punctuation">,</span>            i<span class="token punctuation">.</span>canTap <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>$target <span class="token operator">=</span> c<span class="token punctuation">,</span>            i<span class="token punctuation">.</span>$content <span class="token operator">=</span> p<span class="token punctuation">,</span>            i<span class="token punctuation">.</span>opts <span class="token operator">=</span> u<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>touch<span class="token punctuation">,</span>            i<span class="token punctuation">.</span>isPanning <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>isSwiping <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>isZooming <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>isScrolling <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>canPan <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">canPan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>startTime <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>distanceX <span class="token operator">=</span> i<span class="token punctuation">.</span>distanceY <span class="token operator">=</span> i<span class="token punctuation">.</span>distance <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>canvasWidth <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientWidth<span class="token punctuation">)</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>canvasHeight <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientHeight<span class="token punctuation">)</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>contentLastPos <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>contentStartPos <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>$content<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">0</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>sliderStartPos <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>stagePos <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>stage<span class="token punctuation">)</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>sliderStartPos<span class="token punctuation">.</span>top <span class="token operator">-=</span> i<span class="token punctuation">.</span>stagePos<span class="token punctuation">.</span>top<span class="token punctuation">,</span>            i<span class="token punctuation">.</span>sliderStartPos<span class="token punctuation">.</span>left <span class="token operator">-=</span> i<span class="token punctuation">.</span>stagePos<span class="token punctuation">.</span>left<span class="token punctuation">,</span>            i<span class="token punctuation">.</span>contentStartPos<span class="token punctuation">.</span>top <span class="token operator">-=</span> i<span class="token punctuation">.</span>stagePos<span class="token punctuation">.</span>top<span class="token punctuation">,</span>            i<span class="token punctuation">.</span>contentStartPos<span class="token punctuation">.</span>left <span class="token operator">-=</span> i<span class="token punctuation">.</span>stagePos<span class="token punctuation">.</span>left<span class="token punctuation">,</span>            <span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">".fb.touch"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>h <span class="token operator">?</span> <span class="token string">"touchend.fb.touch touchcancel.fb.touch"</span> <span class="token operator">:</span> <span class="token string">"mouseup.fb.touch mouseleave.fb.touch"</span><span class="token punctuation">,</span> n<span class="token punctuation">.</span><span class="token function">proxy</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token string">"ontouchend"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>h <span class="token operator">?</span> <span class="token string">"touchmove.fb.touch"</span> <span class="token operator">:</span> <span class="token string">"mousemove.fb.touch"</span><span class="token punctuation">,</span> n<span class="token punctuation">.</span><span class="token function">proxy</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token string">"ontouchmove"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span>isMobile <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"scroll"</span><span class="token punctuation">,</span> i<span class="token punctuation">.</span>onscroll<span class="token punctuation">,</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>opts <span class="token operator">||</span> i<span class="token punctuation">.</span>canPan<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>$stage<span class="token punctuation">)</span> <span class="token operator">||</span> i<span class="token punctuation">.</span>$stage<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">".fancybox-image"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span>isMobile <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span><span class="token function">parents</span><span class="token punctuation">(</span><span class="token string">".fancybox-caption"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span>isScrollable <span class="token operator">=</span> <span class="token function">l</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">l</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span>isMobile <span class="token operator">&amp;&amp;</span> i<span class="token punctuation">.</span>isScrollable <span class="token operator">||</span> o<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">===</span> i<span class="token punctuation">.</span>startPoints<span class="token punctuation">.</span>length <span class="token operator">||</span> u<span class="token punctuation">.</span>hasError<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span>canPan <span class="token operator">?</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>$content<span class="token punctuation">)</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>isPanning <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> i<span class="token punctuation">.</span>isSwiping <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>$container<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-is-grabbing"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token number">2</span> <span class="token operator">===</span> i<span class="token punctuation">.</span>startPoints<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token string">"image"</span> <span class="token operator">===</span> u<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>u<span class="token punctuation">.</span>isLoaded <span class="token operator">||</span> u<span class="token punctuation">.</span>$ghost<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span>canTap <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>isSwiping <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>isPanning <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>isZooming <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>            n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>$content<span class="token punctuation">)</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>centerPointStartX <span class="token operator">=</span> <span class="token number">.5</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span>startPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+</span> i<span class="token punctuation">.</span>startPoints<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">n</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>centerPointStartY <span class="token operator">=</span> <span class="token number">.5</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span>startPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">+</span> i<span class="token punctuation">.</span>startPoints<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">n</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            i<span class="token punctuation">.</span>percentageOfImageAtPinchPointX <span class="token operator">=</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span>centerPointStartX <span class="token operator">-</span> i<span class="token punctuation">.</span>contentStartPos<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">/</span> i<span class="token punctuation">.</span>contentStartPos<span class="token punctuation">.</span>width<span class="token punctuation">,</span>            i<span class="token punctuation">.</span>percentageOfImageAtPinchPointY <span class="token operator">=</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span>centerPointStartY <span class="token operator">-</span> i<span class="token punctuation">.</span>contentStartPos<span class="token punctuation">.</span>top<span class="token punctuation">)</span> <span class="token operator">/</span> i<span class="token punctuation">.</span>contentStartPos<span class="token punctuation">.</span>height<span class="token punctuation">,</span>            i<span class="token punctuation">.</span>startDistanceBetweenFingers <span class="token operator">=</span> <span class="token function">s</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>startPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">.</span>startPoints<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">,</span>    d<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">onscroll</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        n<span class="token punctuation">.</span>isScrolling <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>        e<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"scroll"</span><span class="token punctuation">,</span> n<span class="token punctuation">.</span>onscroll<span class="token punctuation">,</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">,</span>    d<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">ontouchmove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> t<span class="token punctuation">.</span>originalEvent<span class="token punctuation">.</span>buttons <span class="token operator">&amp;&amp;</span> <span class="token number">0</span> <span class="token operator">===</span> t<span class="token punctuation">.</span>originalEvent<span class="token punctuation">.</span>buttons <span class="token operator">?</span> <span class="token keyword">void</span> e<span class="token punctuation">.</span><span class="token function">ontouchend</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">:</span> e<span class="token punctuation">.</span>isScrolling <span class="token operator">?</span> <span class="token keyword">void</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>canTap <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>newPoints <span class="token operator">=</span> <span class="token function">a</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>opts <span class="token operator">||</span> e<span class="token punctuation">.</span>canPan<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>newPoints<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>newPoints<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>isSwiping <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token number">0</span> <span class="token operator">===</span> e<span class="token punctuation">.</span>isSwiping <span class="token operator">||</span> t<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        e<span class="token punctuation">.</span>distanceX <span class="token operator">=</span> <span class="token function">s</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>newPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>startPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"x"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        e<span class="token punctuation">.</span>distanceY <span class="token operator">=</span> <span class="token function">s</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>newPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>startPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"y"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        e<span class="token punctuation">.</span>distance <span class="token operator">=</span> <span class="token function">s</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>newPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>startPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        e<span class="token punctuation">.</span>distance <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>isSwiping <span class="token operator">?</span> e<span class="token punctuation">.</span><span class="token function">onSwipe</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">:</span> e<span class="token punctuation">.</span>isPanning <span class="token operator">?</span> e<span class="token punctuation">.</span><span class="token function">onPan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> e<span class="token punctuation">.</span>isZooming <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span><span class="token function">onZoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">,</span>    d<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">onSwipe</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> a<span class="token punctuation">,</span> s <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> r <span class="token operator">=</span> s<span class="token punctuation">.</span>instance<span class="token punctuation">,</span> c <span class="token operator">=</span> s<span class="token punctuation">.</span>isSwiping<span class="token punctuation">,</span> l <span class="token operator">=</span> s<span class="token punctuation">.</span>sliderStartPos<span class="token punctuation">.</span>left <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span> <span class="token operator">!==</span> c<span class="token punctuation">)</span>            <span class="token string">"x"</span> <span class="token operator">==</span> c <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>distanceX <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">||</span> <span class="token number">0</span> <span class="token operator">===</span> s<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>current<span class="token punctuation">.</span>index <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>s<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>current<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>loop<span class="token punctuation">)</span> <span class="token operator">?</span> l <span class="token operator">+=</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>distanceX<span class="token punctuation">,</span> <span class="token number">.8</span><span class="token punctuation">)</span> <span class="token operator">:</span> s<span class="token punctuation">.</span>distanceX <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">||</span> s<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>current<span class="token punctuation">.</span>index <span class="token operator">===</span> s<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>s<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>current<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>loop<span class="token punctuation">)</span> <span class="token operator">?</span> l <span class="token operator">-=</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token operator">-</span>s<span class="token punctuation">.</span>distanceX<span class="token punctuation">,</span> <span class="token number">.8</span><span class="token punctuation">)</span> <span class="token operator">:</span> l <span class="token operator">+=</span> s<span class="token punctuation">.</span>distanceX<span class="token punctuation">)</span><span class="token punctuation">,</span>            s<span class="token punctuation">.</span>sliderLastPos <span class="token operator">=</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token string">"x"</span> <span class="token operator">==</span> c <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> s<span class="token punctuation">.</span>sliderStartPos<span class="token punctuation">.</span>top <span class="token operator">+</span> s<span class="token punctuation">.</span>distanceY<span class="token punctuation">,</span>                <span class="token literal-property property">left</span><span class="token operator">:</span> l            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            s<span class="token punctuation">.</span>requestId <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token function">i</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>requestId<span class="token punctuation">)</span><span class="token punctuation">,</span>            s<span class="token punctuation">.</span>requestId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            s<span class="token punctuation">.</span>requestId <span class="token operator">=</span> <span class="token function">o</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                s<span class="token punctuation">.</span>sliderLastPos <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>slides<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">var</span> o <span class="token operator">=</span> e<span class="token punctuation">.</span>pos <span class="token operator">-</span> s<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>currPos<span class="token punctuation">;</span>                    n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">setTranslate</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>$slide<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>                        <span class="token literal-property property">top</span><span class="token operator">:</span> s<span class="token punctuation">.</span>sliderLastPos<span class="token punctuation">.</span>top<span class="token punctuation">,</span>                        <span class="token literal-property property">left</span><span class="token operator">:</span> s<span class="token punctuation">.</span>sliderLastPos<span class="token punctuation">.</span>left <span class="token operator">+</span> o <span class="token operator">*</span> s<span class="token punctuation">.</span>canvasWidth <span class="token operator">+</span> o <span class="token operator">*</span> e<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>gutter                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                s<span class="token punctuation">.</span>$container<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-is-sliding"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>distance<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>canTap <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            r<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>vertical <span class="token operator">?</span> s<span class="token punctuation">.</span>isSwiping <span class="token operator">=</span> <span class="token string">"y"</span> <span class="token operator">:</span> r<span class="token punctuation">.</span>isDragging <span class="token operator">||</span> <span class="token operator">!</span><span class="token number">1</span> <span class="token operator">===</span> s<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>vertical <span class="token operator">||</span> <span class="token string">"auto"</span> <span class="token operator">===</span> s<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>vertical <span class="token operator">&amp;&amp;</span> <span class="token function">n</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">800</span> <span class="token operator">?</span> s<span class="token punctuation">.</span>isSwiping <span class="token operator">=</span> <span class="token string">"x"</span> <span class="token operator">:</span> <span class="token punctuation">(</span>a <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token number">180</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">atan2</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>distanceY<span class="token punctuation">,</span> s<span class="token punctuation">.</span>distanceX<span class="token punctuation">)</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            s<span class="token punctuation">.</span>isSwiping <span class="token operator">=</span> a <span class="token operator">></span> <span class="token number">45</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">&lt;</span> <span class="token number">135</span> <span class="token operator">?</span> <span class="token string">"y"</span> <span class="token operator">:</span> <span class="token string">"x"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">"y"</span> <span class="token operator">===</span> s<span class="token punctuation">.</span>isSwiping <span class="token operator">&amp;&amp;</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span>isMobile <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>isScrollable<span class="token punctuation">)</span>                <span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>isScrolling <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            r<span class="token punctuation">.</span>isDragging <span class="token operator">=</span> s<span class="token punctuation">.</span>isSwiping<span class="token punctuation">,</span>            s<span class="token punctuation">.</span>startPoints <span class="token operator">=</span> s<span class="token punctuation">.</span>newPoints<span class="token punctuation">,</span>            n<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>slides<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> o<span class="token punctuation">,</span> i<span class="token punctuation">;</span>                n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>$slide<span class="token punctuation">)</span><span class="token punctuation">,</span>                o <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>$slide<span class="token punctuation">)</span><span class="token punctuation">,</span>                i <span class="token operator">=</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getTranslate</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>stage<span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                    <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>                    <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>                    <span class="token string-property property">"transition-duration"</span><span class="token operator">:</span> <span class="token string">""</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-animated"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^|\s)fancybox-fx-\S+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                e<span class="token punctuation">.</span>pos <span class="token operator">===</span> r<span class="token punctuation">.</span>current<span class="token punctuation">.</span>pos <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>sliderStartPos<span class="token punctuation">.</span>top <span class="token operator">=</span> o<span class="token punctuation">.</span>top <span class="token operator">-</span> i<span class="token punctuation">.</span>top<span class="token punctuation">,</span>                s<span class="token punctuation">.</span>sliderStartPos<span class="token punctuation">.</span>left <span class="token operator">=</span> o<span class="token punctuation">.</span>left <span class="token operator">-</span> i<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span>                n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">setTranslate</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>$slide<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>                    <span class="token literal-property property">top</span><span class="token operator">:</span> o<span class="token punctuation">.</span>top <span class="token operator">-</span> i<span class="token punctuation">.</span>top<span class="token punctuation">,</span>                    <span class="token literal-property property">left</span><span class="token operator">:</span> o<span class="token punctuation">.</span>left <span class="token operator">-</span> i<span class="token punctuation">.</span>left                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            r<span class="token punctuation">.</span>SlideShow <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">.</span>SlideShow<span class="token punctuation">.</span>isActive <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">.</span>SlideShow<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">,</span>    d<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">onPan</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">s</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>newPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span>realPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span>isMobile <span class="token operator">?</span> <span class="token number">10</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>startPoints <span class="token operator">=</span> t<span class="token punctuation">.</span>newPoints<span class="token punctuation">)</span><span class="token punctuation">;</span>        t<span class="token punctuation">.</span>canTap <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>        t<span class="token punctuation">.</span>contentLastPos <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">limitMovement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        t<span class="token punctuation">.</span>requestId <span class="token operator">&amp;&amp;</span> <span class="token function">i</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>requestId<span class="token punctuation">)</span><span class="token punctuation">,</span>        t<span class="token punctuation">.</span>requestId <span class="token operator">=</span> <span class="token function">o</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">setTranslate</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>$content<span class="token punctuation">,</span> t<span class="token punctuation">.</span>contentLastPos<span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">,</span>    d<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">limitMovement</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> n<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> a<span class="token punctuation">,</span> s <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> r <span class="token operator">=</span> s<span class="token punctuation">.</span>canvasWidth<span class="token punctuation">,</span> c <span class="token operator">=</span> s<span class="token punctuation">.</span>canvasHeight<span class="token punctuation">,</span> l <span class="token operator">=</span> s<span class="token punctuation">.</span>distanceX<span class="token punctuation">,</span> d <span class="token operator">=</span> s<span class="token punctuation">.</span>distanceY<span class="token punctuation">,</span> u <span class="token operator">=</span> s<span class="token punctuation">.</span>contentStartPos<span class="token punctuation">,</span> f <span class="token operator">=</span> u<span class="token punctuation">.</span>left<span class="token punctuation">,</span> p <span class="token operator">=</span> u<span class="token punctuation">.</span>top<span class="token punctuation">,</span> h <span class="token operator">=</span> u<span class="token punctuation">.</span>width<span class="token punctuation">,</span> g <span class="token operator">=</span> u<span class="token punctuation">.</span>height<span class="token punctuation">;</span>        <span class="token keyword">return</span> i <span class="token operator">=</span> h <span class="token operator">></span> r <span class="token operator">?</span> f <span class="token operator">+</span> l <span class="token operator">:</span> f<span class="token punctuation">,</span>        a <span class="token operator">=</span> p <span class="token operator">+</span> d<span class="token punctuation">,</span>        t <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">.5</span> <span class="token operator">*</span> r <span class="token operator">-</span> <span class="token number">.5</span> <span class="token operator">*</span> h<span class="token punctuation">)</span><span class="token punctuation">,</span>        e <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">.5</span> <span class="token operator">*</span> c <span class="token operator">-</span> <span class="token number">.5</span> <span class="token operator">*</span> g<span class="token punctuation">)</span><span class="token punctuation">,</span>        n <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>r <span class="token operator">-</span> h<span class="token punctuation">,</span> <span class="token number">.5</span> <span class="token operator">*</span> r <span class="token operator">-</span> <span class="token number">.5</span> <span class="token operator">*</span> h<span class="token punctuation">)</span><span class="token punctuation">,</span>        o <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>c <span class="token operator">-</span> g<span class="token punctuation">,</span> <span class="token number">.5</span> <span class="token operator">*</span> c <span class="token operator">-</span> <span class="token number">.5</span> <span class="token operator">*</span> g<span class="token punctuation">)</span><span class="token punctuation">,</span>        l <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">></span> t <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> t <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token operator">-</span>t <span class="token operator">+</span> f <span class="token operator">+</span> l<span class="token punctuation">,</span> <span class="token number">.8</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        l <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> n <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>n <span class="token operator">-</span> f <span class="token operator">-</span> l<span class="token punctuation">,</span> <span class="token number">.8</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        d <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">></span> e <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>a <span class="token operator">=</span> e <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token operator">-</span>e <span class="token operator">+</span> p <span class="token operator">+</span> d<span class="token punctuation">,</span> <span class="token number">.8</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        d <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">&lt;</span> o <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>a <span class="token operator">=</span> o <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>o <span class="token operator">-</span> p <span class="token operator">-</span> d<span class="token punctuation">,</span> <span class="token number">.8</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">&#123;</span>            <span class="token literal-property property">top</span><span class="token operator">:</span> a<span class="token punctuation">,</span>            <span class="token literal-property property">left</span><span class="token operator">:</span> i        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">,</span>    d<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">limitPosition</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> n<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token keyword">this</span>          <span class="token punctuation">,</span> a <span class="token operator">=</span> i<span class="token punctuation">.</span>canvasWidth          <span class="token punctuation">,</span> s <span class="token operator">=</span> i<span class="token punctuation">.</span>canvasHeight<span class="token punctuation">;</span>        <span class="token keyword">return</span> n <span class="token operator">></span> a <span class="token operator">?</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> t <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> t<span class="token punctuation">,</span>        t <span class="token operator">=</span> t <span class="token operator">&lt;</span> a <span class="token operator">-</span> n <span class="token operator">?</span> a <span class="token operator">-</span> n <span class="token operator">:</span> t<span class="token punctuation">)</span> <span class="token operator">:</span> t <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> a <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> n <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        o <span class="token operator">></span> s <span class="token operator">?</span> <span class="token punctuation">(</span>e <span class="token operator">=</span> e <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> e<span class="token punctuation">,</span>        e <span class="token operator">=</span> e <span class="token operator">&lt;</span> s <span class="token operator">-</span> o <span class="token operator">?</span> s <span class="token operator">-</span> o <span class="token operator">:</span> e<span class="token punctuation">)</span> <span class="token operator">:</span> e <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> s <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> o <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">&#123;</span>            <span class="token literal-property property">top</span><span class="token operator">:</span> e<span class="token punctuation">,</span>            <span class="token literal-property property">left</span><span class="token operator">:</span> t        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">,</span>    d<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">onZoom</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">this</span>          <span class="token punctuation">,</span> a <span class="token operator">=</span> e<span class="token punctuation">.</span>contentStartPos          <span class="token punctuation">,</span> r <span class="token operator">=</span> a<span class="token punctuation">.</span>width          <span class="token punctuation">,</span> c <span class="token operator">=</span> a<span class="token punctuation">.</span>height          <span class="token punctuation">,</span> l <span class="token operator">=</span> a<span class="token punctuation">.</span>left          <span class="token punctuation">,</span> d <span class="token operator">=</span> a<span class="token punctuation">.</span>top          <span class="token punctuation">,</span> u <span class="token operator">=</span> <span class="token function">s</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>newPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>newPoints<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>          <span class="token punctuation">,</span> f <span class="token operator">=</span> u <span class="token operator">/</span> e<span class="token punctuation">.</span>startDistanceBetweenFingers          <span class="token punctuation">,</span> p <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>r <span class="token operator">*</span> f<span class="token punctuation">)</span>          <span class="token punctuation">,</span> h <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>c <span class="token operator">*</span> f<span class="token punctuation">)</span>          <span class="token punctuation">,</span> g <span class="token operator">=</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> p<span class="token punctuation">)</span> <span class="token operator">*</span> e<span class="token punctuation">.</span>percentageOfImageAtPinchPointX          <span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token punctuation">(</span>c <span class="token operator">-</span> h<span class="token punctuation">)</span> <span class="token operator">*</span> e<span class="token punctuation">.</span>percentageOfImageAtPinchPointY          <span class="token punctuation">,</span> m <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>newPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+</span> e<span class="token punctuation">.</span>newPoints<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token function">n</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token punctuation">,</span> v <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>newPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">+</span> e<span class="token punctuation">.</span>newPoints<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token function">n</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token punctuation">,</span> y <span class="token operator">=</span> m <span class="token operator">-</span> e<span class="token punctuation">.</span>centerPointStartX          <span class="token punctuation">,</span> x <span class="token operator">=</span> v <span class="token operator">-</span> e<span class="token punctuation">.</span>centerPointStartY          <span class="token punctuation">,</span> w <span class="token operator">=</span> l <span class="token operator">+</span> <span class="token punctuation">(</span>g <span class="token operator">+</span> y<span class="token punctuation">)</span>          <span class="token punctuation">,</span> $ <span class="token operator">=</span> d <span class="token operator">+</span> <span class="token punctuation">(</span>b <span class="token operator">+</span> x<span class="token punctuation">)</span>          <span class="token punctuation">,</span> <span class="token constant">S</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">top</span><span class="token operator">:</span> $<span class="token punctuation">,</span>            <span class="token literal-property property">left</span><span class="token operator">:</span> w<span class="token punctuation">,</span>            <span class="token literal-property property">scaleX</span><span class="token operator">:</span> f<span class="token punctuation">,</span>            <span class="token literal-property property">scaleY</span><span class="token operator">:</span> f        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        e<span class="token punctuation">.</span>canTap <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>        e<span class="token punctuation">.</span>newWidth <span class="token operator">=</span> p<span class="token punctuation">,</span>        e<span class="token punctuation">.</span>newHeight <span class="token operator">=</span> h<span class="token punctuation">,</span>        e<span class="token punctuation">.</span>contentLastPos <span class="token operator">=</span> <span class="token constant">S</span><span class="token punctuation">,</span>        e<span class="token punctuation">.</span>requestId <span class="token operator">&amp;&amp;</span> <span class="token function">i</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>requestId<span class="token punctuation">)</span><span class="token punctuation">,</span>        e<span class="token punctuation">.</span>requestId <span class="token operator">=</span> <span class="token function">o</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">setTranslate</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>$content<span class="token punctuation">,</span> e<span class="token punctuation">.</span>contentLastPos<span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">,</span>    d<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">ontouchend</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">this</span>          <span class="token punctuation">,</span> s <span class="token operator">=</span> o<span class="token punctuation">.</span>isSwiping          <span class="token punctuation">,</span> r <span class="token operator">=</span> o<span class="token punctuation">.</span>isPanning          <span class="token punctuation">,</span> c <span class="token operator">=</span> o<span class="token punctuation">.</span>isZooming          <span class="token punctuation">,</span> l <span class="token operator">=</span> o<span class="token punctuation">.</span>isScrolling<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>endPoints <span class="token operator">=</span> <span class="token function">a</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span>        o<span class="token punctuation">.</span>dMs <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> o<span class="token punctuation">.</span>startTime<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        o<span class="token punctuation">.</span>$container<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-is-grabbing"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">".fb.touch"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        e<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"scroll"</span><span class="token punctuation">,</span> o<span class="token punctuation">.</span>onscroll<span class="token punctuation">,</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        o<span class="token punctuation">.</span>requestId <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token function">i</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>requestId<span class="token punctuation">)</span><span class="token punctuation">,</span>        o<span class="token punctuation">.</span>requestId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        o<span class="token punctuation">.</span>isSwiping <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>        o<span class="token punctuation">.</span>isPanning <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>        o<span class="token punctuation">.</span>isZooming <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>        o<span class="token punctuation">.</span>isScrolling <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>        o<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>isDragging <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>        o<span class="token punctuation">.</span>canTap<span class="token punctuation">)</span>            <span class="token keyword">return</span> o<span class="token punctuation">.</span><span class="token function">onTap</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>        o<span class="token punctuation">.</span>speed <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span>        o<span class="token punctuation">.</span>velocityX <span class="token operator">=</span> o<span class="token punctuation">.</span>distanceX <span class="token operator">/</span> o<span class="token punctuation">.</span>dMs <span class="token operator">*</span> <span class="token number">.5</span><span class="token punctuation">,</span>        o<span class="token punctuation">.</span>velocityY <span class="token operator">=</span> o<span class="token punctuation">.</span>distanceY <span class="token operator">/</span> o<span class="token punctuation">.</span>dMs <span class="token operator">*</span> <span class="token number">.5</span><span class="token punctuation">,</span>        r <span class="token operator">?</span> o<span class="token punctuation">.</span><span class="token function">endPanning</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> c <span class="token operator">?</span> o<span class="token punctuation">.</span><span class="token function">endZooming</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> o<span class="token punctuation">.</span><span class="token function">endSwiping</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> l<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">,</span>    d<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">endSwiping</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">this</span>          <span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span>          <span class="token punctuation">,</span> a <span class="token operator">=</span> o<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length          <span class="token punctuation">,</span> s <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>distanceX<span class="token punctuation">)</span>          <span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token string">"x"</span> <span class="token operator">==</span> t <span class="token operator">&amp;&amp;</span> a <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>dMs <span class="token operator">></span> <span class="token number">130</span> <span class="token operator">&amp;&amp;</span> s <span class="token operator">></span> <span class="token number">10</span> <span class="token operator">||</span> s <span class="token operator">></span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        o<span class="token punctuation">.</span>sliderLastPos <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>        <span class="token string">"y"</span> <span class="token operator">==</span> t <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>e <span class="token operator">&amp;&amp;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>distanceY<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">50</span> <span class="token operator">?</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>current<span class="token punctuation">.</span>$slide<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">top</span><span class="token operator">:</span> o<span class="token punctuation">.</span>sliderStartPos<span class="token punctuation">.</span>top <span class="token operator">+</span> o<span class="token punctuation">.</span>distanceY <span class="token operator">+</span> <span class="token number">150</span> <span class="token operator">*</span> o<span class="token punctuation">.</span>velocityY<span class="token punctuation">,</span>            <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        i <span class="token operator">=</span> o<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> r <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span>distanceX <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> i <span class="token operator">=</span> o<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">previous</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span> <span class="token operator">:</span> r <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span>distanceX <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> o<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token operator">!</span><span class="token number">1</span> <span class="token operator">!==</span> i <span class="token operator">||</span> <span class="token string">"x"</span> <span class="token operator">!=</span> t <span class="token operator">&amp;&amp;</span> <span class="token string">"y"</span> <span class="token operator">!=</span> t <span class="token operator">||</span> o<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">centerSlide</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        o<span class="token punctuation">.</span>$container<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-is-sliding"</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">,</span>    d<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">endPanning</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        i<span class="token punctuation">.</span>contentLastPos <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">1</span> <span class="token operator">===</span> i<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>momentum <span class="token operator">||</span> i<span class="token punctuation">.</span>dMs <span class="token operator">></span> <span class="token number">350</span> <span class="token operator">?</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> i<span class="token punctuation">.</span>contentLastPos<span class="token punctuation">.</span>left<span class="token punctuation">,</span>        e <span class="token operator">=</span> i<span class="token punctuation">.</span>contentLastPos<span class="token punctuation">.</span>top<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> i<span class="token punctuation">.</span>contentLastPos<span class="token punctuation">.</span>left <span class="token operator">+</span> <span class="token number">500</span> <span class="token operator">*</span> i<span class="token punctuation">.</span>velocityX<span class="token punctuation">,</span>        e <span class="token operator">=</span> i<span class="token punctuation">.</span>contentLastPos<span class="token punctuation">.</span>top <span class="token operator">+</span> <span class="token number">500</span> <span class="token operator">*</span> i<span class="token punctuation">.</span>velocityY<span class="token punctuation">)</span><span class="token punctuation">,</span>        o <span class="token operator">=</span> i<span class="token punctuation">.</span><span class="token function">limitPosition</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> i<span class="token punctuation">.</span>contentStartPos<span class="token punctuation">.</span>width<span class="token punctuation">,</span> i<span class="token punctuation">.</span>contentStartPos<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">,</span>        o<span class="token punctuation">.</span>width <span class="token operator">=</span> i<span class="token punctuation">.</span>contentStartPos<span class="token punctuation">.</span>width<span class="token punctuation">,</span>        o<span class="token punctuation">.</span>height <span class="token operator">=</span> i<span class="token punctuation">.</span>contentStartPos<span class="token punctuation">.</span>height<span class="token punctuation">,</span>        n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>$content<span class="token punctuation">,</span> o<span class="token punctuation">,</span> <span class="token number">366</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">,</span>    d<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">endZooming</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> a <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> s <span class="token operator">=</span> a<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>current<span class="token punctuation">,</span> r <span class="token operator">=</span> a<span class="token punctuation">.</span>newWidth<span class="token punctuation">,</span> c <span class="token operator">=</span> a<span class="token punctuation">.</span>newHeight<span class="token punctuation">;</span>        a<span class="token punctuation">.</span>contentLastPos <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> a<span class="token punctuation">.</span>contentLastPos<span class="token punctuation">.</span>left<span class="token punctuation">,</span>        e <span class="token operator">=</span> a<span class="token punctuation">.</span>contentLastPos<span class="token punctuation">.</span>top<span class="token punctuation">,</span>        i <span class="token operator">=</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">top</span><span class="token operator">:</span> e<span class="token punctuation">,</span>            <span class="token literal-property property">left</span><span class="token operator">:</span> t<span class="token punctuation">,</span>            <span class="token literal-property property">width</span><span class="token operator">:</span> r<span class="token punctuation">,</span>            <span class="token literal-property property">height</span><span class="token operator">:</span> c<span class="token punctuation">,</span>            <span class="token literal-property property">scaleX</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>            <span class="token literal-property property">scaleY</span><span class="token operator">:</span> <span class="token number">1</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">setTranslate</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>$content<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span>        r <span class="token operator">&lt;</span> a<span class="token punctuation">.</span>canvasWidth <span class="token operator">&amp;&amp;</span> c <span class="token operator">&lt;</span> a<span class="token punctuation">.</span>canvasHeight <span class="token operator">?</span> a<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">scaleToFit</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">)</span> <span class="token operator">:</span> r <span class="token operator">></span> s<span class="token punctuation">.</span>width <span class="token operator">||</span> c <span class="token operator">></span> s<span class="token punctuation">.</span>height <span class="token operator">?</span> a<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">scaleToActual</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>centerPointStartX<span class="token punctuation">,</span> a<span class="token punctuation">.</span>centerPointStartY<span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>o <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">limitPosition</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> r<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">,</span>        n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>$content<span class="token punctuation">,</span> o<span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">,</span>    d<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">onTap</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> o<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> s <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">,</span> r <span class="token operator">=</span> i<span class="token punctuation">.</span>instance<span class="token punctuation">,</span> c <span class="token operator">=</span> r<span class="token punctuation">.</span>current<span class="token punctuation">,</span> l <span class="token operator">=</span> e <span class="token operator">&amp;&amp;</span> <span class="token function">a</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">||</span> i<span class="token punctuation">.</span>startPoints<span class="token punctuation">,</span> d <span class="token operator">=</span> l<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?</span> l<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token function">n</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> i<span class="token punctuation">.</span>stagePos<span class="token punctuation">.</span>left <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> u <span class="token operator">=</span> l<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?</span> l<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token function">n</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> i<span class="token punctuation">.</span>stagePos<span class="token punctuation">.</span>top <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> o <span class="token operator">=</span> c<span class="token punctuation">.</span>opts<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o <span class="token operator">=</span> <span class="token function">o</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token punctuation">[</span>c<span class="token punctuation">,</span> e<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            o<span class="token punctuation">)</span>                <span class="token keyword">switch</span> <span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">case</span> <span class="token string">"close"</span><span class="token operator">:</span>                    r<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>startEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"toggleControls"</span><span class="token operator">:</span>                    r<span class="token punctuation">.</span><span class="token function">toggleControls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"next"</span><span class="token operator">:</span>                    r<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"nextOrClose"</span><span class="token operator">:</span>                    r<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">?</span> r<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> r<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>startEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"zoom"</span><span class="token operator">:</span>                    <span class="token string">"image"</span> <span class="token operator">==</span> c<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span>isLoaded <span class="token operator">||</span> c<span class="token punctuation">.</span>$ghost<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">canPan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> r<span class="token punctuation">.</span><span class="token function">scaleToFit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> r<span class="token punctuation">.</span><span class="token function">isScaledDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> r<span class="token punctuation">.</span><span class="token function">scaleToActual</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> u<span class="token punctuation">)</span> <span class="token operator">:</span> r<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>startEvent<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">.</span>originalEvent <span class="token operator">||</span> <span class="token number">2</span> <span class="token operator">!=</span> e<span class="token punctuation">.</span>originalEvent<span class="token punctuation">.</span>button<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token punctuation">(</span>d <span class="token operator">></span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientWidth <span class="token operator">+</span> s<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                o <span class="token operator">=</span> <span class="token string">"Outside"</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">".fancybox-slide"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                o <span class="token operator">=</span> <span class="token string">"Slide"</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>r<span class="token punctuation">.</span>current<span class="token punctuation">.</span>$content <span class="token operator">||</span> <span class="token operator">!</span>r<span class="token punctuation">.</span>current<span class="token punctuation">.</span>$content<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>                    <span class="token keyword">return</span><span class="token punctuation">;</span>                o <span class="token operator">=</span> <span class="token string">"Content"</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span>tapped<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">clearTimeout</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>tapped<span class="token punctuation">)</span><span class="token punctuation">,</span>                i<span class="token punctuation">.</span>tapped <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>                Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>d <span class="token operator">-</span> i<span class="token punctuation">.</span>tapX<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">50</span> <span class="token operator">||</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>u <span class="token operator">-</span> i<span class="token punctuation">.</span>tapY<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">50</span><span class="token punctuation">)</span>                    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>                <span class="token function">f</span><span class="token punctuation">(</span><span class="token string">"dblclick"</span> <span class="token operator">+</span> o<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span>                i<span class="token punctuation">.</span>tapX <span class="token operator">=</span> d<span class="token punctuation">,</span>                i<span class="token punctuation">.</span>tapY <span class="token operator">=</span> u<span class="token punctuation">,</span>                c<span class="token punctuation">.</span>opts<span class="token punctuation">[</span><span class="token string">"dblclick"</span> <span class="token operator">+</span> o<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span>opts<span class="token punctuation">[</span><span class="token string">"dblclick"</span> <span class="token operator">+</span> o<span class="token punctuation">]</span> <span class="token operator">!==</span> c<span class="token punctuation">.</span>opts<span class="token punctuation">[</span><span class="token string">"click"</span> <span class="token operator">+</span> o<span class="token punctuation">]</span> <span class="token operator">?</span> i<span class="token punctuation">.</span>tapped <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    i<span class="token punctuation">.</span>tapped <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>                    r<span class="token punctuation">.</span>isAnimating <span class="token operator">||</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token string">"click"</span> <span class="token operator">+</span> o<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token string">"click"</span> <span class="token operator">+</span> o<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">this</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">,</span>    <span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"onActivate.fb"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>e<span class="token punctuation">.</span>Guestures <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>Guestures <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">d</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"beforeClose.fb"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>Guestures <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>Guestures<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> document<span class="token punctuation">,</span> jQuery<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token string">"use strict"</span><span class="token punctuation">;</span>    e<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span>defaults<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">btnTpl</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">slideShow</span><span class="token operator">:</span> <span class="token string">'&lt;button data-fancybox-play class="fancybox-button fancybox-button--play" title="&#123;&#123;PLAY_START&#125;&#125;">&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">&lt;path d="M6.5 5.4v13.2l11-6.6z"/>&lt;/svg>&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">&lt;path d="M8.33 5.75h2.2v12.5h-2.2V5.75zm5.15 0h2.2v12.5h-2.2V5.75z"/>&lt;/svg>&lt;/button>'</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token literal-property property">slideShow</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">autoStart</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            <span class="token literal-property property">speed</span><span class="token operator">:</span> <span class="token number">3e3</span><span class="token punctuation">,</span>            <span class="token literal-property property">progress</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">0</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> <span class="token function-variable function">n</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>instance <span class="token operator">=</span> t<span class="token punctuation">,</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    e<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">timer</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>        <span class="token literal-property property">isActive</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>        <span class="token literal-property property">$button</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>        <span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">this</span>              <span class="token punctuation">,</span> n <span class="token operator">=</span> t<span class="token punctuation">.</span>instance              <span class="token punctuation">,</span> o <span class="token operator">=</span> n<span class="token punctuation">.</span>group<span class="token punctuation">[</span>n<span class="token punctuation">.</span>currIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>opts<span class="token punctuation">.</span>slideShow<span class="token punctuation">;</span>            t<span class="token punctuation">.</span>$button <span class="token operator">=</span> n<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>toolbar<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"[data-fancybox-play]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                t<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            n<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">||</span> <span class="token operator">!</span>o <span class="token operator">?</span> t<span class="token punctuation">.</span>$button<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> o<span class="token punctuation">.</span>progress <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>$progress <span class="token operator">=</span> <span class="token function">e</span><span class="token punctuation">(</span><span class="token string">'&lt;div class="fancybox-progress">&lt;/div>'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>inner<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token keyword">this</span>              <span class="token punctuation">,</span> o <span class="token operator">=</span> n<span class="token punctuation">.</span>instance              <span class="token punctuation">,</span> i <span class="token operator">=</span> o<span class="token punctuation">.</span>current<span class="token punctuation">;</span>            i <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span> <span class="token operator">===</span> t <span class="token operator">||</span> i<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>loop <span class="token operator">||</span> o<span class="token punctuation">.</span>currIndex <span class="token operator">&lt;</span> o<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">?</span> n<span class="token punctuation">.</span>isActive <span class="token operator">&amp;&amp;</span> <span class="token string">"video"</span> <span class="token operator">!==</span> i<span class="token punctuation">.</span>contentType <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span>$progress <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>$progress<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">scaleX</span><span class="token operator">:</span> <span class="token number">1</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> i<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>slideShow<span class="token punctuation">.</span>speed<span class="token punctuation">)</span><span class="token punctuation">,</span>            n<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                o<span class="token punctuation">.</span>current<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>loop <span class="token operator">||</span> o<span class="token punctuation">.</span>current<span class="token punctuation">.</span>index <span class="token operator">!=</span> o<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">?</span> o<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> o<span class="token punctuation">.</span><span class="token function">jumpTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> i<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>slideShow<span class="token punctuation">.</span>speed<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            o<span class="token punctuation">.</span>idleSecondsCounter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>            o<span class="token punctuation">.</span><span class="token function">showControls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token function-variable function">clear</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">,</span>            t<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>            t<span class="token punctuation">.</span>$progress <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>$progress<span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">"style"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token function-variable function">start</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">this</span>              <span class="token punctuation">,</span> e <span class="token operator">=</span> t<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>current<span class="token punctuation">;</span>            e <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>$button<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>i18n<span class="token punctuation">[</span>e<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>lang<span class="token punctuation">]</span> <span class="token operator">||</span> e<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>i18n<span class="token punctuation">.</span>en<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token constant">PLAY_STOP</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-button--play"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-button--pause"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            t<span class="token punctuation">.</span>isActive <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>            e<span class="token punctuation">.</span>isComplete <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            t<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"onSlideShowChange"</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token function-variable function">stop</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">this</span>              <span class="token punctuation">,</span> e <span class="token operator">=</span> t<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>current<span class="token punctuation">;</span>            t<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            t<span class="token punctuation">.</span>$button<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>i18n<span class="token punctuation">[</span>e<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>lang<span class="token punctuation">]</span> <span class="token operator">||</span> e<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>i18n<span class="token punctuation">.</span>en<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token constant">PLAY_START</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-button--pause"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-button--play"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            t<span class="token punctuation">.</span>isActive <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            t<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"onSlideShowChange"</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            t<span class="token punctuation">.</span>$progress <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>$progress<span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">"style"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token function-variable function">toggle</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>            t<span class="token punctuation">.</span>isActive <span class="token operator">?</span> t<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">e</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token string-property property">"onInit.fb"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>e<span class="token punctuation">.</span>SlideShow <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>SlideShow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">n</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token string-property property">"beforeShow.fb"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> n<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> i <span class="token operator">=</span> e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>SlideShow<span class="token punctuation">;</span>            o <span class="token operator">?</span> i <span class="token operator">&amp;&amp;</span> n<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>slideShow<span class="token punctuation">.</span>autoStart <span class="token operator">&amp;&amp;</span> i<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> i <span class="token operator">&amp;&amp;</span> i<span class="token punctuation">.</span>isActive <span class="token operator">&amp;&amp;</span> i<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token string-property property">"afterShow.fb"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> o <span class="token operator">=</span> e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>SlideShow<span class="token punctuation">;</span>            o <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span>isActive <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token string-property property">"afterKeydown.fb"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> a<span class="token punctuation">,</span> s</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> r <span class="token operator">=</span> o <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span>SlideShow<span class="token punctuation">;</span>            <span class="token operator">!</span>r <span class="token operator">||</span> <span class="token operator">!</span>i<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>slideShow <span class="token operator">||</span> <span class="token number">80</span> <span class="token operator">!==</span> s <span class="token operator">&amp;&amp;</span> <span class="token number">32</span> <span class="token operator">!==</span> s <span class="token operator">||</span> <span class="token function">e</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>activeElement<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">"button,a,input"</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            r<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token string-property property">"beforeClose.fb onDeactivate.fb"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> n <span class="token operator">=</span> e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>SlideShow<span class="token punctuation">;</span>            n <span class="token operator">&amp;&amp;</span> n<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">e</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"visibilitychange"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> n <span class="token operator">=</span> e<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token punctuation">,</span> o <span class="token operator">=</span> n <span class="token operator">&amp;&amp;</span> n<span class="token punctuation">.</span>SlideShow<span class="token punctuation">;</span>        o <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span>isActive <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>hidden <span class="token operator">?</span> o<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> o<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> jQuery<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token string">"use strict"</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> <span class="token function-variable function">n</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"requestFullscreen"</span><span class="token punctuation">,</span> <span class="token string">"exitFullscreen"</span><span class="token punctuation">,</span> <span class="token string">"fullscreenElement"</span><span class="token punctuation">,</span> <span class="token string">"fullscreenEnabled"</span><span class="token punctuation">,</span> <span class="token string">"fullscreenchange"</span><span class="token punctuation">,</span> <span class="token string">"fullscreenerror"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"webkitRequestFullscreen"</span><span class="token punctuation">,</span> <span class="token string">"webkitExitFullscreen"</span><span class="token punctuation">,</span> <span class="token string">"webkitFullscreenElement"</span><span class="token punctuation">,</span> <span class="token string">"webkitFullscreenEnabled"</span><span class="token punctuation">,</span> <span class="token string">"webkitfullscreenchange"</span><span class="token punctuation">,</span> <span class="token string">"webkitfullscreenerror"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"webkitRequestFullScreen"</span><span class="token punctuation">,</span> <span class="token string">"webkitCancelFullScreen"</span><span class="token punctuation">,</span> <span class="token string">"webkitCurrentFullScreenElement"</span><span class="token punctuation">,</span> <span class="token string">"webkitCancelFullScreen"</span><span class="token punctuation">,</span> <span class="token string">"webkitfullscreenchange"</span><span class="token punctuation">,</span> <span class="token string">"webkitfullscreenerror"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"mozRequestFullScreen"</span><span class="token punctuation">,</span> <span class="token string">"mozCancelFullScreen"</span><span class="token punctuation">,</span> <span class="token string">"mozFullScreenElement"</span><span class="token punctuation">,</span> <span class="token string">"mozFullScreenEnabled"</span><span class="token punctuation">,</span> <span class="token string">"mozfullscreenchange"</span><span class="token punctuation">,</span> <span class="token string">"mozfullscreenerror"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"msRequestFullscreen"</span><span class="token punctuation">,</span> <span class="token string">"msExitFullscreen"</span><span class="token punctuation">,</span> <span class="token string">"msFullscreenElement"</span><span class="token punctuation">,</span> <span class="token string">"msFullscreenEnabled"</span><span class="token punctuation">,</span> <span class="token string">"MSFullscreenChange"</span><span class="token punctuation">,</span> <span class="token string">"MSFullscreenError"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> o <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> o <span class="token operator">&lt;</span> e<span class="token punctuation">.</span>length<span class="token punctuation">;</span> o<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> i <span class="token operator">=</span> e<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&amp;&amp;</span> i<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">in</span> t<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> a <span class="token operator">&lt;</span> i<span class="token punctuation">.</span>length<span class="token punctuation">;</span> a<span class="token operator">++</span><span class="token punctuation">)</span>                    n<span class="token punctuation">[</span>e<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> n            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token number">1</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span>            <span class="token function-variable function">request</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e <span class="token operator">=</span> e <span class="token operator">||</span> t<span class="token punctuation">.</span>documentElement<span class="token punctuation">,</span>                e<span class="token punctuation">[</span>n<span class="token punctuation">.</span>requestFullscreen<span class="token punctuation">]</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token constant">ALLOW_KEYBOARD_INPUT</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">exit</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                t<span class="token punctuation">[</span>n<span class="token punctuation">.</span>exitFullscreen<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">toggle</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e <span class="token operator">=</span> e <span class="token operator">||</span> t<span class="token punctuation">.</span>documentElement<span class="token punctuation">,</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isFullscreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">isFullscreen</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token function">Boolean</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>n<span class="token punctuation">.</span>fullscreenElement<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">enabled</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token function">Boolean</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>n<span class="token punctuation">.</span>fullscreenEnabled<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        e<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span>defaults<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">btnTpl</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">fullScreen</span><span class="token operator">:</span> <span class="token string">'&lt;button data-fancybox-fullscreen class="fancybox-button fancybox-button--fsenter" title="&#123;&#123;FULL_SCREEN&#125;&#125;">&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">&lt;path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>&lt;/svg>&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">&lt;path d="M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"/>&lt;/svg>&lt;/button>'</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">fullScreen</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">autoStart</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token function">e</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>fullscreenchange<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> t <span class="token operator">=</span> o<span class="token punctuation">.</span><span class="token function">isFullscreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token punctuation">,</span> n <span class="token operator">=</span> e<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            n <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span>current <span class="token operator">&amp;&amp;</span> <span class="token string">"image"</span> <span class="token operator">===</span> n<span class="token punctuation">.</span>current<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> n<span class="token punctuation">.</span>isAnimating <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span>isAnimating <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            n<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            n<span class="token punctuation">.</span>isComplete <span class="token operator">||</span> n<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            n<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"onFullscreenChange"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">,</span>            n<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">toggleClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-is-fullscreen"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">,</span>            n<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>toolbar<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"[data-fancybox-fullscreen]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggleClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-button--fsenter"</span><span class="token punctuation">,</span> <span class="token operator">!</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggleClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-button--fsexit"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token function">e</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token string-property property">"onInit.fb"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> i<span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>n<span class="token punctuation">)</span>                <span class="token keyword">return</span> <span class="token keyword">void</span> e<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>toolbar<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"[data-fancybox-fullscreen]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>group<span class="token punctuation">[</span>e<span class="token punctuation">.</span>currIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>opts<span class="token punctuation">.</span>fullScreen <span class="token operator">?</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> e<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">,</span>            i<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"click.fb-fullscreen"</span><span class="token punctuation">,</span> <span class="token string">"[data-fancybox-fullscreen]"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                t<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                o<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            e<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>fullScreen <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token number">0</span> <span class="token operator">===</span> e<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>fullScreen<span class="token punctuation">.</span>autoStart <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            e<span class="token punctuation">.</span>FullScreen <span class="token operator">=</span> o<span class="token punctuation">)</span> <span class="token operator">:</span> e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>toolbar<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"[data-fancybox-fullscreen]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token string-property property">"afterKeydown.fb"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> n<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>FullScreen <span class="token operator">&amp;&amp;</span> <span class="token number">70</span> <span class="token operator">===</span> i <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            e<span class="token punctuation">.</span>FullScreen<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token string-property property">"beforeClose.fb"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>FullScreen <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-is-fullscreen"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> jQuery<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token string">"use strict"</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token string">"fancybox-thumbs"</span><span class="token punctuation">;</span>    e<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span>defaults <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">btnTpl</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">thumbs</span><span class="token operator">:</span> <span class="token string">'&lt;button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="&#123;&#123;THUMBS&#125;&#125;">&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">&lt;path d="M14.59 14.59h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76H5.65V5.65z"/>&lt;/svg>&lt;/button>'</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token literal-property property">thumbs</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">autoStart</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            <span class="token literal-property property">hideOnClose</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>            <span class="token literal-property property">parentEl</span><span class="token operator">:</span> <span class="token string">".fancybox-container"</span><span class="token punctuation">,</span>            <span class="token literal-property property">axis</span><span class="token operator">:</span> <span class="token string">"y"</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span>defaults<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> <span class="token function-variable function">o</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    e<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">$button</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>        <span class="token literal-property property">$grid</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>        <span class="token literal-property property">$list</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>        <span class="token literal-property property">isVisible</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>        <span class="token literal-property property">isActive</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>        <span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">this</span>              <span class="token punctuation">,</span> n <span class="token operator">=</span> t<span class="token punctuation">.</span>group              <span class="token punctuation">,</span> o <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            e<span class="token punctuation">.</span>instance <span class="token operator">=</span> t<span class="token punctuation">,</span>            e<span class="token punctuation">.</span>opts <span class="token operator">=</span> n<span class="token punctuation">[</span>t<span class="token punctuation">.</span>currIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>opts<span class="token punctuation">.</span>thumbs<span class="token punctuation">,</span>            t<span class="token punctuation">.</span>Thumbs <span class="token operator">=</span> e<span class="token punctuation">,</span>            e<span class="token punctuation">.</span>$button <span class="token operator">=</span> t<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>toolbar<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"[data-fancybox-thumbs]"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> a <span class="token operator">=</span> n<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> a <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>n<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>thumb <span class="token operator">&amp;&amp;</span> o<span class="token operator">++</span><span class="token punctuation">,</span>            <span class="token operator">!</span><span class="token punctuation">(</span>o <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>                <span class="token punctuation">;</span>            o <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>opts <span class="token operator">?</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>$button<span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">"style"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            e<span class="token punctuation">.</span>isActive <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> e<span class="token punctuation">.</span>$button<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token function-variable function">create</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> t<span class="token punctuation">,</span> o <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> i <span class="token operator">=</span> o<span class="token punctuation">.</span>instance<span class="token punctuation">,</span> a <span class="token operator">=</span> o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>parentEl<span class="token punctuation">,</span> s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            o<span class="token punctuation">.</span>$grid <span class="token operator">||</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>$grid <span class="token operator">=</span> <span class="token function">e</span><span class="token punctuation">(</span><span class="token string">'&lt;div class="'</span> <span class="token operator">+</span> n <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> n <span class="token operator">+</span> <span class="token string">"-"</span> <span class="token operator">+</span> o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>axis <span class="token operator">+</span> <span class="token string">'">&lt;/div>'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            o<span class="token punctuation">.</span>$grid<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                i<span class="token punctuation">.</span><span class="token function">jumpTo</span><span class="token punctuation">(</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"data-index"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            o<span class="token punctuation">.</span>$list <span class="token operator">||</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>$list <span class="token operator">=</span> <span class="token function">e</span><span class="token punctuation">(</span><span class="token string">'&lt;div class="'</span> <span class="token operator">+</span> n <span class="token operator">+</span> <span class="token string">'__list">'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>$grid<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            e<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>group<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                t <span class="token operator">=</span> n<span class="token punctuation">.</span>thumb<span class="token punctuation">,</span>                t <span class="token operator">||</span> <span class="token string">"image"</span> <span class="token operator">!==</span> n<span class="token punctuation">.</span>type <span class="token operator">||</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> n<span class="token punctuation">.</span>src<span class="token punctuation">)</span><span class="token punctuation">,</span>                s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'&lt;a href="javascript:;" tabindex="0" data-index="'</span> <span class="token operator">+</span> e <span class="token operator">+</span> <span class="token string">'"'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>t <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token string">' style="background-image:url('</span> <span class="token operator">+</span> t <span class="token operator">+</span> <span class="token string">')"'</span> <span class="token operator">:</span> <span class="token string">'class="fancybox-thumbs-missing"'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">">&lt;/a>"</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            o<span class="token punctuation">.</span>$list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">"x"</span> <span class="token operator">===</span> o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>axis <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span>$list<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>$grid<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"padding-right"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> i<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">*</span> o<span class="token punctuation">.</span>$list<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">outerWidth</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token function-variable function">focus</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> e<span class="token punctuation">,</span> n<span class="token punctuation">,</span> o <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> i <span class="token operator">=</span> o<span class="token punctuation">.</span>$list<span class="token punctuation">,</span> a <span class="token operator">=</span> o<span class="token punctuation">.</span>$grid<span class="token punctuation">;</span>            o<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>current <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e <span class="token operator">=</span> i<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-thumbs-active"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">'[data-index="'</span> <span class="token operator">+</span> o<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>current<span class="token punctuation">.</span>index <span class="token operator">+</span> <span class="token string">'"]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-thumbs-active"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            n <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">"y"</span> <span class="token operator">===</span> o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>axis <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span>top <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> n<span class="token punctuation">.</span>top <span class="token operator">></span> i<span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> e<span class="token punctuation">.</span><span class="token function">outerHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> i<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                <span class="token literal-property property">scrollTop</span><span class="token operator">:</span> i<span class="token punctuation">.</span><span class="token function">scrollTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> n<span class="token punctuation">.</span>top            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">"x"</span> <span class="token operator">===</span> o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>axis <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span>left <span class="token operator">&lt;</span> a<span class="token punctuation">.</span><span class="token function">scrollLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> n<span class="token punctuation">.</span>left <span class="token operator">></span> a<span class="token punctuation">.</span><span class="token function">scrollLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> e<span class="token punctuation">.</span><span class="token function">outerWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> i<span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                <span class="token literal-property property">scrollLeft</span><span class="token operator">:</span> n<span class="token punctuation">.</span>left            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>            t<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">toggleClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-show-thumbs"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isVisible<span class="token punctuation">)</span><span class="token punctuation">,</span>            t<span class="token punctuation">.</span>isVisible <span class="token operator">?</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>$grid <span class="token operator">||</span> t<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            t<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"onThumbsShow"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            t<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> t<span class="token punctuation">.</span>$grid <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"onThumbsHide"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            t<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token function-variable function">hide</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>isVisible <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token function-variable function">show</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>isVisible <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token function-variable function">toggle</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>isVisible <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isVisible<span class="token punctuation">,</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">e</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token string-property property">"onInit.fb"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> n<span class="token punctuation">;</span>            e <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>e<span class="token punctuation">.</span>Thumbs <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">o</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>            n<span class="token punctuation">.</span>isActive <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token number">0</span> <span class="token operator">===</span> n<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>autoStart <span class="token operator">&amp;&amp;</span> n<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token string-property property">"beforeShow.fb"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> n<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> i <span class="token operator">=</span> e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>Thumbs<span class="token punctuation">;</span>            i <span class="token operator">&amp;&amp;</span> i<span class="token punctuation">.</span>isVisible <span class="token operator">&amp;&amp;</span> i<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span>o <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">250</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token string-property property">"afterKeydown.fb"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> n<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> a <span class="token operator">=</span> e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>Thumbs<span class="token punctuation">;</span>            a <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span>isActive <span class="token operator">&amp;&amp;</span> <span class="token number">71</span> <span class="token operator">===</span> i <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            a<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token string-property property">"beforeClose.fb"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> n <span class="token operator">=</span> e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>Thumbs<span class="token punctuation">;</span>            n <span class="token operator">&amp;&amp;</span> n<span class="token punctuation">.</span>isVisible <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token number">1</span> <span class="token operator">!==</span> n<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>hideOnClose <span class="token operator">&amp;&amp;</span> n<span class="token punctuation">.</span>$grid<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> jQuery<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token string">"use strict"</span><span class="token punctuation">;</span>    <span class="token keyword">function</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token punctuation">&#123;</span>            <span class="token string-property property">"&amp;"</span><span class="token operator">:</span> <span class="token string">"&amp;amp;"</span><span class="token punctuation">,</span>            <span class="token string-property property">"&lt;"</span><span class="token operator">:</span> <span class="token string">"&amp;lt;"</span><span class="token punctuation">,</span>            <span class="token string-property property">">"</span><span class="token operator">:</span> <span class="token string">"&amp;gt;"</span><span class="token punctuation">,</span>            <span class="token string-property property">'"'</span><span class="token operator">:</span> <span class="token string">"&amp;quot;"</span><span class="token punctuation">,</span>            <span class="token string-property property">"'"</span><span class="token operator">:</span> <span class="token string">"&amp;#39;"</span><span class="token punctuation">,</span>            <span class="token string-property property">"/"</span><span class="token operator">:</span> <span class="token string">"&amp;#x2F;"</span><span class="token punctuation">,</span>            <span class="token string-property property">"`"</span><span class="token operator">:</span> <span class="token string">"&amp;#x60;"</span><span class="token punctuation">,</span>            <span class="token string-property property">"="</span><span class="token operator">:</span> <span class="token string">"&amp;#x3D;"</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[&amp;&lt;>"'`=\/]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> e<span class="token punctuation">[</span>t<span class="token punctuation">]</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    e<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span>defaults<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">btnTpl</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">share</span><span class="token operator">:</span> <span class="token string">'&lt;button data-fancybox-share class="fancybox-button fancybox-button--share" title="&#123;&#123;SHARE&#125;&#125;">&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">&lt;path d="M2.55 19c1.4-8.4 9.1-9.8 11.9-9.8V5l7 7-7 6.3v-3.5c-2.8 0-10.5 2.1-11.9 4.2z"/>&lt;/svg>&lt;/button>'</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token literal-property property">share</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token function-variable function">url</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token operator">!</span>t<span class="token punctuation">.</span>currentHash <span class="token operator">&amp;&amp;</span> <span class="token string">"inline"</span> <span class="token operator">!==</span> e<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> <span class="token string">"html"</span> <span class="token operator">!==</span> e<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>origSrc <span class="token operator">||</span> e<span class="token punctuation">.</span>src<span class="token punctuation">)</span> <span class="token operator">||</span> window<span class="token punctuation">.</span>location            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">tpl</span><span class="token operator">:</span> <span class="token string">'&lt;div class="fancybox-share">&lt;h1>&#123;&#123;SHARE&#125;&#125;&lt;/h1>&lt;p>&lt;a class="fancybox-share__button fancybox-share__button--fb" href="https://www.facebook.com/sharer/sharer.php?u=&#123;&#123;url&#125;&#125;">&lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">&lt;path d="m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196" />&lt;/svg>&lt;span>Facebook&lt;/span>&lt;/a>&lt;a class="fancybox-share__button fancybox-share__button--tw" href="https://twitter.com/intent/tweet?url=&#123;&#123;url&#125;&#125;&amp;text=&#123;&#123;descr&#125;&#125;">&lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">&lt;path d="m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z" />&lt;/svg>&lt;span>Twitter&lt;/span>&lt;/a>&lt;a class="fancybox-share__button fancybox-share__button--pt" href="https://www.pinterest.com/pin/create/button/?url=&#123;&#123;url&#125;&#125;&amp;description=&#123;&#123;descr&#125;&#125;&amp;media=&#123;&#123;media&#125;&#125;">&lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">&lt;path d="m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z" fill="#fff"/>&lt;/svg>&lt;span>Pinterest&lt;/span>&lt;/a>&lt;/p>&lt;p>&lt;input class="fancybox-share__input" type="text" value="&#123;&#123;url_raw&#125;&#125;" onclick="select()" />&lt;/p>&lt;/div>'</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">e</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token string">"[data-fancybox-share]"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> t<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i <span class="token operator">=</span> e<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a <span class="token operator">=</span> i<span class="token punctuation">.</span>current <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        a <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token string">"function"</span> <span class="token operator">===</span> e<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>share<span class="token punctuation">.</span>url<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> a<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>share<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token punctuation">[</span>i<span class="token punctuation">,</span> a<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        o <span class="token operator">=</span> a<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>share<span class="token punctuation">.</span>tpl<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\&#123;\&#123;media\&#125;\&#125;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">"image"</span> <span class="token operator">===</span> a<span class="token punctuation">.</span>type <span class="token operator">?</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>src<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\&#123;\&#123;url\&#125;\&#125;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\&#123;\&#123;url_raw\&#125;\&#125;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token function">n</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\&#123;\&#123;descr\&#125;\&#125;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> i<span class="token punctuation">.</span>$caption <span class="token operator">?</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>$caption<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        e<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            <span class="token literal-property property">src</span><span class="token operator">:</span> i<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> o<span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"html"</span><span class="token punctuation">,</span>            <span class="token literal-property property">opts</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">touch</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                <span class="token literal-property property">animationEffect</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>                <span class="token function-variable function">afterLoad</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    i<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">one</span><span class="token punctuation">(</span><span class="token string">"beforeClose.fb"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        t<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    e<span class="token punctuation">.</span>$content<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">".fancybox-share__button"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token keyword">return</span> window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>href<span class="token punctuation">,</span> <span class="token string">"Share"</span><span class="token punctuation">,</span> <span class="token string">"width=550, height=450"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                        <span class="token operator">!</span><span class="token number">1</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token literal-property property">autoFocus</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> jQuery<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token string">"use strict"</span><span class="token punctuation">;</span>    <span class="token keyword">function</span> <span class="token function">o</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> e <span class="token operator">=</span> t<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>          <span class="token punctuation">,</span> n <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span>          <span class="token punctuation">,</span> o <span class="token operator">=</span> n<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\+?\d+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>n<span class="token punctuation">[</span>n<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span>          <span class="token punctuation">,</span> i <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">hash</span><span class="token operator">:</span> e<span class="token punctuation">,</span>            <span class="token literal-property property">index</span><span class="token operator">:</span> o <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> o<span class="token punctuation">,</span>            <span class="token literal-property property">gallery</span><span class="token operator">:</span> i        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">i</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token string">""</span> <span class="token operator">!==</span> t<span class="token punctuation">.</span>gallery <span class="token operator">&amp;&amp;</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token string">"[data-fancybox='"</span> <span class="token operator">+</span> n<span class="token punctuation">.</span><span class="token function">escapeSelector</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>gallery<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"']"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"click.fb-start"</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> e<span class="token punctuation">,</span> n<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span>t <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e <span class="token operator">=</span> t<span class="token punctuation">.</span>current <span class="token operator">?</span> t<span class="token punctuation">.</span>current<span class="token punctuation">.</span>opts <span class="token operator">:</span> t<span class="token punctuation">.</span>opts<span class="token punctuation">,</span>        <span class="token string">""</span> <span class="token operator">!==</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> e<span class="token punctuation">.</span>hash <span class="token operator">||</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>$orig <span class="token operator">?</span> e<span class="token punctuation">.</span>$orig<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">"fancybox"</span><span class="token punctuation">)</span> <span class="token operator">||</span> e<span class="token punctuation">.</span>$orig<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">"fancybox-trigger"</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> n<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    n<span class="token punctuation">.</span>escapeSelector <span class="token operator">||</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span><span class="token function-variable function">escapeSelector</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>t <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> e <span class="token operator">?</span> <span class="token string">"\0"</span> <span class="token operator">===</span> t <span class="token operator">?</span> <span class="token string">"�"</span> <span class="token operator">:</span> t<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\\"</span> <span class="token operator">+</span> t<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">:</span> <span class="token string">"\\"</span> <span class="token operator">+</span> t        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">n</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token operator">!</span><span class="token number">1</span> <span class="token operator">!==</span> n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>hash <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token function">n</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            <span class="token string-property property">"onInit.fb"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> n<span class="token punctuation">,</span> i<span class="token punctuation">;</span>                <span class="token operator">!</span><span class="token number">1</span> <span class="token operator">!==</span> e<span class="token punctuation">.</span>group<span class="token punctuation">[</span>e<span class="token punctuation">.</span>currIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>opts<span class="token punctuation">.</span>hash <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> <span class="token function">o</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token function">a</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> n<span class="token punctuation">.</span>gallery <span class="token operator">&amp;&amp;</span> i <span class="token operator">==</span> n<span class="token punctuation">.</span>gallery <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>currIndex <span class="token operator">=</span> n<span class="token punctuation">.</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token string-property property">"beforeShow.fb"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> s</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> r<span class="token punctuation">;</span>                i <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token number">1</span> <span class="token operator">!==</span> i<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>hash <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token function">a</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>currentHash <span class="token operator">=</span> r <span class="token operator">+</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">"-"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash <span class="token operator">!==</span> <span class="token string">"#"</span> <span class="token operator">+</span> o<span class="token punctuation">.</span>currentHash <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>s <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>o<span class="token punctuation">.</span>origHash <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>origHash <span class="token operator">=</span> t<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash<span class="token punctuation">)</span><span class="token punctuation">,</span>                o<span class="token punctuation">.</span>hashTimer <span class="token operator">&amp;&amp;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>hashTimer<span class="token punctuation">)</span><span class="token punctuation">,</span>                o<span class="token punctuation">.</span>hashTimer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token string">"replaceState"</span><span class="token keyword">in</span> t<span class="token punctuation">.</span>history <span class="token operator">?</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>history<span class="token punctuation">[</span>s <span class="token operator">?</span> <span class="token string">"pushState"</span> <span class="token operator">:</span> <span class="token string">"replaceState"</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>title<span class="token punctuation">,</span> t<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname <span class="token operator">+</span> t<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search <span class="token operator">+</span> <span class="token string">"#"</span> <span class="token operator">+</span> o<span class="token punctuation">.</span>currentHash<span class="token punctuation">)</span><span class="token punctuation">,</span>                    s <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>hasCreatedHistory <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> t<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash <span class="token operator">=</span> o<span class="token punctuation">.</span>currentHash<span class="token punctuation">,</span>                    o<span class="token punctuation">.</span>hashTimer <span class="token operator">=</span> <span class="token keyword">null</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token string-property property">"beforeClose.fb"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                i <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token number">1</span> <span class="token operator">!==</span> i<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>hash <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token function">clearTimeout</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>hashTimer<span class="token punctuation">)</span><span class="token punctuation">,</span>                o<span class="token punctuation">.</span>currentHash <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span>hasCreatedHistory <span class="token operator">?</span> t<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> o<span class="token punctuation">.</span>currentHash <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token string">"replaceState"</span><span class="token keyword">in</span> t<span class="token punctuation">.</span>history <span class="token operator">?</span> t<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">replaceState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>title<span class="token punctuation">,</span> t<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname <span class="token operator">+</span> t<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search <span class="token operator">+</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span>origHash <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> t<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash <span class="token operator">=</span> o<span class="token punctuation">.</span>origHash<span class="token punctuation">)</span><span class="token punctuation">,</span>                o<span class="token punctuation">.</span>currentHash <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token function">n</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"hashchange.fb"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">o</span><span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token punctuation">,</span> e <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            n<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token function">n</span><span class="token punctuation">(</span><span class="token string">".fancybox-container"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token string">"FancyBox"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&amp;&amp;</span> i<span class="token punctuation">.</span>currentHash<span class="token punctuation">)</span>                    <span class="token keyword">return</span> e <span class="token operator">=</span> i<span class="token punctuation">,</span>                    <span class="token operator">!</span><span class="token number">1</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            e <span class="token operator">?</span> e<span class="token punctuation">.</span>currentHash <span class="token operator">===</span> t<span class="token punctuation">.</span>gallery <span class="token operator">+</span> <span class="token string">"-"</span> <span class="token operator">+</span> t<span class="token punctuation">.</span>index <span class="token operator">||</span> <span class="token number">1</span> <span class="token operator">===</span> t<span class="token punctuation">.</span>index <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>currentHash <span class="token operator">==</span> t<span class="token punctuation">.</span>gallery <span class="token operator">||</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>currentHash <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>            e<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">""</span> <span class="token operator">!==</span> t<span class="token punctuation">.</span>gallery <span class="token operator">&amp;&amp;</span> <span class="token function">i</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            n<span class="token punctuation">.</span>fancybox<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">i</span><span class="token punctuation">(</span><span class="token function">o</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> document<span class="token punctuation">,</span> jQuery<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token string">"use strict"</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">e</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token string-property property">"onInit.fb"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> e<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"mousewheel DOMMouseScroll wheel MozMousePixelScroll"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> o <span class="token operator">=</span> e<span class="token punctuation">.</span>current                  <span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                e<span class="token punctuation">.</span>group<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token number">1</span> <span class="token operator">===</span> o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>wheel <span class="token operator">||</span> <span class="token string">"auto"</span> <span class="token operator">===</span> o<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>wheel <span class="token operator">&amp;&amp;</span> <span class="token string">"image"</span> <span class="token operator">!==</span> o<span class="token punctuation">.</span>type <span class="token operator">||</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                t<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                o<span class="token punctuation">.</span>$slide<span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span><span class="token string">"fancybox-animated"</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> t<span class="token punctuation">.</span>originalEvent <span class="token operator">||</span> t<span class="token punctuation">,</span>                i <span class="token operator">-</span> n <span class="token operator">&lt;</span> <span class="token number">250</span> <span class="token operator">||</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> i<span class="token punctuation">,</span>                e<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">-</span>t<span class="token punctuation">.</span>deltaY <span class="token operator">||</span> <span class="token operator">-</span>t<span class="token punctuation">.</span>deltaX <span class="token operator">||</span> t<span class="token punctuation">.</span>wheelDelta <span class="token operator">||</span> <span class="token operator">-</span>t<span class="token punctuation">.</span>detail<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">"next"</span> <span class="token operator">:</span> <span class="token string">"previous"</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> jQuery<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>jquery.fancybox.min.css</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">body.compensate-for-scrollbar</span> <span class="token punctuation">&#123;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-active</span> <span class="token punctuation">&#123;</span>    <span class="token property">height</span><span class="token punctuation">:</span> auto<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-is-hidden</span> <span class="token punctuation">&#123;</span>    <span class="token property">left</span><span class="token punctuation">:</span> -9999px<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token important">!important</span><span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> -9999px<span class="token punctuation">;</span>    <span class="token property">visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-container</span> <span class="token punctuation">&#123;</span>    <span class="token property">-webkit-backface-visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>    <span class="token property">-webkit-tap-highlight-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">-ms-touch-action</span><span class="token punctuation">:</span> manipulation<span class="token punctuation">;</span>    <span class="token property">touch-action</span><span class="token punctuation">:</span> manipulation<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateZ</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 99992<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-container *</span> <span class="token punctuation">&#123;</span>    <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-stage</span> <span class="token punctuation">&#123;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-outer</span> <span class="token punctuation">&#123;</span>    <span class="token property">-webkit-overflow-scrolling</span><span class="token punctuation">:</span> touch<span class="token punctuation">;</span>    <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-bg</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #1e1e1e<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">transition-duration</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>    <span class="token property">transition-property</span><span class="token punctuation">:</span> opacity<span class="token punctuation">;</span>    <span class="token property">transition-timing-function</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>.47<span class="token punctuation">,</span>0<span class="token punctuation">,</span>.74<span class="token punctuation">,</span>.71<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-is-open .fancybox-bg</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> .9<span class="token punctuation">;</span>    <span class="token property">transition-timing-function</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>.22<span class="token punctuation">,</span>.61<span class="token punctuation">,</span>.36<span class="token punctuation">,</span>1<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-caption,.fancybox-infobar,.fancybox-navigation .fancybox-button,.fancybox-toolbar</span> <span class="token punctuation">&#123;</span>    <span class="token property">direction</span><span class="token punctuation">:</span> ltr<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> opacity .25s ease<span class="token punctuation">,</span>visibility 0s ease .25s<span class="token punctuation">;</span>    <span class="token property">visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 99997<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-show-caption .fancybox-caption,.fancybox-show-infobar .fancybox-infobar,.fancybox-show-nav .fancybox-navigation .fancybox-button,.fancybox-show-toolbar .fancybox-toolbar</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> opacity .25s ease 0s<span class="token punctuation">,</span>visibility 0s ease 0s<span class="token punctuation">;</span>    <span class="token property">visibility</span><span class="token punctuation">:</span> visible<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-infobar</span> <span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 13px<span class="token punctuation">;</span>    <span class="token property">-webkit-font-smoothing</span><span class="token punctuation">:</span> subpixel-antialiased<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 44px<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 44px<span class="token punctuation">;</span>    <span class="token property">min-width</span><span class="token punctuation">:</span> 44px<span class="token punctuation">;</span>    <span class="token property">mix-blend-mode</span><span class="token punctuation">:</span> difference<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>    <span class="token property">pointer-events</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">-webkit-touch-callout</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">-webkit-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">-moz-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">-ms-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-toolbar</span> <span class="token punctuation">&#123;</span>    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-stage</span> <span class="token punctuation">&#123;</span>    <span class="token property">direction</span><span class="token punctuation">:</span> ltr<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> visible<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateZ</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 99994<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-is-open .fancybox-stage</span> <span class="token punctuation">&#123;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-slide</span> <span class="token punctuation">&#123;</span>    <span class="token property">-webkit-backface-visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>    <span class="token property">-webkit-overflow-scrolling</span><span class="token punctuation">:</span> touch<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 44px<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">transition-property</span><span class="token punctuation">:</span> transform<span class="token punctuation">,</span>opacity<span class="token punctuation">;</span>    <span class="token property">white-space</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 99994<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-slide:before</span> <span class="token punctuation">&#123;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-is-sliding .fancybox-slide,.fancybox-slide--current,.fancybox-slide--next,.fancybox-slide--previous</span> <span class="token punctuation">&#123;</span>    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-slide--image</span> <span class="token punctuation">&#123;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 44px 0<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-slide--image:before</span> <span class="token punctuation">&#123;</span>    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-slide--html</span> <span class="token punctuation">&#123;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 6px<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-content</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">max-width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>    <span class="token property">-webkit-overflow-scrolling</span><span class="token punctuation">:</span> touch<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 44px<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>    <span class="token property">text-align</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>    <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-slide--image .fancybox-content</span> <span class="token punctuation">&#123;</span>    <span class="token property">animation-timing-function</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>.5<span class="token punctuation">,</span>0<span class="token punctuation">,</span>.14<span class="token punctuation">,</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-webkit-backface-visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>    <span class="token property">background-repeat</span><span class="token punctuation">:</span> no-repeat<span class="token punctuation">;</span>    <span class="token property">background-size</span><span class="token punctuation">:</span> 100% 100%<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">max-width</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> visible<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">transform-origin</span><span class="token punctuation">:</span> top left<span class="token punctuation">;</span>    <span class="token property">transition-property</span><span class="token punctuation">:</span> transform<span class="token punctuation">,</span>opacity<span class="token punctuation">;</span>    <span class="token property">-webkit-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">-moz-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">-ms-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 99995<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-can-zoomOut .fancybox-content</span> <span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> zoom-out<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-can-zoomIn .fancybox-content</span> <span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> zoom-in<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-can-pan .fancybox-content,.fancybox-can-swipe .fancybox-content</span> <span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> grab<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-is-grabbing .fancybox-content</span> <span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> grabbing<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-container [data-selectable=true]</span> <span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> text<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-image,.fancybox-spaceball</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">max-height</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">max-width</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">-webkit-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">-moz-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">-ms-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-spaceball</span> <span class="token punctuation">&#123;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-slide--iframe .fancybox-content,.fancybox-slide--map .fancybox-content,.fancybox-slide--pdf .fancybox-content,.fancybox-slide--video .fancybox-content</span> <span class="token punctuation">&#123;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> visible<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-slide--video .fancybox-content</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #000<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-slide--map .fancybox-content</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #e5e3df<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-slide--iframe .fancybox-content</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-iframe,.fancybox-video</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-iframe</span> <span class="token punctuation">&#123;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-error</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> default<span class="token punctuation">;</span>    <span class="token property">max-width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-error p</span> <span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #444<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-button</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>30<span class="token punctuation">,</span>30<span class="token punctuation">,</span>30<span class="token punctuation">,</span>.6<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 44px<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> color .2s<span class="token punctuation">;</span>    <span class="token property">vertical-align</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span>    <span class="token property">visibility</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 44px<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-button,.fancybox-button:link,.fancybox-button:visited</span> <span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-button:hover</span> <span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-button:focus</span> <span class="token punctuation">&#123;</span>    <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-button.fancybox-focus</span> <span class="token punctuation">&#123;</span>    <span class="token property">outline</span><span class="token punctuation">:</span> 1px dotted<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-button[disabled],.fancybox-button[disabled]:hover</span> <span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #888<span class="token punctuation">;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> default<span class="token punctuation">;</span>    <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-button div</span> <span class="token punctuation">&#123;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-button svg</span> <span class="token punctuation">&#123;</span>    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> visible<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-button svg path</span> <span class="token punctuation">&#123;</span>    <span class="token property">fill</span><span class="token punctuation">:</span> currentColor<span class="token punctuation">;</span>    <span class="token property">stroke-width</span><span class="token punctuation">:</span> 0<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-button--fsenter svg:nth-child(2),.fancybox-button--fsexit svg:first-child,.fancybox-button--pause svg:first-child,.fancybox-button--play svg:nth-child(2)</span> <span class="token punctuation">&#123;</span>    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-progress</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #ff5268<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleX</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">transform-origin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">transition-property</span><span class="token punctuation">:</span> transform<span class="token punctuation">;</span>    <span class="token property">transition-timing-function</span><span class="token punctuation">:</span> linear<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 99998<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-close-small</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> .8<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> -12px<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> -44px<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 401<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-close-small:hover</span> <span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-slide--html .fancybox-close-small</span> <span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> currentColor<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-slide--image.fancybox-is-scaling .fancybox-content</span> <span class="token punctuation">&#123;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-is-scaling .fancybox-close-small,.fancybox-is-zoomable.fancybox-can-pan .fancybox-close-small</span> <span class="token punctuation">&#123;</span>    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-navigation .fancybox-button</span> <span class="token punctuation">&#123;</span>    <span class="token property">background-clip</span><span class="token punctuation">:</span> content-box<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>50% - 50px<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 70px<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-navigation .fancybox-button div</span> <span class="token punctuation">&#123;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 7px<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-navigation .fancybox-button--arrow_left</span> <span class="token punctuation">&#123;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> <span class="token function">env</span><span class="token punctuation">(</span>safe-area-inset-left<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 31px 26px 31px 6px<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-navigation .fancybox-button--arrow_right</span> <span class="token punctuation">&#123;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 31px 6px 31px 26px<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> <span class="token function">env</span><span class="token punctuation">(</span>safe-area-inset-right<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-caption</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>0deg<span class="token punctuation">,</span><span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>.85<span class="token punctuation">)</span> 0<span class="token punctuation">,</span><span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>.3<span class="token punctuation">)</span> 50%<span class="token punctuation">,</span><span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>.15<span class="token punctuation">)</span> 65%<span class="token punctuation">,</span><span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>.075<span class="token punctuation">)</span> 75.5%<span class="token punctuation">,</span><span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>.037<span class="token punctuation">)</span> 82.85%<span class="token punctuation">,</span><span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>.019<span class="token punctuation">)</span> 88%<span class="token punctuation">,</span>transparent<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #eee<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 1.5<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 75px 44px 25px<span class="token punctuation">;</span>    <span class="token property">pointer-events</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 99996<span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token function">max</span><span class="token punctuation">(</span>0px<span class="token punctuation">)</span><span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>    <span class="token selector">.fancybox-caption</span> <span class="token punctuation">&#123;</span>        <span class="token property">padding</span><span class="token punctuation">:</span>75px <span class="token function">max</span><span class="token punctuation">(</span>44px<span class="token punctuation">,</span><span class="token function">env</span><span class="token punctuation">(</span>safe-area-inset-right<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">max</span><span class="token punctuation">(</span>25px<span class="token punctuation">,</span><span class="token function">env</span><span class="token punctuation">(</span>safe-area-inset-bottom<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">max</span><span class="token punctuation">(</span>44px<span class="token punctuation">,</span><span class="token function">env</span><span class="token punctuation">(</span>safe-area-inset-left<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-caption--separate</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin-top</span><span class="token punctuation">:</span> -50px<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-caption__body</span> <span class="token punctuation">&#123;</span>    <span class="token property">max-height</span><span class="token punctuation">:</span> 50vh<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>    <span class="token property">pointer-events</span><span class="token punctuation">:</span> all<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-caption a,.fancybox-caption a:link,.fancybox-caption a:visited</span> <span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>    <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-caption a:hover</span> <span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>    <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-loading</span> <span class="token punctuation">&#123;</span>    <span class="token property">animation</span><span class="token punctuation">:</span> a 1s linear infinite<span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> 4px solid #888<span class="token punctuation">;</span>    <span class="token property">border-bottom-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> -25px 0 0 -25px<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> .7<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 99999<span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@keyframes</span> a</span> <span class="token punctuation">&#123;</span>    <span class="token selector">to</span> <span class="token punctuation">&#123;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>1turn<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-animated</span> <span class="token punctuation">&#123;</span>    <span class="token property">transition-timing-function</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>.25<span class="token punctuation">,</span>1<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-fx-slide.fancybox-slide--previous</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>-100%<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-fx-slide.fancybox-slide--next</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>100%<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-fx-slide.fancybox-slide--current</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateZ</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-fx-fade.fancybox-slide--next,.fancybox-fx-fade.fancybox-slide--previous</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">transition-timing-function</span><span class="token punctuation">:</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>.19<span class="token punctuation">,</span>1<span class="token punctuation">,</span>.22<span class="token punctuation">,</span>1<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-fx-fade.fancybox-slide--current</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-fx-zoom-in-out.fancybox-slide--previous</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale3d</span><span class="token punctuation">(</span>1.5<span class="token punctuation">,</span>1.5<span class="token punctuation">,</span>1.5<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-fx-zoom-in-out.fancybox-slide--next</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale3d</span><span class="token punctuation">(</span>.5<span class="token punctuation">,</span>.5<span class="token punctuation">,</span>.5<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-fx-zoom-in-out.fancybox-slide--current</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleX</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-fx-rotate.fancybox-slide--previous</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-1turn<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-fx-rotate.fancybox-slide--next</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>1turn<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-fx-rotate.fancybox-slide--current</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-fx-circular.fancybox-slide--previous</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale3d</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">)</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>-100%<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-fx-circular.fancybox-slide--next</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale3d</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">)</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>100%<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-fx-circular.fancybox-slide--current</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleX</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span> <span class="token function">translateZ</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-fx-tube.fancybox-slide--previous</span> <span class="token punctuation">&#123;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>-100%<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>.1<span class="token punctuation">)</span> <span class="token function">skew</span><span class="token punctuation">(</span>-10deg<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-fx-tube.fancybox-slide--next</span> <span class="token punctuation">&#123;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>100%<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>.1<span class="token punctuation">)</span> <span class="token function">skew</span><span class="token punctuation">(</span>10deg<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-fx-tube.fancybox-slide--current</span> <span class="token punctuation">&#123;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateZ</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">max-height</span><span class="token punctuation">:</span> 576px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>    <span class="token selector">.fancybox-slide</span> <span class="token punctuation">&#123;</span>        <span class="token property">padding-left</span><span class="token punctuation">:</span>6px<span class="token punctuation">;</span>        <span class="token property">padding-right</span><span class="token punctuation">:</span> 6px    <span class="token punctuation">&#125;</span>    <span class="token selector">.fancybox-slide--image</span> <span class="token punctuation">&#123;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 6px 0    <span class="token punctuation">&#125;</span>    <span class="token selector">.fancybox-close-small</span> <span class="token punctuation">&#123;</span>        <span class="token property">right</span><span class="token punctuation">:</span> -6px    <span class="token punctuation">&#125;</span>    <span class="token selector">.fancybox-slide--image .fancybox-close-small</span> <span class="token punctuation">&#123;</span>        <span class="token property">background</span><span class="token punctuation">:</span> #4e4e4e<span class="token punctuation">;</span>        <span class="token property">color</span><span class="token punctuation">:</span> #f2f4f6<span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> 36px<span class="token punctuation">;</span>        <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>        <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>        <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>        <span class="token property">width</span><span class="token punctuation">:</span> 36px    <span class="token punctuation">&#125;</span>    <span class="token selector">.fancybox-caption</span> <span class="token punctuation">&#123;</span>        <span class="token property">padding-left</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>        <span class="token property">padding-right</span><span class="token punctuation">:</span> 12px    <span class="token punctuation">&#125;</span>    <span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token function">max</span><span class="token punctuation">(</span>0px<span class="token punctuation">)</span><span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>        <span class="token selector">.fancybox-caption</span> <span class="token punctuation">&#123;</span>            <span class="token property">padding-left</span><span class="token punctuation">:</span><span class="token function">max</span><span class="token punctuation">(</span>12px<span class="token punctuation">,</span><span class="token function">env</span><span class="token punctuation">(</span>safe-area-inset-left<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token property">padding-right</span><span class="token punctuation">:</span> <span class="token function">max</span><span class="token punctuation">(</span>12px<span class="token punctuation">,</span><span class="token function">env</span><span class="token punctuation">(</span>safe-area-inset-right<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-share</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #f4f4f4<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>    <span class="token property">max-width</span><span class="token punctuation">:</span> 90%<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-share h1</span> <span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #222<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 35px<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 20px<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-share p</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-share__button</span> <span class="token punctuation">&#123;</span>    <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0 5px 10px<span class="token punctuation">;</span>    <span class="token property">min-width</span><span class="token punctuation">:</span> 130px<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0 15px<span class="token punctuation">;</span>    <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> all .2s<span class="token punctuation">;</span>    <span class="token property">-webkit-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">-moz-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">-ms-user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-share__button:link,.fancybox-share__button:visited</span> <span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-share__button:hover</span> <span class="token punctuation">&#123;</span>    <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-share__button--fb</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #3b5998<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-share__button--fb:hover</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #344e86<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-share__button--pt</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #bd081d<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-share__button--pt:hover</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #aa0719<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-share__button--tw</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #1da1f2<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-share__button--tw:hover</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #0d95e8<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-share__button svg</span> <span class="token punctuation">&#123;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>    <span class="token property">margin-right</span><span class="token punctuation">:</span> 7px<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> -1px<span class="token punctuation">;</span>    <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 25px<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-share__button svg path</span> <span class="token punctuation">&#123;</span>    <span class="token property">fill</span><span class="token punctuation">:</span> #fff<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-share__input</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #d7d7d7<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #5d5b5b<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 10px 0 0<span class="token punctuation">;</span>    <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 10px 15px<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-thumbs</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #ddd<span class="token punctuation">;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">-webkit-overflow-scrolling</span><span class="token punctuation">:</span> touch<span class="token punctuation">;</span>    <span class="token property">-ms-overflow-style</span><span class="token punctuation">:</span> -ms-autohiding-scrollbar<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 2px 2px 4px<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">-webkit-tap-highlight-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 212px<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 99995<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-thumbs-x</span> <span class="token punctuation">&#123;</span>    <span class="token property">overflow-x</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>    <span class="token property">overflow-y</span><span class="token punctuation">:</span> hidden<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-show-thumbs .fancybox-thumbs</span> <span class="token punctuation">&#123;</span>    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-show-thumbs .fancybox-inner</span> <span class="token punctuation">&#123;</span>    <span class="token property">right</span><span class="token punctuation">:</span> 212px<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-thumbs__list</span> <span class="token punctuation">&#123;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>    <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-thumbs-x .fancybox-thumbs__list</span> <span class="token punctuation">&#123;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-thumbs-y .fancybox-thumbs__list::-webkit-scrollbar</span> <span class="token punctuation">&#123;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 7px<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-thumbs-y .fancybox-thumbs__list::-webkit-scrollbar-track</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> inset 0 0 6px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>.3<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token selector">.fancybox-thumbs-y .fancybox-thumbs__list::-webkit-scrollbar-thumb</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #2a2a2a<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-thumbs__list a</span> <span class="token punctuation">&#123;</span>    <span class="token property">-webkit-backface-visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token property">backface-visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>.1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">background-position</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token property">background-repeat</span><span class="token punctuation">:</span> no-repeat<span class="token punctuation">;</span>    <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 75px<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>    <span class="token property">max-height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 8px<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">max-width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>50% - 4px<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>    <span class="token property">-webkit-tap-highlight-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-thumbs__list a:before</span> <span class="token punctuation">&#123;</span>    <span class="token property">border</span><span class="token punctuation">:</span> 6px solid #ff5268<span class="token punctuation">;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> all .2s <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>.25<span class="token punctuation">,</span>.46<span class="token punctuation">,</span>.45<span class="token punctuation">,</span>.94<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 99991<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-thumbs__list a:focus:before</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> .5<span class="token punctuation">&#125;</span><span class="token selector">.fancybox-thumbs__list a.fancybox-thumbs-active:before</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 576px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>    <span class="token selector">.fancybox-thumbs</span> <span class="token punctuation">&#123;</span>        <span class="token property">width</span><span class="token punctuation">:</span>110px    <span class="token punctuation">&#125;</span>    <span class="token selector">.fancybox-show-thumbs .fancybox-inner</span> <span class="token punctuation">&#123;</span>        <span class="token property">right</span><span class="token punctuation">:</span> 110px    <span class="token punctuation">&#125;</span>    <span class="token selector">.fancybox-thumbs__list a</span> <span class="token punctuation">&#123;</span>        <span class="token property">max-width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 10px<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h2 id="Todos"><a href="#Todos" class="headerlink" title="Todos"></a>Todos</h2><p><a href="https://liyangzone.com/article/2019-07-22-hexo-blog-add-gallery-tutorial/">hexo博客添加一级分类相册功能 | liyang’s blog (liyangzone.com)</a></p><p><a href="https://yafine.github.io/posts/20200221224129-3b98">修改matery原有主题相册 | 过客~励む (yafine.github.io)</a></p><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>通过新建相册，可以让自己的博文更加具有真实性，是十分值得拥有的，希望能帮到您。<br>最后，如果这篇教程能帮到您，请点击最后的 <strong>“赏”</strong> 字，不管多少都是对我的支持，谢谢！</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 相册 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自定义404页面</title>
      <link href="/posts/e7a5.html"/>
      <url>/posts/e7a5.html</url>
      
        <content type="html"><![CDATA[<h1 id="自定义404"><a href="#自定义404" class="headerlink" title="自定义404"></a>自定义404</h1><p>一个好的404页面能够友好地向用户解释页面未找到的原因，帮助用户继续浏览网站，从而提升用户体验。当用户访问到404页面时，如果页面设计得吸引人、有趣或富有创意，用户可能会停留更长时间，从而减少用户的流失。</p><p>虽然matery主题自带有404页面，但是不够好看，可玩性也不足。所以我决定修改404页面，大家可以选择自己DIY或者借鉴网络上大佬的作品。经过我的精挑细选，我选用的是Andrew Lawendy大佬的<a href="https://codepen.io/andrew-lawendy/pen/deOpMZ">作品</a></p><h2 id="演示效果"><a href="#演示效果" class="headerlink" title="演示效果"></a>演示效果</h2><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/404.gif" alt="404"></p><h2 id="修改步骤"><a href="#修改步骤" class="headerlink" title="修改步骤"></a>修改步骤</h2><ol><li><p>将原来source目录下的404.md文件删除，新建404.html</p><p>原404.md代码：</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token front-matter-block"><span class="token punctuation">---</span><span class="token front-matter yaml language-yaml">title: 404date: 2019-07-19 16:41:10type: "404"layout: "404"description: "你似乎来到了没有知识的荒原~~~"</span><span class="token punctuation">---</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>粘贴以下代码</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Content-Type<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/html; charset=UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Parallax 404 page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>css/404.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/404.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>not-found<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>not-found parallax<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sky-bg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wave-7<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wave-6<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index.html<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wave-island<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://res.cloudinary.com/andrewhani/image/upload/v1524501929/404/island.svg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Island<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wave-5<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wave-lost wrp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wave-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wave-boat<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>boat<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://res.cloudinary.com/andrewhani/image/upload/v1524501894/404/boat.svg<span class="token punctuation">"</span></span>                <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Boat<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wave-3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wave-2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wave-1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wave-message<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>You seem lost<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Click on the island to return<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>注意：<code>&lt;a href=&quot;index.html&quot; class=&quot;wave-island&quot;&gt;</code>，请将<code>href</code>设置为想要跳转的页面</p></blockquote></li><li><p><strong>将CSS代码添加到主题中：</strong></p><p>在matery&#x2F;source&#x2F;css下，新建404.css，粘贴以下代码(注意修改图片的路径)</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">&#123;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"Open Sans"</span><span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> -1vh -20vw<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 110vh<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found [class*=wave]</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found div</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found div.wave-1</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../404/wave-1.svg<span class="token punctuation">)</span></span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found div.wave-2</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../404/wave-2.svg<span class="token punctuation">)</span></span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found div.wave-3</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../404/wave-3.svg<span class="token punctuation">)</span></span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found div.wave-4</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../404/wave-4.svg<span class="token punctuation">)</span></span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found div.wave-5</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../404/wave-5.svg<span class="token punctuation">)</span></span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found div.wave-6</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../404/wave-6.svg<span class="token punctuation">)</span></span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found div.wave-7</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../404/wave-7.svg<span class="token punctuation">)</span></span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found div.sky-bg</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../404/bg.svg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found div[class*=wave]</span> <span class="token punctuation">&#123;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.99<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found div[class*=wave]:not(.wave-4)</span> <span class="token punctuation">&#123;</span>    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 350px<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found div.wave-4</span> <span class="token punctuation">&#123;</span>    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 530px<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found .boat</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> 15%<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>    <span class="token property">animation</span><span class="token punctuation">:</span> boat 15s <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.65<span class="token punctuation">,</span> 0.05<span class="token punctuation">,</span> 0.36<span class="token punctuation">,</span> 1<span class="token punctuation">)</span> infinite<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found .wave-lost</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 20%<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 20rem<span class="token punctuation">;</span>    <span class="token property">animation</span><span class="token punctuation">:</span> surf 2s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 768px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>    <span class="token selector">.not-found .wave-lost</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 13rem<span class="token punctuation">;</span>        <span class="token property">left</span><span class="token punctuation">:</span> 16%<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 992px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>    <span class="token selector">.not-found .wave-lost</span> <span class="token punctuation">&#123;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 20rem<span class="token punctuation">;</span>        <span class="token property">left</span><span class="token punctuation">:</span> 22%<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found .wave-lost span</span> <span class="token punctuation">&#123;</span>    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>    <span class="token property">animation</span><span class="token punctuation">:</span> float 3s ease-in infinite<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found .wave-lost span:nth-child(2)</span> <span class="token punctuation">&#123;</span>    <span class="token property">animation-delay</span><span class="token punctuation">:</span> 2.5s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found .wave-lost span:nth-child(3)</span> <span class="token punctuation">&#123;</span>    <span class="token property">animation-delay</span><span class="token punctuation">:</span> 4.5s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found .wave-island</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 20%<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 170px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.not-found .wave-message</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token property">padding-right</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> auto <span class="token important">!important</span><span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 3rem<span class="token punctuation">;</span>    <span class="token property">text-align</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>    <span class="token property">animation</span><span class="token punctuation">:</span> wave-message 1s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 768px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>    <span class="token selector">.not-found .wave-message</span> <span class="token punctuation">&#123;</span>        <span class="token property">left</span><span class="token punctuation">:</span> 16%<span class="token punctuation">;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 1.8rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 992px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>    <span class="token selector">.not-found .wave-message</span> <span class="token punctuation">&#123;</span>        <span class="token property">left</span><span class="token punctuation">:</span> 22%<span class="token punctuation">;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 3rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@keyframes</span> boat</span> <span class="token punctuation">&#123;</span>    <span class="token selector">0%</span> <span class="token punctuation">&#123;</span>        <span class="token property">transform-origin</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-15deg<span class="token punctuation">)</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>400px<span class="token punctuation">,</span> 0px<span class="token punctuation">,</span> 0px<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">20%</span> <span class="token punctuation">&#123;</span>        <span class="token property">transform-origin</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>15deg<span class="token punctuation">)</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>-20vw<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0px<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">25%</span> <span class="token punctuation">&#123;</span>        <span class="token property">transform-origin</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-7deg<span class="token punctuation">)</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>-25vw<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0px<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">50%</span> <span class="token punctuation">&#123;</span>        <span class="token property">transform-origin</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>5deg<span class="token punctuation">)</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>-50vw<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0px<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">60%</span> <span class="token punctuation">&#123;</span>        <span class="token property">transform-origin</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-1deg<span class="token punctuation">)</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>-60vw<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0px<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">100%</span> <span class="token punctuation">&#123;</span>        <span class="token property">transform-origin</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>2deg<span class="token punctuation">)</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>-100vw<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0px<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@keyframes</span> float</span> <span class="token punctuation">&#123;</span>    <span class="token selector">0%,    100%</span> <span class="token punctuation">&#123;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>3deg<span class="token punctuation">)</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span> -10px<span class="token punctuation">,</span> 0px<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">50%</span> <span class="token punctuation">&#123;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-3deg<span class="token punctuation">)</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>0px<span class="token punctuation">,</span> 10px<span class="token punctuation">,</span> 0px<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@keyframes</span> surf</span> <span class="token punctuation">&#123;</span>    <span class="token selector">0%</span> <span class="token punctuation">&#123;</span>        <span class="token property">transform-origin</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>15deg<span class="token punctuation">)</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 800px<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">30%</span> <span class="token punctuation">&#123;</span>        <span class="token property">transform-origin</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>15deg<span class="token punctuation">)</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 500px<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">100%</span> <span class="token punctuation">&#123;</span>        <span class="token property">transform-origin</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0px<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@keyframes</span> wave-message</span> <span class="token punctuation">&#123;</span>    <span class="token selector">0%</span> <span class="token punctuation">&#123;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 120%<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">100%</span> <span class="token punctuation">&#123;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>将JS代码添加到主题中：</strong></p><p>matery&#x2F;source&#x2F;js下，新建404.js，粘贴以下代码</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">parallax</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">var</span> windowWidth <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>windowWidth <span class="token operator">&lt;</span> <span class="token number">768</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> parallax <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.parallax'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> halfFieldWidth <span class="token operator">=</span> parallax<span class="token punctuation">.</span>offsetWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> halfFieldHeight <span class="token operator">=</span> parallax<span class="token punctuation">.</span>offsetHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> fieldPos <span class="token operator">=</span> parallax<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> x <span class="token operator">=</span> e<span class="token punctuation">.</span>pageX<span class="token punctuation">;</span>  <span class="token keyword">var</span> y <span class="token operator">=</span> e<span class="token punctuation">.</span>pageY <span class="token operator">-</span> fieldPos<span class="token punctuation">.</span>top<span class="token punctuation">;</span>  <span class="token keyword">var</span> newX <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">-</span> halfFieldWidth<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">30</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> newY <span class="token operator">=</span> <span class="token punctuation">(</span>y <span class="token operator">-</span> halfFieldHeight<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">30</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> waveElements <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.parallax [class*="wave"]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  waveElements<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>    element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">"translate3d("</span> <span class="token operator">+</span> index <span class="token operator">*</span> newX <span class="token operator">+</span> <span class="token string">"px,"</span> <span class="token operator">+</span> index <span class="token operator">*</span> newY <span class="token operator">+</span> <span class="token string">"px,0px"</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token function-variable function">stopParallax</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> waveElements <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.parallax [class*="wave"]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    waveElements<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">"translate(0px, 0px)"</span><span class="token punctuation">;</span>      element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">"all 0.7s"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      waveElements<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">700</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"not-found"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"mousemove"</span><span class="token punctuation">,</span> parallax<span class="token punctuation">)</span><span class="token punctuation">;</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"not-found"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"mouseleave"</span><span class="token punctuation">,</span> stopParallax<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>配置主题以使用404页面：</strong></p><ul><li><p>打开Hexo博客根目录下的 <code>_config.yml</code> 文件。查找是否有配置项用于指定404页面，例如<code>not_found</code>,将其设置为 <code>404.html</code> 或你的自定义404页面文件名。</p></li><li><p>跳过404页面渲染，在上面打开的<code>_config.yml</code>中，找到 <code>skip_render</code> 配置项，加入404.html</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">skip_render</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token string">"README.md"</span>  <span class="token punctuation">-</span> aboutme/<span class="token important">**</span>  <span class="token comment"># 意思为在对文件进行渲染时跳过aboutme文件下的所有文件</span>  <span class="token punctuation">-</span> 404.html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>请先使用<code>hexo cl &amp; hexo g &amp; hexo s</code>重新生成页面，再输入<code>http://localhost:4000/404</code>进行效果预览</p></blockquote></li></ul></li><li><p><strong>重新生成并部署博客：</strong></p><p>运行以下命令重新生成并部署Hexo博客：</p><pre class="line-numbers language-none"><code class="language-none">hexo cl &amp; hexo g &amp; hexo d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>刷新你的博客，现在应该能够看到自定义的404页面了。</p></li></ol><h2 id="理解HTTP状态码"><a href="#理解HTTP状态码" class="headerlink" title="理解HTTP状态码"></a>理解HTTP状态码</h2><h3 id="信息响应（100–199）"><a href="#信息响应（100–199）" class="headerlink" title="信息响应（100–199）"></a>信息响应（100–199）</h3><ul><li><p><strong>100 Continue（继续）</strong>：服务器已收到请求头，客户端应继续发送请求体。</p></li><li><p><strong>101 Switching Protocols（切换协议）</strong>：请求者要求服务器切换协议。</p></li></ul><h3 id="成功响应（200–299）"><a href="#成功响应（200–299）" class="headerlink" title="成功响应（200–299）"></a>成功响应（200–299）</h3><ul><li><p><strong>200 OK（成功）</strong>：请求成功。</p></li><li><p><strong>201 Created（已创建）</strong>：请求成功，并创建了新的资源。</p></li><li><p><strong>204 No Content（无内容）</strong>：服务器成功处理请求，但没有额外的内容要发送。</p></li></ul><h3 id="重定向消息（300–399）"><a href="#重定向消息（300–399）" class="headerlink" title="重定向消息（300–399）"></a>重定向消息（300–399）</h3><ul><li><p><strong>301 Moved Permanently（永久移动）</strong>：所请求的资源已被永久移动。</p></li><li><p><strong>302 Found（或307 Temporary Redirect）</strong>：所请求的资源暂时存放在不同的URI下。</p></li><li><p><strong>304 Not Modified（未修改）</strong>：自请求指定的版本以来，资源未被修改。</p></li></ul><h3 id="客户端错误响应（400–499）"><a href="#客户端错误响应（400–499）" class="headerlink" title="客户端错误响应（400–499）"></a>客户端错误响应（400–499）</h3><ul><li><p><strong>400 Bad Request（错误请求）</strong>：服务器无法理解请求。</p></li><li><p><strong>401 Unauthorized（未授权）</strong>：请求要求用户身份验证。</p></li><li><p><strong>403 Forbidden（禁止）</strong>：服务器理解请求，但拒绝授权。</p></li><li><p><strong>404 Not Found（未找到）</strong>：服务器未找到请求的资源。</p></li><li><p><strong>405 Method Not Allowed（方法禁用）</strong>：请求中指定的方法不被允许。</p></li><li><p><strong>408 Request Timeout（请求超时）</strong>：服务器等待请求时发生超时。</p></li></ul><h3 id="服务器错误响应（500–599）"><a href="#服务器错误响应（500–599）" class="headerlink" title="服务器错误响应（500–599）"></a>服务器错误响应（500–599）</h3><ul><li><p><strong>500 Internal Server Error（服务器内部错误）</strong>：遇到意外条件，服务器无法完成请求。</p></li><li><p><strong>502 Bad Gateway（错误网关）</strong>：服务器作为网关或代理时，从上游服务器接收到无效的响应。</p></li><li><p><strong>503 Service Unavailable（服务不可用）</strong>：服务器暂时无法处理请求。</p></li></ul><p>参考文章：<a href="https://www.52txr.cn/2022/404html.html">好看的404模板</a></p><h2 id="页面升级"><a href="#页面升级" class="headerlink" title="页面升级"></a>页面升级</h2><p>偶然在这个网站上看到了这个效果的404动画，感觉可以把这个404页面设置为夜间模式，之前的设为日间模式</p><h3 id="夜间效果-暂未实现"><a href="#夜间效果-暂未实现" class="headerlink" title="夜间效果(暂未实现)"></a>夜间效果(暂未实现)</h3><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/404_night.gif" alt="404_night"></p><p>网站：<a href="https://www.footprintcalculator.org/not-found">Ecological Footprint Calculator</a></p><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ul><li>通过了解HTTP状态码并创建自定义404错误页面，您可以提升用户体验，留住访客，并减轻网站死链对用户的影响。定期监测网站错误并根据需要更新404页面。</li><li>如果是新建<code>404.html</code>文件的话，是可以进行本地预览的。但是这个预览不能使用 <code>http://localhost:4000/任意字符</code> 来查看，必须使用 <code>http://localhost:4000/404</code> 来进行本地预览</li><li>更多模版效果：<a href="https://frontendin.com/404-page-templates-on-codepen/?amp=1">404模版展示及源码</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 404 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenMP</title>
      <link href="/posts/8905.html"/>
      <url>/posts/8905.html</url>
      
        <content type="html"><![CDATA[<h1 id="OpenMP"><a href="#OpenMP" class="headerlink" title="OpenMP"></a>OpenMP</h1><h2 id="OpenMP介绍"><a href="#OpenMP介绍" class="headerlink" title="OpenMP介绍"></a>OpenMP介绍</h2><p>在C&#x2F;C++中，OpenMP可以通过使用预处理指令来让程序并行化。OpenMP指令使用的格式为:</p><pre class="line-numbers language-none"><code class="language-none">#pragma omp 指令 [子句[子句]…]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>下面是一个最简单的OpenMP程序，可以运行后观察结果与普通程序有什么不同。</p><p>请在适当的位置填上<code>#pragma omp parallel for</code> 使程序并行执行。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token comment">// YOUR CODE HERE</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span> </span></span><span class="token comment">// END OF YOUR CODE</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"i = %d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">i &#x3D; 2i &#x3D; 0i &#x3D; 6i &#x3D; 1i &#x3D; 8i &#x3D; 5i &#x3D; 4i &#x3D; 7i &#x3D; 9i &#x3D; 3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="fork-join并行执行模式的概念"><a href="#fork-join并行执行模式的概念" class="headerlink" title="fork&#x2F;join并行执行模式的概念"></a>fork&#x2F;join并行执行模式的概念</h2><p>OpenMP是一套用于共享内存并行系统的多处理器程序设计的指导性的编译处理方案，从之前的介绍我们可以发现程序还是在循环结束之后才运行return 0语句，因此可以推断OpenMP并行执行的程序要全部结束后才会运行后面非并行部分的代码，这就是fork&#x2F;join并行模式。以上结论可以从示例代码中体现。</p><p>请在适当的位置填上<code>#pragma omp parallel for </code>使程序并行执行。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">Time &#x3D; 159Time &#x3D; 161Total time &#x3D; 162<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> cnt <span class="token operator">=</span> <span class="token number">1e8</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">double</span> t1 <span class="token operator">=</span> <span class="token function">omp_get_wtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// your code</span>    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span></span></span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">double</span> t2 <span class="token operator">=</span> <span class="token function">omp_get_wtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Total time = %f seconds\n"</span><span class="token punctuation">,</span> t2 <span class="token operator">-</span> t1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="parallel-指令"><a href="#parallel-指令" class="headerlink" title="parallel 指令"></a>parallel 指令</h2><p><code>#pragma omp parallel</code> 是 OpenMP 中用于创建并行区域（parallel region）的指令，它可以搭配 <code>for</code> 或 <code>sections</code> 以及其他子句来实现不同的并行操作。</p><p>这个指令的作用是创建一个并行区域，在这个区域中的代码可以被多个线程同时执行，以充分利用多核处理器的性能优势。</p><p>下面是对 <code>#pragma omp parallel</code> 的详细解释和示例用法：</p><ul><li><p><strong>解释</strong>：</p><ul><li><code>#pragma omp</code> 是 OpenMP 指令的前缀，用于指示编译器执行并行化操作。</li><li><code>parallel</code> 指令用于创建一个并行区域，其中的代码可以由多个线程同时执行。</li><li>在并行区域中的代码将会被多个线程执行，每个线程都将执行相同的代码。每个线程都将执行这段代码，并行地进行计算，直到并行区域结束为止。</li><li>在并行区域内部的变量具有不同的作用域。比如在每个线程中，变量的值是独立的，每个线程都有自己的变量实例。</li><li>默认情况下，线程数量由系统决定，但也可以通过设置 <code>OMP_NUM_THREADS</code> 环境变量或调用 <code>omp_set_num_threads()</code> 函数来指定线程数量。</li></ul></li><li><p><strong>作用</strong>：</p><ul><li>创建一个并行区域，使其中的代码能够在多个线程中并行执行，充分利用多核处理器的性能。</li><li>用于并行化一段代码，使其能够在多个线程中同时执行，加快程序的执行速度。</li></ul></li><li><p><strong>用法</strong>：</p><ul><li><p>需要注意的是，<code>#pragma omp parallel</code> 只是创建一个并行区域，不会自动对代码进行并行化。在这个并行区域中的代码将被多个线程执行，但如果没有进一步的指示，代码仍然是串行执行的。因此，为了实现真正的并行化，需要结合其他 OpenMP 指令（比如 <code>for</code> 循环的 <code>parallel for</code> 或 <code>parallel sections</code>）来并行执行具体的任务。</p></li><li><p>与一段代码块配合使用，可以是复合语句、函数或一个 <code>for</code> 循环。</p></li><li><p><code>#pragma omp parallel</code> 可以与不同的子句一起使用，比如 <code>for</code> 或 <code>sections</code>，并可以添加其他子句来调整并行区域的行为。</p></li><li><p>示例1：与 <code>for</code> 结合使用</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span></span></span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 并行执行的 for 循环代码</span>    <span class="token comment">// ...</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这种用法将一个 <code>for</code> 循环中的迭代分配给多个线程并行执行。</p></li><li><p>示例2：与 <code>sections</code> 结合使用</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel sections</span></span><span class="token punctuation">&#123;</span>    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp section</span></span>    <span class="token punctuation">&#123;</span>        <span class="token comment">// 第一个部分的代码</span>        <span class="token comment">// ...</span>    <span class="token punctuation">&#125;</span>        <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp section</span></span>    <span class="token punctuation">&#123;</span>        <span class="token comment">// 第二个部分的代码</span>        <span class="token comment">// ...</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这种用法将不同的代码部分分配给不同的线程并行执行，每个 <code>section</code> 内的代码将在独立的线程中执行。</p></li></ul></li><li><p><strong>其他子句</strong>：</p><ul><li><p>可以在 <code>#pragma omp parallel</code> 后添加其他子句来调整并行区域的行为。比如设置线程数量、私有变量等等。例如：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token function">num_threads</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token function">private</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span></span></span><span class="token punctuation">&#123;</span>    <span class="token comment">// ...</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>num_threads(4)</code>：指定并行区域中的线程数量为4。</li><li><code>private(x)</code>：指定变量 <code>x</code> 在每个线程中是私有的，每个线程有自己的 <code>x</code> 变量实例。</li></ul></li></ul></li></ul><p><code>#pragma omp parallel</code> 创建的并行区域中的代码将会在多个线程间并行执行。在并行区域中的变量可能具有不同的作用域和共享性质，需要小心处理共享变量可能引发的竞态条件和数据同步问题。</p><h3 id="超算习堂"><a href="#超算习堂" class="headerlink" title="超算习堂"></a>超算习堂</h3><p>parallel 是构造并行块的一个指令，同时也可以配合其他指令如for, sections等指令一起使用。在这个指令后面需要使用一对大括号来指定需要并行计算的代码。</p><pre class="line-numbers language-none"><code class="language-none">#pragma omp parallel [for | sections] [子句[子句]…] &#123; &#x2F;&#x2F;并行部分 &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>通过实例代码我们可以看出并行部分创建出了多个线程来完成。</p><p>请在适当的位置填上<code>#pragma omp parallel num_threads(6)</code> 使程序并行执行。</p><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">Thread: 0Thread: 2Thread: 1Thread: 3Thread: 4Thread: 5<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// YOUR CODE HERE</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token function">num_threads</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> </span></span><span class="token comment">// END OF YOUR CODE</span><span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread: %d\n"</span><span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="for-指令"><a href="#for-指令" class="headerlink" title="for 指令"></a>for 指令</h2><p>在 OpenMP 中，<code>for</code> 循环通常与 <code>#pragma omp parallel for</code> 结合使用，将一个 <code>for</code> 循环中的迭代任务分配给多个线程并行执行。用于在循环中实现并行化，允许将一个普通的for循环转换为一个并行化的for循环，从而提高程序的执行效率。这样可以有效地利用多核处理器的性能，加速循环中的计算。</p><p>以下是对 <code>#pragma omp parallel for</code> 的详细解释和使用方法：</p><ul><li><p><strong>语法</strong>：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span></span></span><span class="token keyword">for</span> <span class="token punctuation">(</span>初始化语句； 循环条件； 更新语句<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// 循环体</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>作用</strong>：</p><ul><li>将一个 <code>for</code> 循环中的迭代任务分配给多个线程并行执行，加速循环的运行。</li><li>通常用于对大型迭代进行并行化处理，例如遍历数组、矩阵运算等。</li></ul></li><li><p><strong>用法</strong>：</p><ul><li><p><code>#pragma omp parallel for</code> 用于并行化一个 <code>for</code> 循环，用法示例如下：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span></span></span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 并行执行的 for 循环体代码</span>    <span class="token comment">// ...</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这个指令将 <code>for</code> 循环中的迭代任务平均地分配给多个线程，每个线程执行一部分迭代。循环迭代会被分成多个块，每个线程执行其中的一个块。</p><p>例如，我们有一个计算数组元素平方和的简单任务，可以使用<code>#pragma omp parallel for</code>将其并行化：</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;iostream&gt;#include &lt;omp.h&gt;int main() &#123;const int N &#x3D; 1000;double sum &#x3D; 0.0;double arr[N];&#x2F;&#x2F; 初始化数组for (int i &#x3D; 0; i &lt; N; ++i) &#123;  arr[i] &#x3D; static_cast&lt;double&gt;(i);&#125;&#x2F;&#x2F; 使用#pragma omp parallel for进行并行化#pragma omp parallel for reduction(+:sum)for (int i &#x3D; 0; i &lt; N; ++i) &#123;  sum +&#x3D; arr[i] * arr[i];&#125;std::cout &lt;&lt; &quot;Sum of squares: &quot; &lt;&lt; sum &lt;&lt; std::endl;return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这个例子中，我们使用了<code>reduction(+:sum)</code>子句来指定如何合并多个线程的结果。这样，每个线程都会计算其部分元素的平方和，并将结果累加到全局变量<code>sum</code>中。最后，主线程会输出整个数组元素平方和的结果。</p></li></ul></li><li><p><strong>注意事项</strong>：</p><ul><li>在使用 <code>#pragma omp parallel for</code> 时，循环变量（如上例中的 <code>i</code>）必须是迭代变量。OpenMP 将根据迭代变量自动进行任务分配。</li><li>循环的迭代次数应该足够大，以便在多个线程之间实现有效的并行执行。如果循环迭代次数太小，则并行化的开销可能超过了并行执行所带来的性能提升。</li></ul></li><li><p><strong>其他子句</strong>：</p><ul><li><p>可以使用其他 OpenMP 子句来进一步控制并行化的行为，例如指定私有变量、指定线程数量、设置线程绑定等。例如：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span> <span class="token function">num_threads</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token function">private</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span></span></span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ...</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>num_threads(4)</code>：指定并行区域中的线程数量为4。</li><li><code>private(x)</code>：指定变量 <code>x</code> 在每个线程中是私有的，每个线程有自己的 <code>x</code> 变量实例。</li></ul></li></ul></li></ul><p><code>#pragma omp parallel for</code> 的使用可以显著提高循环迭代的效率，但需要注意并行化可能引入的数据竞争和同步问题，特别是对于共享变量的操作需要进行合适的同步控制。</p><h3 id="超算习堂-1"><a href="#超算习堂-1" class="headerlink" title="超算习堂"></a>超算习堂</h3><p>for指令的作用是使一个for循环在多个线程中执行，一般for指令会与parallel指令同时使用，即parallel for指令。此外还可以在parallel指令的并行块中单独使用，在一个并行块中可以使用多个for指令。但是单独使用for指令是没有效果的。</p><p>请在适当的位置使用for指令使程序并行执行。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel </span></span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span>                <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp <span class="token keyword">for</span> <span class="token function">private</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span></span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"i = %d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp <span class="token keyword">for</span> <span class="token function">private</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span></span></span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"j = %d\n"</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">i &#x3D; 1i &#x3D; 0i &#x3D; 4i &#x3D; 3i &#x3D; 2j &#x3D; 0j &#x3D; 2j &#x3D; 1j &#x3D; 3j &#x3D; 4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="sections和section指令"><a href="#sections和section指令" class="headerlink" title="sections和section指令"></a>sections和section指令</h2><p>在 OpenMP 中，<code>#pragma omp sections</code> 和 <code>#pragma omp section</code> 是用于并行化代码的指令，允许将不同的代码部分分配给不同的线程并行执行。这种并行化模式允许多个线程同时执行各自的代码段，可以提高程序的效率。</p><p>以下是对 <code>#pragma omp sections</code> 和 <code>#pragma omp section</code> 的详细解释和用法：</p><ul><li><p><strong>作用</strong>：</p><ul><li><code>#pragma omp sections</code> 用于创建一个并行区域，内部包含多个 <code>section</code>，每个 <code>section</code> 中的代码可以由不同的线程并行执行。</li><li><code>#pragma omp section</code> 用于定义 <code>sections</code> 区域中的一个具体代码段。</li></ul></li><li><p><strong>用法</strong>：</p><ul><li><p><code>#pragma omp sections</code> 必须与多个 <code>#pragma omp section</code> 结合使用，代码示例如下：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel</span></span><span class="token punctuation">&#123;</span>    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp sections</span></span>    <span class="token punctuation">&#123;</span>        <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp section</span></span>        <span class="token punctuation">&#123;</span>            <span class="token comment">// 第一个 section 的代码</span>            <span class="token comment">// ...</span>        <span class="token punctuation">&#125;</span>                <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp section</span></span>        <span class="token punctuation">&#123;</span>            <span class="token comment">// 第二个 section 的代码</span>            <span class="token comment">// ...</span>        <span class="token punctuation">&#125;</span>                <span class="token comment">// 可以有更多的 sections</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这种用法将 <code>sections</code> 区域内的代码分成多个 <code>section</code>，每个 <code>section</code> 中的代码会被不同的线程并行执行。</p></li></ul></li><li><p><strong>特点</strong>：</p><ul><li>每个 <code>section</code> 中的代码都是独立执行的，各个 <code>section</code> 之间的执行顺序不确定，取决于系统调度和线程完成任务的时间。</li><li><code>sections</code> 区域中的线程数目与 <code>section</code> 的数目无关，OpenMP 会自动决定线程分配情况。</li></ul></li><li><p><strong>注意事项</strong>：</p><ul><li>每个 <code>section</code> 都应该是互相独立的任务单元，不应该有共享变量的修改或者依赖关系，以免引起竞态条件或死锁等问题。</li><li><code>sections</code> 区域中的每个 <code>section</code> 可能会被不同的线程执行，因此要确保每个 <code>section</code> 的执行是独立的，不会相互影响。</li></ul></li></ul><p><code>#pragma omp sections</code> 和 <code>#pragma omp section</code> 适用于将程序中的不同任务并行化执行，特别适用于任务间没有数据依赖性的情况。通过这种方式，可以提高程序的效率和性能，充分利用多核处理器的优势。</p><p>sections语句可以将下面的代码分成不同的分块，通过section指令来指定分块。每一个分块都会并行执行，具体格式：<br>#pragma omp [parallel] sections [子句]<br>{<br>    #pragma omp section<br>    {<br>        &#x2F;&#x2F;代码<br>    }<br>…<br>}</p><p>请在适当的位置填上使用sections指令使程序并行执行</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel sections</span></span>    <span class="token punctuation">&#123;</span>        <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp section </span></span>        <span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Section 1 ThreadId = %d\n"</span><span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 某些代码任务</span>        <span class="token punctuation">&#125;</span>        <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp section</span></span>        <span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Section 2 ThreadId = %d\n"</span><span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 可能的合并任务或其他处理</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">Section 2 ThreadId &#x3D; 1Section 1 ThreadId &#x3D; 0Section 4 ThreadId &#x3D; 3Section 3 ThreadId &#x3D; 2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="private-子句"><a href="#private-子句" class="headerlink" title="private 子句"></a>private 子句</h2><p>在 OpenMP 中，<code>private</code> 子句用于指定变量在并行区域中的私有性质。这意味着每个线程都会拥有该变量的一个私有副本，而不是共享同一个变量副本。这样可以避免多个线程同时访问和修改同一个变量引发的竞态条件问题。</p><p>以下是对 <code>private</code> 子句的详细解释和用法：</p><ul><li><p><strong>作用</strong>：</p><ul><li>在并行区域中，将变量指定为私有的，以确保每个线程都拥有自己的变量副本。</li><li>避免多个线程对同一个变量进行并发读写而导致的数据混乱或不确定的结果。</li></ul></li><li><p><strong>用法</strong>：</p><ul><li><p>在 OpenMP 指令中，通过 <code>private</code> 子句来指定私有变量，例如：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token function">private</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span></span></span><span class="token punctuation">&#123;</span>    <span class="token comment">// i 和 j 变量在并行区域中是私有的</span>    <span class="token comment">// 每个线程都会有自己的 i 和 j 副本</span>    <span class="token comment">// ...</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这个示例中，<code>i</code> 和 <code>j</code> 变量被指定为私有变量，每个线程都会有自己的 <code>i</code> 和 <code>j</code> 的副本。任何在并行区域内声明的变量默认情况下都是共享的，使用 <code>private</code> 子句可以将其设为私有。</p></li></ul></li><li><p><strong>作用范围</strong>：</p><ul><li><code>private</code> 子句可以在不同的 OpenMP 指令中使用，比如 <code>parallel</code>, <code>for</code>, <code>sections</code> 等，并且可以在同一个指令块中同时指定多个私有变量。</li><li>如果在循环并行化 <code>for</code> 中使用了 <code>private</code> 子句，则循环索引变量通常需要被指定为私有变量。</li></ul></li><li><p><strong>注意事项</strong>：</p><ul><li>私有变量仅在并行区域中是私有的，出了并行区域后，变量仍然是原来的共享状态。</li><li>被指定为私有的变量需要在每个线程中进行初始化。因为每个线程都有自己的变量副本，变量值在不同线程中是独立的。</li></ul></li></ul><p><code>private</code> 子句是用于控制变量私有性的重要工具，在多线程并行编程中经常用于避免共享变量带来的并发访问问题，确保程序的正确性和可靠性。</p><p>private 子句可以将变量声明为线程私有，声明称线程私有变量以后，每个线程都有一个该变量的副本，线程之间不会互相影响，其他线程无法访问其他线程的副本。原变量在并行部分不起任何作用，也不会受到并行部分内部操作的影响。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>        <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span> <span class="token function">private</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span></span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"i = %d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 手动更新循环外的 i</span>    <span class="token comment">// 得到最后一个并行循环中的 i 值</span>    i <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"outside i = %d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">i &#x3D; 0i &#x3D; 2i &#x3D; 1i &#x3D; 4i &#x3D; 3i &#x3D; 5i &#x3D; 6i &#x3D; 7i &#x3D; 9i &#x3D; 8outside i &#x3D; 20<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="firstprivate子句"><a href="#firstprivate子句" class="headerlink" title="firstprivate子句"></a>firstprivate子句</h5><p><code>firstprivate</code> 子句是 OpenMP 中用于指定并行区域中变量的初始私有值的一种指令。它用于保留变量在并行区域外的初始值，并将其作为每个线程私有变量的初始值，以便在并行执行过程中使用。</p><p>以下是 <code>firstprivate</code> 子句的用法：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>        <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token function">firstprivate</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span></span></span>    <span class="token punctuation">&#123;</span>        <span class="token comment">// x 变量在并行区域中是私有的，并且每个线程都有一个私有副本</span>        <span class="token comment">// 初始值是 x 在并行区域外的初始值（5）</span>                <span class="token comment">// 在并行区域内修改 x 的值</span>        x <span class="token operator">+=</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %d: x = %d\n"</span><span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token comment">// 在并行区域外打印 x 的值，值仍然为初始值（5）</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"After parallel region: x = %d\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这个示例中，<code>firstprivate(x)</code> 将变量 <code>x</code> 指定为私有变量，并且每个线程都有自己的私有副本，初始值为并行区域外 <code>x</code> 的初始值（5）。在并行区域内，每个线程将 <code>x</code> 的值增加了当前线程编号 <code>omp_get_thread_num()</code>，然后输出结果。</p><p>值得注意的是，虽然并行区域内对 <code>x</code> 进行了修改，但在并行区域外，<code>x</code> 的值仍然保持初始值，不受并行区域内修改的影响。这是因为 <code>firstprivate</code> 子句保留了变量在并行区域外的初始值，并在并行区域内每个线程都有一个私有的初始值副本，不会影响到外部的 <code>x</code>。</p><p>private子句不能继承原变量的值，但是有时我们需要线程私有变量继承原来变量的值，这样我们就可以使用firstprivate子句来实现。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span> i<span class="token punctuation">;</span><span class="token comment">// YOUR CODE HERE</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span> <span class="token function">firstprivate</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span></span></span><span class="token comment">// END OF YOUR CODE</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>t <span class="token operator">+=</span> i<span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"t = %d\n"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"outside t = %d\n"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">t &#x3D; 20t &#x3D; 21t &#x3D; 23t &#x3D; 24t &#x3D; 22outside t &#x3D; 20<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="lastprivate子句"><a href="#lastprivate子句" class="headerlink" title="lastprivate子句"></a>lastprivate子句</h5><p><code>lastprivate</code> 子句是 OpenMP 中用于指定并行循环或区域结束后，从多个线程中获取最后一个迭代的变量值，并将其赋值给指定变量的一种指令。</p><p>以下是 <code>lastprivate</code> 子句的用法：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> last_val <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span> <span class="token function">lastprivate</span><span class="token punctuation">(</span>last_val<span class="token punctuation">)</span></span></span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        last_val <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %d: i = %d\n"</span><span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token comment">// 在并行循环结束后，获取最后一个迭代的值赋给 last_val</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Last value after parallel region: %d\n"</span><span class="token punctuation">,</span> last_val<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这个示例中，<code>lastprivate(last_val)</code> 将变量 <code>last_val</code> 指定为 <code>lastprivate</code> 变量。在并行循环中，每个线程都有一个私有的 <code>last_val</code> 变量，但最终会从多个线程中获取最后一个迭代的值，并将该值赋给外部的 <code>last_val</code>。</p><p>请注意，<code>lastprivate</code> 子句只对循环结束后的最后一个迭代有效。在并行循环执行期间，每个线程都会在自己的 <code>last_val</code> 中存储最后一个迭代的值，但只有在并行区域结束后，会将最后一个迭代的值赋给外部的 <code>last_val</code>。</p><p>这对于需要在并行循环结束后获取最后一个迭代的值并继续使用的情况非常有用，例如需要保留并利用并行循环中最后一个迭代的结果。</p><p>除了在进入并行部分时需要继承原变量的值外，有时我们还需要再退出并行部分时将计算结果赋值回原变量，lastprivate子句就可以实现这个需求。<br>需要注意的是，根据OpenMP规范，在循环迭代中，是最后一次迭代的值赋值给原变量；如果是section结构，那么是程序语法上的最后一个section语句赋值给原变量。<br>如果是类(class)变量作为lastprivate的参数时，我们需要一个缺省构造函数，除非该变量也作为firstprivate子句的参数；此外还需要一个拷贝赋值操作符。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span> i<span class="token punctuation">;</span><span class="token comment">// YOUR CODE HERE</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span> <span class="token function">firstprivate</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">lastprivate</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span></span></span><span class="token comment">// END OF YOUR CODE</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>t <span class="token operator">+=</span> i<span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"t = %d\n"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"outside t = %d\n"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">t &#x3D; 20t &#x3D; 22t &#x3D; 24t &#x3D; 21t &#x3D; 23outside t &#x3D; 24<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="threadprivate子句"><a href="#threadprivate子句" class="headerlink" title="threadprivate子句"></a>threadprivate子句</h5><p><code>threadprivate</code> 是 OpenMP 中用于指定全局变量在每个线程中具有自己的私有副本的指令。通常，全局变量在并行区域中是共享的，所有线程都能访问和修改它。但有时，我们需要在每个线程中拥有自己的变量副本，以便不同线程之间的修改不会相互影响。</p><p><code>threadprivate</code> 的用法如下所示：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token comment">// 定义一个全局变量，在每个线程中将拥有自己的私有副本</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp <span class="token function">threadprivate</span><span class="token punctuation">(</span>global_var<span class="token punctuation">)</span></span></span><span class="token keyword">int</span> global_var<span class="token punctuation">;</span> <span class="token comment">// 全局变量</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    global_var <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 全局变量的初始值</span>        <span class="token comment">// 启动并行区域，多个线程同时访问 global_var</span>    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel</span></span>    <span class="token punctuation">&#123;</span>        <span class="token comment">// 每个线程都会有一个私有的 global_var</span>        global_var <span class="token operator">+=</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %d: global_var = %d\n"</span><span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> global_var<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这个示例中，<code>global_var</code> 是一个全局变量，但使用了 <code>#pragma omp threadprivate(global_var)</code> 指令，因此在每个线程中都会有一个 <code>global_var</code> 的私有副本。每个线程对 <code>global_var</code> 进行操作时都在自己的私有副本上进行，不会相互干扰。</p><p>值得注意的是，<code>threadprivate</code> 用于指定全局变量在每个线程中具有自己的私有副本。这样的话，每个线程都有一个与其他线程独立的变量副本，它们互不干扰。</p><p>threadprivate子句可以将一个变量复制一个私有的拷贝给各个线程，即各个线程具有各自私有的全局对象。<br>格式：#pragma omp threadprivate(list)</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> g <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp <span class="token function">threadprivate</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span> i<span class="token punctuation">;</span><span class="token comment">// YOUR CODE HERE</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel</span></span><span class="token comment">// END OF YOUR CODE</span><span class="token punctuation">&#123;</span>g <span class="token operator">=</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel</span></span><span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread id: %d g: %d\n"</span><span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> g<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">thread id: 1 g: 1thread id: 5 g: 5thread id: 2 g: 2thread id: 3 g: 3thread id: 6 g: 6thread id: 4 g: 4thread id: 0 g: 0thread id: 7 g: 7<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="shared子句"><a href="#shared子句" class="headerlink" title="shared子句"></a>shared子句</h2><p>在 OpenMP 中，<code>shared</code> 子句用于指定变量在并行区域中的共享性质。共享变量是所有线程共同访问和修改的变量。使用 <code>shared</code> 子句可以将变量显式地声明为共享变量，以确保所有线程在并行区域中都使用同一个变量副本。</p><p>以下是对 <code>shared</code> 子句的详细解释和用法：</p><ul><li><p><strong>作用</strong>：</p><ul><li>在并行区域中将变量指定为共享变量，以确保所有线程都共享同一个变量副本。</li><li>允许多个线程同时访问和修改变量的值，适用于线程之间需要共享信息的情况。</li></ul></li><li><p><strong>用法</strong>：</p><ul><li><p>在 OpenMP 指令中，通过 <code>shared</code> 子句将变量指定为共享变量，例如：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token function">shared</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span></span></span><span class="token punctuation">&#123;</span>    <span class="token comment">// x 和 y 变量在并行区域中是共享的</span>    <span class="token comment">// 所有线程都使用同一个 x 和 y 变量副本</span>    <span class="token comment">// ...</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这个示例中，<code>x</code> 和 <code>y</code> 变量被指定为共享变量，这意味着所有线程都会使用相同的 <code>x</code> 和 <code>y</code> 的副本。</p></li></ul></li><li><p><strong>默认共享性</strong>：</p><ul><li>在 OpenMP 中，默认情况下，在并行区域内声明的变量通常是共享的。因此，对于全局变量和在并行区域之外声明的变量，默认情况下是共享的。</li><li>局部变量默认情况下是私有的，每个线程都有自己的私有副本。</li></ul></li><li><p><strong>注意事项</strong>：</p><ul><li>共享变量可能存在并发访问的问题，需要注意线程之间的同步控制，避免出现数据竞争、不确定行为等问题。</li><li>如果变量在并行区域外被声明为共享的，需确保对其的访问是线程安全的，避免多个线程同时修改造成的问题。</li></ul></li></ul><p><code>shared</code> 子句用于控制变量在并行区域中的共享性质，可帮助开发者更清晰地表达并行代码中的共享数据。但需要特别注意共享变量的同步和互斥访问问题，以确保并行程序的正确性和可靠性。</p><p><code>shared</code> 子句是 OpenMP 中的一个指令，用于指定变量在并行区域中的共享性质。在并行区域内，<code>shared</code> 子句使得变量在不同线程之间共享同一个内存位置。</p><p>以下是 <code>shared</code> 子句的用法示例：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> shared_var <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token comment">// 使用 shared 子句将 shared_var 变量指定为共享变量</span>    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token function">shared</span><span class="token punctuation">(</span>shared_var<span class="token punctuation">)</span></span></span>    <span class="token punctuation">&#123;</span>        shared_var <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 所有线程共享同一个 shared_var 变量</span>                <span class="token comment">// 获取当前线程号和 shared_var 的值</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %d: shared_var = %d\n"</span><span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> shared_var<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token comment">// 在并行区域结束后，输出最终 shared_var 的值</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Final value of shared_var: %d\n"</span><span class="token punctuation">,</span> shared_var<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这个示例中，<code>#pragma omp parallel shared(shared_var)</code> 将 <code>shared_var</code> 变量指定为共享变量，这意味着在并行区域中，所有线程都将共享同一个 <code>shared_var</code> 变量。</p><p>在并行区域内，每个线程都可以访问并修改 <code>shared_var</code> 的值。因此，在示例中，每个线程都对 <code>shared_var</code> 执行了加一操作，并输出了当前线程号和 <code>shared_var</code> 的值。需要注意的是，由于所有线程共享同一个 <code>shared_var</code>，可能会发生竞争条件，需要谨慎处理并发修改。</p><p>最终输出的 <code>Final value of shared_var</code> 表示并行区域结束后的 <code>shared_var</code> 的值。由于多个线程共享该变量，因此最终结果取决于并发修改的顺序和操作。</p><p>Share子句可以将一个变量声明成共享变量，并且在多个线程内共享。需要注意的是，在并行部分进行写操作时，要求共享变量进行保护，否则不要随便使用共享变量，尽量将共享变量转换为私有变量使用。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span> i<span class="token punctuation">;</span>        <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span> <span class="token function">shared</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token function">private</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span></span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp atomic</span></span>            t<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"i = %d, t = %d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">i &#x3D; 0, t &#x3D; 21i &#x3D; 2, t &#x3D; 22i &#x3D; 9, t &#x3D; 23i &#x3D; 4, t &#x3D; 23i &#x3D; 8, t &#x3D; 25i &#x3D; 5, t &#x3D; 25i &#x3D; 7, t &#x3D; 24i &#x3D; 1, t &#x3D; 24i &#x3D; 3, t &#x3D; 24i &#x3D; 6, t &#x3D; 24<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="reduction子句"><a href="#reduction子句" class="headerlink" title="reduction子句"></a>reduction子句</h2><p><code>reduction</code> 子句是 OpenMP 中用于对并行循环中的变量执行归约操作的一种指令。归约操作指将并行循环中多个线程的局部结果合并为一个最终结果的过程。这种操作通常用于对变量进行累加、求和、求积等聚合运算，以避免竞态条件并提高并行程序的性能。</p><p>以下是对 <code>reduction</code> 子句的详细解释和用法：</p><ul><li><p><strong>作用</strong>：</p><ul><li>在并行循环中对指定的变量执行归约操作，将多个线程的局部结果合并为一个最终结果。</li><li>常用于求和、求积、求最大值、最小值等聚合操作。</li></ul></li><li><p><strong>用法</strong>：</p><ul><li><p>在 OpenMP 中，<code>reduction</code> 子句用于声明进行归约操作的变量，例如：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span> <span class="token function">reduction</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token operator">:</span>sum<span class="token punctuation">)</span></span></span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    sum <span class="token operator">+=</span> array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这个示例中，<code>reduction(+:sum)</code> 表示对变量 <code>sum</code> 执行归约操作，使用 <code>+</code> 操作符对局部结果进行累加。</p></li></ul></li><li><p><strong>支持的操作符</strong>：</p><ul><li><code>reduction</code> 子句支持多种操作符，常用的包括 <code>+</code>、<code>*</code>、<code>-</code>、<code>&amp;</code>、<code>|</code>、<code>^</code>、<code>&amp;&amp;</code>、<code>||</code>、<code>max</code>、<code>min</code> 等。具体支持的操作符取决于编译器和 OpenMP 的实现。</li></ul></li><li><p><strong>特点</strong>：</p><ul><li><code>reduction</code> 子句会自动为每个线程创建一个局部变量，每个线程对局部变量进行归约操作，最后将所有局部变量的结果合并得到最终结果。</li><li>在并行循环结束后，变量的值会被存储在原始变量中。</li></ul></li><li><p><strong>示例</strong>：</p><ul><li><p>对数组中元素求和的示例代码：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> array<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span> <span class="token function">reduction</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token operator">:</span>sum<span class="token punctuation">)</span></span></span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        sum <span class="token operator">+=</span> array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Sum = %d\n"</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这个示例中，<code>reduction(+:sum)</code> 表示对变量 <code>sum</code> 执行累加操作，将各个线程的局部累加结果最后合并到 <code>sum</code> 中。</p></li></ul></li></ul><p><code>reduction</code> 子句是一个强大的工具，能够简化对并行循环中变量的归约操作，提高并行程序的性能，减少了手动同步和合并的复杂度。</p><p><code>reduction</code> 子句是 OpenMP 中用于执行并行归约操作的关键指令。它允许在并行循环中对指定的变量执行归约操作，并将各个线程的局部结果合并为一个最终结果。</p><p>以下是 <code>reduction</code> 子句的用法示例：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token comment">// 使用 reduction 子句对 sum 变量执行归约操作</span>    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span> <span class="token function">reduction</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token operator">:</span>sum<span class="token punctuation">)</span></span></span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        sum <span class="token operator">+=</span> i<span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %d: sum = %d\n"</span><span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token comment">// 在并行循环结束后，输出最终的 sum 值</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Final sum value after reduction: %d\n"</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这个示例中，<code>#pragma omp parallel for reduction(+:sum)</code> 将 <code>sum</code> 变量指定为 <code>+</code> 归约运算符的归约变量。在并行循环中，每个线程都有自己的 <code>sum</code> 变量，并行地对其进行累加操作。</p><p>关键点是 <code>reduction(+:sum)</code> 中的 <code>+</code> 表示进行求和操作，这意味着各个线程各自计算自己的局部和，并在循环结束时将所有局部和合并为一个最终的总和。这种归约操作确保了并行计算的正确性，最终得到了正确的总和结果。</p><p><code>reduction</code> 子句可以用于多种归约操作，如求和、乘积、最大值、最小值等。它提供了一种简洁而有效的方法来在并行计算中执行归约操作，以提高程序性能并确保计算的准确性。</p><p>reduction子句可以对一个或者多个参数指定一个操作符，然后每一个线程都会创建这个参数的私有拷贝，在并行区域结束后，迭代运行指定的运算符，并更新原参数的值。<br>私有拷贝变量的初始值依赖于redtution的运算类型。<br>具体用法如下<br>reduction(operator:list)</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> sum <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token comment">// YOUR CODE HERE</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span> <span class="token function">reduction</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token operator">:</span> sum<span class="token punctuation">)</span></span></span><span class="token comment">// END OF YOUR CODE</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>sum <span class="token operator">+=</span> i<span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"sum = %d\n"</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">0215457689sum &#x3D; 55<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="copyin子句"><a href="#copyin子句" class="headerlink" title="copyin子句"></a>copyin子句</h2><p><code>copyin</code> 子句是 OpenMP 中的一个指令，用于将数据从主线程复制到所有线程的私有副本中。它确保了并行区域中所有线程都使用相同的初始数据。</p><p>以下是 <code>copyin</code> 子句的简单示例：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> initial_data <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>        <span class="token comment">// 使用 copyin 子句将 initial_data 数据复制到并行区域中的所有线程的私有副本</span>    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token function">copyin</span><span class="token punctuation">(</span>initial_data<span class="token punctuation">)</span></span></span>    <span class="token punctuation">&#123;</span>        <span class="token comment">// 获取每个线程的私有副本的初始数据值</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %d: initial_data = %d\n"</span><span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> initial_data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这个示例中，<code>#pragma omp parallel copyin(initial_data)</code> 将 <code>initial_data</code> 变量的值复制到所有线程的私有副本中，以确保在并行区域中每个线程都有相同的初始数据。</p><p>并行区域内的每个线程都可以访问私有副本的 <code>initial_data</code>，并且这些私有副本都具有相同的初始值。在示例中，每个线程打印了自己的线程编号和 <code>initial_data</code> 的值，这些值都是从主线程复制到各自私有副本的。</p><p>需要注意的是，<code>copyin</code> 子句通常用于确保并行区域中所有线程拥有相同的初始数据。</p><p>copyin子句可以将主线程中变量的值拷贝到各个线程的私有变量中，让各个线程可以访问主线程中的变量。<br>copyin的参数必须要被声明称threadprivate，对于类的话则并且带有明确的拷贝赋值操作符。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> g <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp <span class="token function">threadprivate</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span> </span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span>   </span></span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>g <span class="token operator">=</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread %d, g = %d\n"</span><span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> g<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"global g: %d\n"</span><span class="token punctuation">,</span> g<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// YOUR CODE HERE</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span> <span class="token function">copyin</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span></span></span><span class="token comment">// END OF YOUR CODE</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread %d, g = %d\n"</span><span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> g<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">thread 0, g &#x3D; 0thread 1, g &#x3D; 1thread 2, g &#x3D; 2thread 3, g &#x3D; 3global g: 0thread 1, g &#x3D; 0thread 2, g &#x3D; 0thread 0, g &#x3D; 0thread 3, g &#x3D; 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="static字句"><a href="#static字句" class="headerlink" title="static字句"></a>static字句</h2><p>在 OpenMP 中，<code>static</code> 字句用于指定并行循环中迭代变量的存储方式。它决定了迭代变量的存储分配方式和范围。</p><p>在 <code>parallel for</code> 循环中，迭代变量可以采用不同的存储方式，其中之一就是使用 <code>static</code> 字句。<code>static</code> 字句指定了在并行循环中，迭代变量的存储分配是静态的，即在编译时就进行分配。</p><p>以下是一个示例，展示了 <code>static</code> 字句的用法：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i<span class="token punctuation">;</span>    <span class="token comment">// 使用 static 字句指定迭代变量 i 的存储分配方式为静态</span>    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span> <span class="token function">schedule</span><span class="token punctuation">(</span><span class="token keyword">static</span><span class="token punctuation">)</span></span></span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">8</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %d: i = %d\n"</span><span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这个示例中，<code>#pragma omp parallel for schedule(static)</code> 中的 <code>static</code> 字句指定了迭代变量 <code>i</code> 的存储分配方式为静态。这意味着在编译时，迭代变量 <code>i</code> 的内存空间将被分配，并在每个线程中都保持相同的内存位置。</p><p><code>static</code> 字句还可以与 <code>schedule</code> 指定循环迭代方式一起使用，比如 <code>schedule(static, chunk_size)</code>，这样可以进一步控制循环迭代的分块大小。</p><p>需要注意的是，<code>static</code> 字句是 OpenMP 中常用的一种迭代变量存储方式，它适用于并行循环中迭代变量访问频率较为均匀的情况。</p><p>当parallel for没有带schedule时，大部分情况下系统都会默认采用static调度方式。假设有n次循环迭代，t个线程，那么每个线程大约分到n&#x2F;t次迭代。这种调度方式会将循环迭代均匀的分布给各个线程，各个线程迭代次数可能相差1次。用法为schedule(method)。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token comment">// YOUR CODE HERE</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span> <span class="token function">schedule</span><span class="token punctuation">(</span><span class="token keyword">static</span><span class="token punctuation">)</span></span></span><span class="token comment">// END OF YOUR CODE</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"i = %d, thread %d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">i &#x3D; 0, thread 0i &#x3D; 4, thread 2i &#x3D; 1, thread 0i &#x3D; 7, thread 5i &#x3D; 8, thread 6i &#x3D; 2, thread 1i &#x3D; 9, thread 7i &#x3D; 3, thread 1i &#x3D; 5, thread 3i &#x3D; 6, thread 4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="Size参数的用法"><a href="#Size参数的用法" class="headerlink" title="Size参数的用法"></a>Size参数的用法</h5><p>在 OpenMP 的 <code>schedule</code> 指令中，<code>size</code> 参数用于指定分块的大小（chunk size），它影响了并行循环中迭代的分配方式。</p><p>在循环并行化中，通常迭代是分配给不同线程的。<code>size</code> 参数控制了每个线程获取的迭代次数。</p><p>当 <code>schedule</code> 指定为 <code>static</code> 或者 <code>dynamic</code> 时，<code>size</code> 参数可以用于控制分块的大小。当 <code>schedule</code> 设置为 <code>static</code> 时，<code>size</code> 指定的是每个线程被分配的迭代次数。在 <code>schedule(static, size)</code> 中，<code>size</code> 表示每个线程被分配的连续迭代次数。</p><p>示例如下：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i<span class="token punctuation">;</span>    <span class="token comment">// 使用 static 分配迭代</span>    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span> <span class="token function">schedule</span><span class="token punctuation">(</span><span class="token keyword">static</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span></span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %d: i = %d\n"</span><span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在上述示例中，<code>#pragma omp parallel for schedule(static, 3)</code> 指定了静态调度，每个线程被分配了大小为 3 的连续迭代。这样，10 个迭代会被分为三块（3, 3, 3, 1）分配给线程。</p><p>需要注意的是，<code>size</code> 参数的具体效果取决于实际问题的特征和硬件环境。在选择 <code>size</code> 参数时，应该根据问题的特性、数据大小和计算资源等因素进行调整，以获得最佳的性能。</p><p>在静态调度的时候，我们可以通过指定size参数来分配一个线程的最小迭代次数。指定size之后，每个线程最多可能相差size次迭代。可以推断出[0,size-1]的迭代是在第一个线程上运行，依次类推。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token comment">// YOUR CODE HERE</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span> <span class="token function">schedule</span><span class="token punctuation">(</span><span class="token keyword">static</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span></span><span class="token comment">// END OF YOUR CODE</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"i = %d, thread %d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">i &#x3D; 6, thread 2i &#x3D; 3, thread 1i &#x3D; 4, thread 1i &#x3D; 0, thread 0i &#x3D; 5, thread 1i &#x3D; 9, thread 3i &#x3D; 1, thread 0i &#x3D; 7, thread 2i &#x3D; 2, thread 0i &#x3D; 8, thread 2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="dynamic子句指令"><a href="#dynamic子句指令" class="headerlink" title="dynamic子句指令"></a>dynamic子句指令</h2><p>在 OpenMP 中，<code>schedule</code> 指令可用于指定并行循环中迭代的调度方式。<code>schedule(dynamic, chunk_size)</code> 是其中一种调度方式，其中的 <code>dynamic</code> 子句指示编译器以动态方式调度循环的迭代，<code>chunk_size</code> 表示每次分配给线程的迭代数量。</p><p>下面是一个示例，演示了 <code>schedule(dynamic, chunk_size)</code> 的用法：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i<span class="token punctuation">;</span>    <span class="token comment">// 使用 dynamic 子句和 chunk_size 为 2 进行循环的动态调度</span>    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span> <span class="token function">schedule</span><span class="token punctuation">(</span>dynamic<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span></span></span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %d: i = %d\n"</span><span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这个示例中，<code>#pragma omp parallel for schedule(dynamic, 2)</code> 指定了动态调度，每个线程会按需获取两个迭代。当一个线程完成它所分配的两个迭代后，它将获取更多的迭代。这种方式可在并行循环中实现更灵活的负载平衡，因为线程会动态地获取迭代，避免了静态分配中可能出现的某些线程处理的工作量较少而其他线程处理的工作量较多的情况。</p><p>需要注意的是，<code>schedule(dynamic, chunk_size)</code> 中的 <code>chunk_size</code> 决定了每次分配给线程的迭代数量。过小的 <code>chunk_size</code> 可能会增加调度开销，因此需要根据实际问题的特性和硬件环境进行调整以获取更好的性能。</p><p>动态分配是将迭代动态分配到各个线程，依赖于运行你状态来确定，所以我们无法像静态调度一样事先预计进程的分配。哪一个线程先启动，哪一个线程迭代多久，这些都取决于系统的资源和线程的调度。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token comment">// YOUR CODE HERE</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span> <span class="token function">schedule</span><span class="token punctuation">(</span>dynamic<span class="token punctuation">)</span></span></span><span class="token comment">// END OF YOUR CODE</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"i = %d, thread %d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">i &#x3D; 0, thread 0i &#x3D; 3, thread 3i &#x3D; 8, thread 3i &#x3D; 9, thread 7i &#x3D; 2, thread 1i &#x3D; 4, thread 4i &#x3D; 5, thread 5i &#x3D; 7, thread 0i &#x3D; 1, thread 2i &#x3D; 6, thread 6<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="omp-get-num-procs"><a href="#omp-get-num-procs" class="headerlink" title="omp_get_num_procs"></a>omp_get_num_procs</h2><p>返回调用函数时可用的处理器数目。<br>函数原型<br>int omp_get_num_procs(void)</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> <span class="token function">omp_get_num_procs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel  </span></span><span class="token punctuation">&#123;</span>    <span class="token comment">// YOUR CODE HERE</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> <span class="token function">omp_get_num_procs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// END OF YOUR CODE</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">888888888<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="omp-get-num-threads"><a href="#omp-get-num-threads" class="headerlink" title="omp_get_num_threads"></a>omp_get_num_threads</h2><p>返回当前并行区域中的活动线程个数，如果在并行区域外部调用，返回1<br>int omp_get_num_threads(void)<br><em>注意：由于程序并行执行，每次输出的结果可能会有所区别。</em></p><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">188888888<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-omp" data-language="omp"><code class="language-omp">#include &lt;stdio.h&gt;#include &lt;omp.h&gt;int main(int argc, char* argv[])&#123;printf(&quot;%d\n&quot;, omp_get_num_threads());#pragma omp parallel  &#123;   &#x2F;&#x2F; YOUR CODE HEREprintf(&quot;%d\n&quot;, omp_get_num_threads());&#x2F;&#x2F; YOUR CODE HERE&#125;return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="omp-get-thread-num"><a href="#omp-get-thread-num" class="headerlink" title="omp_get_thread_num"></a>omp_get_thread_num</h2><p>返回当前的线程号，注意不要和之前的omp_get_num_threads混淆。<br>函数原型<br>int omp_get_thread_num(void)<br><em>注意：由于程序并行执行，每次输出的结果可能会有所区别。</em></p><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">002134567<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-omp" data-language="omp"><code class="language-omp">#include &lt;stdio.h&gt;#include &lt;omp.h&gt;int main(int argc, char* argv[])&#123;printf(&quot;%d\n&quot;, omp_get_thread_num());#pragma omp parallel  &#123;        &#x2F;&#x2F; YOUR CODE HERE    printf(&quot;%d\n&quot;, omp_get_thread_num());    &#x2F;&#x2F; END OF YOUR CODE&#125;return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="omp-set-num-threads"><a href="#omp-set-num-threads" class="headerlink" title="omp_set_num_threads"></a>omp_set_num_threads</h2><p>设置进入并行区域时，将要创建的线程个数<br>函数原型<br>int omp_set_num_threads(void)<br><em>注意：由于程序并行执行，每次输出的结果可能会有所区别。</em></p><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">0 of 4 threads2 of 4 threads1 of 4 threads3 of 4 threads<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-omp" data-language="omp"><code class="language-omp">#include &lt;stdio.h&gt;#include &lt;omp.h&gt;int main(int argc, char* argv[])&#123;    &#x2F;&#x2F; YOUR CODE HERE    omp_set_num_threads(4);    &#x2F;&#x2F; END OF YOUR CODE#pragma omp parallel  &#123;printf(&quot;%d of %d threads\n&quot;, omp_get_thread_num(), omp_get_num_threads());&#125;return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="omp-in-parallel"><a href="#omp-in-parallel" class="headerlink" title="omp_in_parallel"></a>omp_in_parallel</h2><p>可以判断当前是否处于并行状态<br>函数原型<br>int omp_in_parallel();<br><em>注意：由于程序并行执行，每次输出的结果可能会有所区别。</em></p><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">01111<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-omp" data-language="omp"><code class="language-omp">#include &lt;stdio.h&gt;#include &lt;omp.h&gt;int main(int argc, char* argv[])&#123;printf(&quot;%d\n&quot;, omp_in_parallel());omp_set_num_threads(4);#pragma omp parallel  &#123;    &#x2F;&#x2F; YOUR CODE HEREprintf(&quot;%d\n&quot;, omp_in_parallel());    &#x2F;&#x2F; END OF YOUR CODE&#125;return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="omp-get-max-threads"><a href="#omp-get-max-threads" class="headerlink" title="omp_get_max_threads"></a>omp_get_max_threads</h2><p>该函数可以用于获得最大的线程数量，根据OpenMP文档中的规定，这个最大数量是指在不使用num_threads的情况下，OpenMP可以创建的最大线程数量。需要注意的是这个值是确定的，与它是否在并行区域调用没有关系。<br><em>注意：由于程序并行执行，每次输出的结果可能会有所区别。</em></p><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">84444<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-omp" data-language="omp"><code class="language-omp">#include &lt;stdio.h&gt;#include &lt;omp.h&gt;int main(int argc, char* argv[])&#123;    &#x2F;&#x2F; YOUR CODE HEREprintf(&quot;%d\n&quot;, omp_get_max_threads());&#x2F;&#x2F; END OF YOUR CODEomp_set_num_threads(4);#pragma omp parallel  &#123;printf(&quot;%d\n&quot;, omp_get_max_threads());&#125;return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="OpenMP中互斥锁"><a href="#OpenMP中互斥锁" class="headerlink" title="OpenMP中互斥锁"></a>OpenMP中互斥锁</h2><p>Openmp中有提供一系列函数来进行锁的操作，一般来说常用的函数的下面4个<br>void omp_init_lock(omp_lock*) 初始化互斥锁<br>void omp_destroy_lock(omp_lock*) 销毁互斥锁<br>void omp_set_lock(omp_lock*) 获得互斥锁<br>void omp_unset_lock(omp_lock*) 释放互斥锁<br><em>注意：由于程序并行执行，每次输出的结果可能会有所区别</em></p><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">0+0-1+1-4+4-2+2-3+3-<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;omp.h></span></span><span class="token keyword">static</span> <span class="token class-name">omp_lock_t</span> lock<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token function">omp_init_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">omp parallel <span class="token keyword">for</span>   </span></span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// YOUR CODE HERE</span><span class="token function">omp_set_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// END OF YOUR CODE</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d+\n"</span><span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d-\n"</span><span class="token punctuation">,</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// YOUR CODE HERE</span><span class="token function">omp_unset_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// END OF YOUR CODE</span><span class="token punctuation">&#125;</span><span class="token function">omp_destroy_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="omp-test-lock"><a href="#omp-test-lock" class="headerlink" title="omp_test_lock"></a>omp_test_lock</h2><p>除了之前介绍的4个函数之外，与互斥锁的相关的函数还有一个，用来尝试获得锁。<br>该函数可以看作是omp_set_lock的非阻塞版本。<br>函数原型<br>bool omp_test_lock(omp_lock*)<br><em>注意：由于程序并行执行，每次输出的结果可能会有所区别</em></p><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">0+fail to get lockfail to get lockfail to get lock0-2+2-<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-omp" data-language="omp"><code class="language-omp">#include &lt;stdio.h&gt;#include &lt;omp.h&gt;static omp_lock_t lock;int main(int argc, char* argv[])&#123;    int i;omp_init_lock(&amp;lock); #pragma omp parallel for   for (i &#x3D; 0; i &lt; 5; ++i)&#123;    &#x2F;&#x2F; YOUR CODE HEREif (omp_test_lock(&amp;lock))&#x2F;&#x2F; END OF YOUR CODE&#123;printf(&quot;%d+\n&quot;, omp_get_thread_num());printf(&quot;%d-\n&quot;, omp_get_thread_num());omp_unset_lock(&amp;lock);&#125;else&#123;printf(&quot;fail to get lock\n&quot;);&#125;&#125;omp_destroy_lock(&amp;lock);return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="omp-set-dynamic"><a href="#omp-set-dynamic" class="headerlink" title="omp_set_dynamic"></a>omp_set_dynamic</h2><p>该函数可以设置是否允许在运行时动态调整并行区域的线程数。<br>函数原型：<br>void omp_set_dynamic(int)<br>当参数为0时，动态调整被禁用。<br>当参数为非0值时，系统会自动调整线程以最佳利用系统资源。<br><em>注意：由于程序并行执行，每次输出的结果可能会有所区别。</em></p><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">0123<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-omp" data-language="omp"><code class="language-omp">#include &lt;stdio.h&gt;#include &lt;omp.h&gt;int main(int argc, char* argv[])&#123;    int i;    &#x2F;&#x2F; YOUR CODE HEREomp_set_dynamic(1);&#x2F;&#x2F; END OF YOUR CODE#pragma omp parallel forfor (i &#x3D; 0; i &lt; 4; i++)&#123;printf(&quot;%d\n&quot;, omp_get_thread_num());&#125;return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="omp-get-dynamic"><a href="#omp-get-dynamic" class="headerlink" title="omp_get_dynamic"></a>omp_get_dynamic</h2><p>该函数可以返回当前程序是否允许在运行时动态调整并行区域的线程数。<br>函数原型<br>int omp_get_dynamic()<br>当返回值为非0时表示允许系统动态调整线程。<br>当返回值为0时表示不允许。<br><em>注意：由于程序并行执行，每次输出的结果可能会有所区别。</em></p><p><strong>运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">01111<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-omp" data-language="omp"><code class="language-omp">#include &lt;stdio.h&gt;#include &lt;omp.h&gt;int main(int argc, char* argv[])&#123;    int i;printf(&quot;%d\n&quot;, omp_get_dynamic());omp_set_dynamic(1);#pragma omp parallel forfor (i &#x3D; 0; i &lt; 4; i++)&#123;    &#x2F;&#x2F; YOUR CODE HEREprintf(&quot;%d\n&quot;, omp_get_dynamic());&#x2F;&#x2F; END OF YOUR CODE&#125;return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 分布式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pthreads</title>
      <link href="/posts/ef25.html"/>
      <url>/posts/ef25.html</url>
      
        <content type="html"><![CDATA[<h1 id="Pthreads"><a href="#Pthreads" class="headerlink" title="Pthreads"></a>Pthreads</h1><h2 id="创建和终止"><a href="#创建和终止" class="headerlink" title="创建和终止"></a>创建和终止</h2><p>本节展示了两个最基本的线程管理函数——创建与终止线程。</p><ul><li><code>pthread.h</code>头文件的引入</li><li><code>pthread_create</code>创建线程</li><li><code>pthread_exit</code>终止线程</li></ul><p>欢迎来到Posix Threads的世界。</p><p>为了编写Pthreads程序。首先，我们应包含头文件<code>&lt;pthread.h&gt;</code>。这个头文件包含了Pthreads程序的必要函数。</p><p>同时，我们也需要引入这些函数实现线程化的功能。</p><h3 id="函数说明"><a href="#函数说明" class="headerlink" title="函数说明"></a>函数说明</h3><p>创建线程</p><pre class="line-numbers language-none"><code class="language-none">int pthread_create(pthread_t * thread,    const pthread_attr_t * attr,   void * (*start_routine)(void *),    void *arg);参数：thread - 指向线程的指针。attr - 指向线程属性的指针。可设置为NULL。start_routine - 用于线程化的函数指针。arg - 指向函数参数的指针。返回值：线程标识id<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>pthread_create</code>是POSIX线程库中的一个函数，用于创建一个新的线程。它接受四个参数：</p><ol><li><code>pthread_t * thread</code>：这是一个指向<code>pthread_t</code>类型的指针，用于存储新创建的线程的标识符。</li><li><code>const pthread_attr_t * attr</code>：这是一个指向<code>pthread_attr_t</code>类型的指针，用于设置新线程的属性。如果设置为NULL，则使用默认属性。</li><li><code>void * (*start_routine)(void *)</code>：这是一个函数指针，指向新线程的入口点函数。这个函数将在新线程中执行。</li><li><code>void *arg</code>：这是传递给入口点函数的参数。</li></ol><p>函数返回0表示成功，非0表示失败。</p><p>退出线程</p><pre class="line-numbers language-none"><code class="language-none">void pthread_exit(void *retval);参数：retval - 指向线程返回值的指针。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><code>pthread_exit(void *retval)</code> 是一个用于终止线程的函数，它接受一个 <code>void *</code> 类型的参数 <code>retval</code>。当线程调用此函数时，它将立即返回，并将 <code>retval</code> 作为线程的退出状态传递给操作系统。</p><p><code>pthread_exit(void *retval);</code> 是一个用于终止线程的函数，它接受一个指向返回值的指针作为参数。当线程调用此函数时，它将立即终止，并将指定的返回值传递给调用者。</p><p>输出结果</p><blockquote><p>In main: creating thread 0<br>In main: creating thread 1<br>Hello World!<br>In main: creating thread 2<br>In main: creating thread 3<br>Hello World!<br>Hello World!<br>Hello World!</p></blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span> </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span> </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NUM_THREADS</span><span class="token expression"><span class="token number">4</span></span></span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">PrintHello</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>null<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello World!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token class-name">pthread_t</span> threads<span class="token punctuation">[</span>NUM_THREADS<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">int</span> rc<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> t<span class="token punctuation">;</span> <span class="token keyword">for</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> t<span class="token operator">&lt;</span>NUM_THREADS<span class="token punctuation">;</span> t<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"In main: creating thread %d\n"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//your code here</span>rc <span class="token operator">=</span> <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>threads<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> PrintHello<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//end of your code</span><span class="token keyword">if</span> <span class="token punctuation">(</span>rc<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ERROR; return code from pthread_create() is %d\n"</span><span class="token punctuation">,</span> rc<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span> <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="向线程传递参数-1"><a href="#向线程传递参数-1" class="headerlink" title="向线程传递参数(1)"></a>向线程传递参数(1)</h2><p>本节展示了最基本的线程创建，以及向线程传递单个参数的方法。</p><ul><li><code>pthread_create</code>创建线程</li><li><code>pthread_exit</code>终止线程</li></ul><p>本例用<code>pthread_create</code>创建了4个线程。</p><p>用于线程化的线程接收唯一一个参数。</p><p>每一个线程都会打印一条表明自己线程id的消息，然后调用<code>pthread_exit</code>终止线程。</p><p>输出结果</p><p>由于并行程序执行顺序的不确定性，你的结果的顺序可能和这个结果不一致。<br>为了比较输出结果，请将环境设置中的并行核数调为1。<br>本实验暂不支持性能评测。</p><blockquote><p>In main: creating thread 0<br>In main: creating thread 1<br>Hello World! It’s me, thread #0!<br>In main: creating thread 2<br>Hello World! It’s me, thread #1!<br>In main: creating thread 3<br>Hello World! It’s me, thread #2!<br>Hello World! It’s me, thread #3!</p></blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span> </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NUM_THREADS</span><span class="token expression"><span class="token number">4</span></span></span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">PrintHello</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>threadid<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">int</span> tid<span class="token punctuation">;</span> tid <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span>threadid<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello World! It's me, thread #%d!\n"</span><span class="token punctuation">,</span> tid<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">free</span><span class="token punctuation">(</span>threadid<span class="token punctuation">)</span><span class="token punctuation">;</span>threadid <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token class-name">pthread_t</span> threads<span class="token punctuation">[</span>NUM_THREADS<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">int</span> rc<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> t<span class="token punctuation">;</span> <span class="token keyword">for</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> t<span class="token operator">&lt;</span>NUM_THREADS<span class="token punctuation">;</span> t<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"In main: creating thread %d\n"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">int</span><span class="token operator">*</span> id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">*</span>id <span class="token operator">=</span> t<span class="token punctuation">;</span><span class="token comment">//your code here</span>rc <span class="token operator">=</span> <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>threads<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> PrintHello<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//end of your code</span><span class="token keyword">if</span> <span class="token punctuation">(</span>rc<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ERROR; return code from pthread_create() is %d"</span><span class="token punctuation">,</span> rc<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span> <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="向线程传递参数-2"><a href="#向线程传递参数-2" class="headerlink" title="向线程传递参数(2)"></a>向线程传递参数(2)</h2><p>本节展示了向线程传递非空参数的方法。</p><ul><li><code>pthread_create</code>创建线程，接收多参数</li></ul><p>很多时候，用于线程化的函数需要接收不止一个参数。<br>当多个参数需要被传递时，可以通过定义一个结构体包含所有要传的参数，然后用<code>pthread_create</code>传递一个指向改结构体的指针，来打破传递参数的个数的限制。</p><h3 id="输出结果"><a href="#输出结果" class="headerlink" title="输出结果"></a>输出结果</h3><p>由于并行程序执行顺序的不确定性，你的结果的顺序可能和这个结果不一致。</p><blockquote><p>msg: apple on thread 0<br>msg: cat on thread 2<br>msg: banana on thread 1<br>msg: dog on thread 3</p></blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span> </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NUM_THREADS</span>   <span class="token expression"><span class="token number">4</span></span></span><span class="token keyword">struct</span> <span class="token class-name">thread_data</span><span class="token punctuation">&#123;</span> <span class="token keyword">int</span>  thread_id<span class="token punctuation">;</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>message<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>thread_data_array<span class="token punctuation">[</span>NUM_THREADS<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>threadarg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">struct</span> <span class="token class-name">thread_data</span> <span class="token operator">*</span>my_data<span class="token punctuation">;</span> my_data <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">thread_data</span> <span class="token operator">*</span><span class="token punctuation">)</span> threadarg<span class="token punctuation">;</span> <span class="token keyword">int</span> taskid<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> msg<span class="token punctuation">;</span>taskid <span class="token operator">=</span> my_data<span class="token operator">-></span>thread_id<span class="token punctuation">;</span> msg <span class="token operator">=</span> my_data<span class="token operator">-></span>message<span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"msg: %s on thread %d\n"</span><span class="token punctuation">,</span> msg<span class="token punctuation">,</span> taskid<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>  <span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">pthread_t</span> threads<span class="token punctuation">[</span>NUM_THREADS<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">int</span> t<span class="token punctuation">,</span> rc<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> messages<span class="token punctuation">[</span>NUM_THREADS<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"apple"</span><span class="token punctuation">,</span> <span class="token string">"banana"</span><span class="token punctuation">,</span> <span class="token string">"cat"</span><span class="token punctuation">,</span> <span class="token string">"dog"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> t <span class="token operator">&lt;</span> NUM_THREADS<span class="token punctuation">;</span> t<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>thread_data_array<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>thread_id <span class="token operator">=</span> t<span class="token punctuation">;</span> thread_data_array<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>message <span class="token operator">=</span> messages<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//your code here</span>rc <span class="token operator">=</span> <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>threads<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> Print<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>thread_data_array<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//end of your code</span><span class="token keyword">if</span> <span class="token punctuation">(</span>rc<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ERROR; return code from pthread_create() is %d"</span><span class="token punctuation">,</span> rc<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="线程属性-线程连接和分离-1"><a href="#线程属性-线程连接和分离-1" class="headerlink" title="线程属性 - 线程连接和分离(1)"></a>线程属性 - 线程连接和分离(1)</h2><p>本节展示了线程连接和分离的基本知识。</p><ul><li><code>pthread_join</code>主线程挂起直至目标进程返回</li><li><code>pthread_attr_init</code>初始化属性对象</li><li><code>pthread_attr_destroy</code>销毁属性对象</li><li><code>pthread_attr_setdetachstate</code>设置属性对象的分离状态</li></ul><p>当一个线程被创建，它有一个属性定义了它是可连接的(joinable)还是分离的(detached)。只有是可连接的线程才能被连接(joined)，若果创建的线程是分离的，则不能连接。<br><code>pthread_join</code>函数阻塞主线程直到指定的线程终止。“连接”是一种在线程间完成同步的方法。<br><code>pthread_detach</code>函数可以显式用于分离线程。</p><p>使用<code>pthread_create</code>的attr参数可以显式的创建可连接或分离的线程，典型四步如下：</p><ol><li>声明一个<code>pthread_attr_t</code>数据类型的线程属性变量</li><li>用<code>pthread_attr_init</code>初始化改属性变量</li><li>用<code>pthread_attr_setdetachstate</code>设置可分离状态属性</li><li>完了后，用<code>pthread_attr_destroy</code>释放属性所占用的库资源</li></ol><h3 id="函数说明-1"><a href="#函数说明-1" class="headerlink" title="函数说明"></a>函数说明</h3><p>主线程挂起直至目标进程返回</p><pre class="line-numbers language-none"><code class="language-none">int pthread_join(pthread_t thread, void **retval);参数：thread - 线程id，标识唯一线程。retval - 用户定义的指针，用来存储被等待线程的返回值。返回值：0代表成功。若失败，返回的则是错误号。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><code>pthread_join</code> 是一个用于等待线程结束的函数，它接受两个参数：一个是要等待的线程标识符 <code>pthread_t thread</code>，另一个是指向返回值的指针 <code>void **retval</code>。当线程结束时，<code>pthread_join</code> 会将线程的返回值存储在 <code>retval</code> 指向的内存中。</p><p>函数原型如下：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_join</span><span class="token punctuation">(</span><span class="token class-name">pthread_t</span> thread<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span><span class="token operator">*</span>retval<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>参数说明：</p><ul><li><code>thread</code>：要等待的线程标识符。</li><li><code>retval</code>：指向返回值的指针。如果线程正常结束，该指针将被设置为线程的返回值；如果线程被其他线程阻塞，该指针将被设置为NULL。</li></ul><p>返回值：</p><ul><li>如果成功等待线程结束并获取返回值，返回0；</li><li>如果线程已经结束，返回0；</li><li>如果发生错误，返回非0值。</li></ul></blockquote><p>初始化属性对象</p><pre class="line-numbers language-none"><code class="language-none">int pthread_attr_init(pthread_attr_t *attr);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><code>int pthread_attr_init(pthread_attr_t *attr);</code> 是一个用于初始化线程属性的函数。它接受一个指向 <code>pthread_attr_t</code> 类型的指针作为参数，该指针用于存储线程属性的结构体。如果函数成功执行，它将返回0；否则，返回非0值。</p><p>以下是一个简单的示例代码，演示如何使用 <code>pthread_attr_init</code> 函数：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token class-name">pthread_attr_t</span> attr<span class="token punctuation">;</span> <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">pthread_attr_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"线程属性初始化成功\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 在这里可以对线程属性进行进一步的配置和设置</span>     <span class="token comment">// 在完成线程属性的使用后，记得释放资源</span>     <span class="token function">pthread_attr_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>     <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"线程属性初始化失败\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>请注意，在使用完线程属性后，需要调用 <code>pthread_attr_destroy</code> 函数来释放相关资源。</p></blockquote><p>销毁属性对象</p><pre class="line-numbers language-none"><code class="language-none">int pthread_attr_destroy(pthread_attr_t *attr);参数：attr - 指向线程属性对象的指针。返回值：0代表成功。若失败，返回的则是错误号。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><code>int pthread_attr_destroy(pthread_attr_t *attr);</code> 是一个用于销毁线程属性的函数。它接受一个指向 <code>pthread_attr_t</code> 类型的指针作为参数，该指针指向要销毁的线程属性结构体。如果函数成功执行，它将返回0；否则，返回非0值。</p><p>以下是一个简单的示例代码，演示如何使用 <code>pthread_attr_destroy</code> 函数：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token class-name">pthread_attr_t</span> attr<span class="token punctuation">;</span> <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">pthread_attr_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token comment">// 在这里可以对线程属性进行进一步的配置和设置</span>     <span class="token comment">// 在完成线程属性的使用后，记得销毁它</span>     result <span class="token operator">=</span> <span class="token function">pthread_attr_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"线程属性销毁成功\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>         <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"线程属性销毁失败\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>     <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"线程属性初始化失败\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><p>设置属性对象的分离状态</p><pre class="line-numbers language-none"><code class="language-none">int pthread_attr_setdetachstate(const pthread_attr_t *attr,                                int *detachstate);参数：attr - 指向线程属性对象的指针。detachstate - 设置可分离(PTHREAD_CREATE_DETACHED）或可连接属性(PTHREAD_CREATE_JOINABLE)。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><code>pthread_attr_setdetachstate</code> 是一个用于设置线程属性的函数，它允许你指定线程在创建后是否应该自动分离。该函数接受两个参数：</p><ol><li><code>const pthread_attr_t *attr</code>：指向要设置的属性对象的指针。这个对象包含了线程的属性信息，例如堆栈大小、优先级等。</li><li><code>int *detachstate</code>：指向一个整数变量的指针，用于存储设置的分离状态。你可以使用以下值之一来指定分离状态：<ul><li><code>PTHREAD_CREATE_JOINABLE</code>：线程可以在其他线程中被连接（join），即主线程可以等待子线程完成执行。这是默认的分离状态。</li><li><code>PTHREAD_CREATE_DETACHED</code>：线程在创建后将自动分离，即主线程无法等待其完成执行。</li></ul></li></ol><p>函数返回0表示成功设置了分离状态，非零值表示出现错误。</p><p>下面是一个示例代码，演示如何使用 <code>pthread_attr_setdetachstate</code> 函数来设置线程的分离状态：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">pthread_attr_t</span> attr<span class="token punctuation">;</span>    <span class="token keyword">int</span> detachstate <span class="token operator">=</span> PTHREAD_CREATE_JOINABLE<span class="token punctuation">;</span> <span class="token comment">// 设置分离状态为可连接</span>    <span class="token comment">// 初始化属性对象</span>    <span class="token function">pthread_attr_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 设置分离状态</span>    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">pthread_attr_setdetachstate</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> <span class="token operator">&amp;</span>detachstate<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 处理错误情况</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Failed to set detach state\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 分离状态设置成功，继续执行其他操作</span>        <span class="token comment">// ...</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 销毁属性对象</span>    <span class="token function">pthread_attr_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>请注意，在使用 <code>pthread_attr_setdetachstate</code> 函数之前，你需要先初始化属性对象，并在使用完毕后销毁它。</p></blockquote><p>运行结果</p><p>由于并行程序执行顺序的不确定性，你的结果的顺序可能和这个结果不一致。<br>为了比较输出结果，请将环境设置中的并行核数调为1。<br>本实验暂不支持性能评测。</p><blockquote><p>Creating thread 0<br>Creating thread 1<br>Creating thread 2<br>Thread 0 is running<br>Creating thread 3<br>Thread 1 is running<br>Thread 2 is running<br>Completed join with thread 0<br>Thread 3 is running<br>Completed join with thread 1<br>Completed join with thread 2<br>Completed join with thread 3</p></blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span> </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span> </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NUM_THREADS</span> <span class="token expression"><span class="token number">4</span> </span></span> <span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>threadid<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %d is running\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span>threadid<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">free</span><span class="token punctuation">(</span>threadid<span class="token punctuation">)</span><span class="token punctuation">;</span>threadid <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token class-name">pthread_t</span> thread<span class="token punctuation">[</span>NUM_THREADS<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token class-name">pthread_attr_t</span> attr<span class="token punctuation">;</span> <span class="token keyword">int</span> rc<span class="token punctuation">,</span> t<span class="token punctuation">;</span>  <span class="token function">pthread_attr_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//your code here</span><span class="token function">pthread_attr_setdetachstate</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> PTHREAD_CREATE_JOINABLE<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//end of your code</span><span class="token keyword">for</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> t<span class="token operator">&lt;</span>NUM_THREADS<span class="token punctuation">;</span> t<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">int</span><span class="token operator">*</span> id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">*</span>id <span class="token operator">=</span> t<span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Creating thread %d\n"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span> rc <span class="token operator">=</span> <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>thread<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> Print<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>rc<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ERROR; return code from pthread_create() is %d\n"</span><span class="token punctuation">,</span> rc<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span> <span class="token function">pthread_attr_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">for</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> t<span class="token operator">&lt;</span>NUM_THREADS<span class="token punctuation">;</span> t<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">//your code here</span>rc <span class="token operator">=</span> <span class="token function">pthread_join</span><span class="token punctuation">(</span>thread<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//end of your code</span><span class="token keyword">if</span> <span class="token punctuation">(</span>rc<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ERROR; return code from pthread_join() is %d\n"</span><span class="token punctuation">,</span> rc<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Completed join with thread %d\n"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="线程属性-栈管理"><a href="#线程属性-栈管理" class="headerlink" title="线程属性 - 栈管理"></a>线程属性 - 栈管理</h2><p>本节展示了获取与设置当前线程的栈空间的方法。</p><ul><li><code>pthread_attr_getstacksize</code>获取当前线程的栈空间</li><li><code>pthread_attr_setstacksize</code>设置当前线程的栈空间</li></ul><p>POSIX标准并没有指定线程栈的大小，依赖于实现并随实现变化。</p><p>很容易超出默认的栈大小，常见结果：程序终止或者数据损坏。</p><p>安全和可移植的程序应该不依赖于默认的栈限制，但是取而代之的是用<code>pthread_attr_setstacksize</code>分配足够的栈大小。</p><p><code>pthread_attr_getstackaddr</code>和<code>pthread_attr_setstackaddr</code>函数可以被程序用于将栈设置在指定的内存区域。</p><h3 id="函数说明-2"><a href="#函数说明-2" class="headerlink" title="函数说明"></a>函数说明</h3><p>获取当前线程的栈空间</p><pre class="line-numbers language-none"><code class="language-none">int pthread_attr_getstacksize(const pthread_attr_t *restrict attr,                              size_t *restrict stacksize);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p><code>pthread_attr_getstacksize</code> 是一个用于获取线程属性中栈大小的函数。它接受两个参数：一个指向 <code>pthread_attr_t</code> 类型的指针，表示要查询的线程属性；另一个是指向 <code>size_t</code> 类型的指针，用于存储查询到的栈大小。</p><p>函数原型如下：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_attr_getstacksize</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token class-name">pthread_attr_t</span> <span class="token operator">*</span>restrict attr<span class="token punctuation">,</span> <span class="token class-name">size_t</span> <span class="token operator">*</span>restrict stacksize<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>该函数返回一个整数，如果成功获取到栈大小，则返回0；否则返回非零值。</p><p>以下是一个示例代码，演示如何使用 <code>pthread_attr_getstacksize</code> 函数来获取线程属性中的栈大小：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token class-name">pthread_attr_t</span> attr<span class="token punctuation">;</span> <span class="token class-name">size_t</span> stacksize<span class="token punctuation">;</span> <span class="token comment">// 初始化线程属性对象</span> <span class="token function">pthread_attr_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取线程属性中的栈大小</span> <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">pthread_attr_getstacksize</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> <span class="token operator">&amp;</span>stacksize<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Stack size: %zu\n"</span><span class="token punctuation">,</span> stacksize<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>     <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Failed to get stack size\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token comment">// 销毁线程属性对象</span> <span class="token function">pthread_attr_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在上述示例中，我们首先创建了一个 <code>pthread_attr_t</code> 类型的变量 <code>attr</code>，然后使用 <code>pthread_attr_init</code> 函数进行初始化。接下来，调用 <code>pthread_attr_getstacksize</code> 函数来获取线程属性中的栈大小，并将结果存储在 <code>stacksize</code> 变量中。最后，根据返回值判断是否成功获取到栈大小，并打印相应的信息。最后，记得使用 <code>pthread_attr_destroy</code> 函数销毁线程属性对象。</p></blockquote><p>设置当前线程的栈空间</p><pre class="line-numbers language-none"><code class="language-none">int pthread_attr_setstacksize(pthread_attr_t *attr, size_t stacksize);参数：attr - 指向线程属性的指针stacksize - 栈空间大小返回值：0代表成功。若失败，返回的则是错误号。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注：restrict为C语言保留字，用于编译器优化。后同。</p><blockquote><p><code>pthread_attr_setstacksize</code> 是一个用于设置线程属性中栈大小的函数。它接受两个参数：一个指向 <code>pthread_attr_t</code> 类型的指针，表示要设置的线程属性；另一个是 <code>size_t</code> 类型的变量，表示要设置的栈大小。</p><p>函数原型如下：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_attr_setstacksize</span><span class="token punctuation">(</span><span class="token class-name">pthread_attr_t</span> <span class="token operator">*</span>attr<span class="token punctuation">,</span> <span class="token class-name">size_t</span> stacksize<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>该函数返回一个整数，如果成功设置栈大小，则返回0；否则返回非零值。</p><p>以下是一个示例代码，演示如何使用 <code>pthread_attr_setstacksize</code> 函数来设置线程属性中的栈大小：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token class-name">pthread_attr_t</span> attr<span class="token punctuation">;</span> <span class="token class-name">size_t</span> stacksize <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">;</span> <span class="token comment">// 设置栈大小为1MB</span> <span class="token comment">// 初始化线程属性对象</span> <span class="token function">pthread_attr_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置线程属性中的栈大小</span> <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">pthread_attr_setstacksize</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> stacksize<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token function">printf</span><span class="token punctuation">(</span>"Stack size set successfully"<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>     <span class="token function">printf</span><span class="token punctuation">(</span>"Failed to set stack size"<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token comment">// 销毁线程属性对象</span> <span class="token function">pthread_attr_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在上述示例中，我们首先创建了一个 <code>pthread_attr_t</code> 类型的变量 <code>attr</code>，然后使用 <code>pthread_attr_init</code> 函数进行初始化。接下来，调用 <code>pthread_attr_setstacksize</code> 函数来设置线程属性中的栈大小，并将结果存储在 <code>stacksize</code> 变量中。最后，根据返回值判断是否成功设置栈大小，并打印相应的信息。最后，记得使用 <code>pthread_attr_destroy</code> 函数销毁线程属性对象。</p></blockquote><h3 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h3><p>由于并行程序执行顺序的不确定性，你的结果的顺序可能和这个结果不一致。<br>为了比较输出结果，请将环境设置中的并行核数调为1。<br>本实验暂不支持性能评测。</p><blockquote><p>Default stack size &#x3D; 0<br>Amount of stack needed per thread &#x3D; 9000000<br>Creating threads with stack size &#x3D; 9000000 bytes<br>Created 4 threads.<br>Thread 1: stack size &#x3D; 9000000 bytes<br>Thread 2: stack size &#x3D; 9000000 bytes<br>Thread 0: stack size &#x3D; 9000000 bytes<br>Thread 3: stack size &#x3D; 9000000 bytes</p></blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span> </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span> </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NUMTHREADS</span> <span class="token expression"><span class="token number">4</span> </span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">N</span> <span class="token expression"><span class="token number">1000</span> </span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MEGEXTRA</span> <span class="token expression"><span class="token number">1000000</span> </span></span><span class="token class-name">pthread_attr_t</span> attr<span class="token punctuation">;</span> <span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">dowork</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>threadid<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">//The 2-dim array takes up sizeof(double)*N*N bytes.</span><span class="token keyword">double</span> A<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span>j<span class="token punctuation">,</span>tid<span class="token punctuation">;</span> <span class="token class-name">size_t</span> mystacksize<span class="token punctuation">;</span>  tid <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span>threadid<span class="token punctuation">;</span> <span class="token function">pthread_attr_getstacksize</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> <span class="token operator">&amp;</span>mystacksize<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %d: stack size = %li bytes \n"</span><span class="token punctuation">,</span> tid<span class="token punctuation">,</span> mystacksize<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>N<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token keyword">for</span> <span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>N<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> A<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">*</span>j<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">3.452</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>N<span class="token operator">-</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">free</span><span class="token punctuation">(</span>threadid<span class="token punctuation">)</span><span class="token punctuation">;</span>threadid <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token class-name">pthread_t</span> threads<span class="token punctuation">[</span>NUMTHREADS<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token class-name">size_t</span> stacksize<span class="token punctuation">;</span> <span class="token keyword">int</span> rc<span class="token punctuation">,</span> t<span class="token punctuation">;</span> <span class="token function">pthread_attr_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//your code here</span><span class="token function">pthread_attr_getstacksize</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> <span class="token operator">&amp;</span>stacksize<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//end of your code</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Default stack size = %li\n"</span><span class="token punctuation">,</span> stacksize<span class="token punctuation">)</span><span class="token punctuation">;</span> stacksize <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token operator">*</span>N<span class="token operator">*</span>N<span class="token operator">+</span>MEGEXTRA<span class="token punctuation">;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Amount of stack needed per thread = %li\n"</span><span class="token punctuation">,</span>stacksize<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//your code here</span><span class="token function">pthread_attr_setstacksize</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> stacksize<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//end of your code</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Creating threads with stack size = %li bytes\n"</span><span class="token punctuation">,</span>stacksize<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">for</span><span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> t<span class="token operator">&lt;</span>NUMTHREADS<span class="token punctuation">;</span> t<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token keyword">int</span><span class="token operator">*</span> id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">*</span>id <span class="token operator">=</span> t<span class="token punctuation">;</span>rc <span class="token operator">=</span> <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>threads<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> dowork<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>rc<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ERROR; return code from pthread_create() is %d\n"</span><span class="token punctuation">,</span> rc<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Created %d threads.\n"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="互斥锁-1"><a href="#互斥锁-1" class="headerlink" title="互斥锁(1)"></a>互斥锁(1)</h2><ul><li>定义一个互斥锁</li><li><code>pthread_mutex_init</code>互斥锁的初始化</li><li><code>pthread_mutex_destroy</code>互斥锁的销毁</li><li><code>pthread_mutex_lock</code>加锁</li><li><code>pthread_mutex_unlock</code>解锁</li></ul><p>互斥锁(Mutex)是“mutual exclusion”的缩写。互斥锁是实现线程同步，和保护同时写共享数据的主要方法<br>互斥锁对共享数据的保护就像一把锁。在Pthreads中，任何时候仅有一个线程可以锁定互斥锁，因此，当多个线程尝试去锁定该互斥锁时仅有一个会成功。直到锁定互斥锁的线程解锁互斥锁后，其他线程才可以去锁定互斥锁。线程必须轮着访问受保护数据。<br>互斥锁可以防止“竞争”条件。</p><p>用互斥锁的典型顺序如下：</p><ol><li>创建和初始一个互斥锁</li><li>多个线程尝试去锁定该互斥锁</li><li>仅有一个线程可以成功锁定改互斥锁</li><li>锁定成功的线程做一些处理</li><li>线程解锁该互斥锁</li><li>另外一个线程获得互斥锁，重复上述过程</li><li>最后销毁互斥锁</li></ol><h3 id="函数说明："><a href="#函数说明：" class="headerlink" title="函数说明："></a>函数说明：</h3><p>定义一个互斥锁</p><pre class="line-numbers language-none"><code class="language-none">pthread_mutex_t mutex &#x3D; PTHREAD_MUTEX_INITIALIZER;PTHREAD_MUTEX_INITIALIZER是定义在头文件中的宏，能用于初始化静态分配空间的互斥锁。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>这是C语言中用于初始化互斥锁的代码。<code>pthread_mutex_t</code> 是互斥锁的类型，<code>PTHREAD_MUTEX_INITIALIZER</code> 是一个宏，用于初始化互斥锁。</p><p>解析：</p><ol><li><code>pthread_mutex_t mutex;</code>：声明一个互斥锁变量 <code>mutex</code>。</li><li><code>= PTHREAD_MUTEX_INITIALIZER;</code>：使用 <code>PTHREAD_MUTEX_INITIALIZER</code> 宏来初始化互斥锁。</li></ol><p>代码：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">pthread_mutex_t</span> mutex <span class="token operator">=</span> PTHREAD_MUTEX_INITIALIZER<span class="token punctuation">;</span>    <span class="token comment">// 其他代码...</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><p>互斥锁的初始化</p><pre class="line-numbers language-none"><code class="language-none">int pthread_mutex_init(pthread_mutex_t *restrict mutex,                       const pthread_mutexattr_t *restrict attr);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p><code>int pthread_mutex_init(pthread_mutex_t *restrict mutex, const pthread_mutexattr_t *restrict attr);</code> 是一个用于初始化互斥锁的函数。它接受两个参数：</p><ol><li><code>pthread_mutex_t *restrict mutex</code>：指向要初始化的互斥锁对象的指针。</li><li><code>const pthread_mutexattr_t *restrict attr</code>：指向互斥锁属性对象的指针，该对象定义了互斥锁的行为和属性。如果设置为NULL，则使用默认的属性。</li></ol><p>函数返回一个整数，表示操作的结果。如果成功，返回0；否则，返回一个非零的错误码。</p><p>以下是一个示例代码，演示如何使用 <code>pthread_mutex_init</code> 函数来初始化一个互斥锁：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">pthread_mutex_t</span> myMutex<span class="token punctuation">;</span>    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">pthread_mutex_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>myMutex<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 互斥锁初始化成功</span>        <span class="token comment">// 在这里可以使用互斥锁进行线程同步操作</span>        <span class="token comment">// ...</span>        <span class="token comment">// 释放互斥锁资源</span>        <span class="token function">pthread_mutex_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>myMutex<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 互斥锁初始化失败，处理错误情况</span>        <span class="token comment">// ...</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>请注意，在使用完互斥锁后，需要调用 <code>pthread_mutex_destroy</code> 函数来释放互斥锁资源，以避免内存泄漏。</p></blockquote><p>互斥锁的销毁</p><pre class="line-numbers language-none"><code class="language-none">int pthread_mutex_destroy(pthread_mutex_t *mutex);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><code>int pthread_mutex_destroy(pthread_mutex_t *mutex);</code> 是一个用于销毁互斥锁的函数。它接受一个指向 <code>pthread_mutex_t</code> 类型的指针作为参数，该指针指向要销毁的互斥锁对象。</p><p>当调用此函数时，它将释放互斥锁所占用的系统资源，并使互斥锁处于未锁定状态。在销毁互斥锁之前，必须先确保没有任何线程正在使用该互斥锁进行同步操作。</p><p>以下是一个示例代码，演示如何使用 <code>pthread_mutex_destroy</code> 函数来销毁互斥锁：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token comment">// 创建互斥锁</span><span class="token class-name">pthread_mutex_t</span> myMutex<span class="token punctuation">;</span><span class="token function">pthread_mutex_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>myMutex<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 执行一些需要同步的操作...</span><span class="token comment">// 销毁互斥锁</span><span class="token function">pthread_mutex_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>myMutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>请注意，在使用 <code>pthread_mutex_destroy</code> 函数之前，必须确保互斥锁已经被正确地初始化，并且没有其他线程正在使用它进行同步操作。</p></blockquote><p>加锁</p><pre class="line-numbers language-none"><code class="language-none">int pthread_mutex_lock(pthread_mutex_t *mutex);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><code>int pthread_mutex_lock(pthread_mutex_t *mutex);</code> 是一个用于锁定互斥锁的函数。它接受一个指向 <code>pthread_mutex_t</code> 类型的指针作为参数，该指针指向要锁定的互斥锁对象。</p><p>当调用此函数时，它将尝试获取互斥锁的所有权。如果互斥锁已经被其他线程锁定，则当前线程将被阻塞，直到互斥锁被释放。如果成功获取到互斥锁的所有权，函数将返回0；否则，返回非零错误码。</p><p>以下是一个示例代码，演示如何使用 <code>pthread_mutex_lock</code> 函数来锁定互斥锁：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token comment">// 创建互斥锁</span><span class="token class-name">pthread_mutex_t</span> myMutex<span class="token punctuation">;</span><span class="token function">pthread_mutex_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>myMutex<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 执行一些需要同步的操作...</span><span class="token comment">// 锁定互斥锁</span><span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>myMutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 互斥锁已成功锁定，可以执行临界区代码</span> <span class="token comment">// ...</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 互斥锁锁定失败，处理错误情况</span> <span class="token comment">// ...</span><span class="token punctuation">&#125;</span><span class="token comment">// 解锁互斥锁</span><span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>myMutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 销毁互斥锁</span><span class="token function">pthread_mutex_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>myMutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>请注意，在使用 <code>pthread_mutex_lock</code> 函数之前，必须确保互斥锁已经被正确地初始化，并且没有其他线程正在使用它进行同步操作。在完成对互斥锁的使用后，应该使用 <code>pthread_mutex_unlock</code> 函数来释放互斥锁的所有权，并最终使用 <code>pthread_mutex_destroy</code> 函数来销毁互斥锁对象。</p></blockquote><p>解锁</p><pre class="line-numbers language-none"><code class="language-none">int pthread_mutex_unlock(pthread_mutex_t *mutex);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><code>int pthread_mutex_unlock(pthread_mutex_t *mutex);</code> 是一个用于解锁互斥锁的函数。它接受一个指向 <code>pthread_mutex_t</code> 类型的指针作为参数，该指针指向要解锁的互斥锁对象。</p><p>当调用此函数时，它将释放互斥锁的所有权，并允许其他线程获取互斥锁进行同步操作。如果成功解锁互斥锁，函数将返回0；否则，返回非零错误码。</p><p>以下是一个示例代码，演示如何使用 <code>pthread_mutex_unlock</code> 函数来解锁互斥锁：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token comment">// 创建互斥锁</span><span class="token class-name">pthread_mutex_t</span> myMutex<span class="token punctuation">;</span><span class="token function">pthread_mutex_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>myMutex<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 执行一些需要同步的操作...</span><span class="token comment">// 锁定互斥锁</span><span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>myMutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 执行临界区代码</span><span class="token comment">// ...</span><span class="token comment">// 解锁互斥锁</span><span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>myMutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 销毁互斥锁</span><span class="token function">pthread_mutex_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>myMutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>请注意，在使用 <code>pthread_mutex_unlock</code> 函数之前，必须确保互斥锁已经被正确地初始化，并且当前线程已经获得了互斥锁的所有权。在完成对互斥锁的使用后，应该使用 <code>pthread_mutex_destroy</code> 函数来销毁互斥锁对象。</p></blockquote><h3 id="运行结果："><a href="#运行结果：" class="headerlink" title="运行结果："></a>运行结果：</h3><blockquote><p>0<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10</p></blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span>  </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span>  </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h></span>  </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span>  <span class="token keyword">int</span> i<span class="token punctuation">;</span>  <span class="token class-name">pthread_mutex_t</span> mutex1<span class="token punctuation">;</span>    <span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">readfunction</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">writefunction</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>  <span class="token class-name">pthread_t</span> thread1<span class="token punctuation">,</span>thread2<span class="token punctuation">;</span>    i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">//your code here</span><span class="token function">pthread_mutex_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex1<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//end of your code</span><span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>thread1<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">,</span>readfunction<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>thread2<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">,</span>writefunction<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">pthread_join</span><span class="token punctuation">(</span>thread1<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">pthread_join</span><span class="token punctuation">(</span>thread2<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//your code here</span><span class="token function">pthread_mutex_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//end of your code</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">readfunction</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> args<span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>  <span class="token function">usleep</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">>=</span> <span class="token number">10</span><span class="token punctuation">)</span>  <span class="token keyword">break</span><span class="token punctuation">;</span>  <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex1<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex1<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">writefunction</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> args<span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>  <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex1<span class="token punctuation">)</span><span class="token punctuation">;</span>  i<span class="token operator">++</span><span class="token punctuation">;</span>  <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex1<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">usleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="互斥锁-2"><a href="#互斥锁-2" class="headerlink" title="互斥锁(2)"></a>互斥锁(2)</h2><ul><li><code>pthread_mutex_trylock</code>是<code>pthread_mutex_lock</code>的非阻塞版本，调用后立即返回。</li></ul><h3 id="函数原型"><a href="#函数原型" class="headerlink" title="函数原型"></a>函数原型</h3><pre class="line-numbers language-none"><code class="language-none">int pthread_mutex_trylock(pthread_mutex_t *mutex); <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>int pthread_mutex_trylock(pthread_mutex_t *mutex);</code> 是一个用于尝试获取互斥锁的函数。它接受一个指向 <code>pthread_mutex_t</code> 类型的指针作为参数，该指针指向要锁定的互斥锁对象。</p><p>如果成功获取到互斥锁的所有权，函数将返回0；否则，返回非零错误码。这个函数与 <code>pthread_mutex_lock</code> 函数类似，但不会阻塞当前线程，而是立即返回结果。这在某些情况下可能更有用，例如在高并发场景下，可以避免不必要的线程阻塞。</p><h3 id="运行结果-1"><a href="#运行结果-1" class="headerlink" title="运行结果"></a>运行结果</h3><blockquote><p>pthread b trylock<br>the main close</p></blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token class-name">pthread_mutex_t</span> mutex<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">thread_a</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">thread_b</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token comment">/*your code here*/</span><span class="token function">pthread_mutex_trylock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"pthread b trylock\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">pthread_t</span> tid_a<span class="token punctuation">,</span>tid_b<span class="token punctuation">;</span>    <span class="token function">pthread_mutex_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid_a<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">,</span>thread_a<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid_b<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">,</span>thread_b<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_join</span><span class="token punctuation">(</span>tid_a<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_join</span><span class="token punctuation">(</span>tid_b<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"the main close\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="条件变量-1"><a href="#条件变量-1" class="headerlink" title="条件变量(1)"></a>条件变量(1)</h2><ul><li>条件变量的初始化</li><li><code>pthread_cond_init</code>创建条件变量</li><li><code>pthread_cond_destroy</code>删除条件变量</li><li><code>pthread_cond_wait</code>等待条件变量为真</li><li><code>pthread_cond_signal</code>解锁阻塞在条件变量上的进程</li></ul><h3 id="实验步骤"><a href="#实验步骤" class="headerlink" title="实验步骤"></a>实验步骤</h3><p>条件变量是用来通知共享数据状态信息的。<br>条件变量机制允许进程停止当前的执行，让出CPU时间，直到条件为真。<br>每个条件变量必须与一个特定的互斥量相关联以避免死锁。</p><p><code>pthread_cond_wait</code>总和一个互斥锁结合使用。<br>在调用<code>pthread_cond_wait</code>前要先获取锁。<br><code>pthread_cond_wait</code>函数执行时先自动释放指定的锁，然后等待条件变量的变化。在函数调用返回之前，自动将指定的互斥量重新锁住。<br>调用<code>pthread_cond_signal</code>后要立刻释放互斥锁。</p><h3 id="函数说明-3"><a href="#函数说明-3" class="headerlink" title="函数说明"></a>函数说明</h3><p>初始化</p><pre class="line-numbers language-none"><code class="language-none">pthread_cond_t cod &#x3D; PTHREAD_COND_INITIALIZER;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><code>pthread_cond_t cod = PTHREAD_COND_INITIALIZER;</code> 这行代码是用于初始化一个条件变量 <code>cod</code>。条件变量是一种同步原语，用于在多线程环境中实现线程间的同步和通信。</p><p>在这段代码中，<code>PTHREAD_COND_INITIALIZER</code> 是一个宏定义，它表示一个已经初始化的条件变量对象。通过将其赋值给 <code>cod</code>，我们可以将这个条件变量对象与 <code>cod</code> 关联起来。</p><p>使用条件变量可以使得多个线程等待某个条件成立时才继续执行。例如，当一个线程需要等待另一个线程完成某个任务后才能继续执行时，可以使用条件变量来实现这种同步机制。</p><p>以下是一个示例代码片段，演示如何使用条件变量进行线程同步：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token comment">// 全局变量作为条件变量的标识符</span><span class="token class-name">pthread_cond_t</span> cond <span class="token operator">=</span> PTHREAD_COND_INITIALIZER<span class="token punctuation">;</span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">thread1</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> arg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 线程1等待条件变量满足</span> <span class="token function">pthread_cond_wait</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>cond<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread 1: Condition satisfied!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">thread2</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> arg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 线程2等待条件变量满足</span> <span class="token function">pthread_cond_wait</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>cond<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread 2: Condition satisfied!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token class-name">pthread_t</span> t1<span class="token punctuation">,</span> t2<span class="token punctuation">;</span> <span class="token comment">// 创建两个线程并启动</span> <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>t1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> thread1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>t2<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> thread2<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 主线程等待一段时间，模拟其他操作</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 发送信号通知条件变量已满足</span> <span class="token function">pthread_cond_signal</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>cond<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">pthread_cond_signal</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>cond<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 等待线程结束</span> <span class="token function">pthread_join</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">pthread_join</span><span class="token punctuation">(</span>t2<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在上面的示例中，我们创建了两个线程 <code>thread1</code> 和 <code>thread2</code>，它们都等待条件变量 <code>cond</code> 被满足。在主线程中，我们通过调用 <code>pthread_cond_signal</code> 函数来发送信号，通知条件变量已满足。这样，等待的线程就可以继续执行了。</p></blockquote><p>创建条件变量</p><pre class="line-numbers language-none"><code class="language-none">int pthread_cond_init(pthread_cond_t *cond, pthread_condattr_t *condattr);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><code>int pthread_cond_init(pthread_cond_t *cond, pthread_condattr_t *condattr);</code> 是一个用于初始化条件变量的函数。它接受两个参数：</p><ol><li><code>pthread_cond_t *cond</code>：指向要初始化的条件变量的指针。</li><li><code>pthread_condattr_t *condattr</code>：指向条件变量属性的指针，可以为 NULL。如果为 NULL，则使用默认属性。</li></ol><p>函数返回一个整数，表示操作的结果。如果成功，返回 0；否则，返回错误码。</p></blockquote><p>删除条件变量</p><pre class="line-numbers language-none"><code class="language-none">int pthread_cond_destroy(pthread_cond_t *cond);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><code>int pthread_cond_destroy(pthread_cond_t *cond);</code> 是一个用于销毁条件变量的函数。它接受一个指向要销毁的条件变量的指针作为参数。</p><p>函数返回一个整数，表示操作的结果。如果成功，返回 0；否则，返回错误码。</p></blockquote><p>等待条件变量为真</p><pre class="line-numbers language-none"><code class="language-none">int pthread_cond_wait(pthread_cond_t *restrict cond, pthread_mutex_t *restrict mutex);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><code>int pthread_cond_wait(pthread_cond_t *restrict cond, pthread_mutex_t *restrict mutex);</code> 是一个用于线程等待条件的函数。它接受两个参数：</p><ol><li><code>pthread_cond_t *restrict cond</code>：指向要等待的条件变量的指针。</li><li><code>pthread_mutex_t *restrict mutex</code>：指向互斥锁的指针，用于保护条件变量。</li></ol><p>函数返回一个整数，表示操作的结果。如果成功，返回 0；否则，返回错误码。</p></blockquote><p>解锁阻塞在条件变量上的进程</p><pre class="line-numbers language-none"><code class="language-none">int pthread_cond_signal(pthread_cond_t *cond);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><code>int pthread_cond_signal(pthread_cond_t *cond);</code> 是一个用于唤醒等待条件变量的线程的函数。它接受一个指向条件变量的指针作为参数。</p><p>函数返回一个整数，表示操作的结果。如果成功，返回 0；否则，返回错误码。</p></blockquote><h3 id="运行结果-2"><a href="#运行结果-2" class="headerlink" title="运行结果"></a>运行结果</h3><blockquote><p>Counter value functionCount1: 1<br>Counter value functionCount2: 2<br>Counter value functionCount1: 3<br>Counter value functionCount2: 4<br>Counter value functionCount2: 5<br>Counter value functionCount2: 6<br>Counter value functionCount2: 7<br>Counter value functionCount2: 8<br>Counter value functionCount1: 9<br>Counter value functionCount2: 10<br>Counter value functionCount1: 11</p></blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token class-name">pthread_mutex_t</span> count_mutex     <span class="token operator">=</span> PTHREAD_MUTEX_INITIALIZER<span class="token punctuation">;</span><span class="token class-name">pthread_mutex_t</span> condition_mutex <span class="token operator">=</span> PTHREAD_MUTEX_INITIALIZER<span class="token punctuation">;</span><span class="token class-name">pthread_cond_t</span>  condition_cond  <span class="token operator">=</span> PTHREAD_COND_INITIALIZER<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">functionCount1</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">functionCount2</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span>  count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">COUNT_DONE</span>  <span class="token expression"><span class="token number">10</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">COUNT_HALT1</span>  <span class="token expression"><span class="token number">3</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">COUNT_HALT2</span>  <span class="token expression"><span class="token number">6</span></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>   <span class="token class-name">pthread_t</span> thread1<span class="token punctuation">,</span> thread2<span class="token punctuation">;</span>   <span class="token function">pthread_create</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>thread1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>functionCount1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">pthread_create</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>thread2<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>functionCount2<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">pthread_join</span><span class="token punctuation">(</span> thread1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">pthread_join</span><span class="token punctuation">(</span> thread2<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">functionCount1</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> args<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>   <span class="token punctuation">&#123;</span>      <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>condition_mutex <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">while</span><span class="token punctuation">(</span> count <span class="token operator">>=</span> COUNT_HALT1 <span class="token operator">&amp;&amp;</span> count <span class="token operator">&lt;=</span> COUNT_HALT2 <span class="token punctuation">)</span>      <span class="token punctuation">&#123;</span><span class="token comment">//your code here</span>        <span class="token function">pthread_cond_wait</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>condition_cond<span class="token punctuation">,</span> <span class="token operator">&amp;</span>condition_mutex <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//end of your code</span>      <span class="token punctuation">&#125;</span>      <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>condition_mutex <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>count_mutex <span class="token punctuation">)</span><span class="token punctuation">;</span>      count<span class="token operator">++</span><span class="token punctuation">;</span>      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Counter value functionCount1: %d\n"</span><span class="token punctuation">,</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>count_mutex <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>count <span class="token operator">>=</span> COUNT_DONE<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">functionCount2</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> args<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>       <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>condition_mutex <span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">if</span><span class="token punctuation">(</span> count <span class="token operator">&lt;</span> COUNT_HALT1 <span class="token operator">||</span> count <span class="token operator">></span> COUNT_HALT2 <span class="token punctuation">)</span>       <span class="token punctuation">&#123;</span>        <span class="token comment">//your code here</span>        <span class="token function">pthread_cond_signal</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>condition_cond <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//end of your code</span>       <span class="token punctuation">&#125;</span>       <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>condition_mutex <span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>count_mutex <span class="token punctuation">)</span><span class="token punctuation">;</span>       count<span class="token operator">++</span><span class="token punctuation">;</span>       <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Counter value functionCount2: %d\n"</span><span class="token punctuation">,</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>count_mutex <span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>count <span class="token operator">>=</span> COUNT_DONE<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="条件变量-2"><a href="#条件变量-2" class="headerlink" title="条件变量(2)"></a>条件变量(2)</h2><p>本节继续展示条件变量的相关方法</p><ul><li><code>pthread_cond_broadcast</code>解除所有被某个条件变量阻塞的进程</li></ul><p><code>pthread_cond_broadcast</code>可用于解除所有被某个条件变量阻塞的进程<br>与<code>pthread_cond_signal</code>函数相似，<code>pthread_cond_broadcast</code>函数执行时先自动释放指定的锁，然后等待条件变量的变化。在函数调用返回之前，自动将指定的互斥量重新锁住</p><h3 id="函数说明-4"><a href="#函数说明-4" class="headerlink" title="函数说明"></a>函数说明</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_cond_broadcast</span><span class="token punctuation">(</span><span class="token class-name">pthread_cond_t</span> <span class="token operator">*</span>cond<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>pthread_cond_broadcast</code>是一个POSIX线程库函数，用于唤醒所有等待某个条件变量的线程。它的原型如下：</p><p>参数：</p><ul><li><code>cond</code>：指向要广播的条件变量的指针</li></ul><p>返回值：</p><ul><li>成功时返回0；失败时返回错误码</li></ul><h3 id="运行结果-3"><a href="#运行结果-3" class="headerlink" title="运行结果"></a>运行结果</h3><blockquote><p>thread 1 waiting for signal<br>thread 2 waiting for signal<br>main thread broadcasts signal<br>thread 2 receives signal<br>thread 1 receives signal</p></blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span>  </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span>  </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h></span>  </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span>   <span class="token keyword">static</span> <span class="token class-name">pthread_mutex_t</span> mtx<span class="token operator">=</span>PTHREAD_MUTEX_INITIALIZER<span class="token punctuation">;</span>  <span class="token keyword">static</span> <span class="token class-name">pthread_cond_t</span> cond<span class="token operator">=</span>PTHREAD_COND_INITIALIZER<span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">func_1</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> arg<span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>      <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mtx<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread 1 waiting for signal\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_cond_wait</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>cond<span class="token punctuation">,</span> <span class="token operator">&amp;</span>mtx<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread 1 receives signal\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mtx<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>    <span class="token keyword">static</span> <span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">func_2</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> arg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mtx<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread 2 waiting for signal\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_cond_wait</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>cond<span class="token punctuation">,</span> <span class="token operator">&amp;</span>mtx<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread 2 receives signal\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mtx<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>      <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>      <span class="token class-name">pthread_t</span> tid1<span class="token punctuation">,</span> tid2<span class="token punctuation">;</span>        <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> func_1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid2<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> func_2<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"main thread broadcasts signal\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//your code here</span>    <span class="token function">pthread_cond_broadcast</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>cond<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//end of your code</span>      <span class="token function">pthread_join</span><span class="token punctuation">(</span>tid1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">pthread_join</span><span class="token punctuation">(</span>tid2<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="障碍同步"><a href="#障碍同步" class="headerlink" title="障碍同步"></a>障碍同步</h2><p>本节展示了障碍同步的相关方法。</p><ul><li><code>pthread_barrier_init</code>障碍初始化</li><li><code>pthread_barrier_wait</code>障碍等待</li><li><code>pthread_barrier_destroy</code>障碍销毁</li></ul><p>障碍同步(Barrier Synchronization)是Pthread中另外一种同步机制。<br>barrier意为栏杆，形象的说就是把先后到达的多个线程挡在同一栏杆前，直到所有线程到齐，然后撤下栏杆同时放行。</p><h3 id="函数原型-1"><a href="#函数原型-1" class="headerlink" title="函数原型"></a>函数原型</h3><pre class="line-numbers language-none"><code class="language-none">int pthread_barrier_init(pthread_barrier_t *restrict barrier, const pthread_barrierattr_t *restrict attr, unsigned count);int pthread_barrier_wait(pthread_barrier_t *barrier);int pthread_barrier_destroy(pthread_barrier_t *barrier);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p><code>pthread_barrier_init</code>函数用于初始化一个屏障对象。它接受三个参数：</p><ol><li><code>barrier</code>：指向要初始化的屏障对象的指针。</li><li><code>attr</code>：指向屏障属性对象的指针，可以为NULL。如果为NULL，则使用默认的属性。</li><li><code>count</code>：需要等待的线程数量。当所有线程都调用了<code>pthread_barrier_wait</code>函数后，屏障将被解除。</li></ol><p>函数返回0表示成功，非0表示失败。</p></blockquote><blockquote><p><code>pthread_barrier_wait</code>函数用于让当前线程等待其他线程到达屏障。它接受一个指向<code>pthread_barrier_t</code>类型的指针作为参数，该指针指向要等待的屏障对象。</p><p>当调用<code>pthread_barrier_wait</code>时，当前线程将被阻塞，直到所有其他线程都到达屏障。一旦所有线程都到达屏障，它们将继续执行并解除阻塞。</p><p>以下是一个示例代码，演示了如何使用<code>pthread_barrier_wait</code>函数：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token comment">// 定义线程数量和屏障对象</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NUM_THREADS</span> <span class="token expression"><span class="token number">5</span></span></span><span class="token class-name">pthread_barrier_t</span> barrier<span class="token punctuation">;</span><span class="token comment">// 线程函数</span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">threadFunction</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> arg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %ld is waiting on barrier\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">pthread_barrier_wait</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>barrier<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 等待其他线程到达屏障</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %ld has crossed the barrier\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token class-name">pthread_t</span> threads<span class="token punctuation">[</span>NUM_THREADS<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 初始化屏障对象</span> <span class="token function">pthread_barrier_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>barrier<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> NUM_THREADS<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建并启动线程</span> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_THREADS<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>threads<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> threadFunction<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token comment">// 等待所有线程完成</span> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_THREADS<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token function">pthread_join</span><span class="token punctuation">(</span>threads<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token comment">// 销毁屏障对象</span> <span class="token function">pthread_barrier_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>barrier<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在上述示例中，我们创建了一个包含5个线程的线程池，并使用<code>pthread_barrier_wait</code>函数来同步这些线程。每个线程在到达屏障之前都会打印一条消息，表示正在等待其他线程。一旦所有线程都到达屏障，它们将打印另一条消息，表示已经跨越了屏障。最后，主线程等待所有子线程完成，然后销毁屏障对象。</p></blockquote><blockquote><p><code>int pthread_barrier_destroy(pthread_barrier_t *barrier);</code> 是一个用于销毁线程屏障的函数。当一个线程屏障不再需要时，可以调用此函数来释放资源。</p><p>该函数接受一个指向 <code>pthread_barrier_t</code> 结构的指针作为参数，该结构表示要销毁的线程屏障。函数返回一个整数，表示操作的结果。如果成功销毁了线程屏障，则返回0；否则返回非零错误代码。</p><p>以下是一个示例代码，演示如何使用 <code>pthread_barrier_destroy</code> 函数：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token comment">// 定义线程数量和屏障对象</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NUM_THREADS</span> <span class="token expression"><span class="token number">5</span></span></span><span class="token class-name">pthread_barrier_t</span> barrier<span class="token punctuation">;</span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">threadFunction</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> arg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %ld is waiting on barrier\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">pthread_barrier_wait</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>barrier<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 等待其他线程到达屏障</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %ld has crossed the barrier\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token class-name">pthread_t</span> threads<span class="token punctuation">[</span>NUM_THREADS<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 初始化线程并启动它们</span> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_THREADS<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>threads<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> threadFunction<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token comment">// 等待所有线程完成</span> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_THREADS<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token function">pthread_join</span><span class="token punctuation">(</span>threads<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token comment">// 销毁线程屏障</span> <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">pthread_barrier_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>barrier<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Barrier destroyed successfully\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>     <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Failed to destroy barrier\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在上述示例中，我们创建了一个包含5个线程的线程池，每个线程都执行 <code>threadFunction</code> 函数。在函数中，线程使用 <code>pthread_barrier_wait</code> 函数等待其他线程到达屏障。一旦所有线程都到达屏障，它们将打印消息并继续执行。</p><p>在主函数中，我们首先启动所有线程，然后等待它们完成。最后，我们调用 <code>pthread_barrier_destroy</code> 函数来销毁线程屏障，并根据返回值判断是否成功销毁。</p></blockquote><h3 id="运行结果-4"><a href="#运行结果-4" class="headerlink" title="运行结果"></a>运行结果</h3><blockquote><p>Task1 will be blocked.<br>main process will sleep 1s.<br>Task2 will be blocked.<br>Task1 is running.<br>Task2 is running.</p></blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;time.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NUM_THREADS</span> <span class="token expression"><span class="token number">2</span></span></span><span class="token class-name">pthread_barrier_t</span> barrier<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">Task1</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">Task2</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> policy<span class="token punctuation">,</span> inher<span class="token punctuation">;</span>    <span class="token class-name">pthread_t</span> tid<span class="token punctuation">;</span>    <span class="token class-name">pthread_attr_t</span> attr<span class="token punctuation">;</span>    <span class="token keyword">struct</span> <span class="token class-name">sched_param</span> param<span class="token punctuation">;</span>    <span class="token function">pthread_attr_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_barrier_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>barrier<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> NUM_THREADS <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid<span class="token punctuation">,</span> <span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> Task1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid<span class="token punctuation">,</span> <span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> Task2<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"main process will sleep 1s.\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_barrier_wait</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>barrier<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_join</span><span class="token punctuation">(</span>tid<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_barrier_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>barrier<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">Task1</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Task1 will be blocked.\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// your code here</span>    <span class="token function">pthread_barrier_wait</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>barrier<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// end of your code</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Task1 is running.\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">Task2</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Task2 will be blocked.\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// your code here</span>    <span class="token function">pthread_barrier_wait</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>barrier<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// end of your code</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Task2 is running.\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="获取调用线程标识号"><a href="#获取调用线程标识号" class="headerlink" title="获取调用线程标识号"></a>获取调用线程标识号</h2><p>本节展示了获取调用线程标识号的方法。</p><ul><li><code>pthread_self</code>获取调用线程标识号</li></ul><h3 id="函数说明-5"><a href="#函数说明-5" class="headerlink" title="函数说明"></a>函数说明</h3><pre class="line-numbers language-none"><code class="language-none">pthread_t pthread_self(void);返回调用线程标识号，返回类型为pthread_t<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>pthread_t pthread_self(void);</code> 是一个用于获取当前线程标识符的函数。在C语言中，可以使用POSIX线程库（pthread）来实现多线程编程。这个函数返回一个 <code>pthread_t</code> 类型的值，表示当前线程的唯一标识符。</p><h3 id="运行结果-5"><a href="#运行结果-5" class="headerlink" title="运行结果"></a>运行结果</h3><blockquote><p>main thread:  pid 1588 tid 2 (0x2)<br>new thread:  pid 1588 tid 1 (0x1)</p></blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">printids</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>str <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>arg<span class="token punctuation">;</span>    <span class="token class-name">pid_t</span> pid<span class="token punctuation">;</span>    <span class="token class-name">pthread_t</span> tid<span class="token punctuation">;</span>      pid <span class="token operator">=</span> <span class="token function">getpid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//your code here</span>    tid <span class="token operator">=</span> <span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//end of your code</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s pid %u tid %u (0x%x)\n"</span><span class="token punctuation">,</span> str<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span>pid<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span>tid<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span>tid<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span> <span class="token comment">// 添加返回语句</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">pthread_t</span> tid<span class="token punctuation">;</span>    <span class="token keyword">int</span> err<span class="token punctuation">;</span>        err <span class="token operator">=</span> <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> printids<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token string">"new thread: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> <span class="token string">"can't create thread: %s\n"</span><span class="token punctuation">,</span> <span class="token function">strerror</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token function">printids</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token string">"main thread: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="线程取消"><a href="#线程取消" class="headerlink" title="线程取消"></a>线程取消</h2><p>pthread_cancel调用并不等待线程终止，它只提出请求。线程在取消请求(pthread_cancel)发出后会继续运行。</p><h3 id="函数说明-6"><a href="#函数说明-6" class="headerlink" title="函数说明"></a>函数说明</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_cancel</span><span class="token punctuation">(</span><span class="token class-name">pthread_t</span> thread<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>int pthread_cancel(pthread_t thread);</code> 用于请求取消指定线程。它接受一个 <code>pthread_t</code> 类型的参数，表示要取消的线程标识符。如果成功取消线程，函数返回0；否则返回错误码。这个函数允许主线程或者其他线程发起对目标线程的取消请求。</p><p>参数说明：</p><ul><li><code>pthread_t thread</code>：要取消的线程标识符，即你想结束的那个线程的句柄。</li></ul><p>返回值：</p><ul><li>如果成功发送了取消请求，则返回0。</li><li>如果发生错误（例如，无效的线程ID），则返回非零错误代码。</li></ul><p>注意：</p><ol><li><p>取消一个线程并不意味着它会立即停止执行。目标线程必须检查并处理取消请求才能真正终止。通常情况下，线程需要在安全点检查<code>pthread_cancel</code>状态，并调用<code>pthread_testcancel</code>来响应取消请求。</p></li><li><p>线程可以通过设置取消类型为<code>PTHREAD_CANCEL_DISABLE</code>来暂时禁用取消，或者通过调用<code>pthread_setcancelstate</code>函数改变其取消状态。</p></li><li><p>为了正确地清理资源，线程可以注册一个取消处理函数(<code>pthread_cleanup_push</code>和<code>pthread_cleanup_pop</code>)，当线程被取消时，这些函数会被自动调用。</p></li><li><p>默认情况下，线程的取消类型是<code>PTHREAD_CANCEL_DEFERRED</code>，这意味着只有在线程进入取消点时才会真正取消。若要使取消立即生效，可以将线程的取消类型设置为<code>PTHREAD_CANCEL_ASYNCHRONOUS</code>。</p></li></ol><p>示例：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">thread_function</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> arg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 在这里进行线程任务...</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 定期检查取消状态</span>        <span class="token function">pthread_testcancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 这里做一些工作...</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">pthread_t</span> thread_id<span class="token punctuation">;</span>    <span class="token keyword">int</span> rc<span class="token punctuation">;</span>    <span class="token comment">// 创建线程</span>    rc <span class="token operator">=</span> <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>thread_id<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> thread_function<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>rc<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Error: Unable to create thread, %d\n"</span><span class="token punctuation">,</span> rc<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">exit</span><span class="token punctuation">(</span>EXIT_FAILURE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 在某个时刻决定取消线程</span>    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 假设等待一段时间后决定取消线程</span>    rc <span class="token operator">=</span> <span class="token function">pthread_cancel</span><span class="token punctuation">(</span>thread_id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>rc<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Error: Unable to cancel thread, %d\n"</span><span class="token punctuation">,</span> rc<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread cancellation requested.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 等待被取消的线程终止</span>    <span class="token function">pthread_join</span><span class="token punctuation">(</span>thread_id<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="运行结果-6"><a href="#运行结果-6" class="headerlink" title="运行结果"></a>运行结果</h3><p>为了比较输出结果，请将环境设置中的并行核数调为1。本实验暂不支持性能评测。</p><blockquote><p>thread 1 returning<br>thread 1 exit code 1<br>thread 2 exiting<br>thread 2 exit code 2<br>thread 3 writing<br>thread 3 writing<br>thread 3 writing<br>thread 3 exit code -1</p></blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">thr_fn1</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread 1 returning\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">thr_fn2</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread 2 exiting\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">thr_fn3</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> time <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        time<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread 3 writing\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>time <span class="token operator">>=</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">pthread_t</span> tid<span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token operator">*</span>retval<span class="token punctuation">;</span>    <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> thr_fn1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_join</span><span class="token punctuation">(</span>tid<span class="token punctuation">,</span> <span class="token operator">&amp;</span>retval<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread 1 exit code %d\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token class-name">intptr_t</span><span class="token punctuation">)</span>retval<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 修复类型转换</span>    <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> thr_fn2<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_join</span><span class="token punctuation">(</span>tid<span class="token punctuation">,</span> <span class="token operator">&amp;</span>retval<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread 2 exit code %d\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token class-name">intptr_t</span><span class="token punctuation">)</span>retval<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 修复类型转换</span>    <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> thr_fn3<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//your code here</span>    <span class="token function">pthread_cancel</span><span class="token punctuation">(</span>tid<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//end of your code</span>    <span class="token function">pthread_join</span><span class="token punctuation">(</span>tid<span class="token punctuation">,</span> <span class="token operator">&amp;</span>retval<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 需要处理取消后的线程可能没有有效退出状态的情况</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>retval <span class="token operator">==</span> PTHREAD_CANCELED<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread 3 was canceled\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread 3 exit code %d\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token class-name">intptr_t</span><span class="token punctuation">)</span>retval<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 这里仍需进行正确的类型转换</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="线程属性-线程连接和分离-2"><a href="#线程属性-线程连接和分离-2" class="headerlink" title="线程属性 - 线程连接和分离(2)"></a>线程属性 - 线程连接和分离(2)</h2><p>本节展示了线程连接和分离的基本知识。</p><h3 id="基本知识"><a href="#基本知识" class="headerlink" title="基本知识"></a>基本知识</h3><ul><li><code>pthread_detach</code>将某个线程设成分离态</li></ul><p>一般情况下,线程终止后,其终止状态一直保留到其它线程调用pthread_join获取它的状态为止。但是线程也可以被置为detach状态,这样的线程一旦终止就立刻回收它占用的所有资源,而不保留终止状态。不能对一个已经处于detach状态的线程调用pthread_join,这样的调用将返回EINVAL。如果已经对一个线程调用了pthread_detach就不能再调用pthread_join了。</p><p>通常情况下，若创建一个线程不关心它的返回值,也不想使用pthread_join来回收资源(调用pthread_join的进程会阻塞)，就可以使用pthread_detach,将该线程的状态设置为分离态,使线程结束后,立即被系统回收。<br>主线程退出了，“分离线程”还是一样退出。只是“分离线程”的资源是有系统回收的。</p><h3 id="函数说明-7"><a href="#函数说明-7" class="headerlink" title="函数说明"></a>函数说明</h3><p>将某个线程设成分离态</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_detach</span><span class="token punctuation">(</span><span class="token class-name">pthread_t</span> tid<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">pthread_t</span> tid<span class="token operator">:</span>　　分离线程的tid返回值<span class="token operator">:</span>成功返回<span class="token number">0</span><span class="token punctuation">,</span>失败返回错误号。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><code>pthread_detach</code>是POSIX线程库中的一个函数，用于将一个已创建的线程从其创建者分离（detach）。</p><p>函数原型：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_detach</span><span class="token punctuation">(</span><span class="token class-name">pthread_t</span> tid<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>参数解释：</p><ul><li><code>pthread_t tid</code>：这是要分离的线程的标识符。在创建线程时，pthread_create函数会返回这个tid，代表新创建的线程。</li></ul><p>函数功能：<br>当一个线程被分离后，其资源（如栈空间等）将在该线程终止时自动释放，而无需调用pthread_join函数等待其完成。这意味着分离线程执行完毕后，不会保留joinable状态，因此主线程或其他线程无法通过pthread_join来获取其返回值或确保它已经结束。</p><p>返回值：</p><ul><li>若成功分离线程，则返回0。</li><li>若出错，则返回非零错误编号，具体错误信息可通过errno获取。</li></ul><p>分离线程的主要用途是在不关心线程退出状态和返回值的情况下，减轻主线程对子线程生命周期管理的负担。</p><h3 id="输出结果-1"><a href="#输出结果-1" class="headerlink" title="输出结果"></a>输出结果</h3><pre class="line-numbers language-none"><code class="language-none">thread1 running...!thread1 running...!thread1 running...!thread1 running...!thread1 running...!thread1 running...!thread1 running...!thread1 running...!thread1 running...!Leave main thread!<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h3><p>由于并行程序执行顺序的不确定性，你的结果可能和这个结果不一致。</p><p>在给出的代码中，<code>thread1</code>函数是一个无限循环的线程，因此实际上调用<code>pthread_detach</code>之后主线程无法得知<code>thread1</code>何时结束。这种情况下，分离线程的意义在于主线程结束后，即使未调用<code>pthread_join</code>，系统也会自动释放<code>thread1</code>所占用的资源。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token comment">// 定义线程执行的函数</span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">thread1</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>     <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 这是一个无限循环的线程</span>    <span class="token punctuation">&#123;</span>        <span class="token function">usleep</span><span class="token punctuation">(</span><span class="token number">100</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 暂停100毫秒</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread1 running...!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 实际上由于是无限循环，下面这行代码可能永远不会被执行</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Leave thread1!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">pthread_t</span> tid<span class="token punctuation">;</span> <span class="token comment">// 创建线程标识符</span>    <span class="token comment">// 创建并启动线程</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> thread1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"pthread_create failed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">exit</span><span class="token punctuation">(</span>EXIT_FAILURE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 分离线程，使其在完成后自动释放资源，无需等待主线程调用pthread_join</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">pthread_detach</span><span class="token punctuation">(</span>tid<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"pthread_detach failed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">exit</span><span class="token punctuation">(</span>EXIT_FAILURE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 主线程暂停1秒</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Leave main thread! (The detached thread 'thread1' will continue to run in the background.)\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这段代码中，增加了对<code>pthread_create</code>和<code>pthread_detach</code>错误处理的部分，使得程序在创建或分离线程失败时能够打印错误信息并退出。同时，主线程输出信息也说明了detach线程后的情况。</p><h2 id="比较线程标识号"><a href="#比较线程标识号" class="headerlink" title="比较线程标识号"></a>比较线程标识号</h2><p>本节介绍了比较两个线程的线程标识符是否相同的方法。</p><p>线程标识号的类型为pthread_t，是不透明类型。为了使程序更容易移植，Pthreads提供了对两个线程的线程标识号进行比较的函数。</p><h3 id="函数说明-8"><a href="#函数说明-8" class="headerlink" title="函数说明"></a>函数说明</h3><p>比较两个线程的线程标识符是否相同</p><p><code>pthread_equal</code>用于比较两个线程的标识符是否相同</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_equal</span><span class="token punctuation">(</span><span class="token class-name">pthread_t</span> t1<span class="token punctuation">,</span> <span class="token class-name">pthread_t</span> t2<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>参数解释：</p><ul><li><code>pthread_t t1</code>：第一个线程标识符。</li><li><code>pthread_t t2</code>：第二个线程标识符。</li></ul><p>该函数比较<code>t1</code>和<code>t2</code>两个线程标识符是否指向同一线程。如果两者指向同一个线程，则返回非零值（通常为1），否则返回0。</p><p>使用场景：<br>在多线程编程中，有时需要确定两个线程标识符是否对应于同一个线程实例。例如，在同步或通信操作中，可能需要检查当前线程是否与某个特定的已知线程相匹配。</p><p>示例代码：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token class-name">pthread_t</span> tid1<span class="token punctuation">,</span> tid2<span class="token punctuation">;</span><span class="token comment">// 假设tid1和tid2是从pthread_create得到的不同线程的标识符</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> thread_function1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 创建线程成功</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid2<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> thread_function2<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 创建线程成功</span><span class="token punctuation">&#125;</span><span class="token comment">// 检查tid1和tid2是否代表同一个线程</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">pthread_equal</span><span class="token punctuation">(</span>tid1<span class="token punctuation">,</span> tid2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"tid1 and tid2 represent the same thread.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"tid1 and tid2 represent different threads.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这个例子中，<code>pthread_equal(tid1, tid2)</code>将返回0，因为它们分别代表两个不同线程。</p><h3 id="运行结果-7"><a href="#运行结果-7" class="headerlink" title="运行结果"></a>运行结果</h3><pre class="line-numbers language-none"><code class="language-none">Thread ID: 1.Equal!<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">pthread_t</span> thread_id<span class="token punctuation">;</span>    <span class="token comment">// 获取当前线程ID</span>    thread_id <span class="token operator">=</span> <span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread ID: %lu.\n"</span><span class="token punctuation">,</span> thread_id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 检查两次获取的线程ID是否相同（理论上它们应该总是相同的）</span>    <span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token function">pthread_equal</span><span class="token punctuation">(</span>thread_id<span class="token punctuation">,</span> <span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">)</span>      <span class="token punctuation">&#123;</span>          <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"The Thread IDs are equal, as expected!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>          <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Unexpected: The Thread IDs are not equal!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>      <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="线程私有数据"><a href="#线程私有数据" class="headerlink" title="线程私有数据"></a>线程私有数据</h2><p>本节展示了线程私有数据的相关方法。</p><p><code>pthread_key_create</code>、<code>pthread_setspecific</code>、<code>pthread_getspecific</code>和<code>pthread_key_delete</code>这一系列函数主要用于管理线程特定的数据（Thread-Specific Data, TSD），也称为线程局部存储（Thread-Local Storage, TLS）</p><ul><li><code>pthread_key_create</code>创建一个键</li><li><code>pthread_setspecific</code>为一个键设置线程私有数据</li><li><code>pthread_getspecific</code>从一个键读取线程私有数据</li><li><code>pthread_key_delete</code>删除一个键</li></ul><p>在多线程的环境下，进程内的所有线程共享进程的数据空间。因此全局变量为所有线程共享。在程序设计中有时需要保存线程自己的全局变量，这种特殊的变量仅在线程内部有效。<br>线程私有数据采用了一键多值的技术，即一个键对应多个值。访问数据时都是通过键值来访问，好像是对一个变量进行访问，其实是在访问不同的数据。</p><h3 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h3><p>1、创建一个键<br>2、为一个键设置线程私有数据<br>3、从一个键读取线程私有数据void *pthread_getspecific(pthread_key_t key);<br>4、线程退出（退出时，会调用destructor释放分配的缓存，参数是key所关联的数据）<br>5、删除一个键</p><h3 id="函数说明-9"><a href="#函数说明-9" class="headerlink" title="函数说明"></a>函数说明</h3><p>创建一个键</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_key_create</span><span class="token punctuation">(</span><span class="token class-name">pthread_key_t</span> <span class="token operator">*</span>key<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>destructor<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>pthread_key_create(pthread_key_t *key, void (*destructor)(void*))c</code></p><ul><li>第一个参数为指向一个键值的指针，第二个参数指明了一个destructor函数，<br>如果第二个参数不为空，那么当每个线程结束时，系统将调用这个函数来释放绑定在这个键上的内存块。<br>key一旦被创建，所有线程都可以访问它，但各线程可根据自己的需要往key中填入不同的值，这就相当于提供了一个同名而不同值的全局变量，一键多值。</li><li>创建一个线程私有数据键。参数<code>key</code>是一个指向pthread_key_t类型的指针，用于存储创建的键值；<code>destructor</code>是一个可选的清理函数，当关联此键的线程终止时，该函数会被调用来释放分配给这个键的私有数据。</li></ul><p>为一个键设置线程私有数据</p><pre class="line-numbers language-none"><code class="language-none">int pthread_setspecific(pthread_key_t key,const void *pointer));<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>pthread_setspecific(pthread_key_t key, const void *value)</code></p><ul><li>为指定的键设置线程私有数据。每个线程都可以为同一个键设置不同的值，互不影响。参数<code>key</code>是通过<code>pthread_key_create</code>创建的键，<code>value</code>是要关联到此键的私有数据指针。</li></ul><p>从一个键读取线程私有数据</p><pre class="line-numbers language-none"><code class="language-none">void *pthread_getspecific(pthread_key_t key);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>void* pthread_getspecific(pthread_key_t key)</code></p><ul><li>根据指定的键获取当前线程关联的私有数据。返回与键关联的线程特定数据的指针。</li></ul><p>删除一个键</p><pre class="line-numbers language-none"><code class="language-none">int pthread_key_delete(pthread_key_t key);删除后，键所占用的内存将被释放。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>int pthread_key_delete(pthread_key_t key)</code></p><ul><li>删除已创建的线程私有数据键。一旦键被删除，所有线程与该键关联的私有数据都将失效，如果之前设置了清理函数，会在最后一个与该键关联的线程结束时执行。</li></ul><h3 id="举例说明："><a href="#举例说明：" class="headerlink" title="举例说明："></a>举例说明：</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token keyword">static</span> <span class="token class-name">pthread_key_t</span> thread_data_key<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">cleanup_thread_data</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">free</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">thread_function</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> arg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span><span class="token operator">*</span> data <span class="token operator">=</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">*</span>data <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span> <span class="token comment">// 初始化私有数据</span>    <span class="token function">pthread_setspecific</span><span class="token punctuation">(</span>thread_data_key<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 在线程执行过程中可以随时通过键访问自己的私有数据</span>    <span class="token keyword">int</span><span class="token operator">*</span> my_data <span class="token operator">=</span> <span class="token function">pthread_getspecific</span><span class="token punctuation">(</span>thread_data_key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread private data: %d\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span>my_data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">pthread_key_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>thread_data_key<span class="token punctuation">,</span> cleanup_thread_data<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"pthread_key_create"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">exit</span><span class="token punctuation">(</span>EXIT_FAILURE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token class-name">pthread_t</span> tid<span class="token punctuation">;</span>    <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> thread_function<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 等待子线程结束</span>    <span class="token function">pthread_join</span><span class="token punctuation">(</span>tid<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 主线程也可以有自己的私有数据，与子线程互不影响</span>    <span class="token comment">// ...</span>    <span class="token comment">// 最后删除键</span>    <span class="token function">pthread_key_delete</span><span class="token punctuation">(</span>thread_data_key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这段代码展示了如何创建、设置、获取以及删除线程私有数据。每个线程通过<code>pthread_setspecific</code>保存自己的私有数据，并且可以在任何时候通过<code>pthread_getspecific</code>来访问这些数据，而不会影响其他线程。当线程结束时，若定义了清理函数，会自动清理其私有数据。</p><h3 id="运行结果-8"><a href="#运行结果-8" class="headerlink" title="运行结果"></a>运行结果</h3><pre class="line-numbers language-none"><code class="language-none">main thread:1 is runningthread:2 is runningthread:2 return 1thread:3 is runningthread:3 return 2thread:1 return 0main thread exit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token class-name">pthread_key_t</span> key1<span class="token punctuation">;</span><span class="token class-name">pthread_key_t</span> key2<span class="token punctuation">;</span><span class="token class-name">pthread_t</span> thid1<span class="token punctuation">;</span><span class="token class-name">pthread_t</span> thid2<span class="token punctuation">;</span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">thread1</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> arg<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">thread2</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> arg<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">thread1</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> arg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread:%lu is running\n"</span><span class="token punctuation">,</span> <span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> key_va <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token function">pthread_setspecific</span><span class="token punctuation">(</span>key1<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>key_va<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>thid2<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> thread2<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_join</span><span class="token punctuation">(</span>thid2<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 添加了对线程2的等待，确保其执行完毕后再返回</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread:%lu return %d\n"</span><span class="token punctuation">,</span> <span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">pthread_getspecific</span><span class="token punctuation">(</span>key1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">thread2</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> arg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread:%lu is running\n"</span><span class="token punctuation">,</span> <span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> key_va <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token function">pthread_setspecific</span><span class="token punctuation">(</span>key2<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>key_va<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread:%lu return %d\n"</span><span class="token punctuation">,</span> <span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">pthread_getspecific</span><span class="token punctuation">(</span>key2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span> <span class="token comment">// 添加了返回语句以消除编译警告</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"main thread:%lu is running\n"</span><span class="token punctuation">,</span> <span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_key_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>key1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_key_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>key2<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>thid1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> thread1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">pthread_join</span><span class="token punctuation">(</span>thid1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_key_delete</span><span class="token punctuation">(</span>key1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_key_delete</span><span class="token punctuation">(</span>key2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"main thread exit\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="读写锁"><a href="#读写锁" class="headerlink" title="读写锁"></a>读写锁</h2><p>本节展示了读写锁的相关方法。</p><h3 id="基本知识-1"><a href="#基本知识-1" class="headerlink" title="基本知识"></a>基本知识</h3><p>读写锁与互斥量类似，不过读写锁允许更高的并行性。互斥量要么是锁住状态，要么是不加锁状态，而且一次只有一个线程对其加锁。<br>读写锁可以有三种状态：读模式下加锁状态，写模式下加锁状态，不加锁状态。一次只有一个线程可以占有写模式的读写锁，但是多个线程可用同时占有读模式的读写锁。<br>读写锁也叫做共享-独占锁，当读写锁以读模式锁住时，它是以共享模式锁住的，当它以写模式锁住时，它是以独占模式锁住的。</p><ol><li>当读写锁是写加锁状态时，在这个锁被解锁之前，所有试图对这个锁加锁的线程都会被阻塞；</li><li>当读写锁在读加锁状态时，所有试图以读模式对它进行加锁的线程都可以得到访问权，但是以写模式对它进行枷锁的线程将阻塞；</li><li>当读写锁在读模式锁状态时，如果有另外线程试图以写模式加锁，读写锁通常会阻塞随后的读模式锁请求，这样可以避免读模式锁长期占用，而等待的写模式锁请求长期阻塞；</li></ol><ul><li><p><code>pthread_rwlock_init</code>创建锁</p></li><li><p><code>pthread_rwlock_destroy</code>销毁锁</p></li><li><p><code>pthread_rwlock_rdlock</code>获取一个读出锁</p></li><li><p><code>pthread_rwlock_wrlock</code>获取一个写入锁</p></li><li><p><code>pthread_rwlock_unlock</code>释放一个写入锁或者读出锁</p></li><li><p><code>pthread_rwlock_tryrdlock</code>非阻塞获得读锁</p></li><li><p><code>pthread_rwlock_trywrlock</code>非阻塞获得写锁</p></li></ul><p>在多线程编程中，读写锁（也称为读-写锁或共享-独占锁）是一种能够提供更细粒度控制的同步机制。它允许一个资源在同一时间被多个读者线程同时读取，但在任何时候只允许一个写者线程进行写入操作。这样可以提高系统并发性能，特别是在读多写少的情况下。</p><p>以下是使用读写锁的基本操作示例：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token class-name">pthread_rwlock_t</span> rwlock<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">initialize_rwlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">pthread_rwlock_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">read_lock_and_operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">pthread_rwlock_rdlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 在这里执行读取操作</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Reading from a shared resource by thread %lu.\n"</span><span class="token punctuation">,</span> <span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_rwlock_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">write_lock_and_operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">pthread_rwlock_wrlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 在这里执行写入操作</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Writing to the shared resource by thread %lu.\n"</span><span class="token punctuation">,</span> <span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 更新共享资源...</span>    <span class="token function">pthread_rwlock_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">destroy_rwlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">pthread_rwlock_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">initialize_rwlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 创建并启动多个读线程和写线程</span>    <span class="token comment">// 例如：</span>    <span class="token class-name">pthread_t</span> reader_thread<span class="token punctuation">;</span>    <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>reader_thread<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span>read_lock_and_operation<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">pthread_t</span> writer_thread<span class="token punctuation">;</span>    <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>writer_thread<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span>write_lock_and_operation<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_join</span><span class="token punctuation">(</span>reader_thread<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_join</span><span class="token punctuation">(</span>writer_thread<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">destroy_rwlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>另外，<code>pthread_rwlock_tryrdlock</code> 和 <code>pthread_rwlock_trywrlock</code> 函数提供了非阻塞版本的读写锁获取操作，如果无法立即获取锁，则返回错误而非阻塞等待：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">pthread_rwlock_tryrdlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 成功获取读锁，执行读取操作</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 锁不可用，采取相应策略（如：稍后重试、切换至其他任务等）</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">pthread_rwlock_trywrlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 成功获取写锁，执行写入操作</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 锁不可用，采取相应策略</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>通过合理利用读写锁，可以有效避免不必要的线程阻塞，从而提升程序的并发性和整体性能。</p><h4 id="创建与销毁锁"><a href="#创建与销毁锁" class="headerlink" title="创建与销毁锁"></a>创建与销毁锁</h4><p><code>pthread_rwlock_init</code>和<code>pthread_rwlock_destroy</code>是POSIX线程库中的读写锁初始化和销毁函数。</p><ol><li><p><strong>pthread_rwlock_init</strong>：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_rwlock_init</span><span class="token punctuation">(</span><span class="token class-name">pthread_rwlock_t</span> <span class="token operator">*</span>rwlock<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token class-name">pthread_rwlockattr_t</span> <span class="token operator">*</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>功能：初始化一个读写锁变量。这个函数用于创建一个新的读写锁，使它可以被多个线程用来同步对共享资源的读写访问。</li><li>参数：<ul><li><code>pthread_rwlock_t *rwlock</code>：指向读写锁对象的指针，需要先声明并初始化为NULL。</li><li><code>const pthread_rwlockattr_t *attr</code>：指向读写锁属性对象的指针，可以设置锁的一些高级特性（如进程间共享等）。如果不需要特殊属性，通常传入NULL即可使用默认属性。</li></ul></li></ul></li><li><p><strong>pthread_rwlock_destroy</strong>：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_rwlock_destroy</span><span class="token punctuation">(</span><span class="token class-name">pthread_rwlock_t</span> <span class="token operator">*</span>rwptr<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>功能：销毁已经初始化过的读写锁。在不再需要使用读写锁，并且所有线程都已解锁的情况下，调用此函数来释放与该锁关联的系统资源。</li><li>参数：<ul><li><code>pthread_rwlock_t *rwptr</code>：指向之前通过<code>pthread_rwlock_init</code>成功初始化过的读写锁对象的指针。</li></ul></li></ul></li></ol><p>正确使用这两个函数的方式如下：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token class-name">pthread_rwlock_t</span> my_rwlock<span class="token punctuation">;</span><span class="token comment">// 初始化读写锁</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">pthread_rwlock_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>my_rwlock<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"pthread_rwlock_init failed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">exit</span><span class="token punctuation">(</span>EXIT_FAILURE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 使用读写锁进行同步...</span><span class="token comment">// ...</span><span class="token comment">// 在不再需要读写锁时销毁它</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">pthread_rwlock_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>my_rwlock<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"pthread_rwlock_destroy failed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 处理错误或选择忽略（取决于程序逻辑）</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注意：在销毁读写锁前，必须确保没有任何线程正持有该锁（无论是读锁还是写锁），否则<code>pthread_rwlock_destroy</code>会失败并返回错误。</p><h4 id="获取和释放锁"><a href="#获取和释放锁" class="headerlink" title="获取和释放锁"></a>获取和释放锁</h4><ol><li><p><strong>pthread_rwlock_rdlock</strong>：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_rwlock_rdlock</span><span class="token punctuation">(</span><span class="token class-name">pthread_rwlock_t</span> <span class="token operator">*</span>rwptr<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>功能：对给定的读写锁（<code>rwptr</code>）进行读取锁定。当调用此函数时，如果当前没有其他线程持有写入锁，并且没有正在等待获取写入锁的线程，则当前线程可以获得读取锁并开始读取共享资源。如果有写入锁被持有或有线程在等待写入锁，那么该函数会阻塞直到可以获取读取锁。</li><li>返回值：成功返回0，出错返回非零错误代码。</li></ul></li><li><p><strong>pthread_rwlock_wrlock</strong>：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_rwlock_wrlock</span><span class="token punctuation">(</span><span class="token class-name">pthread_rwlock_t</span> <span class="token operator">*</span>rwptr<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>功能：对给定的读写锁（<code>rwptr</code>）进行写入锁定。当调用此函数时，无论是否有其他线程持有读取锁或者写入锁，都会阻塞直到当前线程能够获得写入锁。只有在没有任何线程持有读取锁或写入锁的情况下，当前线程才能获取写入锁并开始修改共享资源。</li><li>返回值：成功返回0，出错返回非零错误代码。</li></ul></li><li><p><strong>pthread_rwlock_unlock</strong>：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_rwlock_unlock</span><span class="token punctuation">(</span><span class="token class-name">pthread_rwlock_t</span> <span class="token operator">*</span>rwptr<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>功能：释放一个之前通过<code>pthread_rwlock_rdlock</code>或<code>pthread_rwlock_wrlock</code>获取的读出锁或写入锁。调用此函数后，其他等待相同锁的线程（无论是读取还是写入请求）可能会被唤醒并有机会获取锁。</li><li>返回值：成功返回0，出错返回非零错误代码。</li></ul></li></ol><p>示例使用：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token class-name">pthread_rwlock_t</span> rwlock<span class="token punctuation">;</span><span class="token keyword">int</span> shared_data<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">reader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">pthread_rwlock_rdlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 读取shared_data</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Reader: Data is %d\n"</span><span class="token punctuation">,</span> shared_data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_rwlock_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">writer</span><span class="token punctuation">(</span><span class="token keyword">int</span> new_value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">pthread_rwlock_wrlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 修改shared_data</span>    shared_data <span class="token operator">=</span> new_value<span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Writer: Updated data to %d\n"</span><span class="token punctuation">,</span> shared_data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_rwlock_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">pthread_rwlock_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 创建和启动多个读线程与写线程</span>    <span class="token comment">// 销毁读写锁</span>    <span class="token function">pthread_rwlock_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="非阻塞获得读锁和写锁"><a href="#非阻塞获得读锁和写锁" class="headerlink" title="非阻塞获得读锁和写锁"></a>非阻塞获得读锁和写锁</h4><ol><li><p><strong>pthread_rwlock_tryrdlock</strong>：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_rwlock_tryrdlock</span><span class="token punctuation">(</span><span class="token class-name">pthread_rwlock_t</span> <span class="token operator">*</span>rwlock<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>功能：尝试获取给定的读写锁（<code>rwlock</code>）的读取锁，但不阻塞。如果当前没有其他线程持有写入锁，并且没有正在等待获取写入锁的线程，则立即返回并成功获取读取锁。否则，如果无法立即获取读取锁，则该函数会立即返回一个错误值。</li><li>返回值：若成功获取读取锁则返回0，若无法立即获取锁则返回一个非零错误代码（如EBUSY），表示资源已经被锁定。</li></ul></li><li><p><strong>pthread_rwlock_trywrlock</strong>：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_rwlock_trywrlock</span><span class="token punctuation">(</span><span class="token class-name">pthread_rwlock_t</span> <span class="token operator">*</span>rwlock<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>功能：尝试获取给定的读写锁（<code>rwlock</code>）的写入锁，同样不会阻塞。只有在没有任何线程持有读取锁或写入锁的情况下，该函数才能立即返回并成功获取写入锁。否则，如果无法立即获取写入锁，则该函数会立即返回一个错误值。</li><li>返回值：若成功获取写入锁则返回0，若无法立即获取锁则返回一个非零错误代码（如EBUSY），表示资源已经被锁定。</li></ul></li></ol><p>使用这两个函数可以在需要避免阻塞时尝试获取锁，例如在实时系统或者不能无限期等待锁的地方：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token class-name">pthread_rwlock_t</span> rwlock<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">non_blocking_reader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">pthread_rwlock_tryrdlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 成功获取读锁，执行读取操作</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Reader: Data is %d\n"</span><span class="token punctuation">,</span> shared_data<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">pthread_rwlock_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Reader: Could not acquire read lock, data not read.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 执行其他操作或稍后重试</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">non_blocking_writer</span><span class="token punctuation">(</span><span class="token keyword">int</span> new_value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">pthread_rwlock_trywrlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 成功获取写锁，执行写入操作</span>        shared_data <span class="token operator">=</span> new_value<span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Writer: Updated data to %d\n"</span><span class="token punctuation">,</span> shared_data<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">pthread_rwlock_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Writer: Could not acquire write lock, data not updated.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 执行其他操作或稍后重试</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="运行结果-9"><a href="#运行结果-9" class="headerlink" title="运行结果"></a>运行结果</h3><pre class="line-numbers language-none"><code class="language-none">reader 1 is reading data.reader 2 is reading data.reader 3 is reading data.writer 5 is writing data.writer 4 is writing data.reader 1 reads data over.reader 2 reads data over.reader 3 reads data over.writer 5 writes data over.writer 4 writes data over.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>        <span class="token macro-name">READER_MAX</span>    <span class="token expression"><span class="token number">3</span>        </span><span class="token comment">/*最多允许多少人一起读取数据*/</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>        <span class="token macro-name">WRITER_MAX</span>    <span class="token expression"><span class="token number">2</span>        </span><span class="token comment">/*最多允许多少人写数据*/</span></span><span class="token class-name">pthread_rwlock_t</span>    rw_lock<span class="token punctuation">;</span>        <span class="token comment">/*读写锁*/</span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">reader_thread</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> t<span class="token punctuation">;</span><span class="token comment">//your code here</span>t <span class="token operator">=</span> <span class="token function">pthread_rwlock_tryrdlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rw_lock<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//end of your code</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"reader %u can't read data.\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"reader %u is reading data.\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"reader %u reads data over.\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">pthread_rwlock_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rw_lock<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">writer_thread</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> t<span class="token punctuation">;</span><span class="token comment">//your code here</span>t <span class="token operator">=</span> <span class="token function">pthread_rwlock_tryrdlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rw_lock<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//end of your code</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"writer %u can't write data.\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"writer %u is writing data.\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"writer %u writes data over.\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">pthread_rwlock_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rw_lock<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">pthread_t</span> reader<span class="token punctuation">,</span> writer<span class="token punctuation">;</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>     <span class="token function">pthread_rwlock_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rw_lock<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> READER_MAX<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>reader<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> reader_thread<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> WRITER_MAX<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>writer<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> writer_thread<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="一次初始化"><a href="#一次初始化" class="headerlink" title="一次初始化"></a>一次初始化</h2><ul><li><code>pthread_once</code>一次初始化</li></ul><p>在多线程环境中，有些事仅需要执行一次。通常当初始化应用程序时，可以比较容易地将其放在main函数中。但当你写一个库时，就不能在main里面初始化了，你可以用静态初始化，但使用一次初始化（pthread_once）会比较容易些。</p><p>在多线程编程环境下，尽管pthread_once()调用会出现在多个线程中，init_routine()函数仅执行一次，究竟在哪个线程中执行是不定的，是由内核调度来决定。</p><p><code>pthread_once</code>是POSIX线程库中的一个函数，用于确保某个初始化函数在整个程序生命周期内只被执行一次。这对于那些需要单次初始化且初始化过程必须在多线程环境下安全执行的情况非常有用。</p><p>函数原型：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_once</span><span class="token punctuation">(</span><span class="token class-name">pthread_once_t</span> <span class="token operator">*</span>once_control<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>init_routine<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>参数解析：</p><ul><li><code>pthread_once_t *once_control</code>：指向一个pthread_once_t类型的变量的指针。这个变量是用来跟踪初始化是否已经完成的状态标志。</li><li><code>void (*init_routine)(void)</code>：这是一个指向无参数、无返回值函数的指针，即初始化函数。当<code>pthread_once</code>检测到初始化尚未执行时，它将调用这个函数进行初始化。</li></ul><p>功能描述：<br><code>pthread_once</code>函数会检查<code>once_control</code>指向的控制变量状态，如果初始化尚未执行，则调用<code>init_routine</code>函数进行初始化，并设置控制变量为已初始化状态。此函数保证了在多线程环境中即使多个线程同时调用<code>pthread_once</code>，初始化函数也只会被执行一次。</p><p>示例使用：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token keyword">static</span> <span class="token class-name">pthread_once_t</span> once_control <span class="token operator">=</span> PTHREAD_ONCE_INIT<span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">int</span> shared_resource<span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">initialize_shared_resource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 这里进行一次性初始化操作</span>    shared_resource <span class="token operator">=</span> <span class="token function">calculate_initial_value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">access_shared_resource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">pthread_once</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>once_control<span class="token punctuation">,</span> initialize_shared_resource<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 现在可以安全地访问shared_resource了</span>    <span class="token function">use_shared_resource</span><span class="token punctuation">(</span>shared_resource<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这个例子中，<code>initialize_shared_resource</code>函数只有在第一次调用<code>access_shared_resource</code>函数并传递给<code>pthread_once</code>时才会被执行。后续对<code>access_shared_resource</code>的调用将直接跳过初始化阶段，因为<code>once_control</code>已经被标记为已初始化状态。</p><h3 id="运行结果-10"><a href="#运行结果-10" class="headerlink" title="运行结果"></a>运行结果</h3><pre class="line-numbers language-none"><code class="language-none">thread 1 entersthread 2 entersonce_run in thread 1thread 1 returnsthread 2 returns<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span>  </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span>  </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h></span> </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token class-name">pthread_once_t</span> once <span class="token operator">=</span> PTHREAD_ONCE_INIT<span class="token punctuation">;</span>  <span class="token keyword">void</span> <span class="token function">once_run</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"once_run in thread %u\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>  <span class="token keyword">void</span> <span class="token operator">*</span> <span class="token function">child1</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span> arg<span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>      <span class="token class-name">pthread_t</span> tid <span class="token operator">=</span> <span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread %u enters\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span>tid<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//your code here</span>    <span class="token function">pthread_once</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>once<span class="token punctuation">,</span>once_run<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//end of your code</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread %u returns\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span>tid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>  <span class="token keyword">void</span> <span class="token operator">*</span> <span class="token function">child2</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span> arg<span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>      <span class="token class-name">pthread_t</span> tid <span class="token operator">=</span> <span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread %u enters\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span>tid<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//your code here</span>    <span class="token function">pthread_once</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>once<span class="token punctuation">,</span>once_run<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//end of your code</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"thread %u returns\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span>tid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>  <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>      <span class="token class-name">pthread_t</span> tid1<span class="token punctuation">,</span>tid2<span class="token punctuation">;</span>      <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid1<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">,</span>child1<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid2<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">,</span>child2<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">pthread_join</span><span class="token punctuation">(</span>tid1<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_join</span><span class="token punctuation">(</span>tid2<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="发送sig信号"><a href="#发送sig信号" class="headerlink" title="发送sig信号"></a>发送sig信号</h2><p>本节展示了发送sig信号的方法。</p><h3 id="基本知识-2"><a href="#基本知识-2" class="headerlink" title="基本知识"></a>基本知识</h3><ul><li><code>pthread_kill</code>发送sig信号</li></ul><p><code>pthread_kill</code>并不是结束进程的意思，而是向指定ID的线程发送一个信号，只是大部分信号的默认动作是终止进程的运行。<br>如果线程不处理该信号，则按照信号默认的行为作用于整个进程。信号值0为保留信号，作用是根据函数的返回值判断线程是不是还活着。<br><code>pthread_kill</code>的返回值：成功（0） 线程不存在（ESRCH） 信号不合法（EINVAL）</p><h3 id="函数说明-10"><a href="#函数说明-10" class="headerlink" title="函数说明"></a>函数说明</h3><p><code>pthread_kill</code>，用于向指定的线程发送信号。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_kill</span><span class="token punctuation">(</span><span class="token class-name">pthread_t</span> thread<span class="token punctuation">,</span> <span class="token keyword">int</span> sig<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>参数解析：</p><ul><li><code>pthread_t thread</code>：这是目标线程的标识符，可以通过调用<code>pthread_create</code>函数创建线程时返回的值获取。</li><li><code>int sig</code>：要发送给线程的信号。这个参数可以是POSIX定义的任何有效信号（例如SIGTERM、SIGINT等），或者自定义信号（如1~31之间的数字）。</li></ul><p>功能描述：<br><code>pthread_kill</code>函数允许主线程或者其他线程向指定的线程发送一个信号。当目标线程接收到该信号后，它会根据预先注册的信号处理函数（通过<code>signal</code>或<code>sigaction</code>设置）来处理这个信号，或者是默认的行为（比如对于SIGTERM，通常会导致进程&#x2F;线程终止）。</p><p>示例使用：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;signal.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token keyword">void</span> <span class="token function">signal_handler</span><span class="token punctuation">(</span><span class="token keyword">int</span> signum<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Signal %d received in the thread\n"</span><span class="token punctuation">,</span> signum<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">thread_function</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> arg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">signal</span><span class="token punctuation">(</span>SIGUSR1<span class="token punctuation">,</span> signal_handler<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 注册信号处理器</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">pthread_t</span> tid<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> thread_function<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"pthread_create"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">exit</span><span class="token punctuation">(</span>EXIT_FAILURE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 等待线程开始运行</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">pthread_kill</span><span class="token punctuation">(</span>tid<span class="token punctuation">,</span> SIGUSR1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 向线程发送SIGUSR1信号</span>        <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"pthread_kill"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">pthread_join</span><span class="token punctuation">(</span>tid<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 等待线程结束</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这个例子中，我们创建了一个新的线程，并在其中注册了SIGUSR1信号的处理函数。然后，在主线程中使用<code>pthread_kill</code>向子线程发送SIGUSR1信号，触发其内部的信号处理函数执行。</p><h3 id="运行结果-11"><a href="#运行结果-11" class="headerlink" title="运行结果"></a>运行结果</h3><pre class="line-numbers language-none"><code class="language-none">ID 0x1 thread exits.ID 0x1 thread exits.ID 0x2 thread stays alive now.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;errno.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h></span> </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;signal.h></span></span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">func1</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> args<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ID 0x%x thread exits.\n"</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">func2</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> args<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ID 0x%x thread exits。\n"</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">test_pthread</span><span class="token punctuation">(</span><span class="token class-name">pthread_t</span> tid<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> pthread_kill_err<span class="token punctuation">;</span><span class="token comment">//your code here</span>    pthread_kill_err <span class="token operator">=</span> <span class="token function">pthread_kill</span><span class="token punctuation">(</span>tid<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//end of your code</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>pthread_kill_err <span class="token operator">==</span> ESRCH<span class="token punctuation">)</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ID 0x%x thread exits.\n"</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span>tid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>pthread_kill_err <span class="token operator">==</span> EINVAL<span class="token punctuation">)</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"invalid signal\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ID 0x%x thread stays alive now.\n"</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span>tid<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> ret<span class="token punctuation">;</span>    <span class="token class-name">pthread_t</span> tid1<span class="token punctuation">,</span>tid2<span class="token punctuation">;</span>        <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid1<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">,</span>func1<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid2<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">,</span>func2<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">test_pthread</span><span class="token punctuation">(</span>tid1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">test_pthread</span><span class="token punctuation">(</span>tid2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 分布式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MPI</title>
      <link href="/posts/e16d.html"/>
      <url>/posts/e16d.html</url>
      
        <content type="html"><![CDATA[<h1 id="MPI"><a href="#MPI" class="headerlink" title="MPI"></a>MPI</h1><p>MPI（Message Passing Interface，消息传递接口）</p><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><ul><li>MPI_INT：整数类型，对应C语言中的int类型。</li><li>MPI_FLOAT：单精度浮点数类型，对应C语言中的float类型。</li><li>MPI_DOUBLE：双精度浮点数类型，对应C语言中的double类型。</li><li>MPI_CHAR：字符类型，对应C语言中的char类型。</li><li>MPI_LOGIC：逻辑类型，对应C语言中的_Bool类型（在stdbool.h头文件中定义）</li></ul><h2 id="MPI-Op"><a href="#MPI-Op" class="headerlink" title="MPI_Op"></a>MPI_Op</h2><p>MPI_Op是一个枚举类型，它定义了各种操作符，这些操作符可以用于执行元素级别的操作。以下是一些常用的操作符：</p><ul><li>MPI_OP_NULL：用于初始化操作对象。</li><li>MPI_MAX：用于找出数组中的最大值。</li><li>MPI_MIN：用于找出数组中的最小值。</li><li>MPI_SUM：用于计算数组中所有元素的和。</li><li>MPI_PROD：用于计算数组中所有元素的乘积。</li><li>MPI_LAND：用于执行元素级别的“与”操作。</li><li>MPI_BAND：用于执行元素级别的“或非”操作。</li></ul><h2 id="第一个MPI程序"><a href="#第一个MPI程序" class="headerlink" title="第一个MPI程序"></a>第一个MPI程序</h2><p>首先，我们应该先包含进一个头文件<code>&lt;mpi.h&gt;</code></p><p>MPI程序和普通的C程序的区别在于有一个开始的函数和结束的函数来标识MPI部分，再在这个部分进行你想要进行的操作</p><h3 id="函数说明"><a href="#函数说明" class="headerlink" title="函数说明"></a>函数说明</h3><h4 id="MPI-Init"><a href="#MPI-Init" class="headerlink" title="MPI_Init( )"></a>MPI_Init( )</h4><p>MPI_Init( )：进入MPI环境并完成所有的初始化工作，标志并行代码的开始</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>int MPI_Init(int *argc, char **argv)</code> ，用于初始化MPI环境</p><p>参数说明：</p><ul><li><code>argc</code>：指向整数的指针，表示命令行参数的数量。</li><li><code>argv</code>：指向字符指针的指针，表示命令行参数的值。</li></ul><p>返回值：</p><ul><li>函数执行成功时返回0。</li><li>如果发生错误，则返回非零错误代码。</li></ul><h4 id="MPI-Finalize"><a href="#MPI-Finalize" class="headerlink" title="MPI_Finalize( )"></a>MPI_Finalize( )</h4><p>MPI_Finalize( )：从MPI环境中退出，标志并行代码的结束</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>int MPI_Finalize(void)</code> ，用于结束MPI环境。</p><p>返回值：</p><ul><li>函数执行成功时返回0。</li><li>如果发生错误，则返回非零错误代码。</li></ul><h3 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mpi.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>     <span class="token comment">//your code here</span>    <span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello World!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//end of your code </span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="获取进程数量"><a href="#获取进程数量" class="headerlink" title="获取进程数量"></a>获取进程数量</h2><p>在MPI编程中，我们常常需要获取指定通信域的进程个数，以确定程序的规模。</p><p>一组可以相互发送消息的进程集合叫做通信子，通常由<code>MPI_Init()</code>在用户启动程序时，定义由用户启动的所有进程所组成的通信子，缺省值为 <em>MPI_COMM_WORLD</em> 。这个参数是MPI通信操作函数中必不可少的参数，用于限定参加通信的进程的范围。</p><h3 id="函数说明-1"><a href="#函数说明-1" class="headerlink" title="函数说明"></a>函数说明</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_Comm comm<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>rank<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>int MPI_Comm_size(MPI_Comm comm, int *rank)</code> ，获取指定通信域的进程个数。</p><p>参数说明：</p><ul><li><code>comm</code>：通信器对象，表示一组进程之间的通信关系。</li><li><code>rank</code>：指向整数的指针，用于存储进程数量。</li></ul><p>返回值：</p><ul><li>函数执行成功时返回0。</li><li>如果发生错误，则返回非零错误代码。</li></ul><h3 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mpi.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> world_size<span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>world_size<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取MPI_COMM_WORLD通信器中的进程数量</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Number of processes: %d\n"</span><span class="token punctuation">,</span> world_size<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在上述代码中，<code>MPI_Comm_size(MPI_COMM_WORLD, &amp;world_size)</code> 将获取默认通信器（<code>MPI_COMM_WORLD</code>，通常包含所有参与执行的应用程序进程）中的进程数量，并将其存储在 <code>world_size</code> 变量中。</p><h3 id="实验说明"><a href="#实验说明" class="headerlink" title="实验说明"></a>实验说明</h3><p>使用函数MPI_Comm_size获取通信域中的进程个数并打印出来。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//your code here</span><span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//end of your code</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello World!I'm rank %d of %d\n"</span><span class="token punctuation">,</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="获取进程id"><a href="#获取进程id" class="headerlink" title="获取进程id"></a>获取进程id</h2><p>同样，我们也常常需要输出当前进程的id，以此来判断具体哪个进程完成了对应的任务。</p><h3 id="函数说明-2"><a href="#函数说明-2" class="headerlink" title="函数说明"></a>函数说明</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_Comm comm<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>rank<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>int MPI_Comm_rank(MPI_Comm comm, int *rank)</code> ，用于获取当前进程在指定通信器中的编号。</p><p>参数说明：</p><ul><li><code>comm</code>：通信器对象，表示一组进程之间的通信关系。</li><li><code>rank</code>：指向整数的指针，用于存储当前进程的编号。</li></ul><p>返回值：</p><ul><li>函数执行成功时返回0。</li><li>如果发生错误，则返回非零错误代码。</li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mpi.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> world_rank<span class="token punctuation">;</span>    <span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>world_rank<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello from rank %d\n"</span><span class="token punctuation">,</span> world_rank<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="实验说明-1"><a href="#实验说明-1" class="headerlink" title="实验说明"></a>实验说明</h3><p>在每个进程中，使用函数MPI_Comm_rank来获取当前进程的id并打印出来。</p><p>输出结果：由于并行程序执行顺序的不确定性，你的结果的顺序可能和这个结果不一致。</p><p>0</p><p>1</p><p>3</p><p>2</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//your code here</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//end of your code</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello World!I'm rank %d of %d\n"</span><span class="token punctuation">,</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="消息传递"><a href="#消息传递" class="headerlink" title="消息传递"></a>消息传递</h2><p>在并行编程中，消息传递占了很大的比重。良好的消息传递是正常完成进程&#x2F;节点之间操作的基本条件</p><p>在这里先介绍的最基本发送&#x2F;接收函数</p><p>最基本的发送 &#x2F; 接收函数都是以缓冲区作为端点，通过参数配置来完成指定操作</p><h3 id="函数说明-3"><a href="#函数说明-3" class="headerlink" title="函数说明"></a>函数说明</h3><h4 id="发送数据"><a href="#发送数据" class="headerlink" title="发送数据"></a>发送数据</h4><p>发送缓冲区中的信息到目标进程</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Send</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> msg_buf_p<span class="token punctuation">,</span>  <span class="token keyword">int</span> msg_size<span class="token punctuation">,</span>  MPI_Datatype msg_type<span class="token punctuation">,</span> <span class="token keyword">int</span> dest<span class="token punctuation">,</span>  <span class="token keyword">int</span> tag<span class="token punctuation">,</span>   MPI_Comm communicator<span class="token punctuation">)</span>   缓冲区的起始地址    缓冲区大小  发送信息的数据类型   目标进程的id 消息标签  通信子<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>MPI_Send(void* msg_buf_p, int msg_size, MPI_Datatype msg_type, int dest, int tag, MPI_Comm communicator)</code> ，用于将数据从源进程发送到目标进程。</p><p>参数说明：</p><ul><li><code>msg_buf_p</code>：指向要发送数据的缓冲区的指针。</li><li><code>msg_size</code>：要发送的数据的大小（以字节为单位）。</li><li><code>msg_type</code>：数据的类型。</li><li><code>dest</code>：目标进程的标识符。</li><li><code>tag</code>：一个整数标签，用于区分不同的消息。</li><li><code>communicator</code>：通信器对象，表示一组进程之间的通信关系。</li></ul><p>返回值：</p><ul><li>函数执行成功时返回0。</li><li>如果发生错误，则返回非零错误代码。</li></ul><h4 id="接收数据"><a href="#接收数据" class="headerlink" title="接收数据"></a>接收数据</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Recv</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> msg_buf_p<span class="token punctuation">,</span> <span class="token keyword">int</span> buf_size<span class="token punctuation">,</span> MPI_Datatype msg_type<span class="token punctuation">,</span> <span class="token keyword">int</span> source<span class="token punctuation">,</span> <span class="token keyword">int</span> tag<span class="token punctuation">,</span> MPI_Comm communicator， MPI_Status <span class="token operator">*</span>status_p<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>用于在并行计算环境中接收来自特定源进程的数据，并将其存储在指定的接收缓冲区中。</p><ul><li><code>void* msg_buf_p</code>: 这是指向接收缓冲区的指针。该缓冲区将存储从源进程接收到的数据。</li><li><code>int buf_size</code>: 这是接收缓冲区的大小（以字节为单位）。它应该与发送缓冲区的大小相匹配。</li><li><code>MPI_Datatype msg_type</code>: 这是指定接收缓冲区中数据类型的MPI数据类型对象。</li><li><code>int source</code>: 这是发送数据的源进程的标识符。MPI库将只从这个进程接收数据。</li><li><code>int tag</code>: 这是用于区分不同消息的整数标签。如果两个进程同时发送数据，它们可以使用不同的标签来区分它们的消息。</li><li><code>MPI_Comm communicator</code>: 这是通信器对象，它定义了进程组和通信模式。在这个例子中，通信器对象表示一个并行计算环境。</li><li><code>MPI_Status *status_p</code>: 这是指向MPI状态对象的指针。MPI状态对象包含了关于接收操作的信息，如是否成功接收到数据、接收时间等。</li></ul><h3 id="实验说明-2"><a href="#实验说明-2" class="headerlink" title="实验说明"></a>实验说明</h3><p>把id为0的进程当作根进程，然后在除此之外的进程中使用函数MPI_Send发送一句”hello world!”到根进程中，然后在根进程中把这些信息打印出来。</p><p>输出结果：一系列的”hello world!”</p><blockquote><p>字符串的名字就是字符串的首地址。在C语言中，字符串是由字符数组表示的，每个字符都有一个唯一的地址。所以，字符串的名字实际上就是指向字符串首字符的指针。</p></blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">,</span> source<span class="token punctuation">;</span>MPI_Status status<span class="token punctuation">;</span><span class="token keyword">char</span> message<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>myid <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">strcpy</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token string">"hello world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//your code here</span>    <span class="token function">MPI_Send</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> MPI_CHAR<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//end of your code</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>         <span class="token comment">//myid == 0</span><span class="token keyword">for</span><span class="token punctuation">(</span>source<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> source<span class="token operator">&lt;</span>numprocs<span class="token punctuation">;</span> source<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">//your code here</span><span class="token function">MPI_Recv</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> MPI_CHAR<span class="token punctuation">,</span> source<span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//end of your code</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="规约（reduce）"><a href="#规约（reduce）" class="headerlink" title="规约（reduce）"></a>规约（reduce）</h2><p>在现实生活中，我们常常需要对于数据做同一种操作，并将结果返回到指定的进程中，这个过程称为集合通信。例如，将数据分散到各个进程中，先在各个进程内进行求和，再在全局完成求和-平均这个操作，这个过程是一个规约的过程。</p><p>一般来说，集合通信包括通信、同步和计算三个功能。不过，目前我们暂时不需要关注整个过程，而是先使用一个规约函数去体验一下集合通信。</p><h3 id="函数说明-4"><a href="#函数说明-4" class="headerlink" title="函数说明"></a>函数说明</h3><blockquote><p>规约函数，所有进程将待处理数据通过输入的操作子operator计算为最终结果并将它存入目标进程中。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Reduce</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span> input_data_p<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span> output_data_p<span class="token punctuation">,</span> <span class="token keyword">int</span> count<span class="token punctuation">,</span> MPI_Datatype datatype<span class="token punctuation">,</span> MPI_Op operator<span class="token punctuation">,</span> <span class="token keyword">int</span> dest_process<span class="token punctuation">,</span> MPI_Comm comm<span class="token punctuation">)</span>进程的待处理数据存放的地址； 存放最终结果的目标进程的地址；缓冲区中的数据个数；数据类型；操作子（加减）；目标进程的编号；<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>int MPI_Reduce(void * input_data_p, void * output_data_p, int count, MPI_Datatype datatype, MPI_Op operator, int dest_process, MPI_Comm comm)</code> ，用于将数据从源进程收集到目标进程。</p><p>参数说明：</p><ul><li><code>input_data_p</code>：指向输入数据的指针。</li><li><code>output_data_p</code>：指向输出数据的指针。</li><li><code>count</code>：要处理的元素数量。</li><li><code>datatype</code>：数据类型。</li><li><code>operator</code>：MPI操作符，用于指定如何组合输入数据以生成输出数据。</li><li><code>dest_process</code>：目标进程的标识符。</li><li><code>comm</code>：通信器对象，表示一组进程之间的通信关系。</li></ul><p>返回值：</p><ul><li>函数执行成功时返回0。</li><li>如果发生错误，则返回非零错误代码。</li></ul></blockquote><blockquote><p><code>MPI_Reduce()</code>函数是Message Passing Interface (MPI) 库中用于并行计算的一个重要函数，主要用于在一组进程间对数据进行规约操作（如求和、最大值、最小值等）。以下是该函数的详细解析：</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">MPI_Reduce</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>input_data_p<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>output_data_p<span class="token punctuation">,</span>             <span class="token keyword">int</span> count<span class="token punctuation">,</span> MPI_Datatype datatype<span class="token punctuation">,</span>             MPI_Op op<span class="token punctuation">,</span> <span class="token keyword">int</span> dest_process<span class="token punctuation">,</span>             MPI_Comm comm<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p><strong>参数解释：</strong></p><ul><li><p><code>void *input_data_p</code>: 指向参与规约操作的输入缓冲区的指针。每个进程提供一块相同大小的数据区域，这些数据将按照指定的操作符被规约。</p></li><li><p><code>void *output_data_p</code>: 指向规约结果存储位置的指针。只有指定的目标进程（dest_process）会接收到最终的规约结果。</p></li><li><p><code>int count</code>: 表示要处理的数据元素个数。例如，如果datatype是MPI_INT且count为10，则表示有10个整数参与规约。</p></li><li><p><code>MPI_Datatype datatype</code>: 指定参与规约的数据类型，可以是MPI预定义的类型，如MPI_INT、MPI_FLOAT、MPI_DOUBLE等，也可以是用户自定义的复合数据类型。</p></li><li><p><code>MPI_Op op</code>: 指定要执行的规约操作，例如MPI_SUM（求和）、MPI_MAX（求最大值）、MPI_MIN（求最小值）等。也可以通过MPI_Op_create自定义规约操作。</p></li><li><p><code>int dest_process</code>: 规约结果存放的目标进程的 rank（标识符）。所有进程都将它们的局部结果发送到这个目标进程，然后由目标进程执行最后的规约操作得到全局结果。</p></li><li><p><code>MPI_Comm comm</code>: 指定通信器，通常是一个进程组（communicator），如MPI_COMM_WORLD，它包含了参与规约的所有进程。</p></li></ul></li></ul><p>函数返回一个整数值，若成功则返回MPI_SUCCESS，否则返回错误代码。</p><p>示例用法：</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> my_rank<span class="token punctuation">,</span> size<span class="token punctuation">;</span>    <span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>my_rank<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">double</span> local_sum <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>    <span class="token comment">// 假设我们已经填充了本地数据</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        local_sum <span class="token operator">+=</span> some_local_array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">double</span> global_sum<span class="token punctuation">;</span>    <span class="token function">MPI_Reduce</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>local_sum<span class="token punctuation">,</span> <span class="token operator">&amp;</span>global_sum<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> MPI_DOUBLE<span class="token punctuation">,</span> MPI_SUM<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>my_rank <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"The global sum is: %f\n"</span><span class="token punctuation">,</span> global_sum<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这个例子中，所有进程都会计算其本地数据之和，然后通过<code>MPI_Reduce</code>函数将各自的局部和规约成一个全局总和，结果存储在rank为0的进程中。</p></blockquote><blockquote><p>在上面的示例中，<code>count</code>设置为1表示每个进程中参与规约操作的数据元素个数为1。这意味着我们正在对单个double类型的数值进行规约。</p><p>然而，在实际应用中，<code>count</code>可以根据需要设置成任意大于0的整数。例如，如果每个进程有一段包含多个相同类型数据（如一个double数组）的缓冲区，并希望对这些数据进行规约，那么<code>count</code>应设为该数组的元素个数。</p><p>假设每个进程都有一个长度为100的double数组，想要求和：</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">double</span> local_data<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 初始化local_data...</span><span class="token keyword">double</span> global_sum<span class="token punctuation">;</span><span class="token function">MPI_Reduce</span><span class="token punctuation">(</span>local_data<span class="token punctuation">,</span> <span class="token operator">&amp;</span>global_sum<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> MPI_DOUBLE<span class="token punctuation">,</span> MPI_SUM<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>在这个例子中，<code>count</code>被设置为100，表示每个进程将它所拥有的100个double元素进行规约。最终结果是一个全局的总和，存储在rank为0的进程中的<code>global_sum</code>变量中。</p></blockquote><h3 id="实验说明-3"><a href="#实验说明-3" class="headerlink" title="实验说明"></a>实验说明</h3><p>使用函数MPI_Reduce来完成加法规约到根进程的操作，并在根进程打印出总和和平均值。</p><p>输出结果：由于这里是测试用例，所以每个进程的数值都是取3.0。所以，输出的平均值应该是3。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">;</span><span class="token keyword">double</span> local_num <span class="token operator">=</span> <span class="token number">3.0</span><span class="token punctuation">;</span> <span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">double</span> global_num<span class="token punctuation">;</span>        <span class="token comment">//your code here</span>    <span class="token function">MPI_Reduce</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>local_num<span class="token punctuation">,</span> <span class="token operator">&amp;</span>global_num<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> MPI_DOUBLE<span class="token punctuation">,</span> MPI_SUM<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//end of your code</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>myid <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Total sum = %f, avg = %f\n"</span><span class="token punctuation">,</span> global_num<span class="token punctuation">,</span> global_num <span class="token operator">/</span> numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="广播（Bcast）"><a href="#广播（Bcast）" class="headerlink" title="广播（Bcast）"></a>广播（Bcast）</h2><p>在一个集合通信中，如果属于一个进程的数据被发送到通信子中的所有进程，这样的集合通信叫做广播。</p><h3 id="函数说明-5"><a href="#函数说明-5" class="headerlink" title="函数说明"></a>函数说明</h3><p>广播函数，从一个id值为source的进程将一条消息广播发送到通信子内的所有进程,包括它本身在内。</p><pre class="line-numbers language-none"><code class="language-none">int MPI_Bcast(void* buffer, int count, MPI_Datatype datatype, int source, MPI_Comm comm)缓冲区起始地址； 缓冲区数据个数； 数据类型； 发送信息的进程id； 通信子； <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>int MPI_Bcast(void* buffer, int count, MPI_Datatype datatype, int source, MPI_Comm comm)</code> ，用于在并行计算中广播数据。</p><p>参数说明：</p><ul><li><code>buffer</code>：指向要广播的缓冲区的指针。</li><li><code>count</code>：要广播的元素数量。</li><li><code>datatype</code>：缓冲区中元素的数据类型。</li><li><code>source</code>：广播数据的源进程的标识符。如果为0，则表示使用默认的源进程。</li><li><code>comm</code>：通信器对象，表示一组进程之间的通信关系。</li></ul><p>返回值：</p><ul><li>函数执行成功时返回0。</li><li>如果发生错误，则返回非零错误代码。</li></ul><blockquote><p><code>MPI_Bcast</code>，用于在并行计算环境中的所有进程间进行广播操作。该函数将源进程（由参数<code>source</code>指定）的数据广播到 communicator (<code>comm</code>) 中的其他所有进程中。</p><p>函数原型：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Bcast</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> buffer<span class="token punctuation">,</span> <span class="token keyword">int</span> count<span class="token punctuation">,</span> MPI_Datatype datatype<span class="token punctuation">,</span> <span class="token keyword">int</span> source<span class="token punctuation">,</span> MPI_Comm comm<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>参数解析：</p><ul><li><p><code>void* buffer</code>: 指向要发送或接收数据的缓冲区的指针。在非源进程中，这个缓冲区会被来自<code>source</code>进程的数据覆盖；在源进程中，它包含要广播的数据。</p></li><li><p><code>int count</code>: 要发送或接收的数据元素个数。例如，如果数据类型为<code>MPI_INT</code>，则<code>count</code>表示整数的数量。</p></li><li><p><code>MPI_Datatype datatype</code>: 数据类型的标识符，可以是预定义的基本类型如<code>MPI_INT</code>、<code>MPI_DOUBLE</code>等，也可以是用户自定义的复合类型。</p></li><li><p><code>int source</code>: 广播源进程的rank（编号）。只有这个进程提供数据，其余所有进程都会接收到同样的数据。</p></li><li><p><code>MPI_Comm comm</code>: 通信器，它定义了参与此次广播的所有进程集合。通常使用<code>MPI_COMM_WORLD</code>，即包含了所有参与计算的进程。</p></li></ul><p>函数返回值：<br><code>MPI_Bcast</code>函数返回一个<code>int</code>型数值，如果成功完成，则返回<code>MPI_SUCCESS</code>，否则返回错误代码。</p><p>功能描述：<br><code>MPI_Bcast</code>函数使得所有进程中的<code>buffer</code>区域内容相同，其内容来源于<code>source</code>进程的相应内存区域。这样，在并行程序中，一个进程可以通过广播的方式快速地将其数据同步给其他所有进程。</p></blockquote><h3 id="实验说明-4"><a href="#实验说明-4" class="headerlink" title="实验说明"></a>实验说明</h3><p>使用函数MPI_Bcast在根进程中发送一个数组到其他进程，并在其他进程中打印出来。</p><p>输出结果：<br>In process 1, arr[0]&#x3D;1 arr[1]&#x3D;2 arr[2]&#x3D;3 arr[3]&#x3D;4 arr[4]&#x3D;5<br>In process 3, arr[0]&#x3D;1 arr[1]&#x3D;2 arr[2]&#x3D;3 arr[3]&#x3D;4 arr[4]&#x3D;5<br>…<br>In process n, arr[0]&#x3D;1 arr[1]&#x3D;2 arr[2]&#x3D;3 arr[3]&#x3D;4 arr[4]&#x3D;5<br>…</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">;</span><span class="token keyword">int</span> source <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> array<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>myid <span class="token operator">==</span> source<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token comment">//your code here</span>    <span class="token function">MPI_Bcast</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> MPI_INT<span class="token punctuation">,</span> source<span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//end of your code</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>myid <span class="token operator">!=</span> source<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"In process %d, "</span><span class="token punctuation">,</span> myid<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"arr[%d]=%d\t"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="收集（gather）"><a href="#收集（gather）" class="headerlink" title="收集（gather）"></a>收集（gather）</h2><p>有时候我们希望在一个进程中从所有进程获取信息，例如将所有进程中的一个数组都收集到根进程中作进一步的处理，这样的集合通信我们叫做收集。</p><h3 id="函数说明-6"><a href="#函数说明-6" class="headerlink" title="函数说明"></a>函数说明</h3><p>收集函数，根进程（目标进程）从所有进程（包括它自己）收集发送缓冲区的数据，再根据发送这些数据的进程id将它们依次存放到自已的缓冲区中</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Gather</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> sendbuf<span class="token punctuation">,</span> <span class="token keyword">int</span> sendcount<span class="token punctuation">,</span> MPI_Datatype sendtype<span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span> recvbuf<span class="token punctuation">,</span> <span class="token keyword">int</span> recvcount<span class="token punctuation">,</span> MPI_Datatype recvtype<span class="token punctuation">,</span> <span class="token keyword">int</span> root<span class="token punctuation">,</span> MPI_Comm comm<span class="token punctuation">)</span> 发送缓冲区的起始地址；发送的数据个数；数据类型；接收缓冲区的起始地址；待接收的元素个数；接收的数据类型；接收进程id ；通信子 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>int MPI_Gather(void* sendbuf, int sendcount, MPI_Datatype sendtype, void* recvbuf, int recvcount, MPI_Datatype recvtype, int root, MPI_Comm comm)</code> ，用于将一个进程的局部数据收集到根进程中。</p><p>参数说明：</p><ul><li><code>sendbuf</code>：指向发送缓冲区的指针，该缓冲区包含要发送的数据。</li><li><code>sendcount</code>：要发送的元素数量。</li><li><code>sendtype</code>：发送缓冲区中元素的数据类型。</li><li><code>recvbuf</code>：指向接收缓冲区的指针，该缓冲区将存储接收到的数据。</li><li><code>recvcount</code>：每个进程应接收的元素数量。</li><li><code>recvtype</code>：接收缓冲区中元素的数据类型。</li><li><code>root</code>：根进程的标识符，即数据分发的起点。</li><li><code>comm</code>：通信器对象，表示一组进程之间的通信关系。</li></ul><p>返回值：</p><ul><li>函数执行成功时返回0。</li><li>如果发生错误，则返回非零错误代码。</li></ul><h3 id="实验说明："><a href="#实验说明：" class="headerlink" title="实验说明："></a>实验说明：</h3><p>使用函数MPI_Gather在根进程中从所有进程接收一个数组，并在根进程中打印出来。</p><p>输出结果：<br>Now is process 1’s data: arr[0]&#x3D;1 arr[1]&#x3D;2 arr[2]&#x3D;3 arr[3]&#x3D;4 arr[4]&#x3D;5<br>Now is process 4’s data: arr[0]&#x3D;1 arr[1]&#x3D;2 arr[2]&#x3D;3 arr[3]&#x3D;4 arr[4]&#x3D;5<br>Now is process 2’s data: arr[0]&#x3D;1 arr[1]&#x3D;2 arr[2]&#x3D;3 arr[3]&#x3D;4 arr[4]&#x3D;5<br>…<br>Now is process n’s data: arr[0]&#x3D;1 arr[1]&#x3D;2 arr[2]&#x3D;3 arr[3]&#x3D;4 arr[4]&#x3D;5</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">;</span><span class="token keyword">int</span> dest <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> array<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token operator">*</span>rbuf<span class="token punctuation">;</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span>j<span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>myid <span class="token operator">==</span> dest<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    rbuf<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>numprocs<span class="token operator">*</span><span class="token number">5</span><span class="token operator">*</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//your code here</span><span class="token function">MPI_Gather</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> MPI_INT<span class="token punctuation">,</span> rbuf<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> MPI_INT<span class="token punctuation">,</span> dest<span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//end of your code</span><span class="token keyword">if</span><span class="token punctuation">(</span>myid <span class="token operator">==</span> dest<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span>dest<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>numprocs<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Now is process %d's data: "</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"array[%d]=%d\t"</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> rbuf<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">5</span><span class="token operator">+</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="散发（scatter）"><a href="#散发（scatter）" class="headerlink" title="散发（scatter）"></a>散发（scatter）</h2><p>在前面我们学习了收集（gather）操作，那么与之相对应也有一个相反的集合通信操作，即根进程向所有进程发送缓冲区的数据，称为散发。</p><p>需要特别说明的是，散发操作和广播操作的区别在于发送到各个进程的信息可以是不同的。</p><h3 id="函数说明-7"><a href="#函数说明-7" class="headerlink" title="函数说明"></a>函数说明</h3><blockquote><p>MPI_SCATTER是MPI_GATHER的逆操作，另外一种解释是根进程通过MPI_Send发送一条消息,这条消息被分成n等份,第i份发送给组中的第i个处理器, 然后每个处理器如上所述接收相应的消息。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Scatter</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> sendbuf<span class="token punctuation">,</span> <span class="token keyword">int</span> sendcount<span class="token punctuation">,</span> MPI_Datatype sendtype<span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span> recvbuf<span class="token punctuation">,</span> <span class="token keyword">int</span> recvcount<span class="token punctuation">,</span> MPI_Datatype recvtype<span class="token punctuation">,</span><span class="token keyword">int</span> root<span class="token punctuation">,</span> MPI_Comm comm<span class="token punctuation">)</span> 发送缓冲区的起始地址；发送的数据个数；数据类型；接收缓冲区的起始地址；待接收的元素个数；数据类型；发送进程id；通信子 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>int MPI_Scatter(void* sendbuf, int sendcount, MPI_Datatype sendtype, void* recvbuf, int recvcount, MPI_Datatype recvtype,int root, MPI_Comm comm)</code> ，用于在并行计算中将数据从根进程分散到其他所有进程。</p><p>参数说明：</p><ul><li><code>sendbuf</code>：指向发送缓冲区的指针，该缓冲区包含要发送的数据。</li><li><code>sendcount</code>：要发送的元素数量。</li><li><code>sendtype</code>：发送缓冲区中元素的数据类型。</li><li><code>recvbuf</code>：指向接收缓冲区的指针，该缓冲区将存储接收到的数据。</li><li><code>recvcount</code>：每个进程应接收的元素数量。</li><li><code>recvtype</code>：接收缓冲区中元素的数据类型。</li><li><code>root</code>：根进程的标识符，即数据分发的起点。</li><li><code>comm</code>：通信器对象，表示一组进程之间的通信关系。</li></ul><p>返回值：</p><ul><li>函数执行成功时返回0。</li><li>如果发生错误，则返回非零错误代码。</li></ul><p>使用示例：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mpi.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> rank<span class="token punctuation">,</span> size<span class="token punctuation">;</span>    <span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>rank<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> sendbuf<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> recvbuf<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>rank <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 根进程初始化发送缓冲区</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            sendbuf<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 使用MPI_Scatter进行数据分发</span>    <span class="token function">MPI_Scatter</span><span class="token punctuation">(</span>sendbuf<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> MPI_INT<span class="token punctuation">,</span> recvbuf<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> MPI_INT<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Process %d received data: "</span><span class="token punctuation">,</span> rank<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> recvbuf<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>上述示例演示了如何使用<code>MPI_Scatter</code>函数将数据从根进程分散到其他所有进程。根进程初始化发送缓冲区，然后调用<code>MPI_Scatter</code>函数进行数据分发。其他进程接收到数据后，将其打印出来。</p></blockquote><h3 id="实验说明：-1"><a href="#实验说明：-1" class="headerlink" title="实验说明："></a>实验说明：</h3><p>使用函数MPI_Scatter在根进程中向所有进程发送对应数组，并在对应进程中打印出来。</p><p>输出结果：<br>Now is process 1: arr[0]&#x3D;5 arr[1]&#x3D;6 arr[2]&#x3D;7 arr[3]&#x3D;8 arr[4]&#x3D;9<br>Now is process 4: arr[0]&#x3D;20 arr[1]&#x3D;21 arr[2]&#x3D;22 arr[3]&#x3D;23 arr[4]&#x3D;24<br>Now is process 2: arr[0]&#x3D;10 arr[1]&#x3D;11 arr[2]&#x3D;12 arr[3]&#x3D;13 arr[4]&#x3D;14<br>…<br>Now is process n: arr[0]&#x3D;5<em>n arr[1]&#x3D;5</em>n+1 arr[2]&#x3D;5<em>n+2 arr[3]&#x3D;5</em>n+3 arr[4]&#x3D;5*n+4<br>…</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;mpi.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">;</span><span class="token keyword">int</span> source <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token operator">*</span>sbuf<span class="token punctuation">;</span><span class="token keyword">int</span> rbuf<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>myid <span class="token operator">==</span> source<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    sbuf<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>numprocs<span class="token operator">*</span><span class="token number">5</span><span class="token operator">*</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>numprocs<span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    sbuf<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>    <span class="token comment">// your code here</span>    <span class="token function">MPI_Scatter</span><span class="token punctuation">(</span>sbuf<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> MPI_INT<span class="token punctuation">,</span> rbuf<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> MPI_INT<span class="token punctuation">,</span> source<span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// end of your code</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Now is process %d: "</span><span class="token punctuation">,</span> myid<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"array[%d]=%d\t"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> rbuf<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Reduce和Gatherr的区别"><a href="#Reduce和Gatherr的区别" class="headerlink" title="Reduce和Gatherr的区别"></a>Reduce和Gatherr的区别</h2><p><code>MPI_Reduce</code> 和 <code>MPI_Gather</code> 是 MPI（Message Passing Interface）中用于并行计算中的两种不同的集合通信操作。它们的主要区别在于数据的处理方式和目的：</p><ol><li><p><strong>MPI_Reduce</strong>：</p><ul><li>功能：<code>MPI_Reduce</code>函数是用来执行一个全局的规约操作，例如求和、最大值、最小值等，将所有进程中的独立数据集合到一个进程中去，并且在这个过程中应用了一个指定的操作符对这些数据进行归约。</li><li>用法：每个进程提供一块本地数据，然后通过调用<code>MPI_Reduce</code>函数，系统会根据提供的操作符（如<code>MPI_SUM</code>、<code>MPI_MAX</code>等）在所有进程中对该类型的数据进行归约运算，最终结果只存在于调用者指定的一个进程中（通常称为根进程，由参数决定）。</li><li>示例：如果每个进程有一个整数变量，使用<code>MPI_Reduce</code>可以将所有进程的整数加起来得到总的和。</li></ul></li><li><p><strong>MPI_Gather</strong>：</p><ul><li>功能：<code>MPI_Gather</code>函数则是用来从所有参与通信的进程中收集相同数量的数据，并将这些数据按照进程的秩顺序排列后，合并到根进程的一个连续内存区域中。</li><li>用法：每个进程都有一个本地数据缓冲区，调用<code>MPI_Gather</code>后，所有进程的数据都会被收集到根进程的一个大缓冲区中，形成一个数组，其中数组的第i个元素来自于秩为i的进程的本地数据。</li><li>示例：如果有10个进程，每个进程有一个长度为10的浮点数数组，使用<code>MPI_Gather</code>可以在根进程处创建一个新的大小为10x10的二维数组，其中每一列来自一个进程的原始数组。</li></ul></li></ol><p>总结来说，<code>MPI_Reduce</code>是做数据的聚合和操作，目标是得到单个进程上的唯一结果；而<code>MPI_Gather</code>则更像是数据的汇总，不涉及数据之间的操作，目标是将各个进程的数据拼接到一起形成一个完整的集合。</p><h2 id="Bcast和Scatter的区别"><a href="#Bcast和Scatter的区别" class="headerlink" title="Bcast和Scatter的区别"></a>Bcast和Scatter的区别</h2><p><code>MPI_Bcast</code>（Broadcast）和<code>MPI_Scatter</code>（Scatter）是Message Passing Interface (MPI) 中用于并行计算的两种集合通信操作，它们的主要区别在于数据分发的方式和目的：</p><ol><li><p><strong>MPI_Bcast</strong>：</p><ul><li>功能：<code>MPI_Bcast</code>函数执行的是广播操作，即从一个指定的进程（称为“根进程”）将相同的数据发送给 communicator 内的所有其他进程。</li><li>用法：在调用<code>MPI_Bcast</code>时，所有进程都会提供一个缓冲区，但只有根进程的缓冲区中的数据会被广播。执行后，所有参与通信的进程中缓冲区的内容都会被更新为根进程缓冲区中广播出去的数据。</li><li>示例场景：例如，如果根进程有一个全局参数需要所有的其他进程知道，那么就可以使用<code>MPI_Bcast</code>来快速地让所有进程获取到相同的参数值。</li></ul></li><li><p><strong>MPI_Scatter</strong>：</p><ul><li>功能：<code>MPI_Scatter</code>函数则负责将根进程的一个大数组分割成多个子块，并将这些子块分别发送给 communicator 内的不同进程。</li><li>用法：每个进程都提供一个接收缓冲区，但内容大小通常小于或等于根进程的发送缓冲区。执行后，各个进程接收到的数据来自原始大数组的不同部分，而不是完全相同的数据。</li><li>示例场景：比如，在分布式矩阵乘法中，根进程拥有一个大的矩阵A，它可能需要将矩阵A的各行分散给不同的进程进行局部计算，这时可以使用<code>MPI_Scatter</code>将矩阵A拆分成多份并分发给各个进程。</li></ul></li></ol><p>总结来说，<code>MPI_Bcast</code>用于向所有进程发送相同的数据副本，而<code>MPI_Scatter</code>则是将数据分解后分配给各个进程，每个进程得到的数据不同，通常是原始数据的一个子集。</p><h2 id="计算运行时间"><a href="#计算运行时间" class="headerlink" title="计算运行时间"></a>计算运行时间</h2><p>可以使用MPI_Wtime函数在并行代码中计算运行时间，用MPI_Wtick来查看精度。</p><h3 id="函数说明-8"><a href="#函数说明-8" class="headerlink" title="函数说明"></a>函数说明</h3><p>MPI_WTIME：<code>返回</code>一个用浮点数表示的秒数, 它表示从过去某一时刻到调用时刻所经历的时间</p><p>MPI_WTICK：<code>返回</code>MPI_WTIME的精度，单位是秒，可以认为是一个时钟滴答所占用的时间</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">double</span> <span class="token function">MPI_Wtime</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token keyword">double</span> <span class="token function">MPI_Wtick</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><code>double MPI_Wtime(void)</code> 是一个用于获取当前进程的墙钟时间的函数。它返回一个双精度浮点数，表示从某个固定时间点（通常是程序启动时）到现在所经过的时间，单位为秒。这个函数通常用于性能分析和调试。</p><p><code>double MPI_Wtick(void)</code> 是一个用于获取当前进程的墙钟时间间隔的函数。它返回一个双精度浮点数，表示从上一次调用 <code>MPI_Wtime()</code> 函数到现在所经过的时间间隔，单位为秒。这个函数通常用于性能分析和调试。</p><h3 id="实验说明-5"><a href="#实验说明-5" class="headerlink" title="实验说明"></a>实验说明</h3><p>使用函数MPI_Wtime计算并行代码的运行时间，并且在两次计算时间的函数之间用函数MPI_WTICK打印出精度</p><p>输出结果：</p><p>The precision is: 1e-06<br>Hello World!I’m rank … of …, running … seconds</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">;</span><span class="token keyword">double</span> start<span class="token punctuation">,</span> finish<span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//your code here</span>start <span class="token operator">=</span> <span class="token function">MPI_Wtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"The precision is: %f\n"</span><span class="token punctuation">,</span> <span class="token function">MPI_Wtick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>finish <span class="token operator">=</span> <span class="token function">MPI_Wtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//your code here</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello World!I'm rank %d of %d, running %f seconds.\n"</span><span class="token punctuation">,</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">,</span> finish<span class="token operator">-</span>start<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="同步"><a href="#同步" class="headerlink" title="同步"></a>同步</h2><p>例如，希望保证所有进程中并行代码在某个地方同时开始运行，或者在某个函数调用结束之前不能返回。</p><p>这时候我们就需要使用到MPI_Barrier函数。</p><h3 id="函数说明："><a href="#函数说明：" class="headerlink" title="函数说明："></a>函数说明：</h3><p>阻止调用直到communicator中所有进程已经完成调用，就是说，任意一次进程的调用只能在所有communicator中的成员已经开始调用之后进行。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Barrier</span><span class="token punctuation">(</span>MPI_Comm comm<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>MPI_Barrier(MPI_Comm comm)</code> 是一个用于同步进程的函数。它接受一个参数：</p><ol><li><code>MPI_Comm comm</code>：一个通信器对象，表示要同步的进程组。</li></ol><p>该函数返回一个整数，表示操作的结果。如果操作成功，返回值为 <code>MPI_SUCCESS</code>；否则，返回一个非零的错误代码。</p><h3 id="实验说明：-2"><a href="#实验说明：-2" class="headerlink" title="实验说明："></a>实验说明：</h3><p>在计算运行时间的信息之前调用MPI_Barrier函数完成同步。</p><p>输出结果：</p><p>The precision is: 1e-06<br>Hello World!I’m rank … of …, running … seconds.</p><p>在此示例程序中，可能是否调用函数不影响最终输出，但这并不意味着效果相同。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">;</span><span class="token keyword">double</span> start<span class="token punctuation">,</span> finish<span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//your code here</span><span class="token function">MPI_Barrier</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//end of your code</span>start <span class="token operator">=</span> <span class="token function">MPI_Wtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"The precision is: %f\n"</span><span class="token punctuation">,</span> <span class="token function">MPI_Wtick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>finish <span class="token operator">=</span> <span class="token function">MPI_Wtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello World!I'm rank %d of %d, running %f seconds.\n"</span><span class="token punctuation">,</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">,</span> finish<span class="token operator">-</span>start<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="组的管理"><a href="#组的管理" class="headerlink" title="组的管理"></a>组的管理</h2><h3 id="创建（1）"><a href="#创建（1）" class="headerlink" title="创建（1）"></a>创建（1）</h3><p>组是一个进程的有序集合，在实现中可以看作是进程标识符的一个有序集。组内的每个进程与一个整数rank相联系，序列号从0开始并且是连续的。我们可以在通信组中使用组，来描述通信空间中的参与者并对这些参与者进行分级（这样在通信空间中为它们赋予了唯一的名字）</p><p>由此可见，组是我们对进程集合更高一级的抽象，我们可以在组的基础上对各个进程进行更进一步的操作，例如通过虚拟拓扑来辅助并行操作的实现。</p><p>在这里我们先介绍两个特殊的预定义组，MPI_GROUP_EMPTY和MPI_GROUP_NULL。<br>需要特别说明的是，前者是一个空组的有效句柄，可以在组操作中作为一个参数使用；而后者是一个无效句柄，在组释放时会被返回。</p><h4 id="函数说明-9"><a href="#函数说明-9" class="headerlink" title="函数说明"></a>函数说明</h4><blockquote><p>MPI_Comm_group用来建立一个通信组对应的新进程组</p><p>MPI_Group_rank查询调用进程在进程组里的rank</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Comm_group</span><span class="token punctuation">(</span>MPI_Comm comm<span class="token punctuation">,</span> MPI_Group <span class="token operator">*</span>group<span class="token punctuation">)</span><span class="token keyword">int</span> <span class="token function">MPI_Group_rank</span><span class="token punctuation">(</span>MPI_Group group<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>rank<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><code>MPI_Comm_group(MPI_Comm comm, MPI_Group *group)</code> 是一个用于获取进程组的函数。它接受两个参数：</p><ol><li><code>MPI_Comm comm</code>：一个通信器对象，表示要查询的进程组所属的通信器。</li><li><code>MPI_Group *group</code>：一个指向 <code>MPI_Group</code> 类型的指针，用于存储查询到的进程组。</li></ol><p>该函数返回一个整数，表示操作的结果。如果操作成功，返回值为 <code>MPI_SUCCESS</code>；否则，返回一个非零的错误代码。</p><p><code>MPI_Group_rank(MPI_Group group, int *rank)</code> 是一个用于获取进程组中某个进程的排名的函数。它接受两个参数：</p><ol><li><code>MPI_Group group</code>：一个进程组对象，表示要查询的进程组。</li><li><code>int *rank</code>：一个指向整数类型的指针，用于存储查询到的进程排名。</li></ol><p>该函数返回一个整数，表示操作的结果。如果操作成功，返回值为 <code>MPI_SUCCESS</code>；否则，返回一个非零的错误代码。</p></blockquote><h4 id="实验说明-6"><a href="#实验说明-6" class="headerlink" title="实验说明"></a>实验说明</h4><p>建立一个与初始通信子MPI_COMM_WORLD相联系的组，打印出当前进程在进程组的rank。</p><p>输出结果:<br>rank： 1<br>rank： 0<br>…<br>rank： n</p><p>顺序不唯一</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">;</span>MPI_Group group_world<span class="token punctuation">;</span><span class="token keyword">int</span> rank_of_group<span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// your code here</span><span class="token function">MPI_Comm_group</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>group_world<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Group_rank</span><span class="token punctuation">(</span>group_world<span class="token punctuation">,</span> <span class="token operator">&amp;</span>rank_of_group<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// end of your code</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"rank: %d\n"</span><span class="token punctuation">,</span> rank_of_group<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="创建（2）"><a href="#创建（2）" class="headerlink" title="创建（2）"></a>创建（2）</h3><p>上一节我们知道，可以用MPI_Comm_group函数来获得与通信组MPI_COMM_WORLD相关联的组句柄。<br>那么我们可以用这个组句柄做什么呢？</p><p>首先，我们可以通过这个最原始的组句柄来创建更多的、满足我们需要的组。</p><p>在这里需要特别说明的是，MPI没提供凭空构造一个组的的机制，而只能从其它以前定义的组中构造。最基本的组是与初始通信子MPI_COMM_WORLD相联系的组（可通过函数MPI_COMM_GROUP获得〕，其它的组在该组基础上定义。</p><h4 id="函数说明-10"><a href="#函数说明-10" class="headerlink" title="函数说明"></a>函数说明</h4><blockquote><p>基于已经存在的进程组创建一个新的组，并指明被包含(included)其中的成员进程。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Group_incl</span><span class="token punctuation">(</span>MPI_Group old_group<span class="token punctuation">,</span> <span class="token keyword">int</span> count<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>members<span class="token punctuation">,</span> MPI_Group <span class="token operator">*</span>new_group<span class="token punctuation">)</span>旧进程组要包含在新进程组的进程数量  要放入新进程组的进程的编号数组 指针指向新进程组<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>这个函数用于创建一个新的进程组，该组包含旧进程组中指定的成员。</p><p>参数解析：</p><ul><li><code>old_group</code>：一个MPI_Group类型的变量，表示要复制的旧进程组。</li><li><code>count</code>：一个整数，表示要包含在新的进程组中的进程数量。</li><li><code>members</code>：一个整数数组，包含了要包含在新进程组中的进程的标识符。</li><li><code>new_group</code>：一个MPI_Group类型的指针，指向新创建的进程组。</li></ul><p>函数执行后，<code>new_group</code>将指向一个新创建的进程组，该进程组包含了<code>old_group</code>中指定的成员。</p></blockquote><h4 id="实验说明-7"><a href="#实验说明-7" class="headerlink" title="实验说明"></a>实验说明</h4><p>基于与初始通信子MPI_COMM_WORLD相联系的组创建一个新的组，这个新的组的成员是通信者MPI_COMM_WORLD的奇数编号的进程。</p><p>输出结果格式应如下：<br>In process n: odd rank is x<br>…</p><p>需要特别说明的是，如果在偶数编号的进程中，也就是不属于这个组的进程中输出这个值，MPI_Group_rank会返回MPI_UNDEFINED作为group_rank的值，表示它不是 worker_group的成员，在MPICH里是-32766。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">,</span> odd_rank<span class="token punctuation">;</span>MPI_Group group_world<span class="token punctuation">,</span> odd_group<span class="token punctuation">;</span><span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token keyword">int</span> members<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_group</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>group_world<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>numprocs<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>members<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span>i<span class="token operator">+</span><span class="token number">1</span> <span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// your code here</span><span class="token function">MPI_Group_incl</span><span class="token punctuation">(</span>group_world<span class="token punctuation">,</span> numprocs<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> members<span class="token punctuation">,</span> <span class="token operator">&amp;</span>odd_group<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// end of your code</span><span class="token function">MPI_Group_rank</span><span class="token punctuation">(</span>odd_group<span class="token punctuation">,</span> <span class="token operator">&amp;</span>odd_rank<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"In process %d: odd rank is %d\n"</span><span class="token punctuation">,</span> myid<span class="token punctuation">,</span> odd_rank<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="创建（3）"><a href="#创建（3）" class="headerlink" title="创建（3）"></a>创建（3）</h3><p>同样，我们在基于旧进程组创建一个新的组的时候，可能希望排除一些成员进程。</p><p>当然，我们可以通过选择出剩下的成员进程的方法来达成我们的目的，但是MPI提供了更好的办法去实现它。</p><h4 id="函数说明-11"><a href="#函数说明-11" class="headerlink" title="函数说明"></a>函数说明</h4><blockquote><p>基于已经存在的进程组创建一个新的组，并指明不被包含(excluded)其中的成员进程。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Group_excl</span><span class="token punctuation">(</span>MPI_Group old_group<span class="token punctuation">,</span> <span class="token keyword">int</span> count<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>nonmembers<span class="token punctuation">,</span> MPI_Group <span class="token operator">*</span>new_group<span class="token punctuation">)</span>旧进程组；要包含在新的进程组中的进程数量；不需要放入新进程组的进程的编号；新进程组的指针；<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>这个函数用于创建一个新的进程组，该组包含旧进程组中指定的成员，但不包含非成员列表中的进程。</p><p>参数解析：</p><ul><li><code>old_group</code>：一个MPI_Group类型的变量，表示要复制的旧进程组。</li><li><code>count</code>：一个整数，表示要包含在新的进程组中的进程数量。</li><li><code>nonmembers</code>：一个整数数组，包含了不包含在新进程组中的进程的标识符。</li><li><code>new_group</code>：一个MPI_Group类型的指针，指向新创建的进程组。</li></ul><p>函数执行后，<code>new_group</code>将指向一个新创建的进程组，该进程组包含了<code>old_group</code>中指定的成员，但不包含<code>nonmembers</code>列表中的进程。</p></blockquote><h4 id="实验说明-8"><a href="#实验说明-8" class="headerlink" title="实验说明"></a>实验说明</h4><p>基于与初始通信子MPI_COMM_WORLD相联系的组创建一个新的组，这个新的组的成员是通信者MPI_COMM_WORLD的偶数编号的进程。</p><p>输出结果格式应如下：<br>In process n: even rank is x<br>…</p><p>需要特别说明的是，如果在奇数编号的进程中，也就是不属于这个组的进程中输出这个值，MPI_Group_rank会返回MPI_UNDEFINED作为group_rank的值，表示它不是 worker_group的成员，在MPICH里这个值是-32766。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">,</span> even_rank<span class="token punctuation">;</span>MPI_Group group_world<span class="token punctuation">,</span> even_group<span class="token punctuation">;</span><span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token keyword">int</span> nonmembers<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_group</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>group_world<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>numprocs<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>nonmembers<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span>i<span class="token operator">+</span><span class="token number">1</span> <span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// your code here</span><span class="token function">MPI_Group_excl</span><span class="token punctuation">(</span>group_world<span class="token punctuation">,</span> numprocs<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> nonmembers<span class="token punctuation">,</span> <span class="token operator">&amp;</span>even_group<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// end of your code</span><span class="token function">MPI_Group_rank</span><span class="token punctuation">(</span>even_group<span class="token punctuation">,</span> <span class="token operator">&amp;</span>even_rank<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"In process %d: even rank is %d\n"</span><span class="token punctuation">,</span> myid<span class="token punctuation">,</span> even_rank<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="相对编号"><a href="#相对编号" class="headerlink" title="相对编号"></a>相对编号</h3><p>在创建组之后，可能会有这个疑惑：如果知道了在组MPI_COMM_WORLD中某些进程的编号，如何根据这些编号来操作在不同组的同一进程来完成不同的任务呢？</p><p>MPI提供了这样的函数以应付这种常见的情景。</p><h4 id="函数说明-12"><a href="#函数说明-12" class="headerlink" title="函数说明"></a>函数说明</h4><p>检测两个不同组中相同进程的相对编号。如果属于进程组1的某个进程可以在ranks1中找到，而这个进程不属于进程组2，则在ranks2中对应ranks1的位置返回值为MPI_UNDEFINED。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Group_translate_ranks</span><span class="token punctuation">(</span>MPI_Group group1<span class="token punctuation">,</span> <span class="token keyword">int</span> count<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>ranks1<span class="token punctuation">,</span> MPI_Group group2<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>ranks2<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>MPI_Group_translate_ranks</code>函数用于将一个进程组中的进程排名映射到另一个进程组中的进程排名。它接受以下参数：</p><ul><li><code>group1</code>：第一个进程组，类型为<code>MPI_Group</code>。</li><li><code>count</code>：要转换的进程数量，类型为整数。</li><li><code>ranks1</code>：指向包含要转换的进程排名的数组的指针，类型为整数指针。</li><li><code>group2</code>：第二个进程组，类型为<code>MPI_Group</code>。</li><li><code>ranks2</code>：指向存储转换后的进程排名的数组的指针，类型为整数指针。</li></ul><p>该函数返回一个<code>int</code>类型的值，表示操作的结果。如果操作成功，返回值为<code>MPI_SUCCESS</code>；否则，返回一个非零的错误代码。</p><h4 id="实验说明-9"><a href="#实验说明-9" class="headerlink" title="实验说明"></a>实验说明</h4><p>建立两个进程组，打印出进程组2中对应进程组1的进程的编号。</p><p>输出结果格式：<br>The rank in group2 is: -32766<br>The rank in group2 is: 0<br>…</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">;</span>MPI_Group group_world<span class="token punctuation">,</span> group1<span class="token punctuation">,</span> group2<span class="token punctuation">;</span><span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token keyword">int</span> ranks1<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> ranks2<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> ranks_output<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_group</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>group_world<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>numprocs<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>ranks1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token punctuation">;</span>ranks2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span> <span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">MPI_Group_incl</span><span class="token punctuation">(</span>group_world<span class="token punctuation">,</span> numprocs<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> ranks1<span class="token punctuation">,</span> <span class="token operator">&amp;</span>group1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Group_incl</span><span class="token punctuation">(</span>group_world<span class="token punctuation">,</span> numprocs<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> ranks2<span class="token punctuation">,</span> <span class="token operator">&amp;</span>group2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// your code here</span><span class="token function">MPI_Group_translate_ranks</span><span class="token punctuation">(</span>group1<span class="token punctuation">,</span> numprocs<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> ranks1<span class="token punctuation">,</span> group2<span class="token punctuation">,</span> ranks_output<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// end of your code</span><span class="token keyword">if</span> <span class="token punctuation">(</span>myid <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>numprocs<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"The rank in group2 is: %d\n"</span><span class="token punctuation">,</span> ranks_output<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="释放"><a href="#释放" class="headerlink" title="释放"></a>释放</h3><p>既然有了组的构造，那么与之对应也存在组的析构。</p><h4 id="函数说明-13"><a href="#函数说明-13" class="headerlink" title="函数说明"></a>函数说明</h4><blockquote><p>调用函数会标记一个被释放的组对象，组句柄被调用置为MPI_GROUP_NULL。任何正在使用此组的操作将正常完成。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Group_free</span><span class="token punctuation">(</span>MPI_Group <span class="token operator">*</span>group<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>int MPI_Group_free(MPI_Group *group)</code> 是一个MPI（Message Passing Interface，消息传递接口）函数，用于释放一个已经创建的进程组。</p><p>参数：</p><ul><li><code>group</code>：指向要释放的进程组的指针。</li></ul><p>返回值：</p><ul><li>函数执行成功时返回0。</li><li>如果发生错误，则返回非零错误代码。</li></ul></blockquote><h4 id="实验说明-10"><a href="#实验说明-10" class="headerlink" title="实验说明"></a>实验说明</h4><p>建立一个进程组，打印出它的size，然后释放它。</p><p>输出结果格式应如下：<br>Now the size is n<br>Now the group is freed.</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">;</span>MPI_Group group_world<span class="token punctuation">;</span><span class="token keyword">int</span> size0<span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_group</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>group_world<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Group_size</span><span class="token punctuation">(</span>group_world<span class="token punctuation">,</span> <span class="token operator">&amp;</span>size0<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>myid <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Now the size is %d\n"</span><span class="token punctuation">,</span> size0<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// your code here</span><span class="token function">MPI_Group_free</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>group_world<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// end of your code</span><span class="token keyword">if</span><span class="token punctuation">(</span>myid <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>group_world <span class="token operator">==</span> MPI_GROUP_NULL<span class="token punctuation">)</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Now the group is freed.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="比较"><a href="#比较" class="headerlink" title="比较"></a>比较</h3><p>有时候我们想要对两个进程组做最基本的判断，例如成员是否相同，次序是否一致等等。</p><p>MPI同样提供了这样的函数来完成这个功能。</p><h4 id="函数说明-14"><a href="#函数说明-14" class="headerlink" title="函数说明"></a>函数说明</h4><p>如果在两个组中成员和次序完全相等，返回MPI_IDENT。例如在group1和group2是同一句柄时就会发生这种情况。如果组成员相同而次序不同则返回MPI_SIMILAR，否则返回MPI_UNEQUAL</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Group_compare</span><span class="token punctuation">(</span>MPI_Group group1<span class="token punctuation">,</span> MPI_Group group2<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>result<span class="token punctuation">)</span>MPI_Group group1： 要比较的组<span class="token number">1</span>；MPI_Group group2： 要比较的组<span class="token number">2</span>；<span class="token keyword">int</span> <span class="token operator">*</span>result：结果；<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>int MPI_Group_compare(MPI_Group group1, MPI_Group group2, int *result)</code> 是一个MPI（Message Passing Interface，消息传递接口）函数，用于比较两个进程组是否相等。</p><p>参数：</p><ul><li><code>group1</code>：指向第一个要比较的进程组的指针。</li><li><code>group2</code>：指向第二个要比较的进程组的指针。</li><li><code>result</code>：指向一个整数的指针，用于存储比较结果。如果 <code>group1</code> 和 <code>group2</code> 相等，则 <code>*result</code> 的值为0；如果 <code>group1</code> 包含 <code>group2</code> 的所有进程，则 <code>*result</code> 的值为正数；如果 <code>group2</code> 包含 <code>group1</code> 的所有进程，则 <code>*result</code> 的值为负数；如果 <code>group1</code> 和 <code>group2</code> 没有共同的进程，则 <code>*result</code> 的值为正数且大于等于 <code>group1</code> 的大小。</li></ul><p>返回值：</p><ul><li>函数执行成功时返回0。</li><li>如果发生错误，则返回非零错误代码。</li></ul><h4 id="实验说明-11"><a href="#实验说明-11" class="headerlink" title="实验说明"></a>实验说明</h4><p>创建一个新的组，通过调整输出两个不同的结果。</p><p>输出结果格式应如下：<br>Now the groups are identical.<br>Now the groups are unequal.<br>…</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">;</span>MPI_Group group_world<span class="token punctuation">,</span> new_group_world<span class="token punctuation">;</span><span class="token keyword">int</span> members<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> result<span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_group</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>group_world<span class="token punctuation">)</span><span class="token punctuation">;</span>members<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span><span class="token function">MPI_Group_incl</span><span class="token punctuation">(</span>group_world<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> members<span class="token punctuation">,</span> <span class="token operator">&amp;</span>new_group_world<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>myid <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// your code here</span><span class="token function">MPI_Group_compare</span><span class="token punctuation">(</span>group_world<span class="token punctuation">,</span> group_world<span class="token punctuation">,</span> <span class="token operator">&amp;</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// end of your code</span><span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> MPI_IDENT<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Now the groups are identical.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> MPI_SIMILAR<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Now the groups are similar.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Now the groups are unequal.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// your code here</span><span class="token function">MPI_Group_compare</span><span class="token punctuation">(</span>group_world<span class="token punctuation">,</span> new_group_world<span class="token punctuation">,</span> <span class="token operator">&amp;</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// end of your code</span><span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> MPI_IDENT<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Now the groups are identical.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> MPI_SIMILAR<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Now the groups are similar.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Now the groups are unequal.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="通信子的管理"><a href="#通信子的管理" class="headerlink" title="通信子的管理"></a>通信子的管理</h2><h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><p>在实际开发中，我们往往需要很多不同的通信子来满足需求，这时候就需要创建新的通信子。</p><h4 id="函数说明-15"><a href="#函数说明-15" class="headerlink" title="函数说明"></a>函数说明</h4><p>用由group所定义的通信组及一个新的上下文创建了一个新的通信子newcomm。对于不在group中的进程，函数返回MPI_COMM_NULL。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Comm_create</span><span class="token punctuation">(</span>MPI_Comm comm<span class="token punctuation">,</span> MPI_Group group<span class="token punctuation">,</span> MPI_Comm <span class="token operator">*</span>newcomm<span class="token punctuation">)</span>MPI_Comm comm ： 旧的通信子；MPI_Group group ： 与comm相关联的组或其子集；MPI_Comm <span class="token operator">*</span>newcomm ： 新的通信子；<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>int MPI_Comm_create(MPI_Comm comm, MPI_Group group, MPI_Comm *newcomm)</code> 是一个MPI（Message Passing Interface，消息传递接口）函数，用于创建一个新的通信器。</p><p>参数：</p><ul><li><code>comm</code>：指向现有通信器的指针</li><li><code>group</code>：指向要包含在新通信器中的进程组的指针</li><li><code>newcomm</code>：指向新创建的通信器的指针</li></ul><p>返回值：</p><ul><li>函数执行成功时返回0</li><li>如果发生错误，则返回非零错误代码</li></ul><h4 id="实验说明-12"><a href="#实验说明-12" class="headerlink" title="实验说明"></a>实验说明</h4><p>复制一个新的通信子，并以此为基础创建一个新的通信子。由于示例是用奇数编号的进程来创建通信子的，所以只在奇数进程中输出结果。</p><p>输出结果格式应如下：<br>The new comm’s size is 2.<br>The new comm’s size is 2.<br>…</p><p>注意，如果没有添加创建函数的代码，天河可能会由于超时返回长时间没有响应的提示信息。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">,</span> new_numprocs<span class="token punctuation">;</span>MPI_Group group_world<span class="token punctuation">,</span> odd_group<span class="token punctuation">;</span>MPI_Comm new_comm<span class="token punctuation">;</span><span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token keyword">int</span> members<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_group</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>group_world<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>numprocs<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>members<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span>i<span class="token operator">+</span><span class="token number">1</span> <span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">MPI_Group_incl</span><span class="token punctuation">(</span>group_world<span class="token punctuation">,</span> numprocs<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> members<span class="token punctuation">,</span> <span class="token operator">&amp;</span>odd_group<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// your code here</span><span class="token function">MPI_Comm_create</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> odd_group<span class="token punctuation">,</span> <span class="token operator">&amp;</span>new_comm<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// end of your code</span><span class="token keyword">if</span> <span class="token punctuation">(</span>myid <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>new_comm<span class="token punctuation">,</span> <span class="token operator">&amp;</span>new_numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"The new comm's size is %d.\n"</span><span class="token punctuation">,</span> new_numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="复制"><a href="#复制" class="headerlink" title="复制"></a>复制</h3><p>在之前的学习中，我们经常使用系统帮助我们创建的初始组内通信子MPI_COMM_WORLD作为通信子的输入。</p><p>其实，还有两个系统默认创建的通信子，一个是COMM_SELF，另一个是COMM_NULL。<br>COMM_SELF仅仅包含了当前进程，而COMM_NULL则什么进程都没有包含。</p><p>在通信子的创建中，需要特别注意的是MPI中有一个”鸡生蛋, 蛋生鸡”的特点，即所有MPI通信子的创建都是由基础通信子，即MPI_COMM_WORLD（是在MPI的外部被定义的），创建的。而这些被创建的通信子又可以作为新的通信子创建的基础。</p><p>这个模型是经过讨论后确定的，目的是为了提高用MPI写程序的安全性。</p><h4 id="函数说明-16"><a href="#函数说明-16" class="headerlink" title="函数说明"></a>函数说明</h4><p>复制已存在的通信子comm。</p><pre class="line-numbers language-none"><code class="language-none">int MPI_Comm_dup(MPI_Comm comm,MPI_Comm *newcomm)MPI_Comm comm ： 旧的通信子；MPI_Comm *newcomm ： 新的通信子；<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><code>int MPI_Comm_dup(MPI_Comm comm, MPI</code>int MPI_Comm_dup(MPI_Comm comm, MPI_Comm *newcomm)&#96; 是一个MPI（Message Passing Interface，消息传递接口）函数，用于复制一个现有的通信器。</p><p>参数：</p><ul><li><code>comm</code>：指向要复制的现有通信器的指针。</li><li><code>newcomm</code>：指向新创建的通信器的指针。</li></ul><p>返回值：</p><ul><li>函数执行成功时返回0。</li><li>如果发生错误，则返回非零错误代码。</li></ul><h4 id="实验说明-13"><a href="#实验说明-13" class="headerlink" title="实验说明"></a>实验说明</h4><p>复制一个新的通信子，需要特别说明的是，结果显示MPI_IDENT表示上下文(context)和组(group)都相同，MPI_CONGRUENT表示上下文不同(different)但组完全相同(identical)，MPI_SIMILAR表示上下文不同，组的成员相同但次序不同(similar)，否则就是MPI_UNEQUAL。</p><p>输出结果格式应如下：<br>The comms are congruent.<br>…</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">;</span>MPI_Comm new_comm<span class="token punctuation">;</span> <span class="token keyword">int</span> result<span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// your code here</span><span class="token function">MPI_Comm_dup</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>new_comm<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// end of your code</span><span class="token function">MPI_Comm_compare</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> new_comm<span class="token punctuation">,</span> <span class="token operator">&amp;</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>myid <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span> result <span class="token operator">==</span> MPI_IDENT<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"The comms are identical.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> result <span class="token operator">==</span> MPI_CONGRUENT <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"The comms are congruent.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> result <span class="token operator">==</span> MPI_SIMILAR <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"The comms are similar.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> result <span class="token operator">==</span> MPI_UNEQUAL <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"The comms are unequal.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="释放-1"><a href="#释放-1" class="headerlink" title="释放"></a>释放</h3><p>同样，通信子也存在析构的操作。</p><h4 id="函数说明：-1"><a href="#函数说明：-1" class="headerlink" title="函数说明："></a>函数说明：</h4><pre class="line-numbers language-none"><code class="language-none">int MPI_Comm_free(MPI_Comm *comm)MPI_Comm *comm ： 通信子；<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>用由group所定义的通信组及一个新的上下文创建了一个新的通信子newcomm。对于不在group中的进程，函数返回MPI_COMM_NULL。</p><p><code>int MPI_Comm_free(MPI_Comm *comm)</code> <code>int MPI_Comm_free(MPI_Comm *comm)</code> 是一个MPI（Message Passing Interface，消息传递接口）函数，用于释放一个已经创建的通信器。</p><p>参数：</p><ul><li><code>comm</code>：指向要释放的通信器的指针。</li></ul><p>返回值：</p><ul><li>函数执行成功时返回0。</li><li>如果发生错误，则返回非零错误代码。</li></ul><h4 id="实验说明-14"><a href="#实验说明-14" class="headerlink" title="实验说明"></a>实验说明</h4><p>这是一个标志通信对象撤消的集合操作。值得注意的是，这个函数操作只是将句柄置为MPI_COMM_NULL，任何使用此通信子的挂起操作都会正常完成；仅当没有对此对象的活动引用时，它才会被实际撤消。</p><p>输出结果格式应如下：<br>The comm is freed.<br>…</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">;</span>MPI_Comm new_comm<span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_dup</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>new_comm<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// your code here</span><span class="token function">MPI_Comm_free</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>new_comm<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// end of your code</span><span class="token keyword">if</span><span class="token punctuation">(</span>myid <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>new_comm <span class="token operator">==</span> MPI_COMM_NULL<span class="token punctuation">)</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Now the comm is freed.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="划分"><a href="#划分" class="headerlink" title="划分"></a>划分</h3><p>有时候我们希望根据拓扑来创建不同的域，例如创建一个二维数组，显然一个个创建是很不方便的，这时候我们需要用到一个新的函数来进行划分。</p><h4 id="函数说明-17"><a href="#函数说明-17" class="headerlink" title="函数说明"></a>函数说明</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Comm_split</span><span class="token punctuation">(</span>MPI_Comm comm<span class="token punctuation">,</span> <span class="token keyword">int</span> color<span class="token punctuation">,</span> <span class="token keyword">int</span> key<span class="token punctuation">,</span> MPI_Comm <span class="token operator">*</span>newcomm<span class="token punctuation">)</span>MPI_Comm comm ： 旧的通信子，也就是被划分的域；<span class="token keyword">int</span> color ： 子域的标识，也就是被划分出来的每个子域都对应一个color，每一个子域包含具有同样color的所有进程；<span class="token keyword">int</span> key ： 在每一个子域内<span class="token punctuation">,</span> 进程按照key所定义的值的次序进行排列。MPI_Comm <span class="token operator">*</span>newcomm ： 新的通信子；<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>函数将与comm相关的域划分为若干不相连的子域，根据color和key参数决定每个进程所处的位置。</p><p><code>int MPI_Comm_split(MPI_Comm comm, int color, int key, MPI_Comm *newcomm)</code> ，用于将一个通信器分割成两个子通信器。</p><p>参数：</p><ul><li><code>comm</code>：指向要分割的通信器的指针。</li><li><code>color</code>：一个整数，表示当前进程所属的子通信器。如果当前进程属于第一个子通信器，则<code>color</code>为0；如果当前进程属于第二个子通信器，则<code>color</code>为1。</li><li><code>key</code>：一个整数，用于确定如何将进程分配到子通信器中。通常，这个值应该是一个全局常量，以确保所有进程都使用相同的键值进行分割。</li><li><code>newcomm</code>：指向新创建的子通信器的指针。</li></ul><p>返回值：</p><ul><li>函数执行成功时返回0。</li><li>如果发生错误，则返回非零错误代码。</li></ul><h4 id="实验说明-15"><a href="#实验说明-15" class="headerlink" title="实验说明"></a>实验说明</h4><p>创建一个二维数组，根据行与列进行求和，在每个进程中输出坐标和求出的和。</p><p>输出结果格式应如下：<br>I’m process n, my coordinates are (x, y), row sum is p, column sum is q.<br>…</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">;</span>MPI_Comm row_comm<span class="token punctuation">,</span> column_comm<span class="token punctuation">;</span><span class="token keyword">int</span> myrow<span class="token punctuation">,</span> mycolumn<span class="token punctuation">;</span><span class="token keyword">int</span> color <span class="token operator">=</span> <span class="token number">3</span> <span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span>myrow <span class="token operator">=</span> myid <span class="token operator">/</span> color <span class="token punctuation">;</span>mycolumn <span class="token operator">=</span> myid <span class="token operator">%</span> color <span class="token punctuation">;</span><span class="token comment">// your code here</span><span class="token function">MPI_Comm_split</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> myrow<span class="token punctuation">,</span> mycolumn<span class="token punctuation">,</span> <span class="token operator">&amp;</span>row_comm<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">MPI_Comm_split</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> mycolumn<span class="token punctuation">,</span> myrow<span class="token punctuation">,</span> <span class="token operator">&amp;</span>column_comm<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// end of your code</span><span class="token keyword">int</span> rowsum<span class="token punctuation">,</span> columnsum<span class="token punctuation">;</span>rowsum <span class="token operator">=</span> myid<span class="token punctuation">;</span>columnsum <span class="token operator">=</span> myid<span class="token punctuation">;</span><span class="token function">MPI_Allreduce</span><span class="token punctuation">(</span>MPI_IN_PLACE<span class="token punctuation">,</span> <span class="token operator">&amp;</span>rowsum<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> MPI_INT<span class="token punctuation">,</span> MPI_SUM<span class="token punctuation">,</span> row_comm<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">MPI_Allreduce</span><span class="token punctuation">(</span>MPI_IN_PLACE<span class="token punctuation">,</span> <span class="token operator">&amp;</span>columnsum<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> MPI_INT<span class="token punctuation">,</span> MPI_SUM<span class="token punctuation">,</span> column_comm<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I'm process %d, my coordinates are (%d, %d), row sum is %d, column sum is %d\n"</span><span class="token punctuation">,</span> myid<span class="token punctuation">,</span> myrow<span class="token punctuation">,</span> mycolumn<span class="token punctuation">,</span>  rowsum<span class="token punctuation">,</span> columnsum<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="获取处理器名"><a href="#获取处理器名" class="headerlink" title="获取处理器名"></a>获取处理器名</h2><p>有时候在实际处理中我们可能需要将进程迁移至不同的处理器，而MPI提供了获取处理器名的函数以简单地允许这种行为。</p><p>注意在MPI中不需要定义这种迁移。</p><h3 id="函数说明-18"><a href="#函数说明-18" class="headerlink" title="函数说明"></a>函数说明</h3><pre class="line-numbers language-none"><code class="language-none">int MPI_Get_processor_name ( char *name, int *resultlen)char *name : 实际节点的唯一说明字;int *resultlen：在name中返回结果的长度;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>返回调用时调用所在的处理器名。</p><blockquote><p><code>MPI_Get_processor_name</code> 是一个用于获取当前进程名称的 MPI（Message Passing Interface，消息传递接口）函数。它接受两个参数：一个字符指针 <code>name</code>，用于存储进程名称；一个整数指针 <code>resultlen</code>，用于存储实际存储在 <code>name</code> 中的进程名称长度。</p><p>函数原型如下：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Get_processor_name</span> <span class="token punctuation">(</span> <span class="token keyword">char</span> <span class="token operator">*</span>name<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>resultlen <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>示例代码：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mpi.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">char</span> processor_name<span class="token punctuation">[</span>MPI_MAX_PROCESSOR_NAME<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">int</span> name_length<span class="token punctuation">;</span> <span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">MPI_Get_processor_name</span><span class="token punctuation">(</span>processor_name<span class="token punctuation">,</span> <span class="token operator">&amp;</span>name_length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">printf</span><span class="token punctuation">(</span>"Processor name<span class="token operator">:</span> <span class="token operator">%</span>s"<span class="token punctuation">,</span> processor_name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">printf</span><span class="token punctuation">(</span>"Name length<span class="token operator">:</span> <span class="token operator">%</span>d"<span class="token punctuation">,</span> name_length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><h3 id="实验说明-16"><a href="#实验说明-16" class="headerlink" title="实验说明"></a>实验说明</h3><p>在每个进程中，使用函数MPI_Get_processor_name来获取当前进程的处理器名并打印出来。</p><p>Hello, world. I am PROCESS_NAME.</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> len<span class="token punctuation">;</span><span class="token keyword">char</span> name<span class="token punctuation">[</span>MPI_MAX_PROCESSOR_NAME<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//your code here</span>    <span class="token function">MPI_Get_processor_name</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token operator">&amp;</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//end of your code</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello, world. I am %s.\n"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="地址偏移量"><a href="#地址偏移量" class="headerlink" title="地址偏移量"></a>地址偏移量</h2><p>在通信操作中，我们常常需要对地址进行传递或操作，例如传送&#x2F;接收缓冲区。</p><p>而一个位置在内存中的地址可以通过MPI_ADDRESS函数获得。</p><h3 id="函数说明-19"><a href="#函数说明-19" class="headerlink" title="函数说明"></a>函数说明</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Address</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> location<span class="token punctuation">,</span> MPI_Aint <span class="token operator">*</span>address<span class="token punctuation">)</span><span class="token keyword">void</span><span class="token operator">*</span> location ： 调用者的内存位置<span class="token punctuation">;</span>MPI_Aint <span class="token operator">*</span>address：位置的对应地址<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><code>MPI_Address</code> 是一个用于获取内存地址的函数，它接受两个参数：一个指向内存位置的指针 <code>location</code> 和一个指向 <code>MPI_Aint</code> 类型的指针 <code>address</code>。<code>MPI_Aint</code> 是一个整数类型，用于表示任意大小的地址。</p><p>函数原型如下：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Address</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> location<span class="token punctuation">,</span> MPI_Aint <span class="token operator">*</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>使用示例：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mpi.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">int</span> rank<span class="token punctuation">;</span> <span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>rank<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">int</span> local_variable <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span> MPI_Aint local_address<span class="token punctuation">;</span> <span class="token function">MPI_Address</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>local_variable<span class="token punctuation">,</span> <span class="token operator">&amp;</span>local_address<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Rank %d: Local variable address is %p"</span><span class="token punctuation">,</span> rank<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span>local_address<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这个示例中，我们首先初始化 MPI 环境，然后获取当前进程的等级（<code>rank</code>）。接着，我们定义了一个局部变量 <code>local_variable</code>，并使用 <code>MPI_Address</code> 函数获取其内存地址。最后，我们将结果打印出来。</p></blockquote><p>###实验说明</p><p>给出三个临时变量a, b, c, 分别求出a与b、a与c之间的地址偏移量。</p><p>输出结果:</p><p>由于这里采用的变量类型为int，所以如果变量地址是连续的话应该是：<br>The distance between a and b is 4<br>The distance between a and c is 8</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">;</span>MPI_Aint address1<span class="token punctuation">,</span> address2<span class="token punctuation">,</span> address3<span class="token punctuation">;</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> dist1<span class="token punctuation">,</span> dist2<span class="token punctuation">;</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>c <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// your code here</span><span class="token function">MPI_Address</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token operator">&amp;</span>address1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Address</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>b<span class="token punctuation">,</span> <span class="token operator">&amp;</span>address2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Address</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>c<span class="token punctuation">,</span> <span class="token operator">&amp;</span>address3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// end of your code</span>dist1 <span class="token operator">=</span> address2 <span class="token operator">-</span> address1 <span class="token punctuation">;</span>dist2 <span class="token operator">=</span> address3 <span class="token operator">-</span> address1 <span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>myid <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"The distance between a and b is %d\n"</span><span class="token punctuation">,</span> dist1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"The distance between a and c is %d\n"</span><span class="token punctuation">,</span> dist2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="数据的打包-pack"><a href="#数据的打包-pack" class="headerlink" title="数据的打包(pack)"></a>数据的打包(pack)</h2><p>有时候我们希望将不连续的数据或是不相同的数据类型的数据一起发送到其他进程，而不是效率很低地逐个发送。</p><p>一个解决这个问题的方案是将数据封装成包，再将数据包放到一个连续的缓冲区，发送到接收缓冲区后再提取出来尽心解包。</p><p>值得注意的是，打包&#x2F;解包函数有时候还会用来代替系统缓存策略。此外，对于在MPI顶层进一步开发附加的通信库会起到辅助的作用。</p><h3 id="函数说明：-2"><a href="#函数说明：-2" class="headerlink" title="函数说明："></a>函数说明：</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Pack</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> inbuf<span class="token punctuation">,</span> <span class="token keyword">int</span> incount<span class="token punctuation">,</span> MPI_datatype datatype<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>outbuf<span class="token punctuation">,</span> <span class="token keyword">int</span> outcount<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>position<span class="token punctuation">,</span> MPI_Comm comm<span class="token punctuation">)</span> <span class="token keyword">void</span><span class="token operator">*</span> inbuf ： 输入缓冲区地址<span class="token punctuation">;</span><span class="token keyword">int</span> incount ：输入数据项数目<span class="token punctuation">;</span>MPI_datatype datatype ：数据项的类型<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token operator">*</span>outbuf ：输出缓冲区地址<span class="token punctuation">;</span><span class="token keyword">int</span> outcount ：输出缓冲区大小<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token operator">*</span>position ：缓冲区当前位置<span class="token punctuation">;</span>MPI_Comm comm ：通信子<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这是一个MPI（Message Passing Interface，消息传递接口）函数，用于将数据打包到输出缓冲区中。下面是对代码的解析：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Pack</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> inbuf<span class="token punctuation">,</span> <span class="token keyword">int</span> incount<span class="token punctuation">,</span> MPI_datatype datatype<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>outbuf<span class="token punctuation">,</span> <span class="token keyword">int</span> outcount<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>position<span class="token punctuation">,</span> MPI_Comm comm<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><code>inbuf</code>: 输入缓冲区的指针，指向要打包的数据。</li><li><code>incount</code>: 输入缓冲区中要打包的元素数量。</li><li><code>datatype</code>: 数据类型的对象，指定了输入缓冲区中元素的类型。</li><li><code>outbuf</code>: 输出缓冲区的指针，指向打包后的数据存储位置。</li><li><code>outcount</code>: 输出缓冲区中可用的空间大小。</li><li><code>position</code>: 一个整数指针，用于返回当前在输出缓冲区中的位置。</li><li><code>comm</code>: 通信器对象，用于指定进程之间的通信。</li></ul><p>该函数的作用是将输入缓冲区中的数据按照指定的数据类型进行打包，并将打包后的数据存储到输出缓冲区中。打包后的数据可以在不同的进程之间传输或存储。</p><p>请注意，这只是一个函数声明，具体的实现细节和用法可能因使用的MPI库而有所不同。</p><h3 id="实验说明-17"><a href="#实验说明-17" class="headerlink" title="实验说明"></a>实验说明</h3><p>在源进程中打包发送一个数据包到进程1，进程1解包并打印出数据。</p><p>输出结果</p><p>The number is 1 and 2</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">,</span> source<span class="token punctuation">;</span>MPI_Status status<span class="token punctuation">;</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> position<span class="token punctuation">;</span><span class="token keyword">int</span> k<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> buf<span class="token punctuation">[</span><span class="token number">1000</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span>        i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    j <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>myid <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                position <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>            <span class="token comment">// your code here</span>    <span class="token function">MPI_Pack</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> MPI_INT<span class="token punctuation">,</span> buf<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>position<span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// end of your code</span>        <span class="token function">MPI_Send</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> position<span class="token punctuation">,</span> MPI_PACKED<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>myid <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token function">MPI_Recv</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> MPI_INT<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>position <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span><span class="token function">MPI_Unpack</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>position<span class="token punctuation">,</span> <span class="token operator">&amp;</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> MPI_INT<span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Unpack</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>position<span class="token punctuation">,</span> <span class="token operator">&amp;</span>j<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> MPI_INT<span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"The number is %d and %d"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="数据的解包-unpack"><a href="#数据的解包-unpack" class="headerlink" title="数据的解包(unpack)"></a>数据的解包(unpack)</h2><p>解包是对应于打包的MPI操作。</p><p>需要特别注意的是：MPI_RECV和MPI_UNPACK的区别: 在MPI_RECV中, count参数指明的是可以接收的最大项数. 实际接收的项数是由接收的消息的长度来决定的. 在MPI_UNPACK中, count参数指明实际打包的项数; 相应消息的”size”是position的增加值. 这种改动的原因是”输入消息的大小” 直到用户决定如何解包之前是不能预先确定的;从解包的项数来确定”消息大小”也是很困难的。</p><h3 id="函数说明-20"><a href="#函数说明-20" class="headerlink" title="函数说明"></a>函数说明</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">MPI_Unpack</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> inbuf<span class="token punctuation">,</span> <span class="token keyword">int</span> insize<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>position<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>outbuf<span class="token punctuation">,</span> <span class="token keyword">int</span> outcount<span class="token punctuation">,</span> MPI_Datatype datatype<span class="token punctuation">,</span> MPI_Comm comm<span class="token punctuation">)</span> <span class="token keyword">void</span><span class="token operator">*</span> inbuf ： 输入缓冲区地址<span class="token punctuation">;</span><span class="token keyword">int</span> insize ：输入数据项数目<span class="token punctuation">;</span>MPI_datatype datatype ：数据项的类型<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token operator">*</span>outbuf ：输出缓冲区地址<span class="token punctuation">;</span><span class="token keyword">int</span> outcount ：输出缓冲区大小<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token operator">*</span>position ：缓冲区当前位置<span class="token punctuation">;</span>MPI_Comm comm ：通信子<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>MPI_Unpack</code>函数用于将打包的数据从输入缓冲区解包到输出缓冲区。</p><p>参数说明：</p><ul><li><code>inbuf</code>：指向输入缓冲区的指针，其中包含要解包的数据。</li><li><code>insize</code>：输入缓冲区的大小（以字节为单位）。</li><li><code>position</code>：一个整数指针，用于返回当前在输入缓冲区中的位置。</li><li><code>outbuf</code>：指向输出缓冲区的指针，用于存储解包后的数据。</li><li><code>outcount</code>：输出缓冲区的大小（以元素为单位）。</li><li><code>datatype</code>：数据类型的对象，指定了输入缓冲区和输出缓冲区中元素的类型。</li><li><code>comm</code>：通信器对象，用于指定进程之间的通信。</li></ul><p>该函数的作用是将打包的数据从输入缓冲区解包到输出缓冲区，以便在不同的进程之间传输或存储。解包后的数据可以按照指定的数据类型进行解析和使用。</p><h3 id="实验说明-18"><a href="#实验说明-18" class="headerlink" title="实验说明"></a>实验说明</h3><p>在源进程中打包发送一个数据包到编号为1的进程，编号为1的进程解包并打印出数据。</p><p>输出结果</p><p>The number is 1 and 2</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">,</span> source<span class="token punctuation">;</span>MPI_Status status<span class="token punctuation">;</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> position<span class="token punctuation">;</span><span class="token keyword">int</span> k<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> buf<span class="token punctuation">[</span><span class="token number">1000</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span>        i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    j <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>myid <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                position <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>            <span class="token function">MPI_Pack</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> MPI_INT<span class="token punctuation">,</span> buf<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>position<span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token function">MPI_Pack</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>j<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> MPI_INT<span class="token punctuation">,</span> buf<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>position<span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token function">MPI_Send</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> position<span class="token punctuation">,</span> MPI_PACKED<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>myid <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token function">MPI_Recv</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> MPI_INT<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>position <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i <span class="token operator">=</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">// your code here</span><span class="token function">MPI_Unpack</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>position<span class="token punctuation">,</span> <span class="token operator">&amp;</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> MPI_INT<span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Unpack</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>position<span class="token punctuation">,</span> <span class="token operator">&amp;</span>j<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> MPI_INT<span class="token punctuation">,</span> MPI_COMM_WORLD<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// end of your code</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"The number is %d and %d"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="组的管理-集合类操作"><a href="#组的管理-集合类操作" class="headerlink" title="组的管理-集合类操作"></a>组的管理-集合类操作</h2><p>对于两个集合，我们经常对其进行各种各样的集合操作，例如交&#x2F;并。</p><p>MPI同样提供了对组的集合类操作。</p><h3 id="函数说明-21"><a href="#函数说明-21" class="headerlink" title="函数说明"></a>函数说明</h3><pre class="line-numbers language-none"><code class="language-none">int MPI_Group_union(MPI_Group group1, MPI_Group group2, MPI_Group *newgroup)int MPI_Group_intersection(MPI_Group group1,MPI_Group group2,MPI_Group *newgroup) int MPI_Group_difference(MPI_Group group1,MPI_Group group2,MPI_Group *newgroup)MPI_Group group1 ： 要操作的组1；MPI_Group group2 ： 要操作的组2；MPI_Group *newgroup：新的组;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><code>MPI_Group_union</code>函数用于计算两个进程组的并集。它接受三个参数：</p><ul><li><code>group1</code>：第一个进程组。</li><li><code>group2</code>：第二个进程组。</li><li><code>newgroup</code>：指向新进程组的指针，该进程组将包含<code>group1</code>和<code>group2</code>的并集。</li></ul><p>该函数返回一个整数，表示操作的结果。如果成功，返回值为<code>MPI_SUCCESS</code>；否则，返回一个非零的错误代码。</p><p>以下是一个示例代码片段，演示如何使用<code>MPI_Group_union</code>函数：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 创建两个进程组</span>    MPI_Group group1<span class="token punctuation">,</span> group2<span class="token punctuation">;</span>    <span class="token function">MPI_Comm_group</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>group1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_group</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>group2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 计算进程组的并集</span>    MPI_Group newgroup<span class="token punctuation">;</span>    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">MPI_Group_union</span><span class="token punctuation">(</span>group1<span class="token punctuation">,</span> group2<span class="token punctuation">,</span> <span class="token operator">&amp;</span>newgroup<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">!=</span> MPI_SUCCESS<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Error: MPI_Group_union failed.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 打印结果</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Process groups union successful.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 释放资源</span>    <span class="token function">MPI_Group_free</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>group1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Group_free</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>group2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Group_free</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>newgroup<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>请注意，上述代码仅为示例，实际使用时需要根据具体情况进行适当的修改和错误处理。</p></blockquote><h3 id="实验说明-19"><a href="#实验说明-19" class="headerlink" title="实验说明"></a>实验说明</h3><p>将组按照编号的奇偶分为两个新的组，再用并操作将它们合起来，输出各个进程在新的组的编号。</p><p>输出结果</p><p>In process 0: union rank is 2<br>In process 1: union rank is 0<br>In process 2: union rank is 3<br>In process 3: union rank is 1</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;mpi.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> myid<span class="token punctuation">,</span> numprocs<span class="token punctuation">,</span> union_rank<span class="token punctuation">;</span>MPI_Group group_world<span class="token punctuation">,</span> odd_group<span class="token punctuation">,</span> even_group<span class="token punctuation">,</span> union_group<span class="token punctuation">;</span><span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token keyword">int</span> members<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">MPI_Init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>argc<span class="token punctuation">,</span> <span class="token operator">&amp;</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_rank</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">MPI_Comm_size</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numprocs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Comm_group</span><span class="token punctuation">(</span>MPI_COMM_WORLD<span class="token punctuation">,</span> <span class="token operator">&amp;</span>group_world<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>numprocs<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>members<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span>i<span class="token operator">+</span><span class="token number">1</span> <span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">MPI_Group_incl</span><span class="token punctuation">(</span>group_world<span class="token punctuation">,</span> numprocs<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> members<span class="token punctuation">,</span> <span class="token operator">&amp;</span>odd_group<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Group_excl</span><span class="token punctuation">(</span>group_world<span class="token punctuation">,</span> numprocs<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> members<span class="token punctuation">,</span> <span class="token operator">&amp;</span>even_group<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// your code here</span><span class="token function">MPI_Group_union</span><span class="token punctuation">(</span>odd_group<span class="token punctuation">,</span> even_group<span class="token punctuation">,</span> <span class="token operator">&amp;</span>union_group<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// end of your code</span><span class="token function">MPI_Group_rank</span><span class="token punctuation">(</span>union_group<span class="token punctuation">,</span> <span class="token operator">&amp;</span>union_rank<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"In process %d: union rank is %d\n"</span><span class="token punctuation">,</span> myid<span class="token punctuation">,</span> union_rank<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MPI_Finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 分布式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>live2D看板娘</title>
      <link href="/posts/f571.html"/>
      <url>/posts/f571.html</url>
      
        <content type="html"><![CDATA[<h2 id="基础设置"><a href="#基础设置" class="headerlink" title="基础设置"></a>基础设置</h2><h2 id="1-模型插件"><a href="#1-模型插件" class="headerlink" title="1.模型插件"></a>1.模型插件</h2><p>在hexo根目录进入git bash，输入以下命令安装模型插件</p><pre class="line-numbers language-Text" data-language="Text"><code class="language-Text"># npm install --save hexo-helper-live2d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>卸载模型</p><pre class="line-numbers language-Text" data-language="Text"><code class="language-Text"># npm uninstall --save hexo-helper-live2d <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="2-挑选模型"><a href="#2-挑选模型" class="headerlink" title="2.挑选模型"></a>2.挑选模型</h2><p><a href="https://github.com/xiazeyu/live2d-widget-models">live2d模型仓库直达</a></p><h3 id="部分模型展示"><a href="#部分模型展示" class="headerlink" title="部分模型展示"></a>部分模型展示</h3><table>    <tr>        <td><center><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202401272109891.png"></center>        </td>        <td><center><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202401272122120.png"></center>        </td>    </tr></table>↓ 各个模型库使用 npm install {packagename}`安装模型<ul><li><code>live2d-widget-model-chitose</code></li><li><code>live2d-widget-model-epsilon2_1</code></li><li><code>live2d-widget-model-gf</code></li><li><code>live2d-widget-model-haru/01</code> (use <code>npm install --save live2d-widget-model-haru</code>)</li><li><code>live2d-widget-model-haru/02</code> (use <code>npm install --save live2d-widget-model-haru</code>)</li><li><code>live2d-widget-model-haruto</code></li><li><code>live2d-widget-model-hibiki</code></li><li><code>live2d-widget-model-hijiki</code></li><li><code>live2d-widget-model-izumi</code></li><li><code>live2d-widget-model-koharu</code></li><li><code>live2d-widget-model-miku</code></li><li><code>live2d-widget-model-ni-j</code></li><li><code>live2d-widget-model-nico</code></li><li><code>live2d-widget-model-nietzsche</code></li><li><code>live2d-widget-model-nipsilon</code></li><li><code>live2d-widget-model-nito</code></li><li><code>live2d-widget-model-shizuku</code></li><li><code>live2d-widget-model-tororo</code></li><li><code>live2d-widget-model-tsumiki</code></li><li><code>live2d-widget-model-unitychan</code></li><li><code>live2d-widget-model-wanko</code></li><li><code>live2d-widget-model-z16</code></li></ul><p>我用的是 <code>npm install live2d-widget-model-hibiki</code></p><h3 id="html实现多张图片同行"><a href="#html实现多张图片同行" class="headerlink" title="html实现多张图片同行"></a>html实现多张图片同行</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>center</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202401272109891.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>图1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>center</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>center</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202401272122120.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>图2 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>center</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>原文链接：<a href="https://blog.csdn.net/qq_33826564/article/details/81303230">https://blog.csdn.net/qq_33826564/article/details/81303230</a></p><h3 id="3-详细配置"><a href="#3-详细配置" class="headerlink" title="3.详细配置"></a>3.详细配置</h3><p>1.提前在根目录下创建 <code>live2d_models</code> 目录</p><p><img src="https://diy-sprint.top/img/cjml.png" alt="img"></p><p>2.下载好的模型库会在根目录node_modules文件夹中，在该文件夹中搜索模型库名称<code>live2d-widget-model-hibiki</code>将里面的内容复制到提前创建好的目录下<code>live2d_models</code></p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202401272129897.png" alt="img"></p><p>3.开始配置根目录下的<code>_config.yml</code> 文件在底部添加如下操作</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># 看板娘</span><span class="token key atrule">live2d</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment">#enable: false</span>  <span class="token key atrule">scriptFrom</span><span class="token punctuation">:</span> local <span class="token comment"># 默认</span>  <span class="token key atrule">pluginRootPath</span><span class="token punctuation">:</span> live2dw/ <span class="token comment"># 插件在站点上的根目录(相对路径)</span>  <span class="token key atrule">pluginJsPath</span><span class="token punctuation">:</span> lib/ <span class="token comment"># 脚本文件相对与插件根目录路径</span>  <span class="token key atrule">pluginModelPath</span><span class="token punctuation">:</span> assets/ <span class="token comment"># 模型文件相对与插件根目录路径</span>  <span class="token comment"># scriptFrom: jsdelivr # jsdelivr CDN</span>  <span class="token comment"># scriptFrom: unpkg # unpkg CDN</span>  <span class="token comment"># scriptFrom: https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js # 你的自定义 url</span>  <span class="token key atrule">tagMode</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 标签模式, 是否仅替换 live2d tag标签而非插入到所有页面中</span>  <span class="token key atrule">debug</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 调试, 是否在控制台输出日志</span>  <span class="token key atrule">model</span><span class="token punctuation">:</span>    <span class="token key atrule">use</span><span class="token punctuation">:</span> live2d<span class="token punctuation">-</span>widget<span class="token punctuation">-</span>model<span class="token punctuation">-</span>hibiki    <span class="token comment"># use: live2d-widget-model-wanko # npm-module package name</span>    <span class="token comment"># use: wanko # 博客根目录/live2d_models/ 下的目录名</span>    <span class="token comment"># use: ./wives/wanko # 相对于博客根目录的路径</span>    <span class="token comment"># use: https://cdn.jsdelivr.net/npm/live2d-widget-model-wanko@1.0.5/assets/wanko.model.json # 你的自定义 url</span>  <span class="token key atrule">display</span><span class="token punctuation">:</span>    <span class="token key atrule">position</span><span class="token punctuation">:</span> right    <span class="token key atrule">width</span><span class="token punctuation">:</span> <span class="token number">145</span>    <span class="token key atrule">height</span><span class="token punctuation">:</span> <span class="token number">315</span>    <span class="token key atrule">hOffset</span><span class="token punctuation">:</span> <span class="token number">60</span> <span class="token comment"># 水平偏移 </span>    <span class="token key atrule">vOffset</span><span class="token punctuation">:</span> <span class="token number">5</span> <span class="token comment"># 垂直偏移</span>  <span class="token key atrule">mobile</span><span class="token punctuation">:</span>    <span class="token key atrule">show</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 是否在移动设备上显示</span>    <span class="token key atrule">scale</span><span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token comment"># 移动设备上的缩放       </span>  <span class="token key atrule">react</span><span class="token punctuation">:</span>    <span class="token key atrule">opacityDefault</span><span class="token punctuation">:</span> <span class="token number">0.7</span>    <span class="token key atrule">opacityOnHover</span><span class="token punctuation">:</span> <span class="token number">0.8</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>model:  use: live2d-widget-model-hibikiuse <code># 这里填你喜欢的模型</code></p></blockquote><h2 id="更强大的看板娘"><a href="#更强大的看板娘" class="headerlink" title="更强大的看板娘"></a>更强大的看板娘</h2><p>支持换装，模型切换，对话框，拍照，小游戏，眼神跟随，触摸对话，音频等。</p><p>可以自建api，自定义各种模型，各种对话等。</p><h3 id="1-先卸载helper-live2d"><a href="#1-先卸载helper-live2d" class="headerlink" title="1.先卸载helper-live2d"></a>1.先卸载helper-live2d</h3><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">npm uninstall hexo<span class="token punctuation">-</span>helper<span class="token punctuation">-</span>live2d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2-下载大神的配置"><a href="#2-下载大神的配置" class="headerlink" title="2.下载大神的配置"></a>2.<a href="https://github.com/stevenjoezhang/live2d-widget">下载大神的配置</a></h3><h3 id="3-解压配置"><a href="#3-解压配置" class="headerlink" title="3.解压配置"></a>3.解压配置</h3><p>解压到<code>\themes\主题\source</code>目录并改名为<code>live2d-widget</code></p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202401272138049.png" alt="img"></p><p>相关说明</p><ul><li><code>waifu.css</code> 是看板娘的样式表。</li><li><code>waifu-tips.js</code> 包含了按钮和对话框的逻辑；</li><li><code>waifu-tips.json</code> 中定义了触发条件（<code>selector</code>，CSS 选择器）和触发时显示的文字（<code>text</code>）；</li><li>可以使用 <code>waifu-tips.json</code> 自定义触发文字提示，可以给菜单，按钮等加上个性化的导航提示</li></ul><h3 id="4-修改路径"><a href="#4-修改路径" class="headerlink" title="4.修改路径"></a>4.修改路径</h3><p>修改<code>autoload.js</code>文件，将大神路径改为相对路径</p><pre class="line-numbers language-Text" data-language="Text"><code class="language-Text">&#x2F;&#x2F; 注意：live2d_path 参数应使用绝对路径&#x2F;&#x2F;const live2d_path &#x3D; &quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;stevenjoezhang&#x2F;live2d-widget@latest&#x2F;&quot;;const live2d_path &#x3D; &quot;&#x2F;live2d-widget&#x2F;&quot;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="5-修改代码"><a href="#5-修改代码" class="headerlink" title="5.修改代码"></a>5.修改代码</h3><p>修改<code>\themes\主题\layout\_partial</code>下的<code>head.ejs</code>，next主题在&#x2F;themes&#x2F;next&#x2F;layout&#x2F;_layout.swing目录下</p><pre class="line-numbers language-Text" data-language="Text"><code class="language-Text">&lt;!--看板娘--&gt;&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;jquery&#x2F;dist&#x2F;jquery.min.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script src&#x3D;&quot;&#x2F;live2d-widget&#x2F;autoload.js&quot;&gt;&lt;&#x2F;script&gt;&lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;font-awesome&#x2F;css&#x2F;font-awesome.min.css&quot;&#x2F;&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="6-启用配置"><a href="#6-启用配置" class="headerlink" title="6.启用配置"></a>6.启用配置</h3><p>在<code>_config.yml</code>全局配置文末添加</p><pre class="line-numbers language-Text" data-language="Text"><code class="language-Text">#自定义看板娘动画live2d: enable: true  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>想修改看板娘大小、位置、格式、文本内容等，可查看并修改 waifu-tips.js、waifu-tips.json、waifu.css文件。</p><h3 id="7-查看并部署"><a href="#7-查看并部署" class="headerlink" title="7.查看并部署"></a>7.查看并部署</h3><pre class="line-numbers language-none"><code class="language-none">hexo cl &amp;&amp; hexo g &amp;&amp; hexo s &amp;&amp; hexo d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这条命令会首先清除缓存 (<code>hexo clean</code>), 然后生成静态网页 (<code>hexo g</code>), 接着启动本地服务器预览 (<code>hexo s</code>)，最后部署到远程仓库 (<code>hexo d</code>)。请注意，在部署完成后，由于<code>hexo s</code>仍在运行，本地预览将会继续提供服务，直到你手动停止它(<code>Ctrl C</code>)</p><h3 id="8-演示效果"><a href="#8-演示效果" class="headerlink" title="8.演示效果"></a>8.演示效果</h3><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202401272151637.png" alt="image-20240127215123424"></p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul><li><a href="https://diy-sprint.top/2021/050635991.html">添加live2d看板动画(可对话，换装互动) | Onlooker (diy-sprint.top)</a></li><li><a href="https://diy-sprint.top/2021/050559226.html">Hexo添加helper-live2d动态模型插件 | Onlooker (diy-sprint.top)</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> live2D </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客(一) ——基础搭建</title>
      <link href="/posts/15bb.html"/>
      <url>/posts/15bb.html</url>
      
        <content type="html"><![CDATA[<h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><h3 id="下载git"><a href="#下载git" class="headerlink" title="下载git"></a>下载git</h3><p>安装git for windows（或者其它git客户端）<a href="https://git-scm.com/downloads">git下载</a></p><p>验证git安装命令(cmd窗口或鼠标右键菜单的git bash 窗口)</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token parameter variable">--version</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="下载node-js"><a href="#下载node-js" class="headerlink" title="下载node.js"></a>下载node.js</h3><p>在<a href="https://nodejs.org/zh-cn/">官网</a>下载node.js的安装程序，根据你电脑系统的配置信息，下载对应的安装程序。</p><p>验证node安装命令 (cmd窗口或鼠标右键菜单的git bash 窗口)</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">node</span> <span class="token parameter variable">--version</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="vscode安装"><a href="#vscode安装" class="headerlink" title="vscode安装"></a>vscode安装</h3><p>Visual Studio Code <a href="https://visualstudio.microsoft.com/zh-hans/">官网下载</a></p><h3 id="github账号"><a href="#github账号" class="headerlink" title="github账号"></a>github账号</h3><p>如果没有就注册一个：<a href="https://github.com/">https://github.com/</a></p><h2 id="Github-Pages创建"><a href="#Github-Pages创建" class="headerlink" title="Github Pages创建"></a>Github Pages创建</h2><h2 id="音乐页面"><a href="#音乐页面" class="headerlink" title="音乐页面"></a>音乐页面</h2><h2 id="书籍页面"><a href="#书籍页面" class="headerlink" title="书籍页面"></a>书籍页面</h2><h2 id="vlog页面"><a href="#vlog页面" class="headerlink" title="vlog页面"></a>vlog页面</h2><h2 id="导航页面"><a href="#导航页面" class="headerlink" title="导航页面"></a>导航页面</h2><h2 id="影视页面"><a href="#影视页面" class="headerlink" title="影视页面"></a>影视页面</h2><h2 id="生成电影卡"><a href="#生成电影卡" class="headerlink" title="生成电影卡#"></a>生成电影卡<a href="https://www.cnblogs.com/chendeqiang/p/12861726.html#880159318">#</a></h2><p>安装插件</p><pre class="line-numbers language-css" data-language="css"><code class="language-css">npm install hexo-tag-mtime --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>用法：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">&#123;</span>% mtime <span class="token number">218707</span> %<span class="token punctuation">&#125;</span>id可以在时光网 https://www.mtime.com 相应的电影网址获取<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>在站点目录下的<code>source</code>文件夹下，新建<code>movies</code>文件夹，然后在movies下新建<code>index.md</code>，粘贴以下代码</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token front-matter-block"><span class="token punctuation">---</span><span class="token front-matter yaml language-yaml"><span class="token key atrule">title</span><span class="token punctuation">:</span> movies<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2023-10-05 19:31:28</span><span class="token key atrule">type</span><span class="token punctuation">:</span> movies</span><span class="token punctuation">---</span></span><span class="token title important"><span class="token punctuation">#</span> 电影推荐</span><span class="token title important"><span class="token punctuation">##</span>  教父</span>&#123;% mtime 10968 %&#125;<span class="token title important"><span class="token punctuation">##</span>  白日梦想家</span>&#123;% mtime 21250 %&#125;<span class="token title important"><span class="token punctuation">##</span> 海上钢琴师</span>&#123;% mtime 10746 %&#125;<span class="token title important"><span class="token punctuation">##</span> 闻香识女人</span>&#123;% mtime 13695 %&#125;id可以在时光网 https://www.mtime.com 相应的电影网址获取<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>找到matery主题的配置文件<code>_config.yml</code>，在menu中添加</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">movies:url: /moviesicon: fas fa-film<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>然后使用hexo s进行预览查看效果</p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p><a href="https://blog.csdn.net/u013044713/article/details/120251025">hexo博客搭建及主题优化(二)_5ezuy.top-CSDN博客</a></p><ul><li>电影卡片</li><li>归档时间轴和时间列表</li><li>快捷导航</li><li>站点统计不显示</li></ul><p>buttrefly鼠标：</p><pre class="line-numbers language-none"><code class="language-none">* &#123;    cursor: url(data:image&#x2F;svg+xml,&lt;svg xmlns&#x3D;&#39;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&#39; viewBox&#x3D;&#39;0 0 8 8&#39; width&#x3D;&#39;8px&#39; height&#x3D;&#39;8px&#39;&gt;&lt;circle cx&#x3D;&#39;4&#39; cy&#x3D;&#39;4&#39; r&#x3D;&#39;4&#39; opacity&#x3D;&#39;1.0&#39; fill&#x3D;&#39;rgb(57, 197, 187)&#39;&#x2F;&gt;&lt;&#x2F;svg&gt;) 4 4, auto;&#125;data:image&#x2F;svg+xml,&lt;svg xmlns&#x3D;&#39;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&#39; viewBox&#x3D;&#39;0 0 8 8&#39; width&#x3D;&#39;8px&#39; height&#x3D;&#39;8px&#39;&gt;&lt;circle cx&#x3D;&#39;4&#39; cy&#x3D;&#39;4&#39; r&#x3D;&#39;4&#39; opacity&#x3D;&#39;1.0&#39; fill&#x3D;&#39;rgb(57, 197, 187)&#39;&#x2F;&gt;&lt;&#x2F;svg&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="https-seayj-cn"><a href="#https-seayj-cn" class="headerlink" title="https://seayj.cn/"></a><a href="https://seayj.cn/">https://seayj.cn/</a></h2><ul><li><p>footer-wave.css</p></li><li><p>matery.css</p></li><li><p>matery.js</p></li><li><p>cursor.css</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* build time:Sat Feb 03 2024 21:39:20 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)*/</span><span class="token selector">body,div,html,span</span> <span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>/cursor/normal.png<span class="token punctuation">)</span></span><span class="token punctuation">,</span>auto<span class="token important">!important</span><span class="token punctuation">&#125;</span><span class="token selector">#vcomments svg,a,button</span> <span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>/cursor/a.png<span class="token punctuation">)</span></span><span class="token punctuation">,</span>auto<span class="token important">!important</span><span class="token punctuation">&#125;</span><span class="token selector">::-moz-selection</span> <span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>/cursor/love.png<span class="token punctuation">)</span></span><span class="token punctuation">,</span>auto<span class="token important">!important</span><span class="token punctuation">&#125;</span><span class="token selector">::selection,img,pre,select</span> <span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>/cursor/love.png<span class="token punctuation">)</span></span><span class="token punctuation">,</span>auto<span class="token important">!important</span><span class="token punctuation">&#125;</span><span class="token selector">input,textarea</span> <span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>/cursor/input.png<span class="token punctuation">)</span></span><span class="token punctuation">,</span>auto<span class="token important">!important</span><span class="token punctuation">&#125;</span><span class="token selector">.celeste canvas</span> <span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>/cursor/move.png<span class="token punctuation">)</span></span><span class="token punctuation">,</span>auto<span class="token important">!important</span><span class="token punctuation">&#125;</span><span class="token comment">/* rebuild by neat */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>rightMenu.js</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 初始化函数</span><span class="token keyword">let</span> rm <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">var</span> btf <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token function-variable function">scrollToDest</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">pos<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> time <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">const</span> currentPos <span class="token operator">=</span> window<span class="token punctuation">.</span>scrollY <span class="token operator">||</span> window<span class="token punctuation">.</span>screenTop    pos <span class="token operator">=</span> pos <span class="token operator">-</span> <span class="token number">70</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'CSS'</span> <span class="token keyword">in</span> window <span class="token operator">&amp;&amp;</span> <span class="token constant">CSS</span><span class="token punctuation">.</span><span class="token function">supports</span><span class="token punctuation">(</span><span class="token string">'scroll-behavior'</span><span class="token punctuation">,</span> <span class="token string">'smooth'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token literal-property property">top</span><span class="token operator">:</span> pos<span class="token punctuation">,</span>        <span class="token literal-property property">behavior</span><span class="token operator">:</span> <span class="token string">'smooth'</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>      <span class="token keyword">return</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">let</span> start <span class="token operator">=</span> <span class="token keyword">null</span>    time <span class="token operator">=</span> time <span class="token operator">||</span> <span class="token number">500</span>    window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token parameter">currentTime</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      start <span class="token operator">=</span> <span class="token operator">!</span>start <span class="token operator">?</span> currentTime <span class="token operator">:</span> start      <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPos <span class="token operator">&lt;</span> pos<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">const</span> progress <span class="token operator">=</span> currentTime <span class="token operator">-</span> start        window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>pos <span class="token operator">-</span> currentPos<span class="token punctuation">)</span> <span class="token operator">*</span> progress <span class="token operator">/</span> time<span class="token punctuation">)</span> <span class="token operator">+</span> currentPos<span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>progress <span class="token operator">&lt;</span> time<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>          window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> pos<span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">const</span> progress <span class="token operator">=</span> currentTime <span class="token operator">-</span> start        window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> currentPos <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>currentPos <span class="token operator">-</span> pos<span class="token punctuation">)</span> <span class="token operator">*</span> progress <span class="token operator">/</span> time<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>progress <span class="token operator">&lt;</span> time<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>          window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> pos<span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> heo <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// 下载图片</span>  <span class="token function-variable function">downloadImage</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">imgsrc<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">//下载图片地址和图片名</span>    rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>rm<span class="token punctuation">.</span>downloadimging <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      rm<span class="token punctuation">.</span>downloadimging <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;span>正在下载中，请稍后&lt;/span>'</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">let</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 解决跨域 Canvas 污染问题</span>        image<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"crossOrigin"</span><span class="token punctuation">,</span> <span class="token string">"anonymous"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        image<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token keyword">let</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"canvas"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> image<span class="token punctuation">.</span>width<span class="token punctuation">;</span>          canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> image<span class="token punctuation">.</span>height<span class="token punctuation">;</span>          <span class="token keyword">let</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> image<span class="token punctuation">.</span>width<span class="token punctuation">,</span> image<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token keyword">let</span> url <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token string">"image/png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//得到图片的base64编码数据</span>          <span class="token keyword">let</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 生成一个a元素</span>          <span class="token keyword">let</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MouseEvent</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建一个单击事件</span>          a<span class="token punctuation">.</span>download <span class="token operator">=</span> name <span class="token operator">||</span> <span class="token string">"photo"</span><span class="token punctuation">;</span> <span class="token comment">// 设置图片名称</span>          a<span class="token punctuation">.</span>href <span class="token operator">=</span> url<span class="token punctuation">;</span> <span class="token comment">// 将生成的URL设置为a.href属性</span>          a<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 触发a的单击事件</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        image<span class="token punctuation">.</span>src <span class="token operator">=</span> imgsrc<span class="token punctuation">;</span>        <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>          <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;span>图片已添加盲水印，请遵守版权协议&lt;/span>'</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        rm<span class="token punctuation">.</span>downloadimging <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"10000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;span>有正在进行中的下载，请稍后再试&lt;/span>'</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//切换音乐播放状态</span>  <span class="token function-variable function">musicToggle</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"等待开发..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// let msgPlay = '&lt;i class="fa-solid fa-play">&lt;/i>&lt;span>播放音乐&lt;/span>' // 此處可以更改為你想要顯示的文字</span>    <span class="token comment">// let msgPause = '&lt;i class="fa-solid fa-pause">&lt;/i>&lt;span>暂停音乐&lt;/span>' // 同上，但兩處均不建議更改</span>    <span class="token comment">// if (heo_musicPlaying) &#123;</span>    <span class="token comment">//   document.querySelector("#nav-music").classList.remove("playing");</span>    <span class="token comment">//   document.getElementById("menu-music-toggle").innerHTML = msgPlay;</span>    <span class="token comment">//   document.getElementById("nav-music-hoverTips").innerHTML = "音乐已暂停";</span>    <span class="token comment">//   document.querySelector("#consoleMusic").classList.remove("on");</span>    <span class="token comment">//   heo_musicPlaying = false;</span>    <span class="token comment">// &#125; else &#123;</span>    <span class="token comment">//   document.querySelector("#nav-music").classList.add("playing");</span>    <span class="token comment">//   document.getElementById("menu-music-toggle").innerHTML = msgPause;</span>    <span class="token comment">//   document.querySelector("#consoleMusic").classList.add("on");</span>    <span class="token comment">//   heo_musicPlaying = true;</span>    <span class="token comment">// &#125;</span>    <span class="token comment">// document.querySelector('meting-js').aplayer.toggle();</span>    <span class="token comment">// rm.hideRightMenu();</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//音乐上一曲</span>  <span class="token function-variable function">musicSkipBack</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"等待开发..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// document.querySelector('meting-js').aplayer.skipBack();</span>    <span class="token comment">// rm.hideRightMenu();</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//音乐下一曲</span>  <span class="token function-variable function">musicSkipForward</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"等待开发..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// document.querySelector('meting-js').aplayer.skipForward();</span>    <span class="token comment">// rm.hideRightMenu();</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//获取音乐中的名称</span>  <span class="token function-variable function">musicGetName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"等待开发..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// var x = $('.aplayer-title')</span>    <span class="token comment">// // var x = document.getElementsByClassName('txt');</span>    <span class="token comment">// // for (var i = x.length - 1; i >= 0; i--) &#123;</span>    <span class="token comment">// // console.log(x[i].innerText)</span>    <span class="token comment">// // &#125;</span>    <span class="token comment">// var arr = []</span>    <span class="token comment">// for (var i = x.length - 1; i >= 0; i--) &#123;</span>    <span class="token comment">//   arr[i] = x[i].innerText</span>    <span class="token comment">//   // console.log(x[i].innerText)</span>    <span class="token comment">// &#125;</span>    <span class="token comment">// return arr[0]</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">//禁止图片拖拽</span>rm<span class="token punctuation">.</span>stopdragimg <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>rm<span class="token punctuation">.</span>stopdragimg<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"dragstart"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 显示菜单</span>rm<span class="token punctuation">.</span><span class="token function-variable function">showRightMenu</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">isTrue<span class="token punctuation">,</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">let</span> $rightMenu <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#rightMenu'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  $rightMenu<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'top'</span><span class="token punctuation">,</span> x <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'left'</span><span class="token punctuation">,</span> y <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>isTrue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    $rightMenu<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">stopMaskScroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    $rightMenu<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// 隐藏菜单</span>rm<span class="token punctuation">.</span><span class="token function-variable function">hideRightMenu</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  rm<span class="token punctuation">.</span><span class="token function">showRightMenu</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#rightmenu-mask'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">,</span> <span class="token string">'display: none'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 尺寸</span><span class="token keyword">let</span> rmWidth <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#rightMenu'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> rmHeight <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#rightMenu'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 重新定义尺寸</span>rm<span class="token punctuation">.</span><span class="token function-variable function">reloadrmSize</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  rmWidth <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#rightMenu'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  rmHeight <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#rightMenu'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 获取点击的href</span><span class="token keyword">let</span> domhref <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><span class="token keyword">let</span> domImgSrc <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><span class="token keyword">let</span> globalEvent <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token comment">// 监听右键初始化</span>window<span class="token punctuation">.</span><span class="token function-variable function">oncontextmenu</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth <span class="token operator">></span> <span class="token number">768</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> pageX <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">//加10是为了防止显示时鼠标遮在菜单上</span>    <span class="token keyword">let</span> pageY <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>    <span class="token comment">// console.log(event);</span>    <span class="token comment">//其他额外菜单</span>    <span class="token keyword">let</span> $rightMenuOther <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.rightMenuOther'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> $rightMenuPlugin <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.rightMenuPlugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> $rightMenuCopyText <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-copytext'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> $rightMenuPasteText <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-pastetext'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> $rightMenuCommentText <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-commenttext'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> $rightMenuNewWindow <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-newwindow'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> $rightMenuCopyLink <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-copylink'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> $rightMenuCopyImg <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-copyimg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> $rightMenuDownloadImg <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-downloadimg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> $rightMenuSearch <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-search'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> $rightMenuSearchBing <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-searchBing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> $rightMenuMusicToggle <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-music-toggle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> $rightMenuMusicBack <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-music-back'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> $rightMenuMusicForward <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-music-forward'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> $rightMenuMusicPlaylist <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-music-playlist'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> $rightMenuMusicCopyMusicName <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-music-copyMusicName'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> href <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>href<span class="token punctuation">;</span>    <span class="token keyword">let</span> imgsrc <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>currentSrc<span class="token punctuation">;</span>    <span class="token comment">// 判断模式 扩展模式为有事件</span>    <span class="token keyword">let</span> pluginMode <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    $rightMenuOther<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    globalEvent <span class="token operator">=</span> event<span class="token punctuation">;</span>    <span class="token comment">// 检查是否需要复制 是否有选中文本</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>selectTextNow <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      pluginMode <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      $rightMenuCopyText<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $rightMenuCommentText<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $rightMenuSearch<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $rightMenuSearchBing<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      $rightMenuCopyText<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $rightMenuCommentText<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $rightMenuSearchBing<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $rightMenuSearch<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//检查是否右键点击了链接a标签</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>href<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      pluginMode <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      $rightMenuNewWindow<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $rightMenuCopyLink<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      domhref <span class="token operator">=</span> href<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      $rightMenuNewWindow<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $rightMenuCopyLink<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//检查是否需要复制图片</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>imgsrc<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      pluginMode <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      $rightMenuCopyImg<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $rightMenuDownloadImg<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      domImgSrc <span class="token operator">=</span> imgsrc<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      $rightMenuCopyImg<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $rightMenuDownloadImg<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 判断是否为输入框</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'input'</span> <span class="token operator">||</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'textarea'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这是一个输入框'</span><span class="token punctuation">)</span>      pluginMode <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      $rightMenuPasteText<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      $rightMenuPasteText<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//判断是否是音乐</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>nodeName <span class="token operator">==</span> <span class="token string">"METING-JS"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这是一个音乐'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      pluginMode <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      $rightMenuMusicToggle<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $rightMenuMusicBack<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $rightMenuMusicForward<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $rightMenuMusicPlaylist<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $rightMenuMusicCopyMusicName<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      $rightMenuMusicToggle<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $rightMenuMusicBack<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $rightMenuMusicForward<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $rightMenuMusicPlaylist<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $rightMenuMusicCopyMusicName<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 如果不是扩展模式则隐藏扩展模块</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pluginMode<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      $rightMenuOther<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $rightMenuPlugin<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      $rightMenuPlugin<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    rm<span class="token punctuation">.</span><span class="token function">reloadrmSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// 鼠标默认显示在鼠标右下方，当鼠标靠右或考下时，将菜单显示在鼠标左方\上方</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pageX <span class="token operator">+</span> rmWidth <span class="token operator">></span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      pageX <span class="token operator">-=</span> rmWidth <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pageY <span class="token operator">+</span> rmHeight <span class="token operator">></span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      pageY <span class="token operator">-=</span> pageY <span class="token operator">+</span> rmHeight <span class="token operator">-</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    rm<span class="token punctuation">.</span><span class="token function">showRightMenu</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> pageY<span class="token punctuation">,</span> pageX<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#rightmenu-mask'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">,</span> <span class="token string">'display: flex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// 下载图片状态</span>rm<span class="token punctuation">.</span>downloadimging <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment">// 复制图片到剪贴板</span>rm<span class="token punctuation">.</span><span class="token function-variable function">writeClipImg</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">imgsrc</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// console.log('按下复制');</span>  rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;span>正在下载中，请稍后&lt;/span>'</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>rm<span class="token punctuation">.</span>downloadimging <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    rm<span class="token punctuation">.</span>downloadimging <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token function">copyImage</span><span class="token punctuation">(</span>imgsrc<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;span>复制成功！图片已添加盲水印，请遵守版权协议&lt;/span>'</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      rm<span class="token punctuation">.</span>downloadimging <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"10000"</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">imageToBlob</span><span class="token punctuation">(</span><span class="token parameter">imageURL</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> c <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"canvas"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> ctx <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  img<span class="token punctuation">.</span>crossOrigin <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>  img<span class="token punctuation">.</span>src <span class="token operator">=</span> imageURL<span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      c<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>naturalWidth<span class="token punctuation">;</span>      c<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>naturalHeight<span class="token punctuation">;</span>      ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      c<span class="token punctuation">.</span><span class="token function">toBlob</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">blob</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        <span class="token comment">// here the image is a blob</span>        <span class="token function">resolve</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"image/png"</span><span class="token punctuation">,</span> <span class="token number">0.75</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">copyImage</span><span class="token punctuation">(</span><span class="token parameter">imageURL</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">imageToBlob</span><span class="token punctuation">(</span>imageURL<span class="token punctuation">)</span>  <span class="token keyword">const</span> item <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClipboardItem</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    <span class="token string-property property">"image/png"</span><span class="token operator">:</span> blob  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>rm<span class="token punctuation">.</span><span class="token function-variable function">switchDarkMode</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token function">switchNightMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>rm<span class="token punctuation">.</span><span class="token function-variable function">copyUrl</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token string">"&lt;input id='copyVal'>&lt;/input>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> text <span class="token operator">=</span> id<span class="token punctuation">;</span>  <span class="token keyword">var</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"copyVal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  input<span class="token punctuation">.</span>value <span class="token operator">=</span> text<span class="token punctuation">;</span>  input<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  input<span class="token punctuation">.</span><span class="token function">setSelectionRange</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> input<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>  document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">"copy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#copyVal"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">stopMaskScroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"rightmenu-mask"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> xscroll <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"rightmenu-mask"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    xscroll<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"mousewheel"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment">//阻止浏览器默认方法</span>      rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// e.preventDefault();</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"rightMenu"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> xscroll <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"rightMenu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    xscroll<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"mousewheel"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment">//阻止浏览器默认方法</span>      rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// e.preventDefault();</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>rm<span class="token punctuation">.</span><span class="token function-variable function">rightmenuCopyText</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">txt</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">writeText</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>rm<span class="token punctuation">.</span><span class="token function-variable function">copyPageUrl</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">var</span> selURL <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">;</span>  rm<span class="token punctuation">.</span><span class="token function">copyUrl</span><span class="token punctuation">(</span>selURL<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;span>复制本页链接地址成功&lt;/span>'</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>rm<span class="token punctuation">.</span><span class="token function-variable function">sharePage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">var</span> content <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">;</span>  rm<span class="token punctuation">.</span><span class="token function">copyUrl</span><span class="token punctuation">(</span>selURL<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;span>复制本页链接地址成功&lt;/span>'</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 复制当前选中文本</span><span class="token keyword">var</span> selectTextNow <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>document<span class="token punctuation">.</span>onmouseup <span class="token operator">=</span> document<span class="token punctuation">.</span>ondbclick <span class="token operator">=</span> selceText<span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">selceText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">var</span> txt<span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>selection<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    txt <span class="token operator">=</span> document<span class="token punctuation">.</span>selection<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    txt <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">''</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>txt<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    selectTextNow <span class="token operator">=</span> txt<span class="token punctuation">;</span>    <span class="token comment">// console.log(selectTextNow);</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    selectTextNow <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// 读取剪切板</span>rm<span class="token punctuation">.</span><span class="token function-variable function">readClipboard</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">readText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">clipText</span> <span class="token operator">=></span> rm<span class="token punctuation">.</span><span class="token function">insertAtCaret</span><span class="token punctuation">(</span>globalEvent<span class="token punctuation">.</span>target<span class="token punctuation">,</span> clipText<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// 粘贴文本到焦点</span>rm<span class="token punctuation">.</span><span class="token function-variable function">insertAtCaret</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elemt<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> startPos <span class="token operator">=</span> elemt<span class="token punctuation">.</span>selectionStart<span class="token punctuation">,</span>    endPos <span class="token operator">=</span> elemt<span class="token punctuation">.</span>selectionEnd<span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>selection<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    elemt<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> sel <span class="token operator">=</span> document<span class="token punctuation">.</span>selection<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    sel<span class="token punctuation">.</span>text <span class="token operator">=</span> value<span class="token punctuation">;</span>    elemt<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>startPos <span class="token operator">||</span> startPos <span class="token operator">==</span> <span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">var</span> scrollTop <span class="token operator">=</span> elemt<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>      elemt<span class="token punctuation">.</span>value <span class="token operator">=</span> elemt<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> startPos<span class="token punctuation">)</span> <span class="token operator">+</span> value <span class="token operator">+</span> elemt<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>endPos<span class="token punctuation">,</span> elemt<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>      elemt<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      elemt<span class="token punctuation">.</span>selectionStart <span class="token operator">=</span> startPos <span class="token operator">+</span> value<span class="token punctuation">.</span>length<span class="token punctuation">;</span>      elemt<span class="token punctuation">.</span>selectionEnd <span class="token operator">=</span> startPos <span class="token operator">+</span> value<span class="token punctuation">.</span>length<span class="token punctuation">;</span>      elemt<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> scrollTop<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      elemt<span class="token punctuation">.</span>value <span class="token operator">+=</span> value<span class="token punctuation">;</span>      elemt<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">//粘贴文本</span>rm<span class="token punctuation">.</span><span class="token function-variable function">pasteText</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> result <span class="token operator">=</span> rm<span class="token punctuation">.</span><span class="token function">readClipboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span>  rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//引用到评论</span>rm<span class="token punctuation">.</span><span class="token function-variable function">rightMenuCommentText</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">txt</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'veditor'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> evt <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createEvent</span><span class="token punctuation">(</span><span class="token string">'HTMLEvents'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  evt<span class="token punctuation">.</span><span class="token function">initEvent</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> inputValue <span class="token operator">=</span> <span class="token function">replaceAll</span><span class="token punctuation">(</span>txt<span class="token punctuation">,</span> <span class="token string">'\n'</span><span class="token punctuation">,</span> <span class="token string">'\n> '</span><span class="token punctuation">)</span>  input<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'> '</span> <span class="token operator">+</span> inputValue <span class="token operator">+</span> <span class="token string">'\n\n'</span><span class="token punctuation">;</span>  input<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>evt<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> domTop <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#vcomments"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>  window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> domTop <span class="token operator">-</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  input<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  input<span class="token punctuation">.</span><span class="token function">setSelectionRange</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//替换所有内容</span><span class="token keyword">function</span> <span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token parameter">string<span class="token punctuation">,</span> search<span class="token punctuation">,</span> replace</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> string<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>search<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>replace<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// Bing搜索</span>rm<span class="token punctuation">.</span><span class="token function-variable function">searchBing</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;span>即将跳转到必应搜索&lt;/span>'</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'https://cn.bing.com/search?q='</span> <span class="token operator">+</span> selectTextNow<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"1000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//分享链接</span>rm<span class="token punctuation">.</span><span class="token function-variable function">copyLink</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  rm<span class="token punctuation">.</span><span class="token function">rightmenuCopyText</span><span class="token punctuation">(</span>domhref<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;span>已复制链接地址&lt;/span>'</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">addRightMenuClickEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// 添加点击事件</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-backward'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    window<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-forward'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    window<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-refresh'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-top'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    btf<span class="token punctuation">.</span><span class="token function">scrollToDest</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.menu-link'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> rm<span class="token punctuation">.</span>hideRightMenu<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-darkmode'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> rm<span class="token punctuation">.</span>switchDarkMode<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-home'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>origin<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-randomPost'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">toRandomPost</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#rightmenu-mask'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> rm<span class="token punctuation">.</span>hideRightMenu<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#rightmenu-mask'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contextmenu</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-copy'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> rm<span class="token punctuation">.</span>copyPageUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-pastetext'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> rm<span class="token punctuation">.</span>pasteText<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-copytext'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    rm<span class="token punctuation">.</span><span class="token function">rightmenuCopyText</span><span class="token punctuation">(</span>selectTextNow<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>      <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;span>复制成功，复制或转载请标注文本位置&lt;/span>'</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-commenttext'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    rm<span class="token punctuation">.</span><span class="token function">rightMenuCommentText</span><span class="token punctuation">(</span>selectTextNow<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-newwindow'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>domhref<span class="token punctuation">)</span><span class="token punctuation">;</span>    rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-copylink'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> rm<span class="token punctuation">.</span>copyLink<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-downloadimg'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    heo<span class="token punctuation">.</span><span class="token function">downloadImage</span><span class="token punctuation">(</span>domImgSrc<span class="token punctuation">,</span> <span class="token string">'SeaYJImageDownload'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-copyimg'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    rm<span class="token punctuation">.</span><span class="token function">writeClipImg</span><span class="token punctuation">(</span>domImgSrc<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-search'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    rm<span class="token punctuation">.</span><span class="token function">hideRightMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#searchIcon'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> t <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'searchInput'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> evt <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createEvent</span><span class="token punctuation">(</span><span class="token string">'HTMLEvents'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    evt<span class="token punctuation">.</span><span class="token function">initEvent</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    t<span class="token punctuation">.</span>value <span class="token operator">=</span> selectTextNow<span class="token punctuation">;</span>    t<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>evt<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-searchBing'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> rm<span class="token punctuation">.</span>searchBing<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//音乐</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-music-toggle'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> heo<span class="token punctuation">.</span>musicToggle<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-music-back'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> heo<span class="token punctuation">.</span>musicSkipBack<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-music-forward'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> heo<span class="token punctuation">.</span>musicSkipForward<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#menu-music-copyMusicName'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    rm<span class="token punctuation">.</span><span class="token function">rightmenuCopyText</span><span class="token punctuation">(</span>heo<span class="token punctuation">.</span><span class="token function">musicGetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token constant">M</span><span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>      <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'&lt;span>复制歌曲名称成功&lt;/span>'</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>lantern.js</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Lantern</span> <span class="token punctuation">&#123;</span>    #startDate <span class="token operator">=</span> <span class="token string">'1-1'</span><span class="token punctuation">;</span>    #endDate <span class="token operator">=</span> <span class="token string">'1-31'</span><span class="token punctuation">;</span>    <span class="token function">#dateCheck</span><span class="token punctuation">(</span><span class="token parameter">date</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">let</span> $m <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> $d <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>$m <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">||</span> $m <span class="token operator">></span> <span class="token number">12</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>                <span class="token string">'ERROR: %s is a problem!The month can only be selected from 1~12!'</span><span class="token punctuation">,</span>                $m            <span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>$d <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">||</span> $d <span class="token operator">></span> <span class="token number">31</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>                <span class="token string">"ERROR: %s is a problem!Dates can only be selected from 1~31!You don't need to think about leap years, you just need to treat it as if every month is 31 days, and we'll do the rest!"</span><span class="token punctuation">,</span>                $d            <span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">#dateCorrect</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">'date'</span> <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            obj<span class="token punctuation">.</span>date <span class="token operator">=</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#startDate<span class="token punctuation">,</span>                <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#endDate<span class="token punctuation">,</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">'from'</span> <span class="token keyword">in</span> obj<span class="token punctuation">.</span>date<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">#dateCheck</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>date<span class="token punctuation">.</span>from<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                obj<span class="token punctuation">.</span>date<span class="token punctuation">.</span>from <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#startDate<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">'to'</span> <span class="token keyword">in</span> obj<span class="token punctuation">.</span>date<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">#dateCheck</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>date<span class="token punctuation">.</span>to<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                obj<span class="token punctuation">.</span>date<span class="token punctuation">.</span>to <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#endDate<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">#CompareTime</span><span class="token punctuation">(</span><span class="token parameter">sDate<span class="token punctuation">,</span> eDate</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">let</span> $sM <span class="token operator">=</span> sDate<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> $sD <span class="token operator">=</span> sDate<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> $eM <span class="token operator">=</span> eDate<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> $eD <span class="token operator">=</span> eDate<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> $t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> $tM <span class="token operator">=</span> $t<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> $tD <span class="token operator">=</span> $t<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>$sM <span class="token operator">></span> $eM<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>$tM <span class="token operator">></span> $sM <span class="token operator">||</span> $tM <span class="token operator">&lt;</span> $eM<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>$tM <span class="token operator">==</span> $sM<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> $tD <span class="token operator">>=</span> $sD <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>$tM <span class="token operator">==</span> $eM<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> $tD <span class="token operator">&lt;=</span> $eD <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>$tM <span class="token operator">></span> $sM <span class="token operator">&amp;&amp;</span> $tM <span class="token operator">&lt;</span> $eM<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>$tM <span class="token operator">==</span> $sM <span class="token operator">&amp;&amp;</span> $tM <span class="token operator">!=</span> $eM<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> $tD <span class="token operator">>=</span> $sD <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>$tM <span class="token operator">==</span> $eM <span class="token operator">&amp;&amp;</span> $tM <span class="token operator">!=</span> $sM<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> $tD <span class="token operator">&lt;=</span> $eM <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>$tM <span class="token operator">==</span> $sM <span class="token operator">&amp;&amp;</span> $tM <span class="token operator">==</span> $eM<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> $tD <span class="token operator">>=</span> $sD <span class="token operator">&amp;&amp;</span> $tD <span class="token operator">&lt;=</span> $eD <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    #HTMLContent <span class="token operator">=</span> <span class="token punctuation">&#123;</span>        <span class="token constant">HTML</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span>                <span class="token string">'&lt;div class="lantern-container">&lt;div class="lantern-box0">&lt;div class="lantern">&lt;div class="lantern-handle">&lt;/div>&lt;div class="lantern-a">&lt;div class="lantern-b">&lt;div class="lantern-t">'</span> <span class="token operator">+</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>Text<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span>                <span class="token string">'&lt;/div>&lt;/div>&lt;/div>&lt;div class="lantern-spike lantern-spike-a">&lt;div class="lantern-spike-c">&lt;/div>&lt;div class="lantern-spike-b">&lt;/div>&lt;/div>&lt;/div>&lt;/div>&lt;div class="lantern-box1">&lt;div class="lantern">&lt;div class="lantern-handle">&lt;/div>&lt;div class="lantern-a">&lt;div class="lantern-b">&lt;div class="lantern-t">'</span> <span class="token operator">+</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>Text<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span>                <span class="token string">'&lt;/div>&lt;/div>&lt;/div>&lt;div class="lantern-spike lantern-spike-a">&lt;div class="lantern-spike-c">&lt;/div>&lt;div class="lantern-spike-b">&lt;/div>&lt;/div>&lt;/div>&lt;/div>&lt;div class="lantern-box2">&lt;div class="lantern">&lt;div class="lantern-handle">&lt;/div>&lt;div class="lantern-a">&lt;div class="lantern-b">&lt;div class="lantern-t">'</span> <span class="token operator">+</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>Text<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span>                <span class="token string">'&lt;/div>&lt;/div>&lt;/div>&lt;div class="lantern-spike lantern-spike-a">&lt;div class="lantern-spike-c">&lt;/div>&lt;div class="lantern-spike-b">&lt;/div>&lt;/div>&lt;/div>&lt;/div>&lt;div class="lantern-box3">&lt;div class="lantern">&lt;div class="lantern-handle">&lt;/div>&lt;div class="lantern-a">&lt;div class="lantern-b">&lt;div class="lantern-t">'</span> <span class="token operator">+</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>Text<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span>                <span class="token string">'&lt;/div>&lt;/div>&lt;/div>&lt;div class="lantern-spike lantern-spike-a">&lt;div class="lantern-spike-c">&lt;/div>&lt;div class="lantern-spike-b">&lt;/div>&lt;/div>&lt;/div>&lt;/div>&lt;/div>&lt;style type="text/css">@media only screen and (max-width:768px)&#123;.lantern-container&#123;display:none&#125;&#125;.lantern-box2&#123;position:fixed;top:'</span> <span class="token operator">+</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>lanternTop<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span>                <span class="token string">'px;right:'</span> <span class="token operator">+</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>lanternRL<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span>                <span class="token string">'px;z-index:'</span> <span class="token operator">+</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>zIndex <span class="token operator">+</span>                <span class="token string">';pointer-events:none&#125;.lantern-box3&#123;position:fixed;top:'</span> <span class="token operator">+</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>lanternTop<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span>                <span class="token string">'px;right:'</span> <span class="token operator">+</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>lanternRL<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span>                <span class="token string">'px;z-index:'</span> <span class="token operator">+</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>zIndex <span class="token operator">+</span>                <span class="token string">';pointer-events:none&#125;.lantern-box1&#123;position:fixed;top:'</span> <span class="token operator">+</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>lanternTop<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span>                <span class="token string">'px;left:'</span> <span class="token operator">+</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>lanternRL<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span>                <span class="token string">'px;z-index:'</span> <span class="token operator">+</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>zIndex <span class="token operator">+</span>                <span class="token string">';pointer-events:none&#125;.lantern-box0&#123;position:fixed;top:'</span> <span class="token operator">+</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>lanternTop<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span>                <span class="token string">'px;left:'</span> <span class="token operator">+</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>lanternRL<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span>                <span class="token string">'px;z-index:'</span> <span class="token operator">+</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>zIndex <span class="token operator">+</span>                <span class="token string">';pointer-events:none&#125;.lantern-box3 .lantern,.lantern-box0 .lantern&#123;-webkit-animation:swing 5s infinite ease-in-out;box-shadow:-5px 5px 30px 4px#fc903d&#125;.lantern&#123;position:relative;width:120px;height:90px;margin:20px 50px 60px 50px;background:#d8000f;background:rgba(216,0,15,0.8);border-radius:50%50%;-webkit-transform-origin:50%-100px;-webkit-animation:swing 3s infinite ease-in-out;box-shadow:-5px 5px 50px 4px#fa6c00&#125;.lantern-a&#123;width:100px;height:90px;background:#d8000f;background:rgba(216,0,15,0.1);margin:12px 8px 8px 8px;border-radius:50%50%;border:2px solid#dc8f03&#125;.lantern-b&#123;width:45px;height:90px;background:#d8000f;background:rgba(216,0,15,0.1);margin:-4px 8px 8px 26px;border-radius:50%50%;border:2px solid#dc8f03&#125;.lantern-handle&#123;position:absolute;top:-20px;left:60px;width:2px;height:20px;background:#dc8f03&#125;.lantern-spike-a&#123;position:relative;width:5px;height:20px;margin:-5px 0 0 59px;-webkit-animation:swing 4s infinite ease-in-out;-webkit-transform-origin:50%-45px;background:orange;border-radius:0 0 5px 5px&#125;.lantern-spike-b&#123;position:absolute;top:14px;left:-2px;width:10px;height:10px;background:#dc8f03;border-radius:50%&#125;.lantern-spike-c&#123;position:absolute;top:18px;left:-2px;width:10px;height:35px;background:orange;border-radius:0 0 0 5px&#125;.lantern:before&#123;position:absolute;top:-7px;left:29px;height:12px;width:60px;content:" ";display:block;z-index:999;border-radius:5px 5px 0 0;border:solid 1px#dc8f03;background:orange;background:linear-gradient(to right,#dc8f03,orange,#dc8f03,orange,#dc8f03)&#125;.lantern:after&#123;position:absolute;bottom:-7px;left:10px;height:12px;width:60px;content:" ";display:block;margin-left:20px;border-radius:0 0 5px 5px;border:solid 1px#dc8f03;background:orange;background:linear-gradient(to right,#dc8f03,orange,#dc8f03,orange,#dc8f03)&#125;.lantern-t&#123;font-family:黑体,Arial,Lucida Grande,Tahoma,sans-serif;font-size:3.2rem;color:#dc8f03;font-weight:700;line-height:85px;text-align:center&#125;@-moz-keyframes swing&#123;0%&#123;-moz-transform:rotate(-10deg)&#125;50%&#123;-moz-transform:rotate(10deg)&#125;100%&#123;-moz-transform:rotate(-10deg)&#125;&#125;@-webkit-keyframes swing&#123;0%&#123;-webkit-transform:rotate(-10deg)&#125;50%&#123;-webkit-transform:rotate(10deg)&#125;100%&#123;-webkit-transform:rotate(-10deg)&#125;&#125;*[no-select]&#123;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;user-select: none;&#125;&lt;/style>'</span>            <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token literal-property property">Text</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'新'</span><span class="token punctuation">,</span> <span class="token string">'年'</span><span class="token punctuation">,</span> <span class="token string">'快'</span><span class="token punctuation">,</span> <span class="token string">'乐'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token literal-property property">zIndex</span><span class="token operator">:</span> <span class="token number">9999</span><span class="token punctuation">,</span>        <span class="token literal-property property">lanternRL</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token literal-property property">lanternTop</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token function">#postionCorrect</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'postion'</span> <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">let</span> <span class="token punctuation">&#123;</span> postion <span class="token punctuation">&#125;</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>#HTMLContent<span class="token punctuation">.</span>zIndex <span class="token operator">=</span> postion<span class="token punctuation">.</span>zIndex <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#HTMLContent<span class="token punctuation">.</span>zIndex<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>#HTMLContent<span class="token punctuation">.</span>lanternRL <span class="token operator">=</span> postion<span class="token punctuation">.</span>lanternRL <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#HTMLContent<span class="token punctuation">.</span>lanternRL<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>#HTMLContent<span class="token punctuation">.</span>lanternTop <span class="token operator">=</span> postion<span class="token punctuation">.</span>lanternTop <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#HTMLContent<span class="token punctuation">.</span>lanternTop<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">#contentCorrect</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'content'</span> <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>#HTMLContent<span class="token punctuation">.</span>Text <span class="token operator">=</span> obj<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">wrapperID<span class="token punctuation">,</span> initPara</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 显示日期处理</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">#dateCorrect</span><span class="token punctuation">(</span>initPara<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 显示位置处理</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">#postionCorrect</span><span class="token punctuation">(</span>initPara<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 显示内容处理</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">#contentCorrect</span><span class="token punctuation">(</span>initPara<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> $wrapper <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>wrapperID<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">#CompareTime</span><span class="token punctuation">(</span>initPara<span class="token punctuation">.</span>date<span class="token punctuation">.</span>from<span class="token punctuation">,</span> initPara<span class="token punctuation">.</span>date<span class="token punctuation">.</span>to<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            $wrapper<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#HTMLContent<span class="token punctuation">.</span><span class="token constant">HTML</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            $wrapper<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>3Dcard.js</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> cards <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"[Card3D]"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// var images = document.querySelectorAll("[Card3DContent]");</span><span class="token comment">// var backgrounds = document.querySelectorAll("[Card3DConBG]");</span><span class="token keyword">var</span> range <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">;</span><span class="token comment">// const calcValue = (a, b) => (((a * 100) / b) * (range / 100) -(range / 2)).toFixed(1);</span><span class="token keyword">var</span> <span class="token function-variable function">calcValue</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">calcValue</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token punctuation">(</span>a <span class="token operator">/</span> b <span class="token operator">*</span> range <span class="token operator">-</span> range <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// thanks @alice-mx</span><span class="token keyword">var</span> timeout <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_ref</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> x <span class="token operator">=</span> _ref<span class="token punctuation">.</span>x<span class="token punctuation">,</span>y <span class="token operator">=</span> _ref<span class="token punctuation">.</span>y<span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>timeout<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    window<span class="token punctuation">.</span><span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  timeout <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> yValue <span class="token operator">=</span> <span class="token function">calcValue</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> xValue <span class="token operator">=</span> <span class="token function">calcValue</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// console.log(xValue, yValue);</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>cards <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      cards<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">"rotateX("</span> <span class="token operator">+</span> yValue <span class="token operator">+</span> <span class="token string">"deg) rotateY("</span> <span class="token operator">+</span> xValue <span class="token operator">+</span> <span class="token string">"deg)"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// [].forEach.call(images, function (image) &#123;</span>    <span class="token comment">//   image.style.transform = "translateX(" + -xValue + "px) translateY(" + yValue + "px)";</span>    <span class="token comment">// &#125;);</span>    <span class="token comment">// [].forEach.call(backgrounds, function (background) &#123;</span>    <span class="token comment">//   background.style.backgroundPosition = xValue * .45 + "px " + -yValue * .45 + "px";</span>    <span class="token comment">// &#125;);</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>butterfly的布局</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>页面加载动画</title>
      <link href="/posts/4b71.html"/>
      <url>/posts/4b71.html</url>
      
        <content type="html"><![CDATA[<h1 id="页面加载动画"><a href="#页面加载动画" class="headerlink" title="页面加载动画"></a>页面加载动画</h1><p>今天的主题是为博客添加页面加载动画。</p><p>下面是页面加载动画的详细作用：</p><ol><li><p><strong>视觉吸引力</strong>: 页面加载动画可以增加页面的吸引力，使用户在等待页面加载时感到更加愉悦和有趣。精美的加载动画可以提升用户体验，增加用户对网站的好感度。</p></li><li><p><strong>指示器</strong>: 加载动画可以作为页面加载的指示器，告诉用户页面正在加载中，以及加载进度如何。这可以帮助用户了解页面加载的状态，减少用户的不耐烦和不确定性。</p></li><li><p><strong>心理安慰</strong>: 在加载较慢的情况下，页面加载动画可以给用户一种心理上的安慰，让他们知道页面正在工作，而不是出现了问题。这有助于降低用户的焦虑和流失率。</p></li><li><p><strong>品牌展示</strong>: 页面加载动画也可以成为品牌的一部分，通过设计独特的加载动画来展示品牌的风格和特点，增强品牌形象。</p></li></ol><p>综上所述，页面加载动画在提升用户体验方面都发挥着重要作用，是网页设计中常用的元素之一。</p><h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404292330622.gif" alt="loading"></p><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><ol><li><p>在<code>matery\source\css</code>下新建<code>loading.css</code>，添加以下代码</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">&#123;</span>    <span class="token property">--primary-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>    <span class="token comment">/* 使用变量定义主要颜色 */</span><span class="token punctuation">&#125;</span><span class="token selector">*</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">body</span> <span class="token punctuation">&#123;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader-wrapper</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>45deg<span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>90<span class="token punctuation">,</span> 54<span class="token punctuation">,</span> 148<span class="token punctuation">)</span> 0%<span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>19<span class="token punctuation">,</span> 189<span class="token punctuation">,</span> 206<span class="token punctuation">)</span> 33%<span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 148<span class="token punctuation">,</span> 217<span class="token punctuation">)</span> 66%<span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>111<span class="token punctuation">,</span> 199<span class="token punctuation">,</span> 181<span class="token punctuation">)</span> 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">background-size</span><span class="token punctuation">:</span> 400%<span class="token punctuation">;</span>    <span class="token property">background-position</span><span class="token punctuation">:</span> 0% 100%<span class="token punctuation">;</span>    <span class="token property">animation</span><span class="token punctuation">:</span> gradient 7.5s ease-in-out infinite<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader,.loader::before,.loader::after,.loader img</span> <span class="token punctuation">&#123;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> 3px solid transparent<span class="token punctuation">;</span>    <span class="token property">border-top-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--primary-color<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader</span> <span class="token punctuation">&#123;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token property">margin-left</span><span class="token punctuation">:</span> -75px<span class="token punctuation">;</span>    <span class="token property">margin-top</span><span class="token punctuation">:</span> -75px<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token property">animation</span><span class="token punctuation">:</span> spin 1.7s linear infinite<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader::before</span> <span class="token punctuation">&#123;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>    <span class="token property">animation</span><span class="token punctuation">:</span> spin 0.6s linear infinite reverse<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader::after</span> <span class="token punctuation">&#123;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>    <span class="token property">animation</span><span class="token punctuation">:</span> spin 1s linear infinite<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader img</span> <span class="token punctuation">&#123;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">object-fit</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token property">animation</span><span class="token punctuation">:</span> spin 1.7s linear infinite reverse<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader-text</span> <span class="token punctuation">&#123;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 36px<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 72%<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 3<span class="token punctuation">;</span>    <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader-text div</span> <span class="token punctuation">&#123;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 36px<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--primary-color<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0 20px<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>180deg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">animation</span><span class="token punctuation">:</span> move 2s linear infinite<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader-text div:nth-child(8)::before,.loader-text div:nth-child(9)::before,.loader-text div:nth-child(10)::before</span> <span class="token punctuation">&#123;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--primary-color<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader-text div::after,.loader-text div:nth-child(8)::after,.loader-text div:nth-child(9)::after,.loader-text div:nth-child(10)::after</span> <span class="token punctuation">&#123;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.15<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> -40px<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token property">margin-left</span><span class="token punctuation">:</span> -5px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader-text div:nth-child(8)::after,.loader-text div:nth-child(9)::after,.loader-text div:nth-child(10)::after</span> <span class="token punctuation">&#123;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">margin-left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader-text div:nth-child(2)</span> <span class="token punctuation">&#123;</span>    <span class="token property">animation-delay</span><span class="token punctuation">:</span> 0.2s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader-text div:nth-child(3)</span> <span class="token punctuation">&#123;</span>    <span class="token property">animation-delay</span><span class="token punctuation">:</span> 0.4s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader-text div:nth-child(4)</span> <span class="token punctuation">&#123;</span>    <span class="token property">animation-delay</span><span class="token punctuation">:</span> 0.6s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader-text div:nth-child(5)</span> <span class="token punctuation">&#123;</span>    <span class="token property">animation-delay</span><span class="token punctuation">:</span> 0.8s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader-text div:nth-child(6)</span> <span class="token punctuation">&#123;</span>    <span class="token property">animation-delay</span><span class="token punctuation">:</span> 1s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader-text div:nth-child(7)</span> <span class="token punctuation">&#123;</span>    <span class="token property">animation-delay</span><span class="token punctuation">:</span> 1.2s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader-text div:nth-child(8)</span> <span class="token punctuation">&#123;</span>    <span class="token property">animation-delay</span><span class="token punctuation">:</span> 1.4s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader-text div:nth-child(9)</span> <span class="token punctuation">&#123;</span>    <span class="token property">animation-delay</span><span class="token punctuation">:</span> 1.6s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.loader-text div:nth-child(10)</span> <span class="token punctuation">&#123;</span>    <span class="token property">animation-delay</span><span class="token punctuation">:</span> 1.8s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@keyframes</span> gradient</span> <span class="token punctuation">&#123;</span>    <span class="token selector">50%</span> <span class="token punctuation">&#123;</span>        <span class="token property">background-position</span><span class="token punctuation">:</span> 100% 0%<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@keyframes</span> spin</span> <span class="token punctuation">&#123;</span>    <span class="token selector">0%</span> <span class="token punctuation">&#123;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">100%</span> <span class="token punctuation">&#123;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@keyframes</span> move</span> <span class="token punctuation">&#123;</span>    <span class="token selector">0%</span> <span class="token punctuation">&#123;</span>        <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>        <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">35%</span> <span class="token punctuation">&#123;</span>        <span class="token property">right</span><span class="token punctuation">:</span> 41%<span class="token punctuation">;</span>        <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">65%</span> <span class="token punctuation">&#123;</span>        <span class="token property">right</span><span class="token punctuation">:</span> 59%<span class="token punctuation">;</span>        <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">100%</span> <span class="token punctuation">&#123;</span>        <span class="token property">right</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-180deg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 小屏幕下(手机类)的样式 */</span><span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 601px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>    <span class="token selector">.loader</span> <span class="token punctuation">&#123;</span>        <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>        <span class="token property">margin-left</span><span class="token punctuation">:</span> -50px<span class="token punctuation">;</span>        <span class="token property">margin-top</span><span class="token punctuation">:</span> -50px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.loader img</span> <span class="token punctuation">&#123;</span>        <span class="token property">width</span><span class="token punctuation">:</span> 45%<span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> 45%<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.loader-text</span> <span class="token punctuation">&#123;</span>        <span class="token property">width</span><span class="token punctuation">:</span> 70%<span class="token punctuation">;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.loader-text div</span> <span class="token punctuation">&#123;</span>        <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 中等屏幕下(平板类)的样式 */</span><span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 600px<span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 992px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>    <span class="token selector">.loader</span> <span class="token punctuation">&#123;</span>        <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>        <span class="token property">margin-left</span><span class="token punctuation">:</span> -60px<span class="token punctuation">;</span>        <span class="token property">margin-top</span><span class="token punctuation">:</span> -60px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.loader img</span> <span class="token punctuation">&#123;</span>        <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.loader-text</span> <span class="token punctuation">&#123;</span>        <span class="token property">width</span><span class="token punctuation">:</span> 60%<span class="token punctuation">;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 28px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.loader-text div</span> <span class="token punctuation">&#123;</span>        <span class="token property">width</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 大屏幕下(桌面类)的样式 */</span><span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 993px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>    <span class="token selector">.loader</span> <span class="token punctuation">&#123;</span>        <span class="token property">width</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>        <span class="token property">margin-left</span><span class="token punctuation">:</span> -90px<span class="token punctuation">;</span>        <span class="token property">margin-top</span><span class="token punctuation">:</span> -90px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.loader img</span> <span class="token punctuation">&#123;</span>        <span class="token property">width</span><span class="token punctuation">:</span> 60%<span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> 60%<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.loader-text</span> <span class="token punctuation">&#123;</span>        <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 36px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.loader-text div</span> <span class="token punctuation">&#123;</span>        <span class="token property">width</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> 36px<span class="token punctuation">;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>在<code>matery\layout\_partial</code>新建<code>loading.ejs</code></p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>loadingPages<span class="token punctuation">.</span>enable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loader-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        /* 你的 HTML 代码将放在这里 */        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loader-wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loader<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  /* 填写你的头像路径 */            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loader-text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- 10个div --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>L<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>O<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>D<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>I<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>N<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>G<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">            <span class="token keyword">var</span> <span class="token function-variable function">endLoading</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token string">'auto'</span><span class="token punctuation">;</span>                document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'loader-box'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> endLoading<span class="token punctuation">)</span><span class="token punctuation">;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>部署到本地，查看并调试效果</p></li></ol><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://seayj.cn/">SeaYJ’s Blog</a></li><li><a href="https://www.bilibili.com/video/BV1aZ4y1G7jp/">https://www.bilibili.com/video/BV1aZ4y1G7jp/</a></li></ul><h2 id="其他效果"><a href="#其他效果" class="headerlink" title="其他效果"></a>其他效果</h2><ul><li><a href="https://haoqi7.github.io/posts/ec74c60a.html">hexo添加页面加载动画 | HaoQi (haoqi7.github.io)</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 页面动画 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cuda 入门</title>
      <link href="/posts/c7d8.html"/>
      <url>/posts/c7d8.html</url>
      
        <content type="html"><![CDATA[<h1 id="CUDA入门"><a href="#CUDA入门" class="headerlink" title="CUDA入门"></a>CUDA入门</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>06年，NVIDIA公司发布了CUDA，它是建立在NVIDIA的GPU上的一个通用并行计算平台和编程模型。CUDA编程使得可以更高效地利用GPU的并行计算引擎来解决复杂的计算问题。近年来，GPU在深度学习领域取得了巨大成功，基于GPU的并行计算已成为训练深度学习模型的标准。</p><p>需要强调的是，GPU并非独立运行的计算平台，而是需要与CPU协同工作的。它可以视作CPU的协处理器，在提及GPU并行计算时，实际上指的是基于CPU+GPU的异构计算架构。在这种异构计算架构中，GPU与CPU通过PCIe总线连接在一起，协同完成计算任务。CPU所在位置被称为主机端（host），而GPU所在位置被称为设备端（device），如下图所示：</p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202312191415196.png" alt="image-20231219141540082" style="zoom:80%;" /><p>当比较GPU和CPU时，GPU拥有更多的计算核心，使其非常适合处理数据并行的计算密集型任务，例如大型矩阵运算。相比之下，CPU的核心数量较少，但它们擅长执行复杂的逻辑运算，适用于控制密集型任务。此外，CPU上的线程通常是重型的，导致较大的上下文切换开销，而GPU拥有许多轻量级线程。</p><p>因此，基于CPU+GPU的异构计算平台能够充分发挥优势。CPU负责处理串行程序中的逻辑复杂部分，而GPU则专注于处理数据密集型、并行计算的部分，这样能够实现最佳性能。</p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202312191433412.png" alt="image-20231219143336313" style="zoom:80%;" /><p>CUDA是NVIDIA公司开发的GPU编程模型，它提供了简单易用的接口，可用于构建基于GPU计算的应用程序。CUDA支持多种编程语言，如C&#x2F;C++、Python和Fortran等。下面我们将使用CUDA C&#x2F;C++接口来讲解CUDA编程。Windows系统下的CUDA安装教程可以参考给出的链接进行安装：<a href="https://blog.csdn.net/chen565884393/article/details/127905428">CUDA安装及环境配置——最新详细版-CSDN博客</a></p><h2 id="入门基础"><a href="#入门基础" class="headerlink" title="入门基础"></a>入门基础</h2><p>在CUDA编程模型中，涉及两个核心概念：host和device。</p><p>host代表着CPU及其相关内存，而device代表着GPU及其相关内存。CUDA程序中同时存在host程序和device程序，分别在CPU和GPU上运行。此外，host和device之间可以进行通信，允许数据在它们之间进行传输。</p><p>一般而言，典型的CUDA程序执行流程如下：</p><ol><li>分配host内存并对数据进行初始化</li><li>分配device内存，并将数据从host拷贝到device上</li><li>调用CUDA的核函数（kernel）在device上完成指定的并行运算</li><li>将device上计算得到的结果拷贝回host</li><li>释放device和host上分配的内存空间</li></ol><p>核函数（kernel）是CUDA中的关键概念，它是在device上并行执行的函数。核函数以 <code>__global__</code> 修饰符声明，在调用时需要使用 <code>&lt;&lt;&lt;grid, block&gt;&gt;&gt;</code> 来指定kernel要执行的线程数量。在CUDA中，每个线程都会执行核函数，并且每个线程都会有一个唯一的线程ID，可以通过核函数的内置变量 threadIdx 来获取。</p><p>由于GPU是异构计算模型，因此需要区分host和device上的代码。在CUDA中，可以通过函数类型限定词来区分host和device上的函数。主要的三种函数类型限定词如下：</p><ul><li><code>__global__</code>：在device上执行，可以从host调用（一些特定的GPU也能从device上调用）。返回类型必须是 void，不支持可变参数，也不能成为类的成员函数。需要注意的是，用 <code>__global__</code> 定义的kernel是异步执行的，这意味着host不会等待kernel执行完毕再执行下一步。</li><li><code>__device__</code>：在device上执行，仅可以从device中调用，不能与 <code>__global__</code> 同时使用。</li><li><code>__host__</code>：在host上执行，仅可以从host中调用。一般情况下，此修饰符可以省略不写。它不能与 <code>__global__</code> 同时使用，但可以与 <code>__device__</code> 结合使用，此时函数可在device和host上都编译。</li></ul><p>要深入理解kernel，需要对kernel的线程层次结构有清晰的认识。</p><ul><li>线程结构的第一层次：GPU上存在大量并行化的轻量级线程。当kernel在device上执行时，实际上是启动了大量线程，一个kernel启动的所有线程构成一个网格（grid）</li><li>第二个层次：在同一个网格内，一些线程共享相同的全局内存空间，网格被分为多个部分，每一个都是一个线程块（block）一个线程块包含多个线程。</li><li>第三个层次：在线程块内，线程被划分为更小的单元，称为线程（thread）。这是GPU上的最细粒度的并行层次。线程是执行计算的基本单元，它们共享线程块内的资源，包括寄存器文件和共享内存。通过合理的组织和协同工作，线程能够高效地执行各自的任务，实现更细致的并行化。</li></ul><p>线程的层次结构如下图所示，以二维的grid和block为例。grid和block都被定义为 dim3 类型的变量，dim3 可以看作包含三个无符号整数（x，y，z）成员的结构体变量，在定义时，缺省值默认为1。因此，grid和block可以灵活定义为1维、2维或3维结构。在CUDA编程中，这些概念和规则是关键，对于理解和利用GPU并行计算极为重要。</p><p>要调用kernel，必须通过执行配置 <code>&lt;&lt;&lt;grid, block&gt;&gt;&gt;</code> 来指定kernel所使用的线程数及结构。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">dim3 <span class="token function">grid</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>dim3 <span class="token function">block</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>kernel_fun<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span> grid<span class="token punctuation">,</span> block <span class="token operator">>></span><span class="token operator">></span><span class="token punctuation">(</span>prams<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202312231222160.png" alt="Kernel的两层线程组织结构（2-dim）" style="zoom:67%;" /><p>所以，一个线程需要两个内置的坐标变量（blockIdx，threadIdx）来唯一标识，它们都是<code>dim3</code>类型变量，其中blockIdx指明线程所在grid中的位置，而threaIdx指明线程所在block中的位置，如图中的Thread (1,1)满足：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">threadIdx<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">1</span>threadIdx<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">1</span>blockIdx<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">1</span>blockIdx<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>在CUDA编程中，线程块（block）中的线程被分配到同一个流式多处理器（SM）上，但是每个SM的资源是有限的，因此线程块中的线程数量受到限制。现代GPU支持的线程块中的线程数量通常可达1024个。有时候，需要知道一个线程在block中的全局ID，这就需要了解block的组织结构，可以通过线程的内置变量 blockDim 来获取。它获取线程块在各个维度上的大小。对于一个2维的block( D<del>x</del>, D<del>y</del>)，线程(x, y)的ID值为 (x + y * D<del>x</del> )，如果是3维的block( D<del>x</del>, D<del>y</del>, D<del>z</del>)，线程(x, y, z)的ID值为 (x + y * D<del>x</del> + z * D<del>x</del> * D<del>y</del>)。此外，线程还具有内置变量 gridDim，用于获取网格块在各个维度上的大小。</p><p>kernel的这种线程组织结构天然适合vector、matrix等运算，如我们将利用上图2-dim结构实现两个矩阵的加法，每个线程负责处理每个位置的两个元素相加，代码如下所示。线程块大小为(16, 16)，然后将N * N大小的矩阵均分为不同的线程块来执行加法运算。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">__global__ <span class="token keyword">void</span> <span class="token function">matrixAddition</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span>a<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>b<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span>c<span class="token punctuation">,</span> <span class="token keyword">int</span> N<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> row <span class="token operator">=</span> blockIdx<span class="token punctuation">.</span>y <span class="token operator">*</span> blockDim<span class="token punctuation">.</span>y <span class="token operator">+</span> threadIdx<span class="token punctuation">.</span>y<span class="token punctuation">;</span>    <span class="token keyword">int</span> col <span class="token operator">=</span> blockIdx<span class="token punctuation">.</span>x <span class="token operator">*</span> blockDim<span class="token punctuation">.</span>x <span class="token operator">+</span> threadIdx<span class="token punctuation">.</span>x<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>row <span class="token operator">&lt;</span> N <span class="token operator">&amp;&amp;</span> col <span class="token operator">&lt;</span> N<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> index <span class="token operator">=</span> row <span class="token operator">*</span> N <span class="token operator">+</span> col<span class="token punctuation">;</span>        c<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">+</span> b<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 其他代码...</span>    dim3 <span class="token function">blockSize</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    dim3 <span class="token function">gridSize</span><span class="token punctuation">(</span><span class="token punctuation">(</span>N <span class="token operator">+</span> blockSize<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> blockSize<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token punctuation">(</span>N <span class="token operator">+</span> blockSize<span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> blockSize<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>    matrixAddition<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span>gridSize<span class="token punctuation">,</span> blockSize<span class="token operator">>></span><span class="token operator">></span><span class="token punctuation">(</span>device_a<span class="token punctuation">,</span> device_b<span class="token punctuation">,</span> device_c<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 其他代码...</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>以上代码中，kernel函数 matrixAddition 实现了矩阵加法操作。通过计算每个线程的行列索引，确保每个线程仅处理有效的矩阵元素。主函数中，根据矩阵大小 N 和设定的线程块大小，计算出适当的 grid 和 block 尺寸，并调用 kernel 函数执行矩阵加法。</p><h3 id="内存模型"><a href="#内存模型" class="headerlink" title="内存模型"></a>内存模型</h3><p>这里简单介绍一下CUDA的内存模型，如下图所示：</p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202312232011569.png" alt="CUDA内存模型" style="zoom: 67%;" /><p>可以看到，每个线程有自己的私有本地内存（Local Memory），而每个线程块有包含共享内存（Shared Memory）,可以被线程块中所有线程共享，其生命周期与线程块一致。此外，所有的线程都可以访问全局内存（Global Memory）。还可以访问一些只读内存块：常量内存（Constant Memory）和纹理内存（Texture Memory）</p><p>这些内存类型的特点如下：</p><ol><li><p><strong>私有本地内存（Local Memory）</strong>：每个线程都有自己的私有本地内存，用于存储线程私有的变量和数据。这些变量通常是在寄存器不足时或者动态分配内存时使用。访问本地内存的速度较慢，因此需要尽量减少对本地内存的访问，以提高性能。</p></li><li><p><strong>共享内存（Shared Memory）</strong>：每个线程块都拥有共享内存，它可以被该线程块中的所有线程共享。共享内存的生命周期与线程块一致，对于需要在线程块内多个线程之间共享的数据，可以存储在共享内存中。共享内存的访问速度比全局内存快得多，因此可以用于提高线程块内的数据访问效率和并行计算速度。</p></li><li><p><strong>全局内存（Global Memory）</strong>：所有的线程都可以访问全局内存，它是GPU中容量最大的内存类型。全局内存通常用于存储整个程序的数据，但其访问速度相对较慢。因此，在CUDA编程中，需要谨慎优化全局内存的访问，以最大化性能。</p></li><li><p><strong>常量内存（Constant Memory）</strong>：常量内存用于存储对所有线程只读的数据，其特点是具有缓存，提供对只读内存的快速访问，适用于线程内的数据共享。</p></li><li><p><strong>纹理内存（Texture Memory）</strong>：纹理内存是一种特殊的只读内存，适用于图形处理领域，提供对数据的高效访问和插值。它通常用于图像处理等应用场景。</p></li></ol><p>CUDA内存模型中不同类型的内存具有不同的访问特性和速度，合理地利用和管理这些内存类型可以对CUDA程序的性能产生显著影响。优化内存访问是CUDA编程中的一个重要方面，能够有效地提高程序的执行效率。</p><h3 id="硬件认识"><a href="#硬件认识" class="headerlink" title="硬件认识"></a>硬件认识</h3><p>还有重要一点，你需要对GPU的硬件实现有一个基本的认识。上面说到了kernel的线程组织层次，那么一个kernel实际上会启动很多线程，这些线程是逻辑上并行的，但是在物理层却并不一定。</p><p>在GPU硬件中，一个关键组件是SM（Streaming Multiprocessor，流式多处理器）。SM包含CUDA核心、共享内存、寄存器等。SM能够同时执行数百个线程，其并发能力取决于SM拥有的资源数量。当一个kernel被执行时，其线程块被分配到SM上。一个线程块只能在一个SM上被调度，而一个SM通常能够调度多个线程块，这取决于SM本身的能力。因此，一个kernel的线程块可能被分配到多个SM上，所以grid只是逻辑层，而SM才是执行的物理层。</p><p>SM采用的是<a href="https://link.zhihu.com/?target=http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html%23simt-architecture">SIMT</a> (Single-Instruction, Multiple-Thread，单指令多线程)架构，基本的执行单元是线程束（warps)，每个线程束包含32个线程。这些线程同时执行相同的指令，但每个线程都有自己的指令地址计数器和寄存器状态，拥有独立的执行路径。因此，尽管线程束中的线程同时执行相同的指令，但它们可能具有不同的行为，特别是在遇到分支结构时，可能导致一些线程进入分支，而其他线程不执行，这些非执行的线程只能等待，因为GPU规定线程束中所有线程在同一周期执行相同的指令，线程束分化会导致性能下降。</p><p>当一个线程块被划分到SM上时，它会进一步划分为多个线程束，因为这才是SM的基本执行单元。然而，一个SM同时并发的线程束数量是有限的，这受限于资源分配，因为SM要为每个线程块分配共享内存，并为每个线程束中的线程分配独立的寄存器。因此，SM的配置会影响其所支持的线程块和线程束的并发数量。总的来说，虽然kernel的grid和block只是逻辑上的划分，但在物理层面，一个kernel的所有线程并非一定同时并发。因此，需要注意调整grid和block的配置，以充分发挥GPU的性能。此外，由于线程束的基本大小是32，因此block大小最好设置为32的倍数。</p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202312232017228.png" alt="逻辑层和物理层" style="zoom:67%;" /><h3 id="个人配置"><a href="#个人配置" class="headerlink" title="个人配置"></a>个人配置</h3><p>在进行CUDA编程前，可以先检查一下自己的GPU硬件配置，这样才能有的放矢，通过以下代码获得GPU的配置属性：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cuda_runtime.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    cudaDeviceProp deviceProp<span class="token punctuation">;</span>    <span class="token function">cudaGetDeviceProperties</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>deviceProp<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Device 0 information:\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"设备名称与型号: %s\n"</span><span class="token punctuation">,</span> deviceProp<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"显存大小: %d MB\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>deviceProp<span class="token punctuation">.</span>totalGlobalMem <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"计算能力: %d.%d\n"</span><span class="token punctuation">,</span> deviceProp<span class="token punctuation">.</span>major<span class="token punctuation">,</span> deviceProp<span class="token punctuation">.</span>minor<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"含有的SM数量: %d\n"</span><span class="token punctuation">,</span> deviceProp<span class="token punctuation">.</span>multiProcessorCount<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"CUDA CORE数量: %d\n"</span><span class="token punctuation">,</span> deviceProp<span class="token punctuation">.</span>multiProcessorCount <span class="token operator">*</span> <span class="token number">192</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"每个线程块的共享内存大小: %.2f KB\n"</span><span class="token punctuation">,</span> deviceProp<span class="token punctuation">.</span>sharedMemPerBlock <span class="token operator">/</span> <span class="token number">1024.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"每个线程块的最大线程数: %d\n"</span><span class="token punctuation">,</span> deviceProp<span class="token punctuation">.</span>maxThreadsPerBlock<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"每个EM的最大线程数: %d\n"</span><span class="token punctuation">,</span> deviceProp<span class="token punctuation">.</span>maxThreadsPerMultiProcessor<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"每个SM的最大线程束数: %d\n"</span><span class="token punctuation">,</span> deviceProp<span class="token punctuation">.</span>maxThreadsPerMultiProcessor <span class="token operator">/</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="向量加法实例"><a href="#向量加法实例" class="headerlink" title="向量加法实例"></a>向量加法实例</h2><p>知道了CUDA编程基础，我们就来个简单的实战，利用CUDA编程实现两个向量的加法，在实现之前，先简单介绍一下CUDA编程中内存管理API。</p><p>在CUDA编程中，内存管理是至关重要的。以下是常用的内存管理函数的简要介绍：</p><ol><li><p><strong>cudaMalloc() 函数</strong>：</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">cudaError_t <span class="token function">cudaMalloc</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token operator">*</span> devPtr<span class="token punctuation">,</span> size_t size<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>cudaMalloc</code> 用于在设备（GPU）上分配内存。它类似于C语言中的 <code>malloc()</code> 函数，但是在GPU的全局内存中分配内存。<code>devPtr</code> 是指向分配内存起始位置的指针，<code>size</code> 表示要分配的内存字节数。分配成功时返回 <code>cudaSuccess</code>，否则返回相应的错误码。需要注意，使用完内存后，必须使用 <code>cudaFree()</code> 函数释放相应的设备内存，以避免内存泄漏。</p><p>这个函数和C语言中的malloc类似，但是在device上申请一定字节大小的显存，其中devPtr是指向所分配内存的指针。</p><p>同时要释放分配的内存使用cudaFree函数，这和C语言中的free函数对应。</p></li><li><p><strong>cudaFree() 函数</strong>：</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">cudaError_t <span class="token function">cudaFree</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> devPtr<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>cudaFree</code> 用于释放之前由 <code>cudaMalloc</code> 分配的设备内存。传入的参数 <code>devPtr</code> 是之前分配的设备内存的指针。释放成功时返回 <code>cudaSuccess</code>，否则返回相应的错误码。</p></li><li><p><strong>cudaMemcpy() 函数</strong>：</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">cudaError_t <span class="token function">cudaMemcpy</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> dst<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span> src<span class="token punctuation">,</span> size_t count<span class="token punctuation">,</span> cudaMemcpyKind kind<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>cudaMemcpy</code> 用于在主机（host）和设备（device）之间进行数据传输。它可以控制数据的复制方向，例如从主机到设备、从设备到主机、设备到设备等。<code>dst</code> 和 <code>src</code> 分别是目标和源的指针，<code>count</code>表示要复制的字节数，<code>kind</code>指定了数据传输的方向。常用的传输方向有：<code>cudaMemcpyHostToHost</code>、<code>cudaMemcpyHostToDevice</code>、<code>cudaMemcpyDeviceToHost</code>、<code>cudaMemcpyDeviceToDevice</code>，根据英文即可知道传输方向。</p></li></ol><p>在CUDA程序中，合理使用这些函数进行内存分配和数据传输是保证程序正确性和性能的重要一步。</p><p>现在我们来实现一个向量加法的实例，这里grid和block都设计为1-dim，首先定义kernel如下：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// 两个向量加法kernel，grid和block均为一维</span>__global__ <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token operator">*</span> x<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token operator">*</span> y<span class="token punctuation">,</span> <span class="token keyword">float</span><span class="token operator">*</span> z<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// 获取全局索引</span>    <span class="token keyword">int</span> index <span class="token operator">=</span> threadIdx<span class="token punctuation">.</span>x <span class="token operator">+</span> blockIdx<span class="token punctuation">.</span>x <span class="token operator">*</span> blockDim<span class="token punctuation">.</span>x<span class="token punctuation">;</span>    <span class="token comment">// 步长</span>    <span class="token keyword">int</span> stride <span class="token operator">=</span> blockDim<span class="token punctuation">.</span>x <span class="token operator">*</span> gridDim<span class="token punctuation">.</span>x<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> index<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i <span class="token operator">+=</span> stride<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        z<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>其中stride是整个grid的线程数，有时候向量的元素数很多，这时候可以将在每个线程实现多个元素（元素总数&#x2F;线程总数）的加法，相当于使用了多个grid来处理，这是一种<a href="https://link.zhihu.com/?target=https://devblogs.nvidia.com/cuda-pro-tip-write-flexible-kernels-grid-stride-loops/">grid-stride loop</a>方式，不过下面的例子一个线程只处理一个元素，所以kernel里面的循环是不执行的。</p><p>下面是一个简单的向量加法示例，使用CUDA编程中的基本概念和函数进行向量相加操作：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;math.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cuda_runtime.h></span></span><span class="token comment">// 两个向量加法kernel，grid和block均为一维</span>__global__ <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token operator">*</span> x<span class="token punctuation">,</span> <span class="token keyword">float</span><span class="token operator">*</span> y<span class="token punctuation">,</span> <span class="token keyword">float</span><span class="token operator">*</span> z<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 获取全局索引</span>    <span class="token keyword">int</span> index <span class="token operator">=</span> threadIdx<span class="token punctuation">.</span>x <span class="token operator">+</span> blockIdx<span class="token punctuation">.</span>x <span class="token operator">*</span> blockDim<span class="token punctuation">.</span>x<span class="token punctuation">;</span>    <span class="token comment">// 步长</span>    <span class="token keyword">int</span> stride <span class="token operator">=</span> blockDim<span class="token punctuation">.</span>x <span class="token operator">*</span> gridDim<span class="token punctuation">.</span>x<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> index<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i <span class="token operator">+=</span> stride<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        z<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// 向量大小</span>    <span class="token keyword">int</span> nBytes <span class="token operator">=</span> n <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token keyword">float</span> <span class="token operator">*</span>x<span class="token punctuation">,</span> <span class="token operator">*</span>y<span class="token punctuation">,</span> <span class="token operator">*</span>z<span class="token punctuation">;</span> <span class="token comment">// 定义主机上的向量指针</span>    <span class="token keyword">float</span> <span class="token operator">*</span>dev_x<span class="token punctuation">,</span> <span class="token operator">*</span>dev_y<span class="token punctuation">,</span> <span class="token operator">*</span>dev_z<span class="token punctuation">;</span> <span class="token comment">// 定义设备上的向量指针</span>    <span class="token comment">// 在主机上分配内存</span>    x <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    y <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    z <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 在设备上分配内存</span>    <span class="token function">cudaMalloc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>dev_x<span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">cudaMalloc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>dev_y<span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">cudaMalloc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>dev_z<span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 初始化主机上的向量数据</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0f</span><span class="token punctuation">;</span>        y<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2.0f</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 将主机上的向量数据复制到设备</span>    <span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>dev_x<span class="token punctuation">,</span> x<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyHostToDevice<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>dev_y<span class="token punctuation">,</span> y<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyHostToDevice<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 定义 grid 和 block 的大小</span>    <span class="token keyword">int</span> blockSize <span class="token operator">=</span> <span class="token number">256</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> numBlocks <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">+</span> blockSize <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> blockSize<span class="token punctuation">;</span>    <span class="token comment">// 调用 kernel 函数</span>    add<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span>numBlocks<span class="token punctuation">,</span> blockSize<span class="token operator">>></span><span class="token operator">></span><span class="token punctuation">(</span>dev_x<span class="token punctuation">,</span> dev_y<span class="token punctuation">,</span> dev_z<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 将设备上的结果复制回主机</span>    <span class="token function">cudaMemcpy</span><span class="token punctuation">(</span>z<span class="token punctuation">,</span> dev_z<span class="token punctuation">,</span> nBytes<span class="token punctuation">,</span> cudaMemcpyDeviceToHost<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 验证结果</span>    <span class="token keyword">float</span> maxError <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        maxError <span class="token operator">=</span> <span class="token function">fmaxf</span><span class="token punctuation">(</span>maxError<span class="token punctuation">,</span> <span class="token function">fabsf</span><span class="token punctuation">(</span>z<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">3.0f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"最大误差: %f\n"</span><span class="token punctuation">,</span> maxError<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 释放设备和主机上的内存</span>    <span class="token function">cudaFree</span><span class="token punctuation">(</span>dev_x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">cudaFree</span><span class="token punctuation">(</span>dev_y<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">cudaFree</span><span class="token punctuation">(</span>dev_z<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">free</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">free</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">free</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这段代码实现了向量加法操作，它使用了CUDA的核函数 <code>add</code>，将两个向量 <code>x</code> 和 <code>y</code> 相加得到结果向量 <code>z</code>。在主机和设备之间进行内存分配、数据传输和核函数调用，最后将结果从设备复制回主机进行验证。这里的向量大小为1&lt;&lt;20，而block大小为256，grid大小是4096，kernel的线程层级结构如下图所示：</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202312232141601.png" alt="kernel的线程层次结构"></p><h2 id="nvprof"><a href="#nvprof" class="headerlink" title="nvprof"></a>nvprof</h2><p>NVIDIA nvprof &#x2F; nvvp工具是英伟达N卡GPU编程中用于观察的利器。全称是NVIDIA Visual Profiler，是由2008年起开始支持的性能分析器。交互性好，利于使用。其中记录运行日志时使用命令nvprof，可视化显示日志时使用命令nvvp。</p><p>不过在最近几年，英伟达官方推出了新的性能分析工具NSight，官方更加建议使用新的工具，给出的原因是NSight运行时消耗的资源更少，统计的数据更加贴近实际运行情况的数据。相比之下使用nvprof&#x2F;nvvp方式运行时消耗资源较多，数据统计容易不准确。</p><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p><code>nvprof</code> 是 NVIDIA 提供的一个用于分析 CUDA 应用程序性能的命令行工具。它可以用来收集和分析 CUDA 应用程序的性能数据，包括核函数执行时间、内存使用情况等。</p><p>使用 <code>nvprof</code> 工具来分析 CUDA 核函数运行情况的基本步骤：</p><ol><li><p><strong>编译代码</strong>：首先，确保代码已经被编译成可执行文件。</p></li><li><p>**运行 <code>nvprof</code>**：在命令行中运行 <code>nvprof</code> 并指定要分析的可执行文件。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nvprof ./your_executable<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这将启动您的 CUDA 可执行文件并开始收集性能数据。</p></li><li><p><strong>查看分析结果</strong>：<code>nvprof</code> 会输出核函数的执行时间、内存使用情况等相关信息。通常，您可以在输出中找到有关核函数执行时间、内存传输时间、资源使用情况等方面的详细信息。该输出可以帮助您确定哪些部分的代码可能需要优化或哪些操作占用了较多的时间和资源。</p></li><li><p><strong>选择特定的分析选项</strong>：<code>nvprof</code> 还提供了许多选项，可用于指定收集的数据类型、输出格式、分析范围等。您可以根据需要使用不同的选项进行详细的分析。</p></li></ol><p>例如，您可以通过以下方式使用 <code>nvprof</code> 对示例程序进行分析：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nvprof ./your_executable<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这会收集并显示有关您的 CUDA 可执行文件的基本性能数据。您还可以使用其他选项来进行更详细的分析，例如收集内存信息、指定要分析的核函数等等。可以通过 <code>nvprof --help</code> 查看更多可用选项的详细信息。</p><p>请注意，<code>nvprof</code> 是一个强大的工具，可以帮助您深入了解 CUDA 应用程序的性能瓶颈和优化机会。</p><p>使用nvprof工具可以分析kernel运行情况，结果如下所示，可以看到kernel函数费时约1.5ms。</p><pre class="line-numbers language-text" data-language="text"><code class="language-text">nvprof cuda9.exe==7244== NVPROF is profiling process 7244, command: cuda9.exe最大误差: 4.31602e+008==7244== Profiling application: cuda9.exe==7244== Profiling result:            Type  Time(%)      Time     Calls       Avg       Min       Max  Name GPU activities:   67.57%  3.2256ms         2  1.6128ms  1.6017ms  1.6239ms  [CUDA memcpy HtoD]                   32.43%  1.5478ms         1  1.5478ms  1.5478ms  1.5478ms  add(float*, float*, float*, int)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>你调整block的大小，对比不同配置下的kernel运行情况，我这里测试的是当block为128时，kernel费时约1.6ms，而block为512时kernel费时约1.7ms，当block为64时，kernel费时约2.3ms。看来不是block越大越好，而要适当选择。</p><h2 id="统一内存管理"><a href="#统一内存管理" class="headerlink" title="统一内存管理"></a>统一内存管理</h2><p>在前面的实现中，我们需要单独在host和device上进行内存分配，并且要进行数据拷贝，这是很容易出错的。好在CUDA 6.0引入统一内存（<a href="https://link.zhihu.com/?target=http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html%23um-unified-memory-programming-hd">Unified Memory</a>）来避免这种麻烦，简单来说就是统一内存使用一个托管内存来共同管理host和device中的内存，并且自动在host和device中进行数据传输。</p><p><code>cudaMallocManaged</code>是CUDA编程中用于动态分配内存的一个函数，它为设备和主机提供统一的、可共享的内存空间。这个函数属于CUDA运行时API的一部分。</p><p>函数：</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">cudaError_t cudaMallocManaged(void **devPtr, size_t size, unsigned int flags&#x3D;0);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>参数解析：</p><ol><li><p><code>void **devPtr</code>：输出参数，指向设备内存的指针。调用成功后，<code>devPtr</code>将被设置为新分配内存区域的首地址，该内存区域可供GPU和CPU访问。</p></li><li><p><code>size_t size</code>：输入参数，要分配的内存大小（以字节为单位）。</p></li><li><p><code>unsigned int flags</code>：可选输入参数，默认值为0。可以使用此参数指定内存管理行为，例如：</p><ul><li><code>cudaMemAttachHost</code>: 表示内存应该同时对主机和设备可见，并且在需要时自动同步。</li><li><code>cudaMemAttachGlobal</code>: 与<code>cudaMemAttachHost</code>类似，但不保证内存始终驻留在主机上。</li></ul></li></ol><p>返回值：</p><ul><li><code>cudaSuccess</code>：如果成功分配了内存，则返回此状态。</li><li>其他错误代码（如<code>cudaErrorMemoryAllocation</code>等）：如果发生错误，如内存不足或其他CUDA运行时错误，则返回相应的错误代码。</li></ul><p>通过<code>cudaMallocManaged</code>分配的内存会遵循统一内存（Unified Memory）模型，使得开发者无需手动管理数据在主机和设备之间的迁移，大大简化了并行计算中的内存管理复杂度。然而，需要注意的是，尽管统一内存提供了便捷性，但在某些情况下可能会影响性能，因为它依赖于CUDA驱动程序和硬件进行透明的数据迁移。</p><p>利用统一内存，可以将前面的程序简化如下：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;math.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cuda_runtime.h></span></span>__global__ <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token operator">*</span> x<span class="token punctuation">,</span> <span class="token keyword">float</span><span class="token operator">*</span> y<span class="token punctuation">,</span> <span class="token keyword">float</span><span class="token operator">*</span> z<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> index <span class="token operator">=</span> threadIdx<span class="token punctuation">.</span>x <span class="token operator">+</span> blockIdx<span class="token punctuation">.</span>x <span class="token operator">*</span> blockDim<span class="token punctuation">.</span>x<span class="token punctuation">;</span>    <span class="token keyword">int</span> stride <span class="token operator">=</span> blockDim<span class="token punctuation">.</span>x <span class="token operator">*</span> gridDim<span class="token punctuation">.</span>x<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> index<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i <span class="token operator">+=</span> stride<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        z<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// 向量大小</span>    <span class="token keyword">int</span> nBytes <span class="token operator">=</span> n <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">float</span> <span class="token operator">*</span>z<span class="token punctuation">;</span> <span class="token comment">// 定义统一内存中的向量指针</span>    <span class="token comment">// 在统一内存中分配内存</span>    <span class="token function">cudaMallocManaged</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>z<span class="token punctuation">,</span> nBytes <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 分配统一内存大小为三倍，包括 x, y, z</span>    <span class="token keyword">float</span> <span class="token operator">*</span>x <span class="token operator">=</span> z<span class="token punctuation">;</span> <span class="token comment">// x指针指向统一内存</span>    <span class="token keyword">float</span> <span class="token operator">*</span>y <span class="token operator">=</span> x <span class="token operator">+</span> n<span class="token punctuation">;</span> <span class="token comment">// y指针指向统一内存中x的末尾</span>    <span class="token keyword">float</span> <span class="token operator">*</span>dev_z <span class="token operator">=</span> y <span class="token operator">+</span> n<span class="token punctuation">;</span> <span class="token comment">// dev_z指针指向统一内存中y的末尾</span>    <span class="token comment">// 初始化主机上的向量数据</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0f</span><span class="token punctuation">;</span>        y<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2.0f</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 定义 grid 和 block 的大小</span>    <span class="token keyword">int</span> blockSize <span class="token operator">=</span> <span class="token number">256</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> numBlocks <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">+</span> blockSize <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> blockSize<span class="token punctuation">;</span>    <span class="token comment">// 调用 kernel 函数</span>    add<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span>numBlocks<span class="token punctuation">,</span> blockSize<span class="token operator">>></span><span class="token operator">></span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> dev_z<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 同步device 保证结果能正确访问</span>    <span class="token function">cudaDeviceSynchronize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 验证结果</span>    <span class="token keyword">float</span> maxError <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        maxError <span class="token operator">=</span> <span class="token function">fmaxf</span><span class="token punctuation">(</span>maxError<span class="token punctuation">,</span> <span class="token function">fabsf</span><span class="token punctuation">(</span>dev_z<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">3.0f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"最大误差: %f\n"</span><span class="token punctuation">,</span> maxError<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 释放统一内存</span>    <span class="token function">cudaFree</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>相比之前的代码，使用统一内存更简洁了，值得注意的是kernel执行是与host异步的，由于托管内存自动进行数据传输，这里要用cudaDeviceSynchronize()函数保证device和host同步，这样后面才可以正确访问kernel计算的结果。</p><h2 id="矩阵乘法实例"><a href="#矩阵乘法实例" class="headerlink" title="矩阵乘法实例"></a>矩阵乘法实例</h2><p>最后再实现一个稍微复杂一些的例子，就是两个矩阵的乘法，设输入矩阵为 A 和 B ，要得到 C&#x3D;A×B 。实现思路是每个线程计算 C的一个元素值 C<del>i,j</del> ，对于矩阵运算，应该选用grid和block为2-D的。首先定义矩阵的结构体：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// 矩阵类型，行优先，M(row, col) = *(M.elements + row * M.width + col)</span><span class="token keyword">struct</span> <span class="token class-name">Matrix</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> width<span class="token punctuation">;</span>    <span class="token keyword">int</span> height<span class="token punctuation">;</span>    <span class="token keyword">float</span> <span class="token operator">*</span>elements<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202312232322858.png" alt="矩阵乘法" style="zoom: 67%;" /><p>然后实现矩阵乘法的核函数，这里定义了两个辅助的<code>__device__</code>函数分别用于获取矩阵的元素值和为矩阵元素赋值，具体代码如下：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// 获取矩阵A的(row, col)元素</span>__device__ <span class="token keyword">float</span> <span class="token function">getElement</span><span class="token punctuation">(</span><span class="token keyword">const</span> Matrix<span class="token operator">*</span> A<span class="token punctuation">,</span> <span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> col<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> A<span class="token operator">-></span>elements<span class="token punctuation">[</span>row <span class="token operator">*</span> A<span class="token operator">-></span>width <span class="token operator">+</span> col<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 为矩阵A的(row, col)元素赋值</span>__device__ <span class="token keyword">void</span> <span class="token function">setElement</span><span class="token punctuation">(</span>Matrix<span class="token operator">*</span> A<span class="token punctuation">,</span> <span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> col<span class="token punctuation">,</span> <span class="token keyword">float</span> value<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    A<span class="token operator">-></span>elements<span class="token punctuation">[</span>row <span class="token operator">*</span> A<span class="token operator">-></span>width <span class="token operator">+</span> col<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 矩阵相乘kernel，2-D，每个线程计算一个元素</span>__global__ <span class="token keyword">void</span> <span class="token function">matMulKernel</span><span class="token punctuation">(</span><span class="token keyword">const</span> Matrix<span class="token operator">*</span> A<span class="token punctuation">,</span> <span class="token keyword">const</span> Matrix<span class="token operator">*</span> B<span class="token punctuation">,</span> Matrix<span class="token operator">*</span> C<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">float</span> Cvalue <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> row <span class="token operator">=</span> threadIdx<span class="token punctuation">.</span>y <span class="token operator">+</span> blockIdx<span class="token punctuation">.</span>y <span class="token operator">*</span> blockDim<span class="token punctuation">.</span>y<span class="token punctuation">;</span>    <span class="token keyword">int</span> col <span class="token operator">=</span> threadIdx<span class="token punctuation">.</span>x <span class="token operator">+</span> blockIdx<span class="token punctuation">.</span>x <span class="token operator">*</span> blockDim<span class="token punctuation">.</span>x<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> A<span class="token operator">-></span>width<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        Cvalue <span class="token operator">+=</span> <span class="token function">getElement</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> row<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">getElement</span><span class="token punctuation">(</span>B<span class="token punctuation">,</span> i<span class="token punctuation">,</span> col<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">setElement</span><span class="token punctuation">(</span>C<span class="token punctuation">,</span> row<span class="token punctuation">,</span> col<span class="token punctuation">,</span> Cvalue<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>最后采用统一内存编写矩阵相乘的测试实例：</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> width <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> height <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span>    Matrix <span class="token operator">*</span>A<span class="token punctuation">,</span> <span class="token operator">*</span>B<span class="token punctuation">,</span> <span class="token operator">*</span>C<span class="token punctuation">;</span>    <span class="token comment">// 申请托管内存</span>    <span class="token function">cudaMallocManaged</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>A<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>Matrix<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">cudaMallocManaged</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>B<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>Matrix<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">cudaMallocManaged</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>C<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>Matrix<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> nBytes <span class="token operator">=</span> width <span class="token operator">*</span> height <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">cudaMallocManaged</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>A<span class="token operator">-></span>elements<span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">cudaMallocManaged</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>B<span class="token operator">-></span>elements<span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">cudaMallocManaged</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>C<span class="token operator">-></span>elements<span class="token punctuation">,</span> nBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 初始化数据</span>    A<span class="token operator">-></span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>    A<span class="token operator">-></span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>    B<span class="token operator">-></span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>    B<span class="token operator">-></span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>    C<span class="token operator">-></span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>    C<span class="token operator">-></span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> width <span class="token operator">*</span> height<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        A<span class="token operator">-></span>elements<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>        B<span class="token operator">-></span>elements<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2.0</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 定义kernel的执行配置</span>    dim3 <span class="token function">blockSize</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    dim3 <span class="token function">gridSize</span><span class="token punctuation">(</span><span class="token punctuation">(</span>width <span class="token operator">+</span> blockSize<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> blockSize<span class="token punctuation">.</span>x<span class="token punctuation">,</span>         <span class="token punctuation">(</span>height <span class="token operator">+</span> blockSize<span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> blockSize<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 执行kernel</span>    matMulKernel <span class="token operator">&lt;&lt;</span> <span class="token operator">&lt;</span> gridSize<span class="token punctuation">,</span> blockSize <span class="token operator">>></span> <span class="token operator">></span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B<span class="token punctuation">,</span> C<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 同步device 保证结果能正确访问</span>    <span class="token function">cudaDeviceSynchronize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 检查执行结果</span>    <span class="token keyword">float</span> maxError <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> width <span class="token operator">*</span> height<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        maxError <span class="token operator">=</span> <span class="token function">fmax</span><span class="token punctuation">(</span>maxError<span class="token punctuation">,</span> <span class="token function">fabs</span><span class="token punctuation">(</span>C<span class="token operator">-></span>elements<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> width<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"最大误差: "</span> <span class="token operator">&lt;&lt;</span> maxError <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里矩阵大小为1024，设计的线程的block大小为(32, 32)，那么grid大小为(32, 32)，最终测试结果如下：</p><pre class="line-numbers language-text" data-language="text"><code class="language-text">nvprof cuda9.exe==16304== NVPROF is profiling process 16304, command: cuda9.exe最大误差: 0==16304== Profiling application: cuda9.exe==16304== Profiling result:            Type  Time(%)      Time     Calls       Avg       Min       Max  Name GPU activities:  100.00%  1.32752s         1  1.32752s  1.32752s  1.32752s  matMulKernel(Matrix*, Matrix*, Matrix*)      API calls:   83.11%  1.32762s         1  1.32762s  1.32762s  1.32762s  cudaDeviceSynchronize                   13.99%  223.40ms         6  37.233ms  37.341us  217.66ms  cudaMallocManaged                    2.81%  44.810ms         1  44.810ms  44.810ms  44.810ms  cudaLaunch                    0.08%  1.3300ms        94  14.149us       0ns  884.64us  cuDeviceGetAttribute                    0.01%  199.03us         1  199.03us  199.03us  199.03us  cuDeviceGetName                    0.00%  10.009us         1  10.009us  10.009us  10.009us  cuDeviceTotalMem                    0.00%  6.5440us         1  6.5440us  6.5440us  6.5440us  cudaConfigureCall                    0.00%  3.0800us         3  1.0260us     385ns  1.5400us  cudaSetupArgument                    0.00%  2.6940us         3     898ns     385ns  1.5390us  cuDeviceGetCount                    0.00%  1.9250us         2     962ns     385ns  1.5400us  cuDeviceGet==16304== Unified Memory profiling result:Device "GeForce GT 730 (0)"   Count  Avg Size  Min Size  Max Size  Total Size  Total Time  Name    2051  4.0000KB  4.0000KB  4.0000KB  8.011719MB  21.20721ms  Host To Device     270  45.570KB  4.0000KB  1.0000MB  12.01563MB  7.032508ms  Device To Host<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>CUDA编程入门相对简单，通过掌握基本的线程管理和内存操作，可以快速实现并行计算的基本应用。然而，随着问题复杂度的提升，深入CUDA领域则需面对更多挑战：例如动态并行性管理、流式多处理器的细粒度同步控制、全局内存与共享内存的有效利用（包括bank冲突处理）、纹理和常量内存优化、以及先进的并行算法设计如归约、扫瞄等。此外，针对现代GPU架构的特性进行性能调优，理解并解决内存层次结构带来的瓶颈，亦是深入CUDA技术栈的重要环节。只有不断钻研这些高级技术和最佳实践，才能在大规模并行计算中发挥出CUDA的真正威力，实现从“入门”到“精通”的跨越。</p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://zhuanlan.zhihu.com/p/34587739">CUDA编程入门极简教程 - 知乎 (zhihu.com)</a></p><p><a href="https://blog.csdn.net/TracelessLe/article/details/110880135">https://blog.csdn.net/TracelessLe/article/details/110880135</a></p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cuda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>今日诗句-祝福前程</title>
      <link href="/posts/f97.html"/>
      <url>/posts/f97.html</url>
      
        <content type="html"><![CDATA[<h2 id="祝福前程"><a href="#祝福前程" class="headerlink" title="祝福前程"></a>祝福前程</h2><div class="ipage">   <div class="ititle">祝福前程</div>    <div class="izhengwen">      <p>        明年此日青云去，却笑人间举子忙 ——辛弃疾《鹧鸪天·送廓之秋试》<br>        莫愁前路无知己，天下谁人不识君 ——高适《别董大》<br>        天下谁非健者，我辈终为奇土 ——张翥《水调歌头·三十九年我》<br>        前程路险莫蹉跎 ——元姬翼《临江·岁月无情如电转》<br>        乘风破浪会有时，直挂云帆济沧海 ——李白《行路难》<br>        才子词人，自是白衣卿相 ——柳永《鹤冲天》<br>        大鹏一日同风起，扶摇直上九万里 ——李白《上李邕》<br>        春风得意马蹄疾，一日看尽长安花 ——孟郊《登科后》<br>        希君生羽翼，一化北溟鱼 ——李白《江夏使君叔席上赠史郎中》<br>         鹰击天风壮，鹏飞海浪春 ——司马光《之美举进士寓京师范此诗寄之》<br>         愿祝君如此山水，滔滔岌岌风云起 ——冯时行《遗夔门故书》<br>           </p>    </div> </div><p>​      </p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 诗词 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Font Awesome Animation</title>
      <link href="/posts/d422.html"/>
      <url>/posts/d422.html</url>
      
        <content type="html"><![CDATA[<p><strong>Font Awesome动画使用指南</strong></p><p><strong>简介</strong><br>Font Awesome Animation 是一个简单利用 CSS3 动画效果增强 Font Awesome 图标展示的工具，适用于网页中的各种图标动画效果。</p><p><strong>开始使用</strong></p><ol><li><p><strong>安装</strong></p><ul><li><strong>通过NPM安装：</strong><pre class="line-numbers language-none"><code class="language-none">npm install font-awesome-animation<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><strong>或使用CDN链接：</strong><pre class="line-numbers language-none"><code class="language-none">&lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;https:&#x2F;&#x2F;www.jsdelivr.com&#x2F;package&#x2F;npm&#x2F;font-awesome-animation&quot;&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>确保将此链接添加到你的 <code>index.html</code> 文件中。</li></ul></li><li><p><strong>引入CSS文件</strong><br>在你的HTML文件头部加入以下代码引用CSS样式：</p><pre class="line-numbers language-none"><code class="language-none">&lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;font-awesome-animation.min.css&quot;&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p><strong>基本用法</strong></p><ul><li><strong>页面加载时动画：</strong><br>为图标元素添加 <code>faa-xxx</code>（其中 <code>xxx</code> 是具体动画名）和 <code>animated</code> 类：<pre class="line-numbers language-none"><code class="language-none">&lt;i class&#x3D;&quot;fa fa-wrench faa-wrench animated&quot;&gt;&lt;&#x2F;i&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><strong>鼠标悬停时动画：</strong><br>将 <code>animated</code> 替换为 <code>animated-hover</code>：<pre class="line-numbers language-none"><code class="language-none">&lt;i class&#x3D;&quot;fa fa-wrench faa-wrench animated-hover&quot;&gt;&lt;&#x2F;i&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><strong>父元素悬停时动画：</strong><br>在父元素上添加 <code>faa-parent</code> 和 <code>animated-hover</code> 类：<pre class="line-numbers language-none"><code class="language-none">&lt;a href&#x3D;&quot;#&quot; class&#x3D;&quot;faa-parent animated-hover&quot;&gt;  &lt;i class&#x3D;&quot;fa fa-wrench faa-wrench&quot; style&#x3D;&quot;font-size: 3em;&quot;&gt;&lt;&#x2F;i&gt; 鼠标悬停此处&lt;&#x2F;a&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul></li><li><p><strong>动画速度控制</strong><br>添加 <code>faa-fast</code> 或 <code>faa-slow</code> 类来调整动画速度：</p><pre class="line-numbers language-none"><code class="language-none">&lt;i class&#x3D;&quot;fa fa-wrench faa-wrench animated faa-fast&quot;&gt;&lt;&#x2F;i&gt; &lt;!-- 快速 --&gt;&lt;i class&#x3D;&quot;fa fa-wrench faa-wrench animated faa-slow&quot;&gt;&lt;&#x2F;i&gt; &lt;!-- 缓慢 --&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p><strong>查看动画列表</strong><br>访问项目GitHub页面预览所有动画效果。</p></li></ol><p><strong>开发与构建</strong></p><ul><li><p><strong>构建步骤</strong></p><ol><li>安装依赖：<pre class="line-numbers language-none"><code class="language-none">npm install<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>生成前缀和压缩CSS文件：<pre class="line-numbers language-none"><code class="language-none">npm run build<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol></li><li><p><strong>本地预览</strong><br>可以使用 <code>http-server</code> 或 Markdown 预览工具在本地测试。</p></li><li><p><strong>发布新版本</strong><br>使用npm命令创建新版本并推送到远程仓库，然后手动在GitHub发布页面创建新版本。有自动工作流负责发布到NPM仓库。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 今日学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 图标动画 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>优化分类页面</title>
      <link href="/posts/8bc.html"/>
      <url>/posts/8bc.html</url>
      
        <content type="html"><![CDATA[<h1 id="优化分类页面"><a href="#优化分类页面" class="headerlink" title="优化分类页面"></a>优化分类页面</h1><p>删除多余样式</p><p>添加样式</p><p>neko</p><p>修复分类卡片蒙板</p><p>优化分类雷达</p><p>参考：</p><p><a href="https://blog.17lai.site/categories/">分类 | 夜法之书 (17lai.site)</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 分类页面 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>修改友链卡片</title>
      <link href="/posts/f5c1.html"/>
      <url>/posts/f5c1.html</url>
      
        <content type="html"><![CDATA[<h1 id="修改友链卡片"><a href="#修改友链卡片" class="headerlink" title="修改友链卡片"></a>修改友链卡片</h1><p>之前是在matery默认的友链卡片上添加了鼠标悬浮时头像旋转，虽然效果不错，但是</p><p><img src="https://s2.loli.net/2024/06/11/J5OjRwDgnN6bfIV.gif" alt="友链悬浮旋转"></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 友链 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>添加行星特效</title>
      <link href="/posts/b04a.html"/>
      <url>/posts/b04a.html</url>
      
        <content type="html"><![CDATA[<h1 id="添加行星特效"><a href="#添加行星特效" class="headerlink" title="添加行星特效"></a>添加行星特效</h1><p>前几天在网上看到一个很好看的行星动画特效。于是就想着把它加入到自己的网站里，虽然会影响网站性能，但是对这种真的没有抵抗力！</p><h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202404291955038.gif" alt="日日夜夜自转的行星"></p><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><p>源码：<a href="https://nowjava.com/download/19419">html5 canvas绘制陨石围绕天体运动的动画特效源码 -HTML代码下载 -时代Java，与您同行！ (nowjava.com)</a></p><p>解压后的文件夹中应该包括：</p><ul><li>css文件夹，里面有1个css文件</li><li>js文件夹，里面有8个js文件</li><li>1个index.html文件</li><li>1个说明文件</li></ul><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><ol><li><p>找到matery下的配置文件<code>config.yml</code>，找到menu属性，添加页面名称和图标。这里是我的配置</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">name</span><span class="token punctuation">:</span> 碎星海<span class="token key atrule">url</span><span class="token punctuation">:</span> /asteroids<span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>meteor<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>在<code>themes\matery\layout</code>下新建<code>asteroids.ejs</code>，粘入上面提到的index.html代码</p></li><li><p>在<code>themes\matery\source\css</code>下新建<code>asteroids.css</code>，粘入上面的css代码</p></li><li><p>在<code>themes\matery\source\js</code>下新建<code>asteroids</code>文件夹，将上面的8个js文件夹放到该文件夹中</p></li></ol><p><strong>注意</strong>：</p><ol><li><p>需要根据自己的代码存放位置手动修改<code>index.html</code>代码中的路径</p></li><li><p>可能会出现页面渲染阻塞的情况，博主使用原代码，推送到网站后，就出现了动画效果卡顿的情况，这时候可以通过使用 <code>defer</code> 或 <code>async</code> 属性来实现异步加载，确保脚本不会阻塞页面的渲染。</p><p>这里记录一下代码的优化过程（已弃用，点击跳转到<a href="#%E6%9B%B4%E6%96%B0">最新解决方法</a>）<a href="#%E6%9B%B4%E6%96%B0">最新解决方法</a></p><ol><li><p>使用原代码（页面渲染阻塞）</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>乱石穿空<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/css/asteroids.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/js/asteroids/three.min.js<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/js/asteroids/CopyShader.js<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/js/asteroids/EffectComposer.js<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/js/asteroids/FilmPass.js<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/js/asteroids/FilmShader.js<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/js/asteroids/ShaderPass.js<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/js/asteroids/RenderPass.js<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/js/asteroids/index.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>使用 <code>defer</code> 属性实现异步加载，确保脚本将在文档解析完毕后异步加载，并在文档完成解析后立即执行。这样可以确保页面加载不会被脚本的加载和执行所阻塞。之前一直以为是代码和原博客里的代码产生冲突，一直没能解决，成了萦绕在心头的一大问题，今日终于成功解决！ヾ(≧▽≦*)o</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>乱石穿空<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/css/asteroids.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/js/asteroids/three.min.js<span class="token punctuation">'</span></span> <span class="token attr-name">defer</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/js/asteroids/CopyShader.js<span class="token punctuation">'</span></span> <span class="token attr-name">defer</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/js/asteroids/EffectComposer.js<span class="token punctuation">'</span></span> <span class="token attr-name">defer</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/js/asteroids/FilmPass.js<span class="token punctuation">'</span></span> <span class="token attr-name">defer</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/js/asteroids/FilmShader.js<span class="token punctuation">'</span></span> <span class="token attr-name">defer</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/js/asteroids/ShaderPass.js<span class="token punctuation">'</span></span> <span class="token attr-name">defer</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/js/asteroids/RenderPass.js<span class="token punctuation">'</span></span> <span class="token attr-name">defer</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/js/asteroids/index.js<span class="token punctuation">"</span></span> <span class="token attr-name">defer</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>感觉代码看起来有些冗杂，修改了一下，看起来更专业了😎</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>乱石穿空<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/css/asteroids.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token string">"/js/asteroids/"</span><span class="token punctuation">;</span>            <span class="token keyword">const</span> scripts <span class="token operator">=</span> <span class="token punctuation">[</span>                <span class="token string">'three.min.js'</span><span class="token punctuation">,</span>                <span class="token string">'CopyShader.js'</span><span class="token punctuation">,</span>                <span class="token string">'EffectComposer.js'</span><span class="token punctuation">,</span>                <span class="token string">'FilmPass.js'</span><span class="token punctuation">,</span>                <span class="token string">'FilmShader.js'</span><span class="token punctuation">,</span>                <span class="token string">'ShaderPass.js'</span><span class="token punctuation">,</span>                <span class="token string">'RenderPass.js'</span><span class="token punctuation">,</span>                <span class="token string">'index.js'</span>            <span class="token punctuation">]</span><span class="token punctuation">;</span>            scripts<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">script</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>                <span class="token keyword">const</span> scriptTag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                scriptTag<span class="token punctuation">.</span>src <span class="token operator">=</span> path <span class="token operator">+</span> script<span class="token punctuation">;</span>                scriptTag<span class="token punctuation">.</span>defer <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>scriptTag<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol></li></ol><h2 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h2><p><span id="更新"></span></p><h3 id="链式加载"><a href="#链式加载" class="headerlink" title="链式加载"></a>链式加载</h3><p>最近发现行星页面变黑了，刷新了几次又好了，时灵时不灵。打开控制台发现如下报错</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/THREE%E6%9C%AA%E5%AE%9A%E4%B9%89.png" alt="报错"></p><p>因为数组中其他js代码都是依赖于<code>Three.js</code>的，所以需要把<code>Three.js</code>在其他js代码文件之前加载。因为前面使用异步加载，所以我猜想可能是异步加载的顺序问题引发了这个问题。</p><p>尽管使用了<code>defer</code>属性，这意味着脚本会在文档解析完成后，DOMContentLoaded事件触发之前执行，但由于它们是并行加载的，所以并不能保证它们按照数组中的顺序执行完毕。</p><p>为了强制执行脚本的加载顺序，决定采取一种链式加载的方法，即只有当一个脚本加载并执行完成后，才开始加载下一个脚本。</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">        <span class="token keyword">function</span> <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">>=</span> scripts<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// 所有脚本加载完毕</span>            <span class="token keyword">const</span> scriptTag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            scriptTag<span class="token punctuation">.</span>src <span class="token operator">=</span> path <span class="token operator">+</span> scripts<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>            scriptTag<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// 当前脚本加载并执行完毕后，加载下一个脚本</span>                <span class="token function">loadScript</span><span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>            scriptTag<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Failed to load script </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>scripts<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>scriptTag<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token string">"/js/asteroids/"</span><span class="token punctuation">;</span>        <span class="token keyword">const</span> scripts <span class="token operator">=</span> <span class="token punctuation">[</span>            <span class="token string">'three.min.js'</span><span class="token punctuation">,</span>            <span class="token string">'CopyShader.js'</span><span class="token punctuation">,</span>            <span class="token string">'EffectComposer.js'</span><span class="token punctuation">,</span>            <span class="token string">'FilmPass.js'</span><span class="token punctuation">,</span>            <span class="token string">'FilmShader.js'</span><span class="token punctuation">,</span>            <span class="token string">'ShaderPass.js'</span><span class="token punctuation">,</span>            <span class="token string">'RenderPass.js'</span><span class="token punctuation">,</span>            <span class="token string">'index.js'</span>        <span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment">// 开始加载脚本</span>        <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>修改完后再次打开控制台，可以看到相关问题已经消失了，并且动画正常显示。YEAH!(～￣▽￣)～</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/%E9%93%BE%E5%BC%8F%E5%8A%A0%E8%BD%BD.png" alt="链式加载"></p><h3 id="适配小屏"><a href="#适配小屏" class="headerlink" title="适配小屏"></a>适配小屏</h3><p>突然发现行星动画没有适配小屏幕，导致在小屏幕上出现这种情况</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/%E6%9C%AA%E9%80%82%E9%85%8D%E5%B0%8F%E5%B1%8F.png" alt="未适配小屏"></p><p>修改样式的css代码</p><p>原样式代码</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">*</span> <span class="token punctuation">&#123;</span>  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">outline</span><span class="token punctuation">:</span> 0<span class="token punctuation">&#125;</span><span class="token selector">body,html</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">&#125;</span><span class="token selector">#container</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>添加响应式布局，以适应不同的屏幕尺寸</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* 基础样式 */</span><span class="token selector">*</span> <span class="token punctuation">&#123;</span>  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">outline</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">html,body</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">#container</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 小屏幕（移动设备）的样式 */</span><span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 600px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>  <span class="token selector">#container</span> <span class="token punctuation">&#123;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 中等屏幕（平板设备）的样式 */</span><span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 601px<span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 992px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>  <span class="token selector">#container</span> <span class="token punctuation">&#123;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 大屏幕（桌面设备）的样式 */</span><span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 993px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>  <span class="token selector">#container</span> <span class="token punctuation">&#123;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>修改后正常显示(≧∇≦)ﾉ</p><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/%E9%80%82%E9%85%8D%E5%B0%8F%E5%B1%8F.png" alt="适配小屏"></p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>当浏览器解析 HTML 文档时，遇到 <code>&lt;script&gt;</code> 标签时，它会停止解析文档并立即下载并执行脚本。在这个过程中，浏览器的渲染也会被阻塞，直到脚本加载和执行完成。这可能会导致页面加载速度变慢，特别是当页面中有多个脚本需要加载时。</p><p>为了解决这个问题，HTML5 引入了 <code>defer</code> 和 <code>async</code> 属性，这两个属性都是用来控制脚本的加载和执行方式的。</p><h3 id="defer-属性"><a href="#defer-属性" class="headerlink" title="defer 属性"></a>defer 属性</h3><p><code>defer</code> 属性告诉浏览器立即下载脚本文件，但延迟执行脚本，直到文档解析完成后再执行。具体来说：</p><ul><li>延迟执行脚本，意味着脚本会在文档解析完成后按照它们在文档中出现的顺序执行。</li><li>多个带有 defer 属性的脚本会按照它们在文档中的顺序顺序执行。</li><li>脚本会在 <code>DOMContentLoaded</code> 事件之前执行，确保它们在文档的其他内容加载之前执行。</li></ul><h3 id="async-属性"><a href="#async-属性" class="headerlink" title="async 属性"></a>async 属性</h3><p><code>async</code> 属性告诉浏览器立即下载脚本文件，并且异步执行脚本，不会阻止文档的解析。具体来说：</p><ul><li>异步执行脚本，意味着脚本会在下载完成后尽快执行，不会等待其他脚本或文档解析完成。</li><li>多个带有 async 属性的脚本的执行顺序是不确定的，谁先下载完成就会先执行谁。</li><li>脚本的执行可能在文档的其他内容加载之前或之后。</li></ul><h3 id="选择-defer-还是-async？"><a href="#选择-defer-还是-async？" class="headerlink" title="选择 defer 还是 async？"></a>选择 defer 还是 async？</h3><ul><li>如果脚本之间的执行顺序很重要，并且你希望它们在文档解析完成后按顺序执行，那么应该使用 defer 属性。</li><li>如果脚本之间的执行顺序不重要，并且你希望尽快执行脚本，不阻塞页面的渲染，那么可以使用 async 属性。</li><li>如果你有多个脚本需要异步加载，并且它们之间没有依赖关系，那么可以考虑使用 async 属性以提高页面加载性能。</li></ul><p>总之，defer 属性适用于需要保持脚本执行顺序的情况，而 async 属性适用于无序的异步加载脚本。</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 行星特效 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gmail分身</title>
      <link href="/posts/ae7f.html"/>
      <url>/posts/ae7f.html</url>
      
        <content type="html"><![CDATA[<p>今天要分享的一个方法，前面的邮箱跟原邮箱唯一的区别就是后面多了个<code>+c1</code>。我们只需要在原邮箱后面使用一个 <code>+</code> 号连接一个字符串 <code>c1</code>，后缀不变，你就有了一个新邮箱，使用该方法，你就可以开启分身大法了：</p><blockquote><p>原邮箱：t……<a href="mailto:&#x64;&#x40;&#103;&#x6d;&#x61;&#x69;&#x6c;&#46;&#99;&#x6f;&#x6d;">&#x64;&#x40;&#103;&#x6d;&#x61;&#x69;&#x6c;&#46;&#99;&#x6f;&#x6d;</a><br>新邮箱一：t……<a href="mailto:&#x64;&#43;&#x63;&#x31;&#x40;&#x67;&#x6d;&#97;&#105;&#108;&#46;&#x63;&#x6f;&#109;">&#x64;&#43;&#x63;&#x31;&#x40;&#x67;&#x6d;&#97;&#105;&#108;&#46;&#x63;&#x6f;&#109;</a><br>新邮箱二：t……<a href="mailto:&#x64;&#x2b;&#99;&#x32;&#x40;&#103;&#x6d;&#97;&#x69;&#x6c;&#46;&#99;&#111;&#x6d;">&#x64;&#x2b;&#99;&#x32;&#x40;&#103;&#x6d;&#97;&#x69;&#x6c;&#46;&#99;&#111;&#x6d;</a></p></blockquote><p>原理是因为在 Gmail 的邮件地址里，<code>+</code> 号是一个特殊符号，地址中的 <code>+</code> 以及加号后面的部分，会被过滤掉。其实还有一个特殊符号 <code>.</code> 也是一样的，但是不太好用实用价值不大，这里就不详细介绍了。利用这个原理，我们需要注册某个平台的多个几账号时就可以非常方便的完成(例如某 GPT)。这比市面上很多所谓的临时邮箱或者邮箱分身用起来可安全可靠太多了，并且非常方便，在一个邮箱里面就能收到所有的邮件。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Gmail </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>123云盘资源</title>
      <link href="/posts/5d4b.html"/>
      <url>/posts/5d4b.html</url>
      
        <content type="html"><![CDATA[<p>Adobe全家桶：<a href="https://www.123pan.com/s/yS8UVv-NkFed.html">https://www.123pan.com/s/yS8UVv-NkFed.html</a> 提取码:6666</p><p>AutoCAD：<a href="https://www.123pan.com/s/yS8UVv-2kFed.html">https://www.123pan.com/s/yS8UVv-2kFed.html</a> 提取码:6666</p><p>专业软件：<a href="https://www.123pan.com/s/yS8UVv-rkFed.html">https://www.123pan.com/s/yS8UVv-rkFed.html</a> 提取码:6666</p><p>Unity：<a href="https://www.123pan.com/s/yS8UVv-skFed.html">https://www.123pan.com/s/yS8UVv-skFed.html</a> 提取码:6666</p><p>达芬奇：<a href="https://www.123pan.com/s/yS8UVv-WkFed.html">https://www.123pan.com/s/yS8UVv-WkFed.html</a> 提取码:6666</p><p>建模类：<a href="https://www.123pan.com/s/yS8UVv-CkFed.html">https://www.123pan.com/s/yS8UVv-CkFed.html</a> 提取码:6666</p><p>VMWare虚拟机：<a href="https://www.123pan.com/s/yS8UVv-OkFed.html">https://www.123pan.com/s/yS8UVv-OkFed.html</a> 提取码:6666</p><p>编程工具：<a href="https://www.123pan.com/s/yS8UVv-RkFed.html">https://www.123pan.com/s/yS8UVv-RkFed.html</a> 提取码:6666</p><p>电脑工具：<a href="https://www.123pan.com/s/yS8UVv-DkFed.html">https://www.123pan.com/s/yS8UVv-DkFed.html</a> 提取码:6666</p><p>下载工具：<a href="https://www.123pan.com/s/yS8UVv-nkFed.html">https://www.123pan.com/s/yS8UVv-nkFed.html</a> 提取码:6666</p><p>PS2024(Beta)_25.1总索引：<a href="https://www.123pan.com/s/yS8UVv-VcFed.html">https://www.123pan.com/s/yS8UVv-VcFed.html</a> 提取码:6666【含win+mac】</p><p>Adobe全家桶总索引：<a href="https://www.123pan.com/s/yS8UVv-HiFed.html">https://www.123pan.com/s/yS8UVv-HiFed.html</a> 提取码:6666【含大师版和SP版，win+mac】</p><p>PS：Adobe全家桶如果有解压密码，密码就是@vposy</p><p>【备用：Adobe全家桶：<a href="https://www.123pan.com/s/yS8UVv-hiFed.html">https://www.123pan.com/s/yS8UVv-hiFed.html</a> 提取码:6666】</p><p>音乐软件总索引：<a href="https://www.123pan.com/s/yS8UVv-u7Fed.html">https://www.123pan.com/s/yS8UVv-u7Fed.html</a> 提取码:6666【含win+mac】</p><p>Win_Al系列软件总索引：<a href="https://www.123pan.com/s/yS8UVv-h7Fed.html">https://www.123pan.com/s/yS8UVv-h7Fed.html</a> 提取码:6666【包含HitPaw全家桶，Topaz全家桶】</p><p>Mac_Al系列软件总索引：<a href="https://www.123pan.com/s/yS8UVv-niFed.html">https://www.123pan.com/s/yS8UVv-niFed.html</a> 提取码:6666【包含HitPaw全家桶，Topaz全家桶】</p><p>远程桌面RayLink官网<a href="https://www.raylink.live/">https://www.raylink.live/</a></p><p>Mac2024：<a href="https://www.123pan.com/s/yS8UVv-uIYed.html%E3%80%90">https://www.123pan.com/s/yS8UVv-uIYed.html【</a> 提取码:6666】</p><p>Win2024：<a href="https://www.123pan.com/s/yS8UVv-rIYed.html%E3%80%90">https://www.123pan.com/s/yS8UVv-rIYed.html【</a> 提取码:6666】</p><p>更多monkrus资源：<a href="https://www.123pan.com/s/yS8UVv-8IYed.html%E3%80%90">https://www.123pan.com/s/yS8UVv-8IYed.html【</a> 提取码:6666】</p><p>👉Adobe全家桶所有🐬：<a href="https://www.123pan.com/s/yS8UVv-hiFed.html%E3%80%90">https://www.123pan.com/s/yS8UVv-hiFed.html【</a> 提取码:6666】</p><p>Adobe全家桶：</p><p>【建议去总文件夹】：<a href="https://www.123pan.com/s/yS8UVv-NkFed.html">https://www.123pan.com/s/yS8UVv-NkFed.html</a> 提取码:6666</p><p>PS：<a href="https://www.123pan.com/s/yS8UVv-bkFed.html">https://www.123pan.com/s/yS8UVv-bkFed.html</a> 提取码:6666</p><p>PR：<a href="https://www.123pan.com/s/yS8UVv-ZkFed.html">https://www.123pan.com/s/yS8UVv-ZkFed.html</a> 提取码:6666</p><p>AE：<a href="https://www.123pan.com/s/yS8UVv-ckFed.html">https://www.123pan.com/s/yS8UVv-ckFed.html</a> 提取码:6666</p><p>Ai：<a href="https://www.123pan.com/s/yS8UVv-ekFed.html">https://www.123pan.com/s/yS8UVv-ekFed.html</a> 提取码:6666</p><p>ME：<a href="https://www.123pan.com/s/yS8UVv-tkFed.html">https://www.123pan.com/s/yS8UVv-tkFed.html</a> 提取码:6666</p><p>AU：<a href="https://www.123pan.com/s/yS8UVv-ikFed.html">https://www.123pan.com/s/yS8UVv-ikFed.html</a> 提取码:6666</p><p>An：<a href="https://www.123pan.com/s/yS8UVv-zkFed.html">https://www.123pan.com/s/yS8UVv-zkFed.html</a> 提取码:6666</p><p>AdobeAcrobat：<a href="https://www.123pan.com/s/yS8UVv-LkFed.html">https://www.123pan.com/s/yS8UVv-LkFed.html</a> 提取码:6666</p><p>AdobeBridge：<a href="https://www.123pan.com/s/yS8UVv-5kFed.html">https://www.123pan.com/s/yS8UVv-5kFed.html</a> 提取码:6666</p><p>AdobeDimension：<a href="https://www.123pan.com/s/yS8UVv-qkFed.html">https://www.123pan.com/s/yS8UVv-qkFed.html</a> 提取码:6666</p><p>AdobeDreamweaver：<a href="https://www.123pan.com/s/yS8UVv-6kFed.html">https://www.123pan.com/s/yS8UVv-6kFed.html</a> 提取码:6666</p><p>AdobeFlash：<a href="https://www.123pan.com/s/yS8UVv-ykFed.html">https://www.123pan.com/s/yS8UVv-ykFed.html</a> 提取码:6666</p><p>AdobeFrameMaker：<a href="https://www.123pan.com/s/yS8UVv-VkFed.html">https://www.123pan.com/s/yS8UVv-VkFed.html</a> 提取码:6666</p><p>AdobeInCopy：<a href="https://www.123pan.com/s/yS8UVv-jkFed.html">https://www.123pan.com/s/yS8UVv-jkFed.html</a> 提取码:6666</p><p>AdobeInDesign：<a href="https://www.123pan.com/s/yS8UVv-ToFed.html">https://www.123pan.com/s/yS8UVv-ToFed.html</a> 提取码:6666</p><p>AdobePrelude：<a href="https://www.123pan.com/s/yS8UVv-voFed.html">https://www.123pan.com/s/yS8UVv-voFed.html</a> 提取码:6666</p><p>CharacterAnimator：<a href="https://www.123pan.com/s/yS8UVv-doFed.html">https://www.123pan.com/s/yS8UVv-doFed.html</a> 提取码:6666</p><p>ExperienceDesign：<a href="https://www.123pan.com/s/yS8UVv-3oFed.html">https://www.123pan.com/s/yS8UVv-3oFed.html</a> 提取码:6666</p><p>LightroomClassic：<a href="https://www.123pan.com/s/yS8UVv-hoFed.html">https://www.123pan.com/s/yS8UVv-hoFed.html</a> 提取码:6666</p><p>PhotoshopElements：<a href="https://www.123pan.com/s/yS8UVv-HoFed.html">https://www.123pan.com/s/yS8UVv-HoFed.html</a> 提取码:6666</p><p>PremiereElements：<a href="https://www.123pan.com/s/yS8UVv-AoFed.html">https://www.123pan.com/s/yS8UVv-AoFed.html</a> 提取码:6666</p><p>PremiereRush：<a href="https://www.123pan.com/s/yS8UVv-9oFed.html">https://www.123pan.com/s/yS8UVv-9oFed.html</a> 提取码:6666</p><p>Substance3DDesignater：<a href="https://www.123pan.com/s/yS8UVv-QoFed.html">https://www.123pan.com/s/yS8UVv-QoFed.html</a> 提取码:6666</p><p>VMWare虚拟机：<a href="https://www.123pan.com/s/yS8UVv-OkFed.html">https://www.123pan.com/s/yS8UVv-OkFed.html</a> 提取码:6666</p><p>包含：16，17部分版本</p><p>VisualStudioCode(官网链接)：<a href="https://www.123pan.com/s/yS8UVv-EoFed.html">https://www.123pan.com/s/yS8UVv-EoFed.html</a> 提取码:6666</p><p>VisualStudio：<a href="https://www.123pan.com/s/yS8UVv-koFed.html">https://www.123pan.com/s/yS8UVv-koFed.html</a> 提取码:6666</p><p>包含：一些社区版，专业版，企业版</p><p>JetBrains家族：<a href="https://www.123pan.com/s/yS8UVv-ooFed.html">https://www.123pan.com/s/yS8UVv-ooFed.html</a> 提取码:6666</p><p>包含：IntelliJIDEA，JetBrainsWebStorm，PyCharm</p><p>IntelliJIDEA：<a href="https://www.123pan.com/s/yS8UVv-moFed.html">https://www.123pan.com/s/yS8UVv-moFed.html</a> 提取码:6666</p><p>JetBrainsWebStorm：<a href="https://www.123pan.com/s/yS8UVv-1oFed.html">https://www.123pan.com/s/yS8UVv-1oFed.html</a> 提取码:6666</p><p>PyCharm：<a href="https://www.123pan.com/s/yS8UVv-4oFed.html">https://www.123pan.com/s/yS8UVv-4oFed.html</a> 提取码:6666</p><p>Android：<a href="https://www.123pan.com/s/yS8UVv-xoFed.html">https://www.123pan.com/s/yS8UVv-xoFed.html</a> 提取码:6666</p><p>JAVA8，11部分JDK：<a href="https://www.123pan.com/s/yS8UVv-poFed.html">https://www.123pan.com/s/yS8UVv-poFed.html</a> 提取码:6666</p><p>JetBrains全家桶2022-2023年版：<a href="https://www.123pan.com/s/yS8UVv-F6Fed.html">https://www.123pan.com/s/yS8UVv-F6Fed.html</a> 提取码：6666</p><p>JetBrains全家桶2022.2版：<a href="https://www.123pan.com/s/yS8UVv-g6Fed.html">https://www.123pan.com/s/yS8UVv-g6Fed.html</a> 提取码：6666</p><p>电脑常用工具：<a href="https://www.123pan.com/s/yS8UVv-DkFed.html">https://www.123pan.com/s/yS8UVv-DkFed.html</a> 提取码:6666</p><p>包含：Bandizip，录屏工具，分区工具，硬盘清理工具，数据恢复，7-zip</p><p>bandizip：<a href="https://www.123pan.com/s/yS8UVv-foFed.html">https://www.123pan.com/s/yS8UVv-foFed.html</a> 提取码:6666</p><p>录屏工具：<a href="https://www.123pan.com/s/yS8UVv-aoFed.html">https://www.123pan.com/s/yS8UVv-aoFed.html</a> 提取码:6666</p><p>分区工具：<a href="https://www.123pan.com/s/yS8UVv-BoFed.html">https://www.123pan.com/s/yS8UVv-BoFed.html</a> 提取码:6666</p><p>硬盘清理工具：<a href="https://www.123pan.com/s/yS8UVv-JoFed.html">https://www.123pan.com/s/yS8UVv-JoFed.html</a> 提取码:6666</p><p>数据恢复：<a href="https://www.123pan.com/s/yS8UVv-IoFed.html">https://www.123pan.com/s/yS8UVv-IoFed.html</a> 提取码:6666</p><p>7-Zip：<a href="https://www.123pan.com/s/yS8UVv-MoFed.html">https://www.123pan.com/s/yS8UVv-MoFed.html</a> 提取码:6666</p><p>达芬奇：<a href="https://www.123pan.com/s/yS8UVv-WkFed.html">https://www.123pan.com/s/yS8UVv-WkFed.html</a> 提取码:6666</p><p>包含：14，15，16，1，18部分版本</p><p>建模类：<a href="https://www.123pan.com/s/yS8UVv-CkFed.html">https://www.123pan.com/s/yS8UVv-CkFed.html</a> 提取码:6666</p><p>包含：3dsMax，Maya，C4D，Blender，ZBrush…….</p><p>3DsMax：<a href="https://www.123pan.com/s/yS8UVv-woFed.html">https://www.123pan.com/s/yS8UVv-woFed.html</a> 提取码:6666</p><p>Maya：<a href="https://www.123pan.com/s/yS8UVv-goFed.html">https://www.123pan.com/s/yS8UVv-goFed.html</a> 提取码:6666</p><p>C4D：<a href="https://www.123pan.com/s/yS8UVv-FoFed.html">https://www.123pan.com/s/yS8UVv-FoFed.html</a> 提取码:6666</p><p>Blender自用：<a href="https://www.123pan.com/s/yS8UVv-YoFed.html">https://www.123pan.com/s/yS8UVv-YoFed.html</a> 提取码:6666</p><p>ZBrush：<a href="https://www.123pan.com/s/yS8UVv-GoFed.html">https://www.123pan.com/s/yS8UVv-GoFed.html</a> 提取码:6666</p><p>SketchUp草图大师：<a href="https://www.123pan.com/s/yS8UVv-PoFed.html">https://www.123pan.com/s/yS8UVv-PoFed.html</a> 提取码:6666</p><p>VrayforSketchUp：<a href="https://www.123pan.com/s/yS8UVv-XoFed.html">https://www.123pan.com/s/yS8UVv-XoFed.html</a> 提取码:6666</p><p>VrayforRhino：<a href="https://www.123pan.com/s/yS8UVv-noFed.html">https://www.123pan.com/s/yS8UVv-noFed.html</a> 提取码:6666</p><p>MarvelousDesigne：<a href="https://www.123pan.com/s/yS8UVv-2oFed.html">https://www.123pan.com/s/yS8UVv-2oFed.html</a> 提取码:6666</p><p>Lumion：<a href="https://www.123pan.com/s/yS8UVv-soFed.html">https://www.123pan.com/s/yS8UVv-soFed.html</a> 提取码:6666</p><p>Keyshot：<a href="https://www.123pan.com/s/yS8UVv-WoFed.html">https://www.123pan.com/s/yS8UVv-WoFed.html</a> 提取码:6666</p><p>Enscape：<a href="https://www.123pan.com/s/yS8UVv-CoFed.html">https://www.123pan.com/s/yS8UVv-CoFed.html</a> 提取码:6666</p><p>CorelCAD：<a href="https://www.123pan.com/s/yS8UVv-NoFed.html">https://www.123pan.com/s/yS8UVv-NoFed.html</a> 提取码:6666</p><p>Artlantis：<a href="https://www.123pan.com/s/yS8UVv-OoFed.html">https://www.123pan.com/s/yS8UVv-OoFed.html</a> 提取码:6666</p><p>CAD：<a href="https://www.123pan.com/s/yS8UVv-2kFed.html">https://www.123pan.com/s/yS8UVv-2kFed.html</a> 提取码:6666</p><p>包含：CAD，中望CAD，浩辰CAD等等多个版本</p><p>CAD：<a href="https://www.123pan.com/s/yS8UVv-RoFed.html">https://www.123pan.com/s/yS8UVv-RoFed.html</a> 提取码:6666</p><p>CAD精简版：<a href="https://www.123pan.com/s/yS8UVv-DoFed.html">https://www.123pan.com/s/yS8UVv-DoFed.html</a> 提取码:6666</p><p>CAD建筑版：<a href="https://www.123pan.com/s/yS8UVv-roFed.html">https://www.123pan.com/s/yS8UVv-roFed.html</a> 提取码:6666</p><p>CAD电气版：<a href="https://www.123pan.com/s/yS8UVv-8oFed.html">https://www.123pan.com/s/yS8UVv-8oFed.html</a> 提取码:6666</p><p>CAD机械版：<a href="https://www.123pan.com/s/yS8UVv-0oFed.html">https://www.123pan.com/s/yS8UVv-0oFed.html</a> 提取码:6666</p><p>中望CAD：<a href="https://www.123pan.com/s/yS8UVv-KoFed.html">https://www.123pan.com/s/yS8UVv-KoFed.html</a> 提取码:6666</p><p>中望CAD建筑版：<a href="https://www.123pan.com/s/yS8UVv-uoFed.html">https://www.123pan.com/s/yS8UVv-uoFed.html</a> 提取码:6666</p><p>中望CAD机械版：<a href="https://www.123pan.com/s/yS8UVv-UoFed.html">https://www.123pan.com/s/yS8UVv-UoFed.html</a> 提取码:6666</p><p>浩辰CAD：<a href="https://www.123pan.com/s/yS8UVv-ZoFed.html">https://www.123pan.com/s/yS8UVv-ZoFed.html</a> 提取码:6666</p><p>浩辰CAD电气版：<a href="https://www.123pan.com/s/yS8UVv-coFed.html">https://www.123pan.com/s/yS8UVv-coFed.html</a> 提取码:6666</p><p>浩辰CAD电力版：<a href="https://www.123pan.com/s/yS8UVv-eoFed.html">https://www.123pan.com/s/yS8UVv-eoFed.html</a> 提取码:6666</p><p>浩辰CAD建筑版：<a href="https://www.123pan.com/s/yS8UVv-toFed.html">https://www.123pan.com/s/yS8UVv-toFed.html</a> 提取码:6666</p><p>CAD迷你画图：<a href="https://www.123pan.com/s/yS8UVv-SoFed.html">https://www.123pan.com/s/yS8UVv-SoFed.html</a> 提取码:6666</p><p>CAXA3D实体设计：<a href="https://www.123pan.com/s/yS8UVv-loFed.html">https://www.123pan.com/s/yS8UVv-loFed.html</a> 提取码:6666</p><p>CAXA电子图板：<a href="https://www.123pan.com/s/yS8UVv-7oFed.html">https://www.123pan.com/s/yS8UVv-7oFed.html</a> 提取码:6666</p><p>CAXA工艺图表：<a href="https://www.123pan.com/s/yS8UVv-boFed.html">https://www.123pan.com/s/yS8UVv-boFed.html</a> 提取码:6666</p><p>T20天正电气：<a href="https://www.123pan.com/s/yS8UVv-ioFed.html">https://www.123pan.com/s/yS8UVv-ioFed.html</a> 提取码:6666</p><p>T20天正结构：<a href="https://www.123pan.com/s/yS8UVv-zoFed.html">https://www.123pan.com/s/yS8UVv-zoFed.html</a> 提取码:6666</p><p>T20天正暖通：<a href="https://www.123pan.com/s/yS8UVv-LoFed.html">https://www.123pan.com/s/yS8UVv-LoFed.html</a> 提取码:6666</p><p>T20天正建筑：<a href="https://www.123pan.com/s/yS8UVv-5oFed.html">https://www.123pan.com/s/yS8UVv-5oFed.html</a> 提取码:6666</p><p>T20天正给排水：<a href="https://www.123pan.com/s/yS8UVv-qoFed.html">https://www.123pan.com/s/yS8UVv-qoFed.html</a> 提取码:6666</p><p>下载工具：<a href="https://www.123pan.com/s/yS8UVv-nkFed.html">https://www.123pan.com/s/yS8UVv-nkFed.html</a> 提取码:6666</p><p>包含：IDM，比特彗星和一些视频下载工具</p><p>办公软件：<a href="https://www.123pan.com/s/yS8UVv-8kFed.html">https://www.123pan.com/s/yS8UVv-8kFed.html</a> 提取码:6666</p><p>包含：Office，Wps，PDF阅读、编辑器，Visio，Project，EndNote，LaTex</p><p>Office：<a href="https://www.123pan.com/s/yS8UVv-6oFed.html">https://www.123pan.com/s/yS8UVv-6oFed.html</a> 提取码:6666</p><p>Wps：<a href="https://www.123pan.com/s/yS8UVv-yoFed.html">https://www.123pan.com/s/yS8UVv-yoFed.html</a> 提取码:6666</p><p>Visio：<a href="https://www.123pan.com/s/yS8UVv-VoFed.html">https://www.123pan.com/s/yS8UVv-VoFed.html</a> 提取码:6666</p><p>Project：<a href="https://www.123pan.com/s/yS8UVv-joFed.html">https://www.123pan.com/s/yS8UVv-joFed.html</a> 提取码:6666</p><p>EndNote：<a href="https://www.123pan.com/s/yS8UVv-TmFed.html">https://www.123pan.com/s/yS8UVv-TmFed.html</a> 提取码:6666</p><p>LaTex：<a href="https://www.123pan.com/s/yS8UVv-vmFed.html">https://www.123pan.com/s/yS8UVv-vmFed.html</a> 提取码:6666</p><p>Foxit福昕PDF编辑器：<a href="https://www.123pan.com/s/yS8UVv-dmFed.html">https://www.123pan.com/s/yS8UVv-dmFed.html</a> 提取码:6666</p><p>Foxit福昕PDF阅读器：<a href="https://www.123pan.com/s/yS8UVv-3mFed.html">https://www.123pan.com/s/yS8UVv-3mFed.html</a> 提取码:6666</p><p>PDFelement万兴PDF专家：<a href="https://www.123pan.com/s/yS8UVv-HmFed.html">https://www.123pan.com/s/yS8UVv-HmFed.html</a> 提取码:6666</p><p>PDFXChangeEditor：<a href="https://www.123pan.com/s/yS8UVv-hmFed.html">https://www.123pan.com/s/yS8UVv-hmFed.html</a> 提取码:6666</p><p>媒体工具：<a href="https://www.123pan.com/s/yS8UVv-0kFed.html">https://www.123pan.com/s/yS8UVv-0kFed.html</a> 提取码:6666</p><p>包含：nuendo，Cubase</p><p>nuendo：<a href="https://www.123pan.com/s/yS8UVv-9mFed.html">https://www.123pan.com/s/yS8UVv-9mFed.html</a> 提取码:6666</p><p>Cubase：<a href="https://www.123pan.com/s/yS8UVv-AmFed.html">https://www.123pan.com/s/yS8UVv-AmFed.html</a> 提取码:6666</p><p>图像处理：<a href="https://www.123pan.com/s/yS8UVv-KkFed.html">https://www.123pan.com/s/yS8UVv-KkFed.html</a> 提取码:6666</p><p>包含：ACDSee，AffinityPhoto，CaptureOne，CorelPainter，亿图图示，SketchBook，EasyPaintToolSAI</p><p>ACDSee：<a href="https://www.123pan.com/s/yS8UVv-QmFed.html">https://www.123pan.com/s/yS8UVv-QmFed.html</a> 提取码:6666</p><p>AffinityPhoto：<a href="https://www.123pan.com/s/yS8UVv-EmFed.html">https://www.123pan.com/s/yS8UVv-EmFed.html</a> 提取码:6666</p><p>CaptureOne：<a href="https://www.123pan.com/s/yS8UVv-kmFed.html">https://www.123pan.com/s/yS8UVv-kmFed.html</a> 提取码:6666</p><p>CorelPainter：<a href="https://www.123pan.com/s/yS8UVv-omFed.html">https://www.123pan.com/s/yS8UVv-omFed.html</a> 提取码:6666</p><p>亿图图示：<a href="https://www.123pan.com/s/yS8UVv-1mFed.html">https://www.123pan.com/s/yS8UVv-1mFed.html</a> 提取码:6666</p><p>SketchBook：<a href="https://www.123pan.com/s/yS8UVv-4mFed.html">https://www.123pan.com/s/yS8UVv-4mFed.html</a> 提取码:6666</p><p>EasyPaintToolSAI：<a href="https://www.123pan.com/s/yS8UVv-mmFed.html">https://www.123pan.com/s/yS8UVv-mmFed.html</a> 提取码:6666</p><p>仿真模拟：<a href="https://www.123pan.com/s/yS8UVv-ukFed.html">https://www.123pan.com/s/yS8UVv-ukFed.html</a> 提取码:6666</p><p>包含：COMSOLMultiphysics，ANSYSElectronicsSuite，ANSYSProducts，AltairHyperWorks，AnsysMaxwell，MSCAdams，Abaqus，VeroVisi，Tecplot360EX，AutodeskMoldflow，MidasCivil，Dynaform</p><p>COMSOLMultiphysics：<a href="https://www.123pan.com/s/yS8UVv-ImFed.html">https://www.123pan.com/s/yS8UVv-ImFed.html</a> 提取码:6666</p><p>ANSYSElectronicsSuite：<a href="https://www.123pan.com/s/yS8UVv-JmFed.html">https://www.123pan.com/s/yS8UVv-JmFed.html</a> 提取码:6666</p><p>ANSYSProducts：<a href="https://www.123pan.com/s/yS8UVv-BmFed.html">https://www.123pan.com/s/yS8UVv-BmFed.html</a> 提取码:6666</p><p>AltairHyperWorks：<a href="https://www.123pan.com/s/yS8UVv-amFed.html">https://www.123pan.com/s/yS8UVv-amFed.html</a> 提取码:6666</p><p>AnsysMaxwell：<a href="https://www.123pan.com/s/yS8UVv-fmFed.html">https://www.123pan.com/s/yS8UVv-fmFed.html</a> 提取码:6666</p><p>MSCAdams：<a href="https://www.123pan.com/s/yS8UVv-pmFed.html">https://www.123pan.com/s/yS8UVv-pmFed.html</a> 提取码:6666</p><p>Abaqus：<a href="https://www.123pan.com/s/yS8UVv-xmFed.html">https://www.123pan.com/s/yS8UVv-xmFed.html</a> 提取码:6666</p><p>VeroVisi：<a href="https://www.123pan.com/s/yS8UVv-GmFed.html">https://www.123pan.com/s/yS8UVv-GmFed.html</a> 提取码:6666</p><p>Tecplot360EX：<a href="https://www.123pan.com/s/yS8UVv-FmFed.html">https://www.123pan.com/s/yS8UVv-FmFed.html</a> 提取码:6666</p><p>AutodeskMoldflow：<a href="https://www.123pan.com/s/yS8UVv-gmFed.html">https://www.123pan.com/s/yS8UVv-gmFed.html</a> 提取码:6666</p><p>MidasCivil：<a href="https://www.123pan.com/s/yS8UVv-wmFed.html">https://www.123pan.com/s/yS8UVv-wmFed.html</a> 提取码:6666</p><p>Dynaform：<a href="https://www.123pan.com/s/yS8UVv-MmFed.html">https://www.123pan.com/s/yS8UVv-MmFed.html</a> 提取码:6666</p><p>数据分析：<a href="https://www.123pan.com/s/yS8UVv-UkFed.html">https://www.123pan.com/s/yS8UVv-UkFed.html</a> 提取码:6666</p><p>包含：Matlab，MySQL，SQLServer，TableauDesktop，Stata，IBMSPSSStatistics，Origin，Minitab，Mathematica，Maple，Amos</p><p>Matlab：<a href="https://www.123pan.com/s/yS8UVv-nmFed.html">https://www.123pan.com/s/yS8UVv-nmFed.html</a> 提取码:6666</p><p>MySQL：<a href="https://www.123pan.com/s/yS8UVv-2mFed.html">https://www.123pan.com/s/yS8UVv-2mFed.html</a> 提取码:6666</p><p>SQLServer：<a href="https://www.123pan.com/s/yS8UVv-smFed.html">https://www.123pan.com/s/yS8UVv-smFed.html</a> 提取码:6666</p><p>TableauDesktop：<a href="https://www.123pan.com/s/yS8UVv-WmFed.html">https://www.123pan.com/s/yS8UVv-WmFed.html</a> 提取码:6666</p><p>Stata：<a href="https://www.123pan.com/s/yS8UVv-CmFed.html">https://www.123pan.com/s/yS8UVv-CmFed.html</a> 提取码:6666</p><p>IBMSPSSStatistics：<a href="https://www.123pan.com/s/yS8UVv-NmFed.html">https://www.123pan.com/s/yS8UVv-NmFed.html</a> 提取码:6666</p><p>Origin：<a href="https://www.123pan.com/s/yS8UVv-OmFed.html">https://www.123pan.com/s/yS8UVv-OmFed.html</a> 提取码:6666</p><p>Minitab：<a href="https://www.123pan.com/s/yS8UVv-RmFed.html">https://www.123pan.com/s/yS8UVv-RmFed.html</a> 提取码:6666</p><p>Mathematica：<a href="https://www.123pan.com/s/yS8UVv-DmFed.html">https://www.123pan.com/s/yS8UVv-DmFed.html</a> 提取码:6666</p><p>Maple：<a href="https://www.123pan.com/s/yS8UVv-rmFed.html">https://www.123pan.com/s/yS8UVv-rmFed.html</a> 提取码:6666</p><p>Amos：<a href="https://www.123pan.com/s/yS8UVv-8mFed.html">https://www.123pan.com/s/yS8UVv-8mFed.html</a> 提取码:6666</p><p>机械设计：<a href="https://www.123pan.com/s/yS8UVv-SkFed.html">https://www.123pan.com/s/yS8UVv-SkFed.html</a> 提取码:6666</p><p>包含：Rhinoceros犀牛，UnigraphicsNX(UGNX)，SolidWorks，PowerMill，Proe，Mastercam，Inventor，Creo，CATIAComposer，CATIA</p><p>Rhinoceros犀牛：<a href="https://www.123pan.com/s/yS8UVv-0mFed.html">https://www.123pan.com/s/yS8UVv-0mFed.html</a> 提取码:6666</p><p>UnigraphicsNX(UGNX)：<a href="https://www.123pan.com/s/yS8UVv-KmFed.html">https://www.123pan.com/s/yS8UVv-KmFed.html</a> 提取码:6666</p><p>SolidWorks：<a href="https://www.123pan.com/s/yS8UVv-umFed.html">https://www.123pan.com/s/yS8UVv-umFed.html</a> 提取码:6666</p><p>PowerMill：<a href="https://www.123pan.com/s/yS8UVv-UmFed.html">https://www.123pan.com/s/yS8UVv-UmFed.html</a> 提取码:6666</p><p>Proe：<a href="https://www.123pan.com/s/yS8UVv-SmFed.html">https://www.123pan.com/s/yS8UVv-SmFed.html</a> 提取码:6666</p><p>Mastercam：<a href="https://www.123pan.com/s/yS8UVv-lmFed.html">https://www.123pan.com/s/yS8UVv-lmFed.html</a> 提取码:6666</p><p>Inventor：<a href="https://www.123pan.com/s/yS8UVv-7mFed.html">https://www.123pan.com/s/yS8UVv-7mFed.html</a> 提取码:6666</p><p>Creo：<a href="https://www.123pan.com/s/yS8UVv-bmFed.html">https://www.123pan.com/s/yS8UVv-bmFed.html</a> 提取码:6666</p><p>CATIAComposer：<a href="https://www.123pan.com/s/yS8UVv-ZmFed.html">https://www.123pan.com/s/yS8UVv-ZmFed.html</a> 提取码:6666</p><p>CATIA：<a href="https://www.123pan.com/s/yS8UVv-cmFed.html">https://www.123pan.com/s/yS8UVv-cmFed.html</a> 提取码:6666</p><p>建筑设计：<a href="https://www.123pan.com/s/yS8UVv-lkFed.html">https://www.123pan.com/s/yS8UVv-lkFed.html</a> 提取码:6666</p><p>包含：AutodeskRevit，AutoCADCivil3D，NavisworksManage，TeklaStructures，Vectorworks</p><p>AutodeskRevit：<a href="https://www.123pan.com/s/yS8UVv-imFed.html">https://www.123pan.com/s/yS8UVv-imFed.html</a> 提取码:6666</p><p>AutoCADCivil3D：<a href="https://www.123pan.com/s/yS8UVv-emFed.html">https://www.123pan.com/s/yS8UVv-emFed.html</a> 提取码:6666</p><p>NavisworksManage：<a href="https://www.123pan.com/s/yS8UVv-tmFed.html">https://www.123pan.com/s/yS8UVv-tmFed.html</a> 提取码:6666</p><p>TeklaStructures：<a href="https://www.123pan.com/s/yS8UVv-zmFed.html">https://www.123pan.com/s/yS8UVv-zmFed.html</a> 提取码:6666</p><p>Vectorworks：<a href="https://www.123pan.com/s/yS8UVv-LmFed.html">https://www.123pan.com/s/yS8UVv-LmFed.html</a> 提取码:6666</p><p>电子电路：<a href="https://www.123pan.com/s/yS8UVv-7kFed.html">https://www.123pan.com/s/yS8UVv-7kFed.html</a> 提取码:6666</p><p>包含：Proteus，Multisim，AltiumDesigner</p><p>Proteus：<a href="https://www.123pan.com/s/yS8UVv-6mFed.html">https://www.123pan.com/s/yS8UVv-6mFed.html</a> 提取码:6666</p><p>Multisim：<a href="https://www.123pan.com/s/yS8UVv-qmFed.html">https://www.123pan.com/s/yS8UVv-qmFed.html</a> 提取码:6666</p><p>AltiumDesigner：<a href="https://www.123pan.com/s/yS8UVv-5mFed.html">https://www.123pan.com/s/yS8UVv-5mFed.html</a> 提取码:6666</p><p>MSDN：<a href="https://www.123pan.com/s/yS8UVv-ymFed.html">https://www.123pan.com/s/yS8UVv-ymFed.html</a> 提取码:6666</p><hr><p>Mac总索引：<a href="https://www.123pan.com/s/yS8UVv-bqged.html%E3%80%90">https://www.123pan.com/s/yS8UVv-bqged.html【</a> 提取码:6666】</p><p>ISO文件：<a href="https://www.123pan.com/s/yS8UVv-66Fed.html%E3%80%90">https://www.123pan.com/s/yS8UVv-66Fed.html【</a> 提取码:6666】</p><p>VMvare：<a href="https://www.123pan.com/s/yS8UVv-OkFed.html%E3%80%90">https://www.123pan.com/s/yS8UVv-OkFed.html【</a> 提取码:6666】</p><p>unlocker：<a href="https://www.123pan.com/s/yS8UVv-y6Fed.html%E3%80%90">https://www.123pan.com/s/yS8UVv-y6Fed.html【</a> 提取码:6666】</p><hr><p>MSDN新网站：next.itellyou.cn</p><p>提示：</p><p>Windows变正版工具KMS：<a href="https://wwi.lanzout.com/igcDdyru6if">https://wwi.lanzout.com/igcDdyru6if</a></p><p>我的蓝筹云KMS：<a href="https://wwcv.lanzouw.com/iyJBM0y2vtwj%E5%AF%86%E7%A0%81:crce">https://wwcv.lanzouw.com/iyJBM0y2vtwj密码:crce</a></p><p>其他正版工具参考：rjctx.com</p><p>必须注意：下载的系统文件必须校验，校验工具和Hash校验值，每个文件夹下都有</p><p>不校验，寄了又得重装系统。。。</p><p>【Windows系统】：</p><p>Win11：<a href="https://www.123pan.com/s/yS8UVv-sqged.html">https://www.123pan.com/s/yS8UVv-sqged.html</a> 提取码:6666</p><p>Win10：<a href="https://www.123pan.com/s/yS8UVv-Wqged.html">https://www.123pan.com/s/yS8UVv-Wqged.html</a> 提取码:6666</p><p>Win8.1：<a href="https://www.123pan.com/s/yS8UVv-Nqged.html">https://www.123pan.com/s/yS8UVv-Nqged.html</a> 提取码:6666</p><p>Win8：<a href="https://www.123pan.com/s/yS8UVv-Oqged.html">https://www.123pan.com/s/yS8UVv-Oqged.html</a> 提取码:6666</p><p>WinVista：<a href="https://www.123pan.com/s/yS8UVv-Dqged.html">https://www.123pan.com/s/yS8UVv-Dqged.html</a> 提取码:6666</p><p>Win7：<a href="https://www.123pan.com/s/yS8UVv-Cqged.html">https://www.123pan.com/s/yS8UVv-Cqged.html</a> 提取码:6666</p><p>WinXP：<a href="https://www.123pan.com/s/yS8UVv-Rqged.html">https://www.123pan.com/s/yS8UVv-Rqged.html</a> 提取码:6666</p><p>【Windows服务器】</p><p>WindowsServer2022：<a href="https://www.123pan.com/s/yS8UVv-rqged.html">https://www.123pan.com/s/yS8UVv-rqged.html</a> 提取码:6666</p><p>WindowsServer2019：<a href="https://www.123pan.com/s/yS8UVv-8qged.html">https://www.123pan.com/s/yS8UVv-8qged.html</a> 提取码:6666</p><p>WindowsServer2016：<a href="https://www.123pan.com/s/yS8UVv-0qged.html">https://www.123pan.com/s/yS8UVv-0qged.html</a> 提取码:6666</p><hr><p>Windows汇总：<a href="https://www.123pan.com/s/yS8UVv-cqged.html">https://www.123pan.com/s/yS8UVv-cqged.html</a> 提取码:6666</p><p>【Linux系统】：</p><p>CentOS：<a href="https://www.123pan.com/s/yS8UVv-lqged.html">https://www.123pan.com/s/yS8UVv-lqged.html</a> 提取码:6666</p><p>Ubuntu：<a href="https://www.123pan.com/s/yS8UVv-Sqged.html">https://www.123pan.com/s/yS8UVv-Sqged.html</a> 提取码:6666</p><p>Fedora：<a href="https://www.123pan.com/s/yS8UVv-7qged.html">https://www.123pan.com/s/yS8UVv-7qged.html</a> 提取码:6666</p><p>UOS：<a href="https://www.123pan.com/s/yS8UVv-Uqged.html">https://www.123pan.com/s/yS8UVv-Uqged.html</a> 提取码:6666</p><p>Deepin：<a href="https://www.123pan.com/s/yS8UVv-uqged.html">https://www.123pan.com/s/yS8UVv-uqged.html</a> 提取码:6666</p><hr><p>Linux汇总：<a href="https://www.123pan.com/s/yS8UVv-Zqged.html">https://www.123pan.com/s/yS8UVv-Zqged.html</a> 提取码:6666</p><p>【MacOS系统】：</p><p>MacOS汇总：<a href="https://www.123pan.com/s/yS8UVv-bqged.html">https://www.123pan.com/s/yS8UVv-bqged.html</a> 提取码:6666</p><p>【ChromiumOS系统】：</p><p>ChromiumOS汇总：<a href="https://www.123pan.com/s/yS8UVv-eqged.html">https://www.123pan.com/s/yS8UVv-eqged.html</a> 提取码:6666</p><p>【BSD系统】：</p><p>FreeBSD：<a href="https://www.123pan.com/s/yS8UVv-iqged.html">https://www.123pan.com/s/yS8UVv-iqged.html</a> 提取码:6666</p><p>NetBSD：<a href="https://www.123pan.com/s/yS8UVv-zqged.html">https://www.123pan.com/s/yS8UVv-zqged.html</a> 提取码:6666</p><p>OpenBSD：<a href="https://www.123pan.com/s/yS8UVv-Lqged.html">https://www.123pan.com/s/yS8UVv-Lqged.html</a> 提取码:6666</p><p>DragonFlyBSD：<a href="https://www.123pan.com/s/yS8UVv-5qged.html">https://www.123pan.com/s/yS8UVv-5qged.html</a> 提取码:6666</p><hr><p>BSD汇总：<a href="https://www.123pan.com/s/yS8UVv-tqged.html">https://www.123pan.com/s/yS8UVv-tqged.html</a> 提取码:6666</p><p>【【【PS：123网盘分享，全是文件夹，点进去自己选择下载版本】】】</p><p>软件主要来源：</p><p>考拉：rjctx.com，脚本之家：<a href="https://www.jb51.net，系统搬运自MSDN：https://msdn.itellyou.cn/，next.itellyou.cn">https://www.jb51.net，系统搬运自MSDN：https://msdn.itellyou.cn/，next.itellyou.cn</a></p>]]></content>
      
      
      <categories>
          
          <category> 资源 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 资源 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>代码块设置</title>
      <link href="/posts/23bb.html"/>
      <url>/posts/23bb.html</url>
      
        <content type="html"><![CDATA[<h1 id="代码块设置"><a href="#代码块设置" class="headerlink" title="代码块设置"></a>代码块设置</h1><h2 id="代码高亮"><a href="#代码高亮" class="headerlink" title="代码高亮"></a>代码高亮</h2><h3 id="替换主题文件"><a href="#替换主题文件" class="headerlink" title="替换主题文件"></a>替换主题文件</h3><p>Hexo5.0开始自带<code>prismjs</code> 代码语法高亮的支持。如果你的博客中曾经安装过 <code>hexo-prism-plugin</code> 的插件，那么执行 <code>npm uninstall hexo-prism-plugin</code> 卸载掉它，否则生成的代码中会有 <code>&#123;</code> 和 <code>&#125;</code> 的转义字符。</p><p>然后，修改 Hexo 根目录下 <code>_config.yml</code> 文件中 <code>highlight.enable</code> 的值为 <code>false</code>，并将 <code>prismjs.enable</code> 的值设置为 <code>true</code>，主要配置如下：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">highlight</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">line_number</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">auto_detect</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">tab_replace</span><span class="token punctuation">:</span> <span class="token string">''</span>  <span class="token key atrule">wrap</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">hljs</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">prismjs</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">preprocess</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">line_number</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">tab_replace</span><span class="token punctuation">:</span> <span class="token string">''</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>matery默认的<code>prismjs</code>主题是 <code>Tomorrow Night</code>，如果想定制自己的主题，可前往 <a href="https://prismjs.com/download.html">prismjs 下载页面</a> 下载自己喜欢的主题 <code>css</code> 文件，然后将此 css 主题文件取名为 <code>prism.css</code>，替换掉 <code>hexo-theme-matery</code> 主题文件夹中的 <code>source/libs/prism/prism.css</code> 文件即可。</p><h3 id="修改原主题"><a href="#修改原主题" class="headerlink" title="修改原主题"></a>修改原主题</h3><p>当然也可以在原有的高亮主题的上就行修改，在根目录下找到<code>node_modules\prismjs\themes</code>，还可以对代码主题进行其他的修改，比如行号，关键词的高亮，语言的显示等等，可自行研究修改。</p><p><img src="https://s2.loli.net/2024/06/17/OEJ8svSgGb4MlHq.png" alt="themes"></p><h2 id="添加折叠功能"><a href="#添加折叠功能" class="headerlink" title="添加折叠功能"></a>添加折叠功能</h2><p>代码块有时会有大段代码放上去，但又不想占据大量的位置，这时候就需要对代码块进行折叠。</p><p>有两种方式实现：</p><ul><li>第一种：使用<code>hexo-sliding-spoiler</code>插件零修改代码实现折叠功能</li><li>第二种：修改代码实现折叠效果</li></ul><h3 id="第一种"><a href="#第一种" class="headerlink" title="第一种"></a>第一种</h3><p>安装插件</p><pre class="line-numbers language-css" data-language="css"><code class="language-css">npm install hexo-sliding-spoiler --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后进行配置，根目录配置文件<code>_config.yml</code>中添加</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">plugin:- hexo-sliding-spoiler<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>最后进行美化，修改<a href="mailto:&#110;&#x6f;&#100;&#x65;&#x5f;&#x6d;&#111;&#x64;&#x75;&#x6c;&#x65;&#115;&#95;&#104;&#101;&#x78;&#x6f;&#x2d;&#x73;&#108;&#x69;&#x64;&#105;&#110;&#103;&#x2d;&#x73;&#x70;&#111;&#x69;&#108;&#x65;&#114;&#64;&#49;&#46;&#x32;&#46;&#49;">&#110;&#x6f;&#100;&#x65;&#x5f;&#x6d;&#111;&#x64;&#x75;&#x6c;&#x65;&#115;&#95;&#104;&#101;&#x78;&#x6f;&#x2d;&#x73;&#108;&#x69;&#x64;&#105;&#110;&#103;&#x2d;&#x73;&#x70;&#111;&#x69;&#108;&#x65;&#114;&#64;&#49;&#46;&#x32;&#46;&#49;</a>@hexo-sliding-spoiler\assets\spoiler.css</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.spoiler</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 20px 0<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #E5E5E5<span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #E5E5E5<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>    <span class="token property">clear</span><span class="token punctuation">:</span> both<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span>all .6s<span class="token punctuation">&#125;</span><span class="token selector">.spoiler .spoiler-title</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0 -15px<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 5px 15px<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #353535<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.spoiler.collapsed .spoiler-title:before</span> <span class="token punctuation">&#123;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"▶"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.spoiler.expanded .spoiler-title:before</span> <span class="token punctuation">&#123;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"▲"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>用法：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token punctuation">&#123;</span>% spoiler code %<span class="token punctuation">&#125;</span><span class="token selector">content</span><span class="token punctuation">&#123;</span>% endspoiler %<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>示例</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">&#123;</span>% spoiler 点击显/隐内容 %<span class="token punctuation">&#125;</span>内容测试<span class="token punctuation">&#123;</span>% endspoiler %<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="第二种"><a href="#第二种" class="headerlink" title="第二种"></a>第二种</h3><p>参考</p><ul><li><a href="https://blog.csdn.net/weixin_34015566/article/details/89939438">Hexo next博客添加折叠块功能添加折叠代码块-CSDN博客</a></li><li><a href="https://www.cnblogs.com/woshimrf/p/hexo-fold-block.html">Hexo next博客添加折叠块功能添加折叠代码块</a></li></ul><h2 id="解决代码块复制不能换行"><a href="#解决代码块复制不能换行" class="headerlink" title="解决代码块复制不能换行"></a>解决代码块复制不能换行</h2><p>发现在代码块中复制的内容粘贴后总是挤成一团，而原来的代码格式失效，又试了几次后发现都是如此，然后上网查了一下，发现使用Matery主题的博客上复制内容都存在这个问题。幸运的是已经有大佬发现问题所在，并给出解决方案。</p><p>问题在于开启复制版权copyright，添加复制版权信息后，就会导致代码块复制内容换行失效。</p><p>大佬判断出问题出在添加复制版权信息的文件<code>themes\matery\layout\_partial\post-detail.ejs</code>中，具体问题在判断复制内容换行的判断语句</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs">// otherwise the text inside "pre" loses all the line breaks!if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') &#123;    newdiv.innerHTML = "<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">></span></span>" + newdiv.innerHTML + "<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">></span></span>";&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>使用<code>console.log()</code>查出在复制内容时<code>selection.getRangeAt(0).commonAncestorContainer.nodeName</code>并不是<code>PRE</code>，而是<code>CODE</code></p><p>所以是由于<code>if</code>判断的条件错误才导致复制内容不会换行，解决办法就是将其判断条件值改为<code>CODE</code>（大概在220行左右）。</p><p>修改完后重新部署博客，发现可以正常粘贴复制的内容了。</p><p>这里是<a href="https://blog.csdn.net/weixin_43571641/article/details/116034591">大佬的原文</a></p><h2 id="代码块全屏显示"><a href="#代码块全屏显示" class="headerlink" title="代码块全屏显示"></a>代码块全屏显示</h2><p>添加css</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.code-area.code-block-fullscreen pre</span> <span class="token punctuation">&#123;</span>  <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>  <span class="token property">max-height</span><span class="token punctuation">:</span> unset<span class="token punctuation">;</span>  <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  <span class="token property">min-width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* code-block-fullscreen */</span><span class="token selector">.code-block-fullscreen</span> <span class="token punctuation">&#123;</span>  <span class="token property">position</span><span class="token punctuation">:</span>fixed<span class="token punctuation">;</span>  <span class="token property">top</span><span class="token punctuation">:</span>-0.4em<span class="token punctuation">;</span>  <span class="token property">left</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>  <span class="token property">min-width</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>  <span class="token property">z-index</span><span class="token punctuation">:</span> 999999<span class="token punctuation">;</span>  <span class="token property">margin</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>  <span class="token property">animation</span><span class="token punctuation">:</span> elastic 1s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.code-block-fullscreen code</span> <span class="token punctuation">&#123;</span>  <span class="token property">--widthA</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>  <span class="token property">--widthB</span><span class="token punctuation">:</span><span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--widthA<span class="token punctuation">)</span> - 30px<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span><span class="token function">var</span><span class="token punctuation">(</span>--widthB<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">min-height</span><span class="token punctuation">:</span>99%<span class="token punctuation">;</span>  <span class="token property">overflow-y</span><span class="token punctuation">:</span>hidden<span class="token punctuation">;</span>  <span class="token property">overflow-x</span><span class="token punctuation">:</span>auto<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span>auto<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.code-block-fullscreen-html-scroll</span> <span class="token punctuation">&#123;</span>  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.code-area.code-block-fullscreen i.code-expand,.code-area.code-block-fullscreen .scroll-down-bar</span> <span class="token punctuation">&#123;</span>  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.code-show-expand</span> <span class="token punctuation">&#123;</span>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>  <span class="token property">top</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>  <span class="token property">right</span><span class="token punctuation">:</span> 53px<span class="token punctuation">;</span>  <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">invert</span><span class="token punctuation">(</span>50%<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>  <span class="token property">padding</span><span class="token punctuation">:</span> 7px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>添加js</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>enableShowexpand<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">var</span> $code_show_expand <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'&lt;i class="fas fa-expand code-show-expand"  title="全屏显示" aria-hidden="true">&lt;/i>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  $pre<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span>$code_show_expand<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.code-area .code-show-expand'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token keyword">return</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span><span class="token string">'code-closed'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">siblings</span><span class="token punctuation">(</span><span class="token string">'pre'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'code'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">'code-closed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggleClass</span><span class="token punctuation">(</span><span class="token string">'code-block-fullscreen'</span><span class="token punctuation">)</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'html'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggleClass</span><span class="token punctuation">(</span><span class="token string">'code-block-fullscreen-html-scroll'</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://www.cnblogs.com/chendeqiang/p/12861726.html#540873996">代码块折叠</a></p><p><a href="https://www.cnblogs.com/chendeqiang/p/12861726.html">博客-hexo-matery主题改造笔记 - 多弗朗强哥 - 博客园 (cnblogs.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 代码块 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker入门</title>
      <link href="/posts/2bc5.html"/>
      <url>/posts/2bc5.html</url>
      
        <content type="html"><![CDATA[<h1 id="Docker入门"><a href="#Docker入门" class="headerlink" title="Docker入门"></a>Docker入门</h1><p><a href="https://www.runoob.com/docker/docker-tutorial.html">Docker 教程 | 菜鸟教程 (runoob.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WireShark基础使用</title>
      <link href="/posts/35b9.html"/>
      <url>/posts/35b9.html</url>
      
        <content type="html"><![CDATA[<h1 id="WireShark基础使用"><a href="#WireShark基础使用" class="headerlink" title="WireShark基础使用"></a>WireShark基础使用</h1><p><a href="https://xie.infoq.cn/article/c065340cbae0680afc7b984ee">【精选教程】四大网络抓包神器，总有一款适合你_雪奈椰子_InfoQ写作社区</a></p><p><a href="https://blog.csdn.net/zzwwhhpp/article/details/113077747">网络分析工具——WireShark的使用（超详细）-CSDN博客</a></p>]]></content>
      
      
      <categories>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WireShark </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>汇编语言</title>
      <link href="/posts/ec85.html"/>
      <url>/posts/ec85.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 汇编 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>英文美句</title>
      <link href="/posts/ywmj.html"/>
      <url>/posts/ywmj.html</url>
      
        <content type="html"><![CDATA[<div class="ipage">   <div class="ititle"> </div>   <div class="izhengwen">     <p>    让人惊艳的英文短句<br>    All or nothing ——【译】 孤注一掷<br>            Kill time, or kiss time ——【译】 或消磨，或厮磨<br>    Rumors stop with the wise ——【译】 流言止于智者<br>         Able was I ere I saw Elba ——【译】 落败孤岛孤落败<br>    Lost long forever found ——【译】 荣耀得失，尽归尘土<br>     I'll try anything once ——【译】 人生苦短, 何妨一试<br>    Better late than never ——【译】 只要开始, 虽晚不迟<br>            I want my tears back now ——【译】 愿偿年少泪，尤趁未老时<br>           A wise man does not fall in love ——【译】 智者不入爱河<br>    The path to glory is always rugged ——【译】 光荣之路常坎坷<br>         Say love is too early, like it ——【译】 说爱太早，喜欢就好<br>    For every heart, you're the beat ——【译】 心跳之间，你为心率<br>    While there is life there is hope ——【译】 一息若存 , 希望不灭<br>      You are not afraid of a thousand miles ——【译】 山海有你，不怕千里<br>    You are my today and all of my tomorrows ——【译】 你是我的今天和所有明天<br>    Like is a choice, love is not for you ——【译】 喜欢是选择，爱是非你不可<br>    Love goes with the wind, but never goes away ——【译】 爱意随风起，风止意难平<br>    You are my today and all of my tomorrows ——【译】 你是我的今天和所有明天<br>     Which hurts more , the pain of hard work or the pain of regret? ——【译】 哪个更痛苦, 努力还是后悔<br>        There is a crack in everything , that's how the light gets in ——【译】 万物皆有裂痕, 那是光照进来的地方<br>   </p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我曾七次鄙视自己的灵魂</title>
      <link href="/posts/essay-demo.html"/>
      <url>/posts/essay-demo.html</url>
      
        <content type="html"><![CDATA[<h3 id="我曾七次鄙视自己的灵魂"><a href="#我曾七次鄙视自己的灵魂" class="headerlink" title="我曾七次鄙视自己的灵魂"></a>我曾七次鄙视自己的灵魂</h3><div class="ipage">   <div class="ititle">节选自《Seven times have I despised my soul》- Kahlil Gibran</div>   <div class="izhengwen">     <p>    我曾七次鄙视自己的灵魂 - 纪伯伦<br>    The first time when I saw her being meek that she might attain height.<br>    第一次, 当它本可进取时, 却故作谦卑<br>    The second time when I saw her limping before the crippled.<br>    第二次, 当它空虚时, 用爱欲来填充<br>    The third time when she was given to choose between the hard and the easy, and she chose the easy.<br>    第三次, 在堕落和努力之间, 它选择了堕落<br>    The fourth time when she committed a wrong, and comforted herself that others also commit wrong.<br>    第四次, 它犯了错, 却藉由别人的错来宽慰自己<br>     The fifth time when she forbore for weakness, and attributed her patience to strength.<br>    第五次, 它自由软弱，却把它认为是生命的坚韧<br>    The sixth time when she despised the ugliness of a face and knew not that it was one of her own masks.<br>    第六次, 当它嘲笑他人愚蠢时, 却不知自己更是蠢材<br>    The seventh time when she sang a song of praise and deemed it a virtue.<br>    第七次, 它在泥潭时既彻底摆不了烂也不彻底甘心<br>    </p>   </div> </div>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>链表</title>
      <link href="/posts/d64e.html"/>
      <url>/posts/d64e.html</url>
      
        <content type="html"><![CDATA[<h1 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h1><h2 id="删除重复元素"><a href="#删除重复元素" class="headerlink" title="删除重复元素"></a>删除重复元素</h2><p>一个已排序的链表的头 <code>head</code> ， 删除原始链表中所有重复数字（只保留一个）的节点，只留下不同的数字 。返回 <em>已排序的链表</em> 。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/** * Definition for singly-linked list. * struct ListNode &#123; *     int val; *     struct ListNode *next; * &#125;; */</span><span class="token keyword">struct</span> <span class="token class-name">ListNode</span><span class="token operator">*</span> <span class="token function">deleteDuplicates</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">ListNode</span><span class="token operator">*</span> head<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>head<span class="token operator">==</span><span class="token constant">NULL</span><span class="token operator">||</span>head<span class="token operator">-></span>next<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> head<span class="token punctuation">;</span>        <span class="token keyword">struct</span> <span class="token class-name">ListNode</span> <span class="token operator">*</span>current<span class="token operator">=</span>head<span class="token operator">-></span>next<span class="token punctuation">,</span> <span class="token operator">*</span>pre<span class="token operator">=</span>head<span class="token punctuation">,</span> <span class="token operator">*</span>tmp<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>current<span class="token operator">!=</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>current<span class="token operator">-></span>val<span class="token operator">==</span>pre<span class="token operator">-></span>val<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            tmp<span class="token operator">=</span>current<span class="token punctuation">;</span>            current<span class="token operator">=</span>current<span class="token operator">-></span>next<span class="token punctuation">;</span>            pre<span class="token operator">-></span>next<span class="token operator">=</span>current<span class="token punctuation">;</span>            <span class="token function">free</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>            pre<span class="token operator">=</span>current<span class="token punctuation">;</span>            current<span class="token operator">=</span>current<span class="token operator">-></span>next<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> head<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="旋转链表"><a href="#旋转链表" class="headerlink" title="旋转链表"></a>旋转链表</h2><p>给你一个链表的头节点 <code>head</code> ，旋转链表，将链表每个节点向右移动 <code>k</code> 个位置。</p><blockquote><p>输入：head &#x3D; [1,2,3,4,5], k &#x3D; 2<br>输出：[4,5,1,2,3]</p></blockquote><p><strong>提示：</strong></p><ul><li>链表中节点的数目在范围 <code>[0, 500]</code> 内</li><li><code>-100 &lt;= Node.val &lt;= 100</code></li><li><code>0 &lt;= k &lt;= 2 * 109</code></li></ul><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><h4 id="我的思路"><a href="#我的思路" class="headerlink" title="我的思路"></a>我的思路</h4><ol><li><p>首先遍历链表，求出链表长度<code>n</code>，并找出尾节点<code>tail</code></p></li><li><p>考虑到<code>k</code>的取值很可能超过所给链表的长度，所以需要对<code>k</code>进行处理，令<code>k = k % n</code>更新<code>k</code>值。用指针<code>p</code>找到第（n-k）个节点</p></li><li><p>将链表的后<code>k</code>个节点和前 <code>n - k</code>个节点拼接起来，并让<code>head</code>指向新的头节点，新的尾节点即<code>p</code>节点的<code>next</code>指针指向<code>null</code>。</p></li></ol><h4 id="官方思路"><a href="#官方思路" class="headerlink" title="官方思路"></a>官方思路</h4><p>首先考虑到<code>k</code>的取值很可能超过所给链表的长度，所以需要对<code>k</code>进行处理，假设链表长度为<code>n</code>，则令<code>k = k % n</code>，保证<code>k</code>值小于链表长度。</p><p>我们可以知道，新链表的顺序为：后面<code>k</code>（处理后）个节点——&gt;前面<code>n-k</code>个节点。</p><p>要获取链表长度就需要遍历，然后我们可以<code>先将给定的链表连接成环</code>，最后在指定位置断开就形成了最终的链表。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/** * Definition for singly-linked list. * struct ListNode &#123; *     int val; *     struct ListNode *next; * &#125;; */</span><span class="token keyword">struct</span> <span class="token class-name">ListNode</span><span class="token operator">*</span> <span class="token function">rotateRight</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">ListNode</span><span class="token operator">*</span> head<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>head <span class="token operator">||</span> <span class="token operator">!</span>head<span class="token operator">-></span>next <span class="token operator">||</span> k <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> head<span class="token punctuation">;</span>    <span class="token comment">// Step 1: 获取链表长度，并使链表形成环</span>    <span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">struct</span> <span class="token class-name">ListNode</span><span class="token operator">*</span> p <span class="token operator">=</span> head<span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>p<span class="token operator">-></span>next<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        p <span class="token operator">=</span> p<span class="token operator">-></span>next<span class="token punctuation">;</span>        len<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    p<span class="token operator">-></span>next <span class="token operator">=</span> head<span class="token punctuation">;</span> <span class="token comment">// 形成环形链表</span>    <span class="token comment">// Step 2: 若k大于链表长度，对k进行取模，避免多余旋转</span>    k <span class="token operator">%=</span> len<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        p<span class="token operator">-></span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span> <span class="token comment">// 恢复原状后返回，无需旋转</span>        <span class="token keyword">return</span> head<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// Step 3: 找到新链表的头节点位置（跳过最后k个节点）</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len <span class="token operator">-</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        p <span class="token operator">=</span> p<span class="token operator">-></span>next<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// Step 4: 断开环，设置新头节点和原尾节点</span>    <span class="token keyword">struct</span> <span class="token class-name">ListNode</span><span class="token operator">*</span> new_head <span class="token operator">=</span> p<span class="token operator">-></span>next<span class="token punctuation">;</span>    p<span class="token operator">-></span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> new_head<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="合并有序链表"><a href="#合并有序链表" class="headerlink" title="合并有序链表"></a>合并有序链表</h2>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 链表 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>顺序表</title>
      <link href="/posts/cb6e.html"/>
      <url>/posts/cb6e.html</url>
      
        <content type="html"><![CDATA[<h1 id="顺序表"><a href="#顺序表" class="headerlink" title="顺序表"></a>顺序表</h1><h2 id="删除特定元素x"><a href="#删除特定元素x" class="headerlink" title="删除特定元素x"></a>删除特定元素x</h2><p>对一个长度为<code>n</code>的顺序表，删除所有值为<code>x</code>的元素</p><p>法一：从头到位扫描顺序表，用变量<code>k</code>记录当前位置<code>i</code>前面的所有值为<code>x</code>的元素个数，如果当前元素<code>不为x</code>，就<code>前移k个</code>位置</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">delete_x_1</span><span class="token punctuation">(</span>SqList <span class="token operator">&amp;</span>L<span class="token punctuation">,</span> ElemType x<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span>L<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span>x<span class="token punctuation">)</span>           k<span class="token operator">+=</span><span class="token number">1</span><span class="token punctuation">;</span>       <span class="token keyword">else</span>           L<span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token operator">-</span>k<span class="token punctuation">]</span><span class="token operator">=</span>L<span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>       i<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    L<span class="token punctuation">.</span>length<span class="token operator">=</span>L<span class="token punctuation">.</span>length<span class="token operator">-</span>k<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>法二：使用头尾指针（head&#x3D;1，tail&#x3D;n），从两端向中间移动，在遇到最左端的值为x的元素后，将最右端值非x的元素移过去，同时两指针向中间移动，直至相遇，但这种方法会改变元素原来的相对位置。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span><span class="token comment">// 函数声明</span><span class="token keyword">int</span> <span class="token function">delete_x</span><span class="token punctuation">(</span><span class="token keyword">int</span> SqList<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token comment">// 调用函数并获取删除x后有效元素的个数</span>    <span class="token keyword">int</span> new_n <span class="token operator">=</span> <span class="token function">delete_x</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> n<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"After deleting %d, the sequence list is: "</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> new_n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 删除顺序表中所有值为x的元素的函数</span><span class="token keyword">int</span> <span class="token function">delete_x</span><span class="token punctuation">(</span><span class="token keyword">int</span> SqList<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 头指针</span>    <span class="token keyword">int</span> j <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 尾指针</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 找到最左端值为x的元素</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> j <span class="token operator">&amp;&amp;</span> SqList<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            i<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 找到最右端值不为x的元素</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> j <span class="token operator">&amp;&amp;</span> SqList<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            j<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>                <span class="token comment">// 如果i&lt;=j，交换这两个元素，然后移动指针</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> temp <span class="token operator">=</span> SqList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            SqList<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> SqList<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            SqList<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>            i<span class="token operator">++</span><span class="token punctuation">;</span>            j<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>        <span class="token comment">// i的位置是第一个可能为x的位置，因此有效元素数量为i</span>    <span class="token keyword">return</span> i<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="删除重复元素"><a href="#删除重复元素" class="headerlink" title="删除重复元素"></a>删除重复元素</h2><p>删除有序顺序表中的重复元素，使剩余元素都各不相同，如[1，2，2，2，2，3，3，3，4，4，5]——&gt;[1，2，3，4，5]</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">bool <span class="token function">delete_same</span><span class="token punctuation">(</span>SqList <span class="token operator">&amp;</span>L<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span>length<span class="token operator">&lt;=</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> true<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> i<span class="token punctuation">,</span>j<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>L<span class="token punctuation">.</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">!=</span>L<span class="token punctuation">.</span>data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            L<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token operator">++</span>i<span class="token punctuation">]</span><span class="token operator">=</span>L<span class="token punctuation">.</span>data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    L<span class="token punctuation">.</span>length<span class="token operator">=</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> true<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="合并有序顺序表"><a href="#合并有序顺序表" class="headerlink" title="合并有序顺序表"></a>合并有序顺序表</h2><h2 id="循环右移"><a href="#循环右移" class="headerlink" title="循环右移"></a>循环右移</h2><p>给定一个整数数组 <code>nums</code>，将数组中的元素向右轮转 <code>k</code> 个位置，其中 <code>k</code> 是非负数。</p><p><a href="https://leetcode.cn/problems/rotate-array/description/">189. 轮转数组 - 力扣（LeetCode）</a></p><h2 id="交换位置"><a href="#交换位置" class="headerlink" title="交换位置"></a>交换位置</h2><p>一个数组a[m+n]存放了两个线性表（a<del>1</del> ~ a<del>n</del>）和（b<del>1</del> ~ b<del>n</del>），编写函数交换他们的位置</p><p>思路：先将整个数组逆转为[b<del>n</del> ~ b<del>1</del> ，a<del>n</del> ~ a<del>1</del>]，然后分别对两个线性表再进行逆转—→[b<del>1</del> ~ b<del>n</del>，a<del>1</del> ~ a<del>n</del>]，即为所求</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">reverse</span><span class="token punctuation">(</span>DataType a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="查找公共部分"><a href="#查找公共部分" class="headerlink" title="查找公共部分"></a>查找公共部分</h2><p>给出三个序列A，B，C，长度均为n，且无重复的递增序列。请输出三个序列共有的所有元素。</p><h2 id="查找中位数"><a href="#查找中位数" class="headerlink" title="查找中位数"></a>查找中位数</h2><p>一个长度为L的升序序列S，位于</p><h2 id="查找主元素"><a href="#查找主元素" class="headerlink" title="查找主元素"></a>查找主元素</h2><h2 id="查找未出现的最小整数"><a href="#查找未出现的最小整数" class="headerlink" title="查找未出现的最小整数"></a>查找未出现的最小整数</h2><h2 id="计算最小距离"><a href="#计算最小距离" class="headerlink" title="计算最小距离"></a>计算最小距离</h2>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 顺序表 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo基础命令</title>
      <link href="/posts/ec85.html"/>
      <url>/posts/ec85.html</url>
      
        <content type="html"><![CDATA[<h1 id="Hexo-基础命令"><a href="#Hexo-基础命令" class="headerlink" title="Hexo 基础命令"></a>Hexo 基础命令</h1><h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><pre class="line-numbers language-none"><code class="language-none">hexo new&quot;postName&quot;      新建文章 hexo new page&quot;pageName&quot; 新建页面 hexo generate           生成静态页面至public目录 hexo clean              清除生成内容 hexo server             开启预览访问（默认端口4000，&#39;ctrl + c&#39;关闭server） hexo deploy             将.deploy目录部署到指定空间 hexo help               查看帮助 hexo version            查看hexo的版本hexo server -p 5000 更改端口<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="缩写"><a href="#缩写" class="headerlink" title="缩写"></a>缩写</h2><pre class="line-numbers language-text" data-language="text"><code class="language-text">hexo g： hexo generatehexo cl：hexo cleanhexo s： hexo serverhexo d： hexo deployhexo n "我的博客"      hexo new "我的博客"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>由于命令行解析的规则，新建文章如果没有使用引号将含有空格的标题包裹起来，命令行会将空格视为分隔符，从而导致标题被误解析为多个参数。</p><p>因此，当你直接使用 <code>hexo n 文章标题</code>（假设文章标题包含空格）时，如果不加引号，命令行可能会错误地将文章标题识别为几个独立的参数，从而导致新建文章失败或者创建的文件名不符合预期。</p><p>为了避免这个问题，正确的做法是在文章标题周围加上引号，像这样：<code>hexo n &quot;我的文章标题有空格&quot;</code>。这样，即使标题中有空格，整个标题也会被当作单一的字符串参数传递给 <code>hexo new</code> 命令，确保文章能够正确创建并命名。</p><p>错误示范：</p><p><img src="https://s2.loli.net/2024/06/17/EpVe38q9ZohRYiN.png" alt="错误新建"></p><p><img src="https://s2.loli.net/2024/06/17/NgYwZorUOiyI6qn.png" alt="解析错误"></p><p>正确示范：</p><p><img src="https://s2.loli.net/2024/06/17/tnlgHB3VmGzkif4.png" alt="正确新建"></p><p><img src="https://s2.loli.net/2024/06/17/K5lxw9F8pbs2iYv.png" alt="正确解析"></p><h2 id="组合"><a href="#组合" class="headerlink" title="组合"></a>组合</h2><pre class="line-numbers language-text" data-language="text"><code class="language-text">hexo s -g    生成并本地预览hexo d -g    生成并上传hexo clean &amp;&amp; hexo g -s 清除、生成、启动hexo clean &amp;&amp; hexo g -d 清除、生成、部署<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vi/vim入门使用</title>
      <link href="/posts/4836.html"/>
      <url>/posts/4836.html</url>
      
        <content type="html"><![CDATA[<h1 id="vim入门使用"><a href="#vim入门使用" class="headerlink" title="vim入门使用"></a>vim入门使用</h1><h2 id="vi-vim"><a href="#vi-vim" class="headerlink" title="vi&#x2F;vim"></a>vi&#x2F;vim</h2><p>所有的 Unix Like 系统都会内建 vi 文书编辑器，其他的文书编辑器则不一定会存在。</p><p>但是目前我们使用比较多的是 vim 编辑器。</p><p>vim 具有程序编辑的能力，可以主动的以字体颜色辨别语法的正确性，方便程序设计。</p><p>相关文章：<a href="https://www.runoob.com/w3cnote/all-vim-cheatsheat.html">史上最全Vim快捷键键位图 — 入门到进阶</a></p><p>Vim 是从 vi 发展出来的一个文本编辑器。代码补全、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用。</p><p>简单的来说， vi 是老式的字处理器，不过功能已经很齐全了，但是还是有可以进步的地方。 vim 则可以说是程序开发者的一项很好用的工具。</p><p>连 vim 的官方网站 (<a href="https://www.vim.org/">https://www.vim.org/</a>) 自己也说 vim 是一个程序开发工具而不是文字处理软件。</p><h2 id="vi-vim-的使用"><a href="#vi-vim-的使用" class="headerlink" title="vi&#x2F;vim 的使用"></a>vi&#x2F;vim 的使用</h2><p>基本上 vi&#x2F;vim 共分为三种模式，<strong>命令模式（Command Mode）、输入模式（Insert Mode）和命令行模式（Command-Line Mode）</strong>。</p><h3 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h3><p><strong>用户刚刚启动 vi&#x2F;vim，便进入了命令模式。</strong></p><p>此状态下敲击键盘动作会被 Vim 识别为命令，而非输入字符，比如我们此时按下 <strong>i</strong>，并不会输入一个字符，<strong>i</strong> 被当作了一个命令。</p><p>以下是普通模式常用的几个命令：</p><ul><li><strong>i</strong> – 切换到输入模式，在光标当前位置开始输入文本。</li><li><strong>x</strong> – 删除当前光标所在处的字符。</li><li><strong>:</strong> – 切换到底线命令模式，以在最底一行输入命令。</li><li><strong>a</strong> – 进入插入模式，在光标下一个位置开始输入文本。</li><li><strong>o</strong>：在当前行的下方插入一个新行，并进入插入模式。</li><li><strong>O</strong> – 在当前行的上方插入一个新行，并进入插入模式。</li><li><strong>dd</strong> – 剪切当前行。</li><li><strong>yy</strong> – 复制当前行。</li><li><strong>p</strong>（小写） – 粘贴剪贴板内容到光标下方。</li><li><strong>P</strong>（大写）– 粘贴剪贴板内容到光标上方。</li><li><strong>u</strong> – 撤销上一次操作。</li><li><strong>Ctrl + r</strong> – 重做上一次撤销的操作。</li><li><strong>:w</strong> – 保存文件。</li><li><strong>:q</strong> – 退出 Vim 编辑器。</li><li><strong>:q!</strong> – 强制退出Vim 编辑器，不保存修改。</li></ul><p>若想要编辑文本，只需要启动 Vim，进入了命令模式，按下 <strong>i</strong> 切换到输入模式即可。</p><p>命令模式只有一些最基本的命令，因此仍要依靠<strong>底线命令行模式</strong>输入更多命令。</p><h3 id="输入模式"><a href="#输入模式" class="headerlink" title="输入模式"></a>输入模式</h3><p>在命令模式下按下 <strong>i</strong> 就进入了输入模式，使用 <strong>Esc</strong> 键可以返回到普通模式。</p><p>在输入模式中，可以使用以下按键：</p><ul><li><strong>字符按键以及Shift组合</strong>，输入字符</li><li><strong>ENTER</strong>，回车键，换行</li><li><strong>BACK SPACE</strong>，退格键，删除光标前一个字符</li><li><strong>DEL</strong>，删除键，删除光标后一个字符</li><li><strong>方向键</strong>，在文本中移动光标</li><li><strong>HOME</strong>&#x2F;<strong>END</strong>，移动光标到行首&#x2F;行尾</li><li><strong>Page Up</strong>&#x2F;<strong>Page Down</strong>，上&#x2F;下翻页</li><li><strong>Insert</strong>，切换光标为输入&#x2F;替换模式，光标将变成竖线&#x2F;下划线</li><li><strong>ESC</strong>，退出输入模式，切换到命令模式</li></ul><h3 id="底线命令模式"><a href="#底线命令模式" class="headerlink" title="底线命令模式"></a>底线命令模式</h3><p>在命令模式下按下 **:**（英文冒号）就进入了底线命令模式。</p><p>底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。</p><p>在底线命令模式中，基本的命令有（已经省略了冒号）：</p><ul><li><code>:w</code>：保存文件。</li><li><code>:q</code>：退出 Vim 编辑器。</li><li><code>:wq</code>：保存文件并退出 Vim 编辑器。</li><li><code>:q!</code>：强制退出Vim编辑器，不保存修改。</li></ul><p>按 <strong>ESC</strong> 键可随时退出底线命令模式。</p><p>简单的说，我们可以将这三个模式想成底下的图标来表示：</p><p>学习自<a href="https://www.runoob.com/linux/linux-vim.html">Linux vi&#x2F;vim | 菜鸟教程 (runoob.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>md语法</title>
      <link href="/posts/ec85.html"/>
      <url>/posts/ec85.html</url>
      
        <content type="html"><![CDATA[<h1 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h1><h2 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h2><p>在单词或短语前面添加井号 (<code>#</code>) ：<code>#</code> 的数量代表了标题的级别。如，三个 <code>#</code> 表示三级标题 (<code>&lt;h3&gt;</code>)</p><pre class="line-numbers language-none"><code class="language-none"># 一级标题## 二级标题### 三级标题<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="三级标题"><a href="#三级标题" class="headerlink" title="三级标题"></a>三级标题</h3><h4 id="四级标题"><a href="#四级标题" class="headerlink" title="四级标题"></a>四级标题</h4><h5 id="五级标题"><a href="#五级标题" class="headerlink" title="五级标题"></a>五级标题</h5><h6 id="六级标题"><a href="#六级标题" class="headerlink" title="六级标题"></a>六级标题</h6><h2 id="换行"><a href="#换行" class="headerlink" title="换行"></a>换行</h2><p>在行末添加两个或多个空格，然后按回车键，即可换行(<code>&lt;br&gt;</code>)<br>有争议的，因为很难在编辑器中直接看到空格，并且很多人在每个句子后面都会有意或无意地添加两个空格。由于这个原因，你可能要使用除结尾空格以外的其它方式来换行。幸运的是，几乎每个 Markdown 应用程序都支持另一种换行方式：HTML 的 <code>&lt;br&gt;</code> 标签。<br>为了兼容性，请在行尾添加“结尾空格”或 HTML 的 <code>&lt;br&gt;</code> 标签来实现换行。</p><pre class="line-numbers language-none"><code class="language-none">弃我去者昨日之日不可留&lt;br&gt;乱我心者今日之日多烦忧<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>弃我去者昨日之日不可留<br>乱我心者今日之日多烦忧</p><h2 id="强调"><a href="#强调" class="headerlink" title="强调"></a>强调</h2><h3 id="粗体"><a href="#粗体" class="headerlink" title="粗体"></a>粗体</h3><p>在需要加粗的部分<code>前后</code>各添加<code>两个</code>星号（asterisks）或下划线（underscores）</p><p>为兼容考虑，请使用星号（asterisks）</p><pre class="line-numbers language-none"><code class="language-none">**粗体**<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>粗体</strong></p><h3 id="斜体"><a href="#斜体" class="headerlink" title="斜体"></a>斜体</h3><p>在需要斜体的部分<code>前后</code>各添加<code>一个</code>星号（asterisks）或下划线（underscores）</p><p>为兼容考虑，请使用星号（asterisks）</p><pre class="line-numbers language-none"><code class="language-none">*斜体*<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><em>斜体</em></p><h3 id="斜体加粗"><a href="#斜体加粗" class="headerlink" title="斜体加粗"></a>斜体加粗</h3><p>在需要加粗的部分<code>前后</code>各添加<code>三个</code>星号（asterisks）或下划线（underscores）</p><p>为兼容考虑，请使用星号（asterisks）</p><pre class="line-numbers language-none"><code class="language-none">***斜体加粗***<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong><em>斜体加粗</em></strong></p><h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p>要创建块引用，请在段落前添加一个 <code>&gt;</code> 符号</p><pre class="line-numbers language-none"><code class="language-none">&gt; 块引用<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>块引用</p></blockquote><h3 id="嵌套块引用"><a href="#嵌套块引用" class="headerlink" title="嵌套块引用"></a>嵌套块引用</h3><pre class="line-numbers language-none"><code class="language-none">&gt; 块引用&gt; 块引用<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>块引用</p><blockquote><p>块引用</p></blockquote></blockquote><h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><h3 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h3><p>在行头添加一个数字和一个英文句点，然后空格。数字不必按数学顺序排列，但是列表应当以数字 1 起始</p><ol><li>第一</li><li>第二</li><li>第三</li></ol><h3 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h3><p>添加破折号 (-)、星号 (*) 或加号 (+) ，然后空格</p><ul><li>一花</li><li>二乃</li><li>三玖</li><li>四叶</li><li>五月</li></ul><h3 id="嵌套列表"><a href="#嵌套列表" class="headerlink" title="嵌套列表"></a>嵌套列表</h3><p>在列表项之下，输入<code>数字 英文句点</code> 或 <code>-</code> 、 <code>+</code> 、 <code>-</code>，然后输入 Tab 键缩进</p><pre class="line-numbers language-none"><code class="language-none">1. 五等分的花嫁- 一花- 二乃- 五等分的花嫁1. 三玖2. 四叶3. 五月<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li>五等分的花嫁<ul><li>一花<ul><li>(～￣▽￣)～</li></ul></li><li>二乃</li></ul></li></ol><ul><li>五等分的花嫁 <ol><li>三玖 <ul><li>&#96;(<em>&gt;﹏&lt;</em>)′</li></ul></li><li>四叶</li><li>五月</li></ol></li></ul><h2 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h2><h3 id="单行"><a href="#单行" class="headerlink" title="单行"></a>单行</h3><p>将单行代码放入两个反引号&#96;&#96;中</p><pre class="line-numbers language-none"><code class="language-none">&#96;print(&quot;Hello World!&quot;)&#96;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>print(&quot;Hello World!&quot;)</code></p><h3 id="多行"><a href="#多行" class="headerlink" title="多行"></a>多行</h3><p>代码块之前和之后的行上使用三个反引号**&#96;&#96;&#96;**或三个波浪号~ ~ ~,然后在后面跟上代码语言</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Hello World!"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="math公式"><a href="#math公式" class="headerlink" title="math公式"></a>math公式</h2><h3 id="行内公式"><a href="#行内公式" class="headerlink" title="行内公式"></a>行内公式</h3><p>在<code>$ $</code>之中填写公式</p><pre class="line-numbers language-wolfram" data-language="wolfram"><code class="language-wolfram">$<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>$<span class="token global-variable variable">$e</span><span class="token operator">^</span><span class="token punctuation">&#123;</span>x<span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">&#125;</span>\neq<span class="token punctuation">&#123;</span>e<span class="token operator">^</span>x<span class="token punctuation">&#125;</span><span class="token operator">^</span><span class="token number">2</span>$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>$e^{x^2}\neq{e^x}^2$</p><h3 id="块公式"><a href="#块公式" class="headerlink" title="块公式"></a>块公式</h3><p>在<code>$$ $$</code>中填写公式</p><pre class="line-numbers language-wolfram" data-language="wolfram"><code class="language-wolfram">$$<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>$$$<span class="token global-variable variable">$e</span><span class="token operator">^</span><span class="token punctuation">&#123;</span>x<span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">&#125;</span>\neq<span class="token punctuation">&#123;</span>e<span class="token operator">^</span>x<span class="token punctuation">&#125;</span><span class="token operator">^</span><span class="token number">2</span>$$$<span class="token global-variable variable">$H</span><span class="token punctuation">(</span>D_2<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token punctuation">(</span>\frac<span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">&#125;</span>\ log_2 \frac<span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">&#125;</span> <span class="token operator">+</span> \frac<span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">&#125;</span>\ log_2 \frac<span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span>$$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>$$e^{x^2}\neq{e^x}^2$$<br>$$H(D_2) &#x3D; -(\frac{2}{4}\ log_2 \frac{2}{4} + \frac{2}{4}\ log_2 \frac{2}{4}) &#x3D; 1$$</p><h3 id="矩阵"><a href="#矩阵" class="headerlink" title="矩阵"></a>矩阵</h3><pre class="line-numbers language-wolfram" data-language="wolfram"><code class="language-wolfram">$$\begin<span class="token punctuation">&#123;</span>pmatrix<span class="token punctuation">&#125;</span>        <span class="token number">1</span> <span class="token operator">&amp;</span> a_1 <span class="token operator">&amp;</span> a_1<span class="token operator">^</span><span class="token number">2</span> <span class="token operator">&amp;</span> \cdots <span class="token operator">&amp;</span> a_1<span class="token operator">^</span>n \\        <span class="token number">1</span> <span class="token operator">&amp;</span> a_2 <span class="token operator">&amp;</span> a_2<span class="token operator">^</span><span class="token number">2</span> <span class="token operator">&amp;</span> \cdots <span class="token operator">&amp;</span> a_2<span class="token operator">^</span>n \\        \vdots <span class="token operator">&amp;</span> \vdots <span class="token operator">&amp;</span> \vdots <span class="token operator">&amp;</span> \ddots <span class="token operator">&amp;</span> \vdots \\        <span class="token number">1</span> <span class="token operator">&amp;</span> a_m <span class="token operator">&amp;</span> a_m<span class="token operator">^</span><span class="token number">2</span> <span class="token operator">&amp;</span> \cdots <span class="token operator">&amp;</span> a_m<span class="token operator">^</span>n \\        \end<span class="token punctuation">&#123;</span>pmatrix<span class="token punctuation">&#125;</span>$$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>$$<br>\begin{pmatrix}<br>    1 &amp; a_1 &amp; a_1^2 &amp; \cdots &amp; a_1^n \<br>    1 &amp; a_2 &amp; a_2^2 &amp; \cdots &amp; a_2^n \<br>    \vdots &amp; \vdots &amp; \vdots &amp; \ddots &amp; \vdots \<br>    1 &amp; a_m &amp; a_m^2 &amp; \cdots &amp; a_m^n \<br>    \end{pmatrix}<br>$$</p><h3 id="行列式"><a href="#行列式" class="headerlink" title="行列式"></a>行列式</h3><pre class="line-numbers language-wolfram" data-language="wolfram"><code class="language-wolfram">$$\mathbf<span class="token punctuation">&#123;</span>V<span class="token punctuation">&#125;</span>_1 \times \mathbf<span class="token punctuation">&#123;</span>V<span class="token punctuation">&#125;</span>_2 <span class="token operator">=</span>  \begin<span class="token punctuation">&#123;</span>vmatrix<span class="token punctuation">&#125;</span>\mathbf<span class="token punctuation">&#123;</span>i<span class="token punctuation">&#125;</span> <span class="token operator">&amp;</span> \mathbf<span class="token punctuation">&#123;</span>j<span class="token punctuation">&#125;</span> <span class="token operator">&amp;</span> \mathbf<span class="token punctuation">&#123;</span>k<span class="token punctuation">&#125;</span> \\\frac<span class="token punctuation">&#123;</span>\partial X<span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span>\partial u<span class="token punctuation">&#125;</span> <span class="token operator">&amp;</span>  \frac<span class="token punctuation">&#123;</span>\partial Y<span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span>\partial u<span class="token punctuation">&#125;</span> <span class="token operator">&amp;</span> <span class="token number">0</span> \\\frac<span class="token punctuation">&#123;</span>\partial X<span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span>\partial v<span class="token punctuation">&#125;</span> <span class="token operator">&amp;</span>  \frac<span class="token punctuation">&#123;</span>\partial Y<span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span>\partial v<span class="token punctuation">&#125;</span> <span class="token operator">&amp;</span> <span class="token number">0</span> \\\end<span class="token punctuation">&#123;</span>vmatrix<span class="token punctuation">&#125;</span>$$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>$$<br>\mathbf{V}_1 \times \mathbf{V}_2 &#x3D; \begin{vmatrix}<br>\mathbf{i} &amp; \mathbf{j} &amp; \mathbf{k} \<br>\frac{\partial X}{\partial u} &amp; \frac{\partial Y}{\partial u} &amp; 0 \<br>\frac{\partial X}{\partial v} &amp; \frac{\partial Y}{\partial v} &amp; 0 \<br>\end{vmatrix}<br>$$</p><h2 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h2><p>在单独一行上使用三个或多个星号 (<code>***</code>)、破折号 (<code>---</code>) 或下划线 (<code>___</code>) ，然后回车</p><p>为了兼容性，请在分隔线的前后均添加空白行</p><pre class="line-numbers language-none"><code class="language-none">***---___<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><hr><hr><hr><h2 id="删除线"><a href="#删除线" class="headerlink" title="删除线"></a>删除线</h2><pre class="line-numbers language-text" data-language="text"><code class="language-text">~~明天开始努力~~ 现在开始！<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><del>明天开始努力</del> 现在开始！</p><h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><p>链接名放在中括号内，链接地址放在后面的括号中，链接 title 可选</p><p>超链接语法：<code>[超链接显示名](超链接地址 &quot;超链接title&quot;)</code></p><pre class="line-numbers language-none"><code class="language-none">[loyehのblog](https:&#x2F;&#x2F;lo-y-eh.github.io)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这是 <a href="https://lo-y-eh.github.io/">loyeh の blog</a></p><h3 id="title"><a href="#title" class="headerlink" title="title"></a>title</h3><p>链接 title 是当鼠标悬停在链接上时会出现的文字，是可选的，它放在圆括号中链接地址后面，跟链接地址之间以空格分隔</p><pre class="line-numbers language-text" data-language="text"><code class="language-text">[Markdown语法](https://markdown.com.cn)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>[markdown 官方文档](<a href="https://markdown.com.cn/">Markdown 官方教程</a> “最好的 markdown 教程”)</p><h3 id="网址和-Email-地址"><a href="#网址和-Email-地址" class="headerlink" title="网址和 Email 地址"></a>网址和 Email 地址</h3><p>使用尖括号可以很方便地把 URL 或者 email 地址变成可点击的链接</p><pre class="line-numbers language-text" data-language="text"><code class="language-text">&lt;https://markdown.com.cn>&lt;fake@example.com><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><a href="https://markdown.com.cn/">https://markdown.com.cn</a></p><p><a href="mailto:&#x66;&#97;&#107;&#101;&#x40;&#x65;&#120;&#x61;&#109;&#x70;&#108;&#101;&#46;&#99;&#x6f;&#x6d;">&#x66;&#97;&#107;&#101;&#x40;&#x65;&#120;&#x61;&#109;&#x70;&#108;&#101;&#46;&#99;&#x6f;&#x6d;</a></p><h3 id="带格式化的链接"><a href="#带格式化的链接" class="headerlink" title="带格式化的链接"></a>带格式化的链接</h3><blockquote><p>不同的 Markdown 应用程序处理 URL 中间的空格方式不一样。为了兼容，请尽量使用%20 代替空格</p></blockquote><ul><li><p>强调链接, 在链接语法前后增加星号</p><pre class="line-numbers language-none"><code class="language-none">This is the *[Markdown Guide](https:&#x2F;&#x2F;www.markdownguide.org)*.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>This is the <em><a href="https://www.markdownguide.org/">Markdown Guide</a></em></p></li><li><p>要将链接表示为代码，请在方括号中添加反引号</p><pre class="line-numbers language-none"><code class="language-none">See the section on [&#96;code&#96;](#code)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>See the section on <a href="https://markdown.com.cn/basic-syntax/links.html#code"><code>code</code></a>.</p></li></ul><h3 id="引用类型链接"><a href="#引用类型链接" class="headerlink" title="引用类型链接"></a>引用类型链接</h3><p>引用样式链接是一种特殊的链接，它使 URL 在 Markdown 中更易于显示和阅读</p><p>参考样式链接分为两部分：与文本保持内联的部分以及存储在文件中其他位置的部分，以使文本易于阅读</p><h4 id="链接的第一部分格式"><a href="#链接的第一部分格式" class="headerlink" title="链接的第一部分格式"></a>链接的第一部分格式</h4><p>引用类型的链接的第一部分使用两组括号进行格式设置。第一组方括号包围应显示为链接的文本。第二组括号显示了一个标签，该标签用于指向您存储在文档其他位置的链接。</p><p>尽管不是必需的，可以在第一组和第二组括号之间包含一个空格。第二组括号中的标签不区分大小写，可以包含字母，数字，空格或标点符号。</p><p>以下示例格式对于链接的第一部分效果相同：</p><ul><li><code>[hobbit-hole][1]</code></li><li><code>[hobbit-hole] [1]</code></li></ul><h4 id="链接的第二部分格式"><a href="#链接的第二部分格式" class="headerlink" title="链接的第二部分格式"></a>链接的第二部分格式</h4><p>引用类型链接的第二部分使用以下属性设置格式：</p><ol><li>放在括号中的标签，其后紧跟一个冒号和至少一个空格（例如<code>[label]:</code>）。</li><li>链接的 URL，可以选择将其括在尖括号中。</li><li>链接的可选标题，可以将其括在双引号，单引号或括号中。</li></ol><p>以下示例格式对于链接的第二部分效果相同：</p><ul><li><code>[1]: https://en.wikipedia.org/wiki/Hobbit#Lifestyle</code></li><li><code>[1]: https://en.wikipedia.org/wiki/Hobbit#Lifestyle &quot;Hobbit lifestyles&quot;</code></li><li><code>[1]: https://en.wikipedia.org/wiki/Hobbit#Lifestyle &#39;Hobbit lifestyles&#39;</code></li><li><code>[1]: https://en.wikipedia.org/wiki/Hobbit#Lifestyle (Hobbit lifestyles)</code></li><li><code>[1]: &lt;https://en.wikipedia.org/wiki/Hobbit#Lifestyle&gt; &quot;Hobbit lifestyles&quot;</code></li><li><code>[1]: &lt;https://en.wikipedia.org/wiki/Hobbit#Lifestyle&gt; &#39;Hobbit lifestyles&#39;</code></li><li><code>[1]: &lt;https://en.wikipedia.org/wiki/Hobbit#Lifestyle&gt; (Hobbit lifestyles)</code></li></ul><p>可以将链接的第二部分放在 Markdown 文档中的任何位置。有些人将它们放在出现的段落之后，有些人则将它们放在文档的末尾（例如尾注或脚注）</p><h2 id="页面内跳转"><a href="#页面内跳转" class="headerlink" title="页面内跳转"></a>页面内跳转</h2><ol><li><p>跳转到标题：格式<code>[自定义名称](#id)</code>，比如跳转到上面的<code>标题</code>，则使用<code>[跳转到标题](#标题)</code>，<a href="#%E6%A0%87%E9%A2%98">跳转到标题</a></p></li><li><p>自由跳转：上述跳转有很大的局限性，如果想跳转到一个不是标题的位置（比如下面的竹子图片），则需要使用HTML语法在该位置附近自定义一个<code>锚</code>，实现自由跳转。<br>在图片的附近添加一个<code>锚点</code></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>锚点<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后通过以下语句实现跳转</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">[页内自由跳转](#示例图)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><a href="#%E7%AB%B9%E5%AD%90">跳转到竹子</a></p></li></ol><h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><p>要添加图像，请使用感叹号 (<code>!</code>)，然后在方括号增加替代文本，图片链接放在圆括号里，括号里的链接后可以增加一个可选的图片标题文本。</p><p>插入图片 Markdown 语法代码：<code>![图片alt](图片链接 &quot;图片title&quot;)</code>。</p><p>对应的 HTML 代码：<code>&lt;img src=&quot;图片链接&quot; alt=&quot;图片alt&quot; title=&quot;图片title&quot;&gt;</code></p><pre class="line-numbers language-text" data-language="text"><code class="language-text">![这是图片](https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402042011206.webp "Magic Gardens")<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402042011206.jpg" alt="这是图片"></p><h3 id="链接图片"><a href="#链接图片" class="headerlink" title="链接图片"></a>链接图片</h3><p>给图片增加链接，请将图像的 Markdown 括在方括号中，然后将链接添加在圆括号中。<span id="竹子"></span></p><pre class="line-numbers language-text" data-language="text"><code class="language-text">[![竹子图片](/assets/img/bamboo.jpg "bamboo")](https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202310012338379.webp)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/Lo-Y-eH/image@main/image/202402042008019.webp" alt="竹子" title="Bamboo"></p><h2 id="转义字符"><a href="#转义字符" class="headerlink" title="转义字符"></a>转义字符</h2><p>以下字符都可以通过反斜杠字符达到转义目的</p><table><thead><tr><th align="center">character</th></tr></thead><tbody><tr><td align="center">\</td></tr><tr><td align="center">&#96;</td></tr><tr><td align="center">**</td></tr><tr><td align="center">_</td></tr><tr><td align="center">{}</td></tr><tr><td align="center">[]</td></tr><tr><td align="center">()</td></tr><tr><td align="center">#</td></tr><tr><td align="center">+</td></tr><tr><td align="center">-</td></tr><tr><td align="center">.</td></tr><tr><td align="center">!</td></tr><tr><td align="center">|</td></tr></tbody></table><h2 id="内嵌-HTML-标签"><a href="#内嵌-HTML-标签" class="headerlink" title="内嵌 HTML 标签"></a>内嵌 HTML 标签</h2><p>对于 Markdown 涵盖范围之外的标签，都可以直接在文件里面用 HTML 本身。如需使用 HTML，不需要额外标注这是 HTML 或是 Markdown，只需 HTML 标签添加到 Markdown 文本中即可。</p><h3 id="行级內联标签"><a href="#行级內联标签" class="headerlink" title="行级內联标签"></a>行级內联标签</h3><p>HTML 的行级內联标签如 <code>&lt;span&gt;</code>、<code>&lt;cite&gt;</code>、<code>&lt;del&gt;</code> 不受限制，可以在 Markdown 的段落、列表或是标题里任意使用。依照个人习惯，甚至可以不用 Markdown 格式，而采用 HTML 标签来格式化。例如：如果比较喜欢 HTML 的 <code>&lt;a&gt;</code> 或 <code>&lt;img&gt;</code> 标签，可以直接使用这些标签，而不用 Markdown 提供的链接或是图片语法。当你需要更改元素的属性时（例如为文本指定颜色或更改图像的宽度），使用 HTML 标签更方便些。</p><p>HTML 行级內联标签和区块标签不同，在內联标签的范围内， Markdown 的语法是可以解析的。</p><pre class="line-numbers language-text" data-language="text"><code class="language-text">This **word** is bold. This &lt;em>word&lt;/em> is italic.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>渲染效果如下:</p><p>This <strong>word</strong> is bold. This <em>word</em> is italic.</p><h3 id="区块标签"><a href="#区块标签" class="headerlink" title="区块标签"></a>区块标签</h3><p>区块元素 ── 比如 <code>&lt;div&gt;</code>、<code>&lt;table&gt;</code>、<code>&lt;pre&gt;</code>、<code>&lt;p&gt;</code> 等标签，必须在前后加上空行，以便于内容区分。而且这些元素的开始与结尾标签，不可以用 tab 或是空白来缩进。Markdown 会自动识别这区块元素，避免在区块标签前后加上没有必要的 <code>&lt;p&gt;</code> 标签。</p><p>例如，在 Markdown 文件里加上一段 HTML 表格：</p><pre class="line-numbers language-none"><code class="language-none">This is a regular paragraph.&lt;table&gt;    &lt;tr&gt;        &lt;td&gt;Foo&lt;&#x2F;td&gt;    &lt;&#x2F;tr&gt;&lt;&#x2F;table&gt;This is another regular paragraph.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>This is a regular paragraph.</p><table>    <tr>        <td>Foo</td>    </tr></table><p>This is another regular paragraph.</p><p>请注意，Markdown 语法在 HTML 区块标签中将不会被进行处理。例如，你无法在 HTML 区块内使用 Markdown 形式的<code>*强调*</code>。</p><h3 id="HTML-用法最佳实践"><a href="#HTML-用法最佳实践" class="headerlink" title="HTML 用法最佳实践"></a>HTML 用法最佳实践</h3><p>出于安全原因，并非所有 Markdown 应用程序都支持在 Markdown 文档中添加 HTML。如有疑问，请查看相应 Markdown 应用程序的手册。某些应用程序只支持 HTML 标签的子集。</p><p>对于 HTML 的块级元素 <code>&lt;div&gt;</code>、<code>&lt;table&gt;</code>、<code>&lt;pre&gt;</code> 和 <code>&lt;p&gt;</code>，请在其前后使用空行（blank lines）与其它内容进行分隔。尽量不要使用制表符（tabs）或空格（spaces）对 HTML 标签做缩进，否则将影响格式。</p><p>在 HTML 块级标签内不能使用 Markdown 语法。例如 <code>&lt;p&gt;italic and **bold**&lt;/p&gt;</code> 将不起作用。</p><h1 id="扩展语法"><a href="#扩展语法" class="headerlink" title="扩展语法"></a>扩展语法</h1><p><a href="https://markdown.com.cn/basic_syntax">基本语法</a>主要是为了应付大多数情况下的日常所需元素，但对于某些人来说还不够，这就是扩展语法的用武之地</p><h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><h3 id="可用性"><a href="#可用性" class="headerlink" title="可用性"></a>可用性</h3><p>并非所有Markdown应用程序都支持扩展语法元素。您需要检查您的应用程序所使用的轻量级标记语言是否支持您要使用的扩展语法元素。如果没有，那么仍然有可能在Markdown处理器中启用扩展。</p><h3 id="轻量标记语言"><a href="#轻量标记语言" class="headerlink" title="轻量标记语言"></a>轻量标记语言</h3><p>有几种轻量级标记语言是Markdown的超集。它们包含Gruber的基本语法，并通过添加其他元素（例如表，代码块，语法突出显示，URL自动链接和脚注）在此基础上构建。许多最受欢迎的Markdown应用程序使用以下轻量级标记语言之一：</p><ul><li><a href="https://commonmark.org/">CommonMark</a></li><li><a href="https://github.github.com/gfm/">GitHub Flavored Markdown (GFM)</a></li><li><a href="https://michelf.ca/projects/php-markdown/extra/">Markdown Extra</a></li><li><a href="https://fletcherpenney.net/multimarkdown/">MultiMarkdown</a></li><li><a href="https://rmarkdown.rstudio.com/">R Markdown</a></li></ul><h3 id="Markdown-处理器"><a href="#Markdown-处理器" class="headerlink" title="Markdown 处理器"></a>Markdown 处理器</h3><p>有许多<a href="https://github.com/markdown/markdown.github.com/wiki/Implementations">Markdown处理器</a>可用，它们中的许多允许您添加启用扩展语法元素的扩展。查看您所使用处理器的文档以获取更多信息。</p><h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><p>添加表格，使用三个或多个连字符（<code>---</code>）创建每列的标题，并使用管道（<code>|</code>）分隔每列。</p><pre class="line-numbers language-none"><code class="language-none">| Syntax      | Description || ----------- | ----------- || Header      | Title       || Paragraph   | Text        |<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th align="left">Syntax</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">Header</td><td align="left">Title</td></tr><tr><td align="left">Paragraph</td><td align="left">Text</td></tr></tbody></table><p>单元格宽度可以变化，如下所示。呈现的输出将看起来相同。</p><pre class="line-numbers language-text" data-language="text"><code class="language-text">| Syntax | Description || --- | ----------- || Header | Title || Paragraph | Text |<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th>Syntax</th><th>Description</th></tr></thead><tbody><tr><td>Header</td><td>Title</td></tr><tr><td>Paragraph</td><td>Text</td></tr></tbody></table><h3 id="对齐"><a href="#对齐" class="headerlink" title="对齐"></a>对齐</h3><p>您可以通过在标题行中的连字符的左侧，右侧或两侧添加冒号（<code>:</code>），将列中的文本对齐到左侧，右侧或中心。</p><pre class="line-numbers language-text" data-language="text"><code class="language-text">| Syntax      | Description | Test Text     || :---        |    :----:   |          ---: || Header      | Title       | Here's this   || Paragraph   | Text        | And more      |<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th align="left">Syntax</th><th align="center">Description</th><th align="right">Test Text</th></tr></thead><tbody><tr><td align="left">Header</td><td align="center">Title</td><td align="right">Here’s this</td></tr><tr><td align="left">Paragraph</td><td align="center">Text</td><td align="right">And more</td></tr></tbody></table><h3 id="表格中的文字"><a href="#表格中的文字" class="headerlink" title="表格中的文字"></a>表格中的文字</h3><p>可以在表格中设置文本格式。例如，可以添加链接，单行代码（仅反引号 &#96;&#96; ）和强调。</p><p>不能添加标题，块引用，列表，水平规则，图像或HTML标签。</p><h3 id="表中转义-“-”"><a href="#表中转义-“-”" class="headerlink" title="表中转义 “|”"></a>表中转义 “|”</h3><p>可以使用表格的HTML字符代码（<code>|</code>）在表中显示竖线（<code>|</code>）字符。</p><h2 id="脚注"><a href="#脚注" class="headerlink" title="脚注"></a>脚注</h2><p>脚注使您可以添加注释和参考，而不会使文档正文混乱。当您创建脚注时，带有脚注的上标数字会出现在您添加脚注参考的位置。读者可以单击链接以跳至页面底部的脚注内容。</p><p>要创建脚注参考，请在方括号（<code>[^1]</code>）内添加插入符号和标识符。标识符可以是数字或单词，但不能包含空格或制表符。标识符仅将脚注参考与脚注本身相关联-在输出中，脚注按顺序编号。</p><p>在括号内使用另一个插入符号和数字添加脚注，并用冒号和文本（<code>[^1]: My footnote.</code>）。您不必在文档末尾添加脚注。您可以将它们放在除列表，块引号和表之类的其他元素之外的任何位置。</p><pre class="line-numbers language-none"><code class="language-none">这是一个简单的脚注，[^1] [^1]: 这是第一个脚注这是一个更长的脚注，[^bignote][^bignote]: Here&#39;s one with multiple paragraphs and code.    Indent paragraphs to include them in the footnote.    &#96;&#123; my code &#125;&#96;    Add as many paragraphs as you like.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这是一个简单的脚注，<a href="%E8%BF%99%E6%98%AF%E7%AC%AC%E4%B8%80%E4%B8%AA%E8%84%9A%E6%B3%A8">^1</a> </p><p>这是一个更长的脚注，[^bignote]</p><p>[^bignote]: Here’s one with multiple paragraphs and code.</p><pre><code>Indent paragraphs to include them in the footnote.`&#123; my code &#125;`Add as many paragraphs as you like.</code></pre><p>脚注问题修复：[hexo<a href="https://seayj.cn/articles/33818/#shi-tian-jia-md-ding-yi-lie-biao">Matery] 玩转 Markdown | SeaYJ’s Blog</a></p><h2 id="标题ID"><a href="#标题ID" class="headerlink" title="标题ID"></a>标题ID</h2><p>许多Markdown处理器支持<code>标题</code>自定义ID，一些Markdown处理器会自动添加它们。添加自定义ID允许你直接链接到标题并使用CSS对其进行修改。要添加自定义标题ID，请在与标题相同的行上用大括号括起该自定义ID。</p><pre class="line-numbers language-text" data-language="text"><code class="language-text">### My Great Heading &#123;#custom-id&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>HTML看起来像这样：</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>My Great Heading<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="链接到标题ID"><a href="#链接到标题ID" class="headerlink" title="链接到标题ID"></a>链接到标题ID</h3><p>通过创建带有数字符号（<code>#</code>）和自定义标题ID的<a href="(/basic-syntax/links.html">标准链接</a>，可以链接到文件中具有自定义ID的标题。</p><table><thead><tr><th>Markdown</th><th>HTML</th><th>预览效果</th></tr></thead><tbody><tr><td><code>[Heading IDs](#heading-ids)</code></td><td><code>&lt;a href=&quot;#heading-ids&quot;&gt;Heading IDs&lt;/a&gt;</code></td><td><a href="https://markdown.com.cn/extended-syntax/heading-ids.html#heading-ids">Heading IDs</a></td></tr></tbody></table><p>其他网站可以通过将自定义标题ID添加到网页的完整URL</p><h2 id="任务表"><a href="#任务表" class="headerlink" title="任务表"></a>任务表</h2><p>创建任务列表，在任务列表项之前添加破折号<code>-</code>和方括号<code>[ ]</code>，并在<code>[ ]</code>前面加上空格。要选择一个复选框，请在方括号<code>[x]</code>之间添加 x </p><pre class="line-numbers language-text" data-language="text"><code class="language-text">- [x] Write the press release- [ ] Update the website- [ ] Contact the media<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li><p><input checked="" disabled="" type="checkbox"> Write the press release</p></li><li><p><input checked="" disabled="" type="checkbox"> Update the website</p></li><li><p><input disabled="" type="checkbox"> Contact the media</p></li></ul><h2 id="Emoji"><a href="#Emoji" class="headerlink" title="Emoji"></a>Emoji</h2><p>有两种方法可以将表情符号添加到Markdown文件中：将表情符号复制并粘贴到Markdown格式的文本中，或者键入<em>emoji shortcodes</em>。</p><h3 id="复制和粘贴表情符号"><a href="#复制和粘贴表情符号" class="headerlink" title="复制和粘贴表情符号"></a>复制和粘贴表情符号</h3><p>在大多数情况下，您可以简单地从<a href="https://emojipedia.org/">Emojipedia</a> 等来源复制表情符号并将其粘贴到文档中。许多Markdown应用程序会自动以Markdown格式的文本显示表情符号。从Markdown应用程序导出的HTML和PDF文件应显示表情符号。</p><p><strong>Tip:</strong> 如果您使用的是静态网站生成器，请确保将HTML页面编码为UTF-8。.</p><p>###使用表情符号简码</p><p>一些Markdown应用程序允许您通过键入表情符号短代码来插入表情符号。这些以冒号开头和结尾，并包含表情符号的名称。</p><pre class="line-numbers language-text" data-language="text"><code class="language-text">去露营了！ :tent: 很快回来。真好笑！ :joy:<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>效果如下：</p><p>去露营了！⛺很快回来。</p><p>真好笑！😂</p><p><strong>Note:</strong> 注意：您可以使用此<a href="https://gist.github.com/rxaviers/7360908">表情符号简码列表</a>，但请记住，表情符号简码因应用程序而异。</p><p>#自动网址链接</p><p>许多Markdown处理器会自动将URL转换为链接。这意味着如果输入<a href="http://www.example.com，即使未[使用方括号](https://markdown.com.cn/basic-syntax/links.html)，也会自动将其转换为链接。">http://www.example.com，即使未[使用方括号](https://markdown.com.cn/basic-syntax/links.html)，也会自动将其转换为链接。</a></p><pre class="line-numbers language-text" data-language="text"><code class="language-text">http://www.example.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>呈现的输出如下所示：</p><p><a href="http://www.example.com/">http://www.example.com</a></p><h3 id="禁用自动URL链接"><a href="#禁用自动URL链接" class="headerlink" title="禁用自动URL链接"></a>禁用自动URL链接</h3><p>如果不希望自动链接URL，则可以使用反引号来禁止</p><pre class="line-numbers language-text" data-language="text"><code class="language-text">`http://www.example.com`<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>呈现的输出如下所示：</p><p><code>http://www.example.com</code></p><h2 id="流程图"><a href="#流程图" class="headerlink" title="流程图"></a>流程图</h2><h3 id="标准竖向"><a href="#标准竖向" class="headerlink" title="标准竖向"></a>标准竖向</h3><p>先输入**&#96;&#96;&#96;flow** 然后敲击回车，在输入栏，输入下面的语法即可。</p><pre class="line-numbers language-flow" data-language="flow"><code class="language-flow">st<span class="token operator">=></span>start<span class="token operator">:</span> Startop<span class="token operator">=></span>operation<span class="token operator">:</span> Your Operationcond<span class="token operator">=></span>condition<span class="token operator">:</span> Yes or No<span class="token operator">?</span>e<span class="token operator">=></span>endst<span class="token operator">-</span><span class="token operator">></span>op<span class="token operator">-</span><span class="token operator">></span>cond<span class="token function">cond</span><span class="token punctuation">(</span>yes<span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span>e<span class="token function">cond</span><span class="token punctuation">(</span>no<span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span>op<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="标准横向"><a href="#标准横向" class="headerlink" title="标准横向"></a>标准横向</h3><pre class="line-numbers language-flow" data-language="flow"><code class="language-flow">st<span class="token operator">=></span>start<span class="token operator">:</span> 开始框 op<span class="token operator">=></span>operation<span class="token operator">:</span> 处理框 cond<span class="token operator">=></span>condition<span class="token operator">:</span> <span class="token function">判断框</span><span class="token punctuation">(</span>是或否<span class="token operator">?</span><span class="token punctuation">)</span> sub1<span class="token operator">=></span>subroutine<span class="token operator">:</span> 子流程 io<span class="token operator">=></span>inputoutput<span class="token operator">:</span> 输入输出框 e<span class="token operator">=></span>end<span class="token operator">:</span> 结束框 <span class="token function">st</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">op</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span>cond <span class="token function">cond</span><span class="token punctuation">(</span>yes<span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">io</span><span class="token punctuation">(</span>bottom<span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span>e <span class="token function">cond</span><span class="token punctuation">(</span>no<span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">sub1</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span>op<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="竖向"><a href="#竖向" class="headerlink" title="竖向"></a>竖向</h3><p>竖向（TD 表示从上到下）</p><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">graph</span> TD<span class="token punctuation">;</span>    A<span class="token arrow operator">--></span>B<span class="token punctuation">;</span>    A<span class="token arrow operator">--></span>C<span class="token punctuation">;</span>    B<span class="token arrow operator">--></span>D<span class="token punctuation">;</span>    D<span class="token arrow operator">--></span>E<span class="token punctuation">;</span>    D<span class="token arrow operator">--></span>F<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="横向"><a href="#横向" class="headerlink" title="横向"></a>横向</h3><p>横向（LR 表示从左到右）</p><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">graph</span> LR<span class="token punctuation">;</span>A<span class="token text string">[方形]</span><span class="token arrow operator">--></span>B<span class="token text string">(圆角)</span>B<span class="token arrow operator">--></span>C<span class="token text string">&#123;条件a&#125;</span>C<span class="token arrow operator">--></span><span class="token label property">|a=1|</span>D<span class="token text string">[结果1]</span>C<span class="token arrow operator">--></span><span class="token label property">|a=2|</span>E<span class="token text string">[结果2]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="UML时序图"><a href="#UML时序图" class="headerlink" title="UML时序图"></a>UML时序图</h2><ul><li>先输入&#96;&#96;&#96;mermaid (或）sequence</li><li>-&gt;&gt; 代表实线箭头，–&gt;&gt; 则代表虚线箭头</li><li>-&gt; 直线，–&gt;虚线</li><li>使用sequenceDiagram 则不使用&#96;&#96;sequence，而是&#96;&#96;&#96;mermaid</li><li>下面的例子展现了两种风格</li></ul><h3 id="简单"><a href="#简单" class="headerlink" title="简单"></a>简单</h3><h4 id="例1"><a href="#例1" class="headerlink" title="例1"></a>例1</h4><p>sequence</p><pre class="line-numbers language-sequence" data-language="sequence"><code class="language-sequence">客户-&gt;&gt;银行柜台: 我要存钱  银行柜台-&gt;&gt;后台: 改一下这个账户数字哦  后台-&gt;&gt;银行柜台: 账户的数字改完了，明天起息  银行柜台-&gt;&gt;客户: 好了，给你回单 ，下一位<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>mermaid</p><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">sequenceDiagram</span> 客户<span class="token arrow operator">->></span>银行柜台<span class="token operator">:</span> 我要存钱  银行柜台<span class="token arrow operator">->></span>后台<span class="token operator">:</span> 改一下这个账户数字哦  后台<span class="token arrow operator">->></span>银行柜台<span class="token operator">:</span> 账户的数字改完了，明天起息  银行柜台<span class="token arrow operator">->></span>客户<span class="token operator">:</span> 好了，给你回单 ，下一位<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="例2"><a href="#例2" class="headerlink" title="例2"></a>例2</h4><p>Sequence</p><pre class="line-numbers language-sequence" data-language="sequence"><code class="language-sequence">对象A-&gt;对象B:对象B你好吗（请求）Note right of 对象B:对象B的描述（提示）Note left of 对象A:提示对象B--&gt;&gt;对象A:我很好（响应）对象A-&gt;&gt;对象B:你确定？<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>mermaid</p><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">sequenceDiagram</span>对象A<span class="token arrow operator">-></span>对象B<span class="token operator">:</span>对象B你好吗（请求）<span class="token keyword">Note right of</span> 对象B<span class="token operator">:</span>对象B的描述（提示）<span class="token keyword">Note left of</span> 对象A<span class="token operator">:</span>提示对象B<span class="token arrow operator">-->></span>对象A<span class="token operator">:</span>我很好（响应）对象A<span class="token arrow operator">->></span>对象B<span class="token operator">:</span>你确定？<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="复杂"><a href="#复杂" class="headerlink" title="复杂"></a>复杂</h3><h4 id="例1-1"><a href="#例1-1" class="headerlink" title="例1"></a>例1</h4><p>Sequence</p><pre class="line-numbers language-sequence" data-language="sequence"><code class="language-sequence">title:标题：复杂使用对象A-&gt;&gt;对象B:对象B你好吗（请求）Note right of 对象B:对象B的描述（提示）Note left of 对象A:提示对象B--&gt;&gt;对象A:我很好（响应）对象B-&gt;&gt;对象C:你好吗？对象C--&gt;&gt;对象A: B找我了对象A-&gt;&gt;对象B:你确定？note over 对象C,对象B:朋友participant Dnote right of D:没人陪我<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>mermaid</p><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">sequenceDiagram</span>title<span class="token operator">:</span>标题：复杂使用对象A<span class="token arrow operator">->></span>对象B<span class="token operator">:</span>对象B你好吗（请求）<span class="token keyword">Note right of</span> 对象B<span class="token operator">:</span>对象B的描述（提示）<span class="token keyword">Note left of</span> 对象A<span class="token operator">:</span>提示对象B<span class="token arrow operator">-->></span>对象A<span class="token operator">:</span>我很好（响应）对象B<span class="token arrow operator">->></span>对象C<span class="token operator">:</span>你好吗？对象C<span class="token arrow operator">-->></span>对象A<span class="token operator">:</span> B找我了对象A<span class="token arrow operator">->></span>对象B<span class="token operator">:</span>你确定？<span class="token keyword">note over</span> 对象C,对象B<span class="token operator">:</span>朋友<span class="token keyword">participant</span> D<span class="token keyword">note right of</span> D<span class="token operator">:</span>没人陪我<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="例2-1"><a href="#例2-1" class="headerlink" title="例2"></a>例2</h4><pre class="line-numbers language-sequence" data-language="sequence"><code class="language-sequence">       participant Aparticipant Bparticipant CA-&gt;&gt;C:helloloop healthC-&gt;&gt;C:no endNote right of C:you should eat&lt;br&#x2F;&gt; doctorB--&gt;&gt;A:niceC-&gt;&gt;B:how are you?B--&gt;&gt;C:great<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-mermaid" data-language="mermaid"><code class="language-mermaid"><span class="token keyword">sequenceDiagram</span><span class="token keyword">participant</span> A<span class="token keyword">participant</span> B<span class="token keyword">participant</span> CA<span class="token arrow operator">->></span>C<span class="token operator">:</span>hello<span class="token keyword">loop</span> healthC<span class="token arrow operator">->></span>C<span class="token operator">:</span>no <span class="token keyword">end</span><span class="token keyword">Note right of</span> C<span class="token operator">:</span>you should eat&lt;br/> doctorB<span class="token arrow operator">-->></span>A<span class="token operator">:</span>niceC<span class="token arrow operator">->></span>B<span class="token operator">:</span>how are you?B<span class="token arrow operator">-->></span>C<span class="token operator">:</span>great<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://blog.csdn.net/qq_36075612/article/details/118161100">使用Typora画 流程图、时序图、顺序图、甘特图、等图详解_typora流程图-CSDN博客</a></p><p><a href="https://shoucangjia.app.yinxiang.com/collectors/details/5a233d79-3d16-4904-8510-8da2474bb45b">剪藏 | 随时随地，随心收藏 (yinxiang.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> markdown </tag>
            
            <tag> typora </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/posts/3eeb.html"/>
      <url>/posts/3eeb.html</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
